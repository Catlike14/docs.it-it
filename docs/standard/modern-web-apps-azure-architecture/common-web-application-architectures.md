---
title: Architetture di applicazioni web comuni
description: Architettura di moderne applicazioni web con ASP.NET Core e Microsoft Azure | architetture di applicazioni web comuni
author: ardalis
ms.author: wiwagn
ms.date: 10/06/2017
ms.prod: .net-core
ms.technology: dotnet-docker
ms.openlocfilehash: b6236cfab290211f930d6a1987075abeade4fd6d
ms.sourcegitcommit: 4f3fef493080a43e70e951223894768d36ce430a
ms.translationtype: HT
ms.contentlocale: it-IT
ms.lasthandoff: 11/21/2017
---
#<a name="common-web-application-architectures"></a><span data-ttu-id="49461-103">Architetture di applicazioni Web comuni</span><span class="sxs-lookup"><span data-stu-id="49461-103">Common Web Application Architectures</span></span>

> <span data-ttu-id="49461-104">"Se si ritiene che l'architettura ottimale è costoso, provare a architettura non valido."</span><span class="sxs-lookup"><span data-stu-id="49461-104">"If you think good architecture is expensive, try bad architecture."</span></span>  
> <span data-ttu-id="49461-105">_-Piè di pagina Brian e Yoder massimo_</span><span class="sxs-lookup"><span data-stu-id="49461-105">_- Brian Foote and Joseph Yoder_</span></span>

## <a name="summary"></a><span data-ttu-id="49461-106">Riepilogo</span><span class="sxs-lookup"><span data-stu-id="49461-106">Summary</span></span>

<span data-ttu-id="49461-107">Applicazioni .NET più tradizionali vengono distribuite come singola unità di misura corrispondente a un file eseguibile o una singola applicazione web in esecuzione all'interno di un singolo dominio di applicazione IIS.</span><span class="sxs-lookup"><span data-stu-id="49461-107">Most traditional .NET applications are deployed as single units corresponding to an executable or a single web application running within a single IIS appdomain.</span></span> <span data-ttu-id="49461-108">Questo è il modello di distribuzione più semplice e ha molte applicazioni interne e pubbliche più piccolo molto bene.</span><span class="sxs-lookup"><span data-stu-id="49461-108">This is the simplest deployment model and serves many internal and smaller public applications very well.</span></span> <span data-ttu-id="49461-109">Tuttavia, più applicazioni di business non semplice anche se questa singola unità di distribuzione, trarre vantaggio da una separazione logica in livelli diversi.</span><span class="sxs-lookup"><span data-stu-id="49461-109">However, even given this single unit of deployment, most non-trivial business applications benefit from some logical separation into several layers.</span></span>

## <a name="what-is-a-monolithic-application"></a><span data-ttu-id="49461-110">Che cos'è un'applicazione monolitica?</span><span class="sxs-lookup"><span data-stu-id="49461-110">What is a monolithic application?</span></span>

<span data-ttu-id="49461-111">Un'applicazione monolitica è quello che è completamente indipendente, in termini di comportamento.</span><span class="sxs-lookup"><span data-stu-id="49461-111">A monolithic application is one that is entirely self-contained, in terms of its behavior.</span></span> <span data-ttu-id="49461-112">Può interagire con altri servizi o archivi dati nel corso dell'esecuzione delle operazioni, ma il nucleo del comportamento viene eseguito all'interno di un proprio processo e l'intera applicazione viene in genere distribuito come una singola unità.</span><span class="sxs-lookup"><span data-stu-id="49461-112">It may interact with other services or data stores in the course of performing its operations, but the core of its behavior runs within its own process and the entire application is typically deployed as a single unit.</span></span> <span data-ttu-id="49461-113">Se un'applicazione deve ridimensionare in senso orizzontale, in genere l'intera applicazione è duplicato in più server o macchine virtuali.</span><span class="sxs-lookup"><span data-stu-id="49461-113">If such an application needs to scale horizontally, typically the entire application is duplicated across multiple servers or virtual machines.</span></span>

## <a name="all-in-one-applications"></a><span data-ttu-id="49461-114">Applicazioni all-in-One</span><span class="sxs-lookup"><span data-stu-id="49461-114">All-in-One applications</span></span>

<span data-ttu-id="49461-115">Il minor numero possibile di progetti per un'architettura dell'applicazione è uno.</span><span class="sxs-lookup"><span data-stu-id="49461-115">The smallest possible number of projects for an application architecture is one.</span></span> <span data-ttu-id="49461-116">In questa architettura, l'intera logica dell'applicazione è contenuta in un unico progetto compilata in un singolo assembly e distribuita come una singola unità.</span><span class="sxs-lookup"><span data-stu-id="49461-116">In this architecture, the entire logic of the application is contained in a single project, compiled to a single assembly, and deployed as a single unit.</span></span>

<span data-ttu-id="49461-117">Un nuovo progetto ASP.NET Core, se create in Visual Studio o dalla riga di comando, inizia come un semplice monolito "all-in-one".</span><span class="sxs-lookup"><span data-stu-id="49461-117">A new ASP.NET Core project, whether created in Visual Studio or from the command line, starts out as a simple "all-in-one" monolith.</span></span> <span data-ttu-id="49461-118">Contiene tutti i comportamenti dell'applicazione, inclusi la logica di accesso di presentazione, business e dati.</span><span class="sxs-lookup"><span data-stu-id="49461-118">It contains all of the behavior of the application, including presentation, business, and data access logic.</span></span> <span data-ttu-id="49461-119">Figura 5-1 mostra la struttura di file di una singolo progetto di app.</span><span class="sxs-lookup"><span data-stu-id="49461-119">Figure 5-1 shows the file structure of a single-project app.</span></span>

<span data-ttu-id="49461-120">**Figura 5-1.**</span><span class="sxs-lookup"><span data-stu-id="49461-120">**Figure 5-1.**</span></span> <span data-ttu-id="49461-121">Un singolo progetto app di ASP.NET Core</span><span class="sxs-lookup"><span data-stu-id="49461-121">A single project ASP.NET Core app</span></span>

![](./media/image5-1.png)

<span data-ttu-id="49461-122">In uno scenario singolo progetto, la separazione dei compiti viene ottenuta tramite l'utilizzo di cartelle.</span><span class="sxs-lookup"><span data-stu-id="49461-122">In a single project scenario, separation of concerns is achieved through the use of folders.</span></span> <span data-ttu-id="49461-123">Il modello predefinito include cartelle separate per le responsabilità di modello MVC di modelli, visualizzazioni e controller, nonché cartelle aggiuntive per i dati e servizi.</span><span class="sxs-lookup"><span data-stu-id="49461-123">The default template includes separate folders for MVC pattern responsibilities of Models, Views, and Controllers, as well as additional folders for Data and Services.</span></span> <span data-ttu-id="49461-124">In questo caso, i dettagli di presentazione devono essere limitati il più possibile alla cartella viste e i dettagli di implementazione di accesso ai dati devono essere limitati a classi mantenute nella cartella dei dati.</span><span class="sxs-lookup"><span data-stu-id="49461-124">In this arrangement, presentation details should be limited as much as possible to the Views folder, and data access implementation details should be limited to classes kept in the Data folder.</span></span> <span data-ttu-id="49461-125">Logica di business deve trovarsi in servizi e le classi all'interno della cartella di modelli.</span><span class="sxs-lookup"><span data-stu-id="49461-125">Business logic should reside in services and classes within the Models folder.</span></span>

<span data-ttu-id="49461-126">Sebbene semplice, la soluzione di progetto singolo monolitica presenta alcuni svantaggi.</span><span class="sxs-lookup"><span data-stu-id="49461-126">Although simple, the single-project monolithic solution has some disadvantages.</span></span> <span data-ttu-id="49461-127">Man mano che aumenta le dimensioni e la complessità del progetto, il numero di file e cartelle continuerà ad aumentare anche.</span><span class="sxs-lookup"><span data-stu-id="49461-127">As the project's size and complexity grows, the number of files and folders will continue to grow as well.</span></span> <span data-ttu-id="49461-128">Problemi dell'interfaccia utente (modelli, visualizzazioni, controller) si trovano in più cartelle, non vengono raggruppate in ordine alfabetico.</span><span class="sxs-lookup"><span data-stu-id="49461-128">UI concerns (models, views, controllers) reside in multiple folders, which are not grouped together alphabetically.</span></span> <span data-ttu-id="49461-129">Questo problema Ottiene peggiore solo quando vengono aggiunti altri costrutti di livello di interfaccia utente, ad esempio filtri o ModelBinders, nelle rispettive cartelle.</span><span class="sxs-lookup"><span data-stu-id="49461-129">This issue only gets worse when additional UI-level constructs, such as Filters or ModelBinders, are added in their own folders.</span></span> <span data-ttu-id="49461-130">Logica di business è sparse tra le cartelle di modelli e i servizi e sarà presente alcuna indicazione chiara dei quali classi cartelle in cui devono dipendere che altri utenti.</span><span class="sxs-lookup"><span data-stu-id="49461-130">Business logic is scattered between the Models and Services folders, and there is no clear indication of which classes in which folders should depend on which others.</span></span> <span data-ttu-id="49461-131">La mancanza dell'organizzazione a livello di progetto in modo frequente [assai complicato](http://deviq.com/spaghetti-code/).</span><span class="sxs-lookup"><span data-stu-id="49461-131">This lack of organization at the project level frequently leads to [spaghetti code](http://deviq.com/spaghetti-code/).</span></span>

<span data-ttu-id="49461-132">Per risolvere questi problemi, le applicazioni si trasformano spesso nelle soluzioni multiprogetto, in cui ogni progetto viene considerato a risiedere in un particolare *livello* dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="49461-132">In order to address these issues, applications often evolve into multi-project solutions, where each project is considered to reside in a particular *layer* of the application.</span></span>

## <a name="what-are-layers"></a><span data-ttu-id="49461-133">Quali sono i livelli?</span><span class="sxs-lookup"><span data-stu-id="49461-133">What are layers?</span></span>

<span data-ttu-id="49461-134">Come applicazioni aumentano della complessità, è possibile gestire la complessità è suddividere l'applicazione in base al relativo responsabilità o problemi.</span><span class="sxs-lookup"><span data-stu-id="49461-134">As applications grow in complexity, one way to manage that complexity is to break the application up according to its responsibilities or concerns.</span></span> <span data-ttu-id="49461-135">In questo segue la separazione del principio di problemi e consente di mantenere una codebase crescente organizzata in modo che gli sviluppatori in cui viene implementato determinate funzionalità possono trovare con facilità.</span><span class="sxs-lookup"><span data-stu-id="49461-135">This follows the separation of concerns principle, and can help keep a growing codebase organized so that developers can easily find where certain functionality is implemented.</span></span> <span data-ttu-id="49461-136">Architettura a più livelli offre una serie di vantaggi oltre appena organizzazione di codice, tuttavia.</span><span class="sxs-lookup"><span data-stu-id="49461-136">Layered architecture offers a number of advantages beyond just code organization, though.</span></span>

<span data-ttu-id="49461-137">Organizzando codice in livelli, la funzionalità di basso livello comune può essere riutilizzata in tutta l'applicazione.</span><span class="sxs-lookup"><span data-stu-id="49461-137">By organizing code into layers, common low-level functionality can be reused throughout the application.</span></span> <span data-ttu-id="49461-138">In questo modo è utile poiché significa che deve essere scritto meno codice e può consentire l'applicazione di una singola implementazione, attenendosi al principio secco standardizzare.</span><span class="sxs-lookup"><span data-stu-id="49461-138">This reuse is beneficial because it means less code needs to be written and because it can allow the application to standardize on a single implementation, following the DRY principle.</span></span>

<span data-ttu-id="49461-139">Con un'architettura a più livelli, le applicazioni possono imporre restrizioni in cui i livelli possono comunicare con altri livelli.</span><span class="sxs-lookup"><span data-stu-id="49461-139">With a layered architecture, applications can enforce restrictions on which layers can communicate with other layers.</span></span> <span data-ttu-id="49461-140">Ciò consente di ottenere l'incapsulamento.</span><span class="sxs-lookup"><span data-stu-id="49461-140">This helps to achieve encapsulation.</span></span> <span data-ttu-id="49461-141">Quando un livello viene modificato o sostituito, dovrebbero essere interessati solo i livelli che funzionano con esso.</span><span class="sxs-lookup"><span data-stu-id="49461-141">When a layer is changed or replaced, only those layers that work with it should be impacted.</span></span> <span data-ttu-id="49461-142">Limitando che dipendono dal livelli in cui gli altri livelli, l'impatto delle modifiche possono essere ridotti in modo che una singola modifica non influisce sull'intera applicazione.</span><span class="sxs-lookup"><span data-stu-id="49461-142">By limiting which layers depend on which other layers, the impact of changes can be mitigated so that a single change doesn't impact the entire application.</span></span>

<span data-ttu-id="49461-143">Livelli (e l'incapsulamento) rendono molto più semplice sostituire la funzionalità all'interno dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="49461-143">Layers (and encapsulation) make it much easier to replace functionality within the application.</span></span> <span data-ttu-id="49461-144">Ad esempio, un'applicazione utilizzi inizialmente il proprio database di SQL Server per la persistenza, ma in seguito possibile scegliere di usare una strategia di persistenza basato su cloud, o uno dietro un'API web.</span><span class="sxs-lookup"><span data-stu-id="49461-144">For example, an application might initially use its own SQL Server database for persistence, but later could choose to use a cloud-based persistence strategy, or one behind a web API.</span></span> <span data-ttu-id="49461-145">Se l'applicazione è incapsulato correttamente l'implementazione di persistenza all'interno di un livello logico, tale livello specifico di SQL Server potrebbe essere sostituita con una nuova implementazione dell'interfaccia pubblica stesso.</span><span class="sxs-lookup"><span data-stu-id="49461-145">If the application has properly encapsulated its persistence implementation within a logical layer, that SQL Server specific layer could be replaced by a new one implementing the same public interface.</span></span>

<span data-ttu-id="49461-146">Oltre a potenziale di swapping implementazioni in risposta alle modifiche future nei requisiti, livelli dell'applicazione possono rendere più semplice eseguire lo swapping su implementazioni a scopo di test.</span><span class="sxs-lookup"><span data-stu-id="49461-146">In addition to the potential of swapping out implementations in response to future changes in requirements, application layers can also make it easier to swap out implementations for testing purposes.</span></span> <span data-ttu-id="49461-147">Anziché scrivere test che operano con il livello di dati reali o dell'interfaccia utente dell'applicazione, questi livelli possono essere sostituiti in fase di test con implementazioni false che forniscono noti le risposte alle richieste.</span><span class="sxs-lookup"><span data-stu-id="49461-147">Instead of having to write tests that operate against the real data layer or UI layer of the application, these layers can be replaced at test time with fake implementations that provide known responses to requests.</span></span> <span data-ttu-id="49461-148">In genere i test in questo modo molto più veloce e più semplici da scrivere rispetto all'esecuzione di esecuzione test nuovamente infrastruttura reale dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="49461-148">This typically makes tests much easier to write and much faster to run when compared to running tests again the application's real infrastructure.</span></span>

<span data-ttu-id="49461-149">Disposizione logica è una tecnica comune per migliorare l'organizzazione del codice nelle applicazioni software aziendali e sono disponibili diversi modi in cui codice può essere organizzato in livelli.</span><span class="sxs-lookup"><span data-stu-id="49461-149">Logical layering is a common technique for improving the organization of code in enterprise software applications, and there are several ways in which code can be organized into layers.</span></span>

> [!NOTE]
> <span data-ttu-id="49461-150">*Livelli* rappresentano la separazione logica all'interno dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="49461-150">*Layers* represent logical separation within the application.</span></span> <span data-ttu-id="49461-151">Nel caso in cui la logica dell'applicazione viene distribuita fisicamente per separare i processi o i server, tali destinazioni di distribuzione fisica separata sono detti *livelli*.</span><span class="sxs-lookup"><span data-stu-id="49461-151">In the event that application logic is physically distributed to separate servers or processes, these separate physical deployment targets are referred to as *tiers*.</span></span> <span data-ttu-id="49461-152">È possibile e molto comune, disporre di un'applicazione di N livelli che viene distribuita in un singolo livello.</span><span class="sxs-lookup"><span data-stu-id="49461-152">It's possible, and quite common, to have an N-Layer application that is deployed to a single tier.</span></span>

## <a name="traditional-n-layer-architecture-applications"></a><span data-ttu-id="49461-153">Applicazioni di architettura tradizionale "Livello di N"</span><span class="sxs-lookup"><span data-stu-id="49461-153">Traditional "N-Layer" architecture applications</span></span>

<span data-ttu-id="49461-154">L'organizzazione più comune di logica dell'applicazione in livelli è illustrato nella figura 5-2.</span><span class="sxs-lookup"><span data-stu-id="49461-154">The most common organization of application logic into layers it shown in Figure 5-2.</span></span>

<span data-ttu-id="49461-155">**Figura 5-2.**</span><span class="sxs-lookup"><span data-stu-id="49461-155">**Figure 5-2.**</span></span> <span data-ttu-id="49461-156">Livelli di una tipica applicazione.</span><span class="sxs-lookup"><span data-stu-id="49461-156">Typical application layers.</span></span>

![](./media/image5-2.png)

<span data-ttu-id="49461-157">Questi livelli vengono spesso abbreviati come interfaccia utente, BLL (Business Logic Layer) e DAL (Data Access Layer).</span><span class="sxs-lookup"><span data-stu-id="49461-157">These layers are frequently abbreviated as UI, BLL (Business Logic Layer), and DAL (Data Access Layer).</span></span> <span data-ttu-id="49461-158">Utilizzando questa architettura, gli utenti inviano richieste attraverso il livello di interfaccia utente, interagisce solo con il livello Business LOGIC.</span><span class="sxs-lookup"><span data-stu-id="49461-158">Using this architecture, users make requests through the UI layer, which interacts only with the BLL.</span></span> <span data-ttu-id="49461-159">Il livello Business LOGIC, a sua volta, può chiamare per le richieste di accesso ai dati.</span><span class="sxs-lookup"><span data-stu-id="49461-159">The BLL, in turn, can call the DAL for data access requests.</span></span> <span data-ttu-id="49461-160">Il livello di interfaccia utente consigliabile non apportare tutte le richieste alle DAL direttamente, né deve interagire con la persistenza direttamente tramite altri mezzi.</span><span class="sxs-lookup"><span data-stu-id="49461-160">The UI layer should not make any requests to the DAL directly, nor should it interact with persistence directly through other means.</span></span> <span data-ttu-id="49461-161">Allo stesso modo, il livello Business LOGIC devono solo interagire con la persistenza passando DAL.</span><span class="sxs-lookup"><span data-stu-id="49461-161">Likewise, the BLL should only interact with persistence by going through the DAL.</span></span> <span data-ttu-id="49461-162">In questo modo, ogni livello è la propria responsabilità nota.</span><span class="sxs-lookup"><span data-stu-id="49461-162">In this way, each layer has its own well-known responsibility.</span></span>

<span data-ttu-id="49461-163">Uno svantaggio di questo approccio a livelli tradizionale è che le dipendenze in fase di compilazione eseguono dall'alto verso il basso.</span><span class="sxs-lookup"><span data-stu-id="49461-163">One disadvantage of this traditional layering approach is that compile-time dependencies run from the top to the bottom.</span></span> <span data-ttu-id="49461-164">Vale a dire il livello di interfaccia utente dipende da BLL, che dipende DAL.</span><span class="sxs-lookup"><span data-stu-id="49461-164">That is, the UI layer depends on the BLL, which depends on the DAL.</span></span> <span data-ttu-id="49461-165">Ciò significa che il livello Business LOGIC, che in genere contiene la logica più importante nell'applicazione, è dipendente nel dettagli di implementazione di accesso ai dati (e spesso l'esistenza di un database).</span><span class="sxs-lookup"><span data-stu-id="49461-165">This means that the BLL, which usually holds the most important logic in the application, is dependent on data access implementation details (and often on the existence of a database).</span></span> <span data-ttu-id="49461-166">Test di logica di business in un'architettura di questo tipo è spesso difficile, che richiedono un database di prova.</span><span class="sxs-lookup"><span data-stu-id="49461-166">Testing business logic in such an architecture is often difficult, requiring a test database.</span></span> <span data-ttu-id="49461-167">Il principio di inversione di dipendenza è utilizzabile per risolvere questo problema, come illustrato nella sezione successiva.</span><span class="sxs-lookup"><span data-stu-id="49461-167">The dependency inversion principle can be used to address this issue, as you'll see in the next section.</span></span>

<span data-ttu-id="49461-168">Figura 5-3 viene illustrata una soluzione di esempio, suddividere l'applicazione in tre progetti da responsabilità (o livello).</span><span class="sxs-lookup"><span data-stu-id="49461-168">Figure 5-3 shows an example solution, breaking the application into three projects by responsibility (or layer).</span></span>

<span data-ttu-id="49461-169">**Figura 5-3.**</span><span class="sxs-lookup"><span data-stu-id="49461-169">**Figure 5-3.**</span></span> <span data-ttu-id="49461-170">Una semplice applicazione monolitica con tre progetti.</span><span class="sxs-lookup"><span data-stu-id="49461-170">A simple monolithic application with three projects.</span></span>

![](./media/image5-3.png)

<span data-ttu-id="49461-171">Anche se l'applicazione utilizza diversi progetti per scopi organizzativi, viene ancora distribuito come una singola unità e i relativi client verranno interagire con esso come un'app web singolo.</span><span class="sxs-lookup"><span data-stu-id="49461-171">Although this application uses several projects for organizational purposes, it is still deployed as a single unit and its clients will interact with it as a single web app.</span></span> <span data-ttu-id="49461-172">In questo modo molto semplice processo di distribuzione.</span><span class="sxs-lookup"><span data-stu-id="49461-172">This allows for very simple deployment process.</span></span> <span data-ttu-id="49461-173">Figura 5-4 viene illustrata la modalità cui tale applicazione potrebbe essere ospitato utilizzando Windows Azure.</span><span class="sxs-lookup"><span data-stu-id="49461-173">Figure 5-4 shows how such an app might be hosted using Windows Azure.</span></span>

![](./media/image5-4.png)

<span data-ttu-id="49461-174">**Figura 5-4.**</span><span class="sxs-lookup"><span data-stu-id="49461-174">**Figure 5-4.**</span></span> <span data-ttu-id="49461-175">Distribuzione semplice dell'App Web di Azure</span><span class="sxs-lookup"><span data-stu-id="49461-175">Simple deployment of Azure Web App</span></span>

<span data-ttu-id="49461-176">Come l'applicazione deve aumentare, soluzioni di distribuzione più complesso e affidabile possono essere necessarie.</span><span class="sxs-lookup"><span data-stu-id="49461-176">As application needs grow, more complex and robust deployment solutions may be required.</span></span> <span data-ttu-id="49461-177">Figura 5-5 viene mostrato un esempio di un piano di distribuzione più complesso che supporta funzionalità aggiuntive.</span><span class="sxs-lookup"><span data-stu-id="49461-177">Figure 5-5 shows an example of a more complex deployment plan that supports additional capabilities.</span></span>

![](./media/image5-5.png)

<span data-ttu-id="49461-178">**Figura 5-5.**</span><span class="sxs-lookup"><span data-stu-id="49461-178">**Figure 5-5.**</span></span> <span data-ttu-id="49461-179">Distribuzione di un'app web a un servizio App di Azure</span><span class="sxs-lookup"><span data-stu-id="49461-179">Deploying a web app to an Azure App Service</span></span>

<span data-ttu-id="49461-180">Internamente, organizzazione del progetto in più progetti in base alle responsabilità consente di migliorare la manutenibilità dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="49461-180">Internally, this project's organization into multiple projects based on responsibility improves the maintainability of the application.</span></span>

<span data-ttu-id="49461-181">Questa unità può essere scalata verticale o in modo da sfruttare la scalabilità su richiesta basato su cloud.</span><span class="sxs-lookup"><span data-stu-id="49461-181">This unit can be scaled up or out to take advantage of cloud-based on-demand scalability.</span></span> <span data-ttu-id="49461-182">La scalabilità verticale comporta l'aggiunta aggiuntivi della CPU, memoria, spazio su disco o altre risorse per i server che ospita l'app.</span><span class="sxs-lookup"><span data-stu-id="49461-182">Scaling up means adding additional CPU, memory, disk space, or other resources to the server(s) hosting your app.</span></span> <span data-ttu-id="49461-183">Scalabilità orizzontale si intende aggiungere altre istanze di tali server, se si tratta di server fisici o macchine virtuali.</span><span class="sxs-lookup"><span data-stu-id="49461-183">Scaling out means adding additional instances of such servers, whether these are physical servers or virtual machines.</span></span> <span data-ttu-id="49461-184">Quando l'applicazione è ospitata in più istanze, un bilanciamento del carico viene utilizzato per assegnare le richieste a istanze singole app.</span><span class="sxs-lookup"><span data-stu-id="49461-184">When your app is hosted across multiple instances, a load balancer is used to assign requests to individual app instances.</span></span>

<span data-ttu-id="49461-185">L'approccio più semplice per il ridimensionamento di un'applicazione web in Azure consiste nel configurare manualmente la scalabilità nel piano di servizio App dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="49461-185">The simplest approach to scaling a web application in Azure is to configure scaling manually in the application's App Service Plan.</span></span> <span data-ttu-id="49461-186">Figura 5-6 mostra una schermata dashboard Azure appropriato per configurare il numero di istanze definiti da un'app.</span><span class="sxs-lookup"><span data-stu-id="49461-186">Figure 5-6 show the appropriate Azure dashboard screen to configure how many instances are serving an app.</span></span>

![](./media/image5-6.png)

<span data-ttu-id="49461-187">**Figura 5-6.**</span><span class="sxs-lookup"><span data-stu-id="49461-187">**Figure 5-6.**</span></span> <span data-ttu-id="49461-188">Piano di servizio App scalabilità in Azure.</span><span class="sxs-lookup"><span data-stu-id="49461-188">App Service Plan scaling in Azure.</span></span>

## <a name="clean-architecture"></a><span data-ttu-id="49461-189">Nuova architettura</span><span class="sxs-lookup"><span data-stu-id="49461-189">Clean architecture</span></span>

<span data-ttu-id="49461-190">Le applicazioni che seguono il principio di inversione di dipendenza, nonché i principi di progettazione la (DDD) tendono a giungere a un'architettura simile.</span><span class="sxs-lookup"><span data-stu-id="49461-190">Applications that follow the Dependency Inversion Principle as well as Domain-Driven Design (DDD) principles tend to arrive at a similar architecture.</span></span> <span data-ttu-id="49461-191">Questa architettura è passato molti nomi nel corso degli anni.</span><span class="sxs-lookup"><span data-stu-id="49461-191">This architecture has gone by many names over the years.</span></span> <span data-ttu-id="49461-192">Uno dei nomi è stato architettura vite, seguita dalle porte e schede.</span><span class="sxs-lookup"><span data-stu-id="49461-192">One of the first names was Hexagonal Architecture, followed by Ports-and-Adapters.</span></span> <span data-ttu-id="49461-193">Più di recente, è stato indicato come la [architettura ad anello](http://jeffreypalermo.com/blog/the-onion-architecture-part-1/) o [architettura pulita](https://8thlight.com/blog/uncle-bob/2012/08/13/the-clean-architecture.html).</span><span class="sxs-lookup"><span data-stu-id="49461-193">More recently, it's been cited as the [Onion Architecture](http://jeffreypalermo.com/blog/the-onion-architecture-part-1/) or [Clean Architecture](https://8thlight.com/blog/uncle-bob/2012/08/13/the-clean-architecture.html).</span></span> <span data-ttu-id="49461-194">È questo il cognome, architettura pulita, che viene utilizzato come base per descrivere l'architettura di questa e-book.</span><span class="sxs-lookup"><span data-stu-id="49461-194">It is this last name, Clean Architecture, that is used as the basis for describing the architecture in this e-book.</span></span>

> [!NOTE]
> <span data-ttu-id="49461-195">Il termine che parziale architettura può essere applicato alle applicazioni che utilizzano principi DDD anche per quelli che non vengono compilati utilizzando DDD.</span><span class="sxs-lookup"><span data-stu-id="49461-195">The term Clean Architecture can be applied to applications that are built using DDD Principles as well as to those that are not built using DDD.</span></span> <span data-ttu-id="49461-196">Nel caso della prima, può essere indicata questa combinazione come "Architettura DDD pulita".</span><span class="sxs-lookup"><span data-stu-id="49461-196">In the case of the former, this combination may be referred to as "Clean DDD Architecture".</span></span>

<span data-ttu-id="49461-197">Architettura pulita inserisce il modello di applicazione e la logica di business al centro dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="49461-197">Clean architecture puts the business logic and application model at the center of the application.</span></span> <span data-ttu-id="49461-198">Anziché logica di business dipendono da altri problemi di infrastruttura o accesso ai dati, questa dipendenza è invertita: dettagli dell'infrastruttura e l'implementazione variano a seconda di base dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="49461-198">Instead of having business logic depend on data access or other infrastructure concerns, this dependency is inverted: infrastructure and implementation details depend on the Application Core.</span></span> <span data-ttu-id="49461-199">Questo risultato viene ottenuto mediante la definizione di astrazioni o interfacce, nell'elemento principale dell'applicazione, che quindi vengono implementati da tipi definiti nel livello di infrastruttura.</span><span class="sxs-lookup"><span data-stu-id="49461-199">This is achieved by defining abstractions, or interfaces, in the Application Core, which are then implemented by types defined in the Infrastructure layer.</span></span> <span data-ttu-id="49461-200">Un modo comune per la visualizzazione di questa architettura consiste nell'utilizzare una serie di cerchi concentrici, simile a un anello.</span><span class="sxs-lookup"><span data-stu-id="49461-200">A common way of visualizing this architecture is to use a series of concentric circles, similar to an onion.</span></span> <span data-ttu-id="49461-201">Figura 5-X Mostra un esempio di questo tipo di rappresentazione dell'architettura.</span><span class="sxs-lookup"><span data-stu-id="49461-201">Figure 5-X shows an example of this style of architectural representation.</span></span>

![](./media/image5-7.png)

<span data-ttu-id="49461-202">**Figura 5-7.**</span><span class="sxs-lookup"><span data-stu-id="49461-202">**Figure 5-7.**</span></span> <span data-ttu-id="49461-203">Architettura pulita. visualizzazione ad anello</span><span class="sxs-lookup"><span data-stu-id="49461-203">Clean Architecture; onion view</span></span>

<span data-ttu-id="49461-204">In questo diagramma, le dipendenze del flusso verso il cerchio più interno.</span><span class="sxs-lookup"><span data-stu-id="49461-204">In this diagram, dependencies flow toward the innermost circle.</span></span> <span data-ttu-id="49461-205">In questo modo, si noterà che i componenti di base di applicazione (che accetta il nome dalla relativa posizione alla base di questo diagramma) non ha dipendenze da altri livelli applicazione.</span><span class="sxs-lookup"><span data-stu-id="49461-205">Thus, you can see that the Application Core (which takes its name from its position at the core of this diagram) has no dependencies on other application layers.</span></span> <span data-ttu-id="49461-206">Al centro molto sono entità e le interfacce dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="49461-206">At the very center are the application's entities and interfaces.</span></span> <span data-ttu-id="49461-207">All'esterno, ma ancora nell'elemento principale dell'applicazione, sono servizi di dominio, che in genere implementano le interfacce definite in cerchio interno.</span><span class="sxs-lookup"><span data-stu-id="49461-207">Just outside, but still in the Application Core, are domain services, which typically implement interfaces defined in the inner circle.</span></span> <span data-ttu-id="49461-208">Di fuori di componenti di base dell'applicazione, sia l'interfaccia utente e i livelli di infrastruttura dipendono dalle Application Core, ma non tra loro (necessariamente).</span><span class="sxs-lookup"><span data-stu-id="49461-208">Outside of the Application Core, both the User Interface and the Infrastructure layers depend on the Application Core, but not on one another (necessarily).</span></span>

<span data-ttu-id="49461-209">Figura 5-X viene illustrato un diagramma livello orizzontale più tradizionale che rispecchia maggiormente la dipendenza tra l'interfaccia utente e ad altri livelli.</span><span class="sxs-lookup"><span data-stu-id="49461-209">Figure 5-X shows a more traditional horizontal layer diagram that better reflects the dependency between the UI and other layers.</span></span>

![](./media/image5-8.png)

<span data-ttu-id="49461-210">**Figura 5-8.**</span><span class="sxs-lookup"><span data-stu-id="49461-210">**Figure 5-8.**</span></span> <span data-ttu-id="49461-211">Architettura pulita. visualizzazione orizzontale livello</span><span class="sxs-lookup"><span data-stu-id="49461-211">Clean Architecture; horizontal layer view</span></span>

<span data-ttu-id="49461-212">Si noti che le frecce a tinta unita rappresentano le dipendenze in fase di compilazione, mentre la freccia tratteggiata rappresenta una dipendenza di runtime.</span><span class="sxs-lookup"><span data-stu-id="49461-212">Note that the solid arrows represent compile-time dependencies, while the dashed arrow represents a runtime-only dependency.</span></span> <span data-ttu-id="49461-213">Mediante la nuova architettura, il livello di interfaccia utente funziona con le interfacce definite nell'elemento principale dell'applicazione in fase di compilazione e idealmente non deve avere alcuna conoscenza dei tipi di implementazione definita nel livello di infrastruttura.</span><span class="sxs-lookup"><span data-stu-id="49461-213">Using the clean architecture, the UI layer works with interfaces defined in the Application Core at compile time, and ideally should not have any knowledge of the implementation types defined in the Infrastructure layer.</span></span> <span data-ttu-id="49461-214">In fase di esecuzione, tuttavia, questi tipi di implementazione sarà necessari per l'app da eseguire, in modo che dovrà essere presente e cablata fino alle interfacce di base dell'applicazione tramite l'inserimento di dipendenze.</span><span class="sxs-lookup"><span data-stu-id="49461-214">At runtime, however, these implementation types will be required for the app to execute, so they will need to be present and wired up to the Application Core interfaces via dependency injection.</span></span>

<span data-ttu-id="49461-215">Figura 5-9 è illustrata una visualizzazione più dettagliata dell'architettura di un'applicazione ASP.NET Core quando compilato seguendo questi suggerimenti.</span><span class="sxs-lookup"><span data-stu-id="49461-215">Figure 5-9 shows a more detailed view of an ASP.NET Core application's architecture when built following these recommendations.</span></span>

![Architettura di base ASPNET](./media/image5-9.png)

<span data-ttu-id="49461-217">**Figura 5-9.**</span><span class="sxs-lookup"><span data-stu-id="49461-217">**Figure 5-9.**</span></span> <span data-ttu-id="49461-218">Diagramma dell'architettura di ASP.NET Core seguente architettura pulita.</span><span class="sxs-lookup"><span data-stu-id="49461-218">ASP.NET Core architecture diagram following Clean Architecture.</span></span>

<span data-ttu-id="49461-219">Poiché i componenti di base di applicazione non dipende da infrastruttura, è molto semplice scrivere unit test automatizzati per questo livello.</span><span class="sxs-lookup"><span data-stu-id="49461-219">Because the Application Core doesn't depend on Infrastructure, it is very easy to write automated unit tests for this layer.</span></span> <span data-ttu-id="49461-220">Nelle figure da 5 a 10 e 11 di 5 mostra il test di adattamento in questa architettura.</span><span class="sxs-lookup"><span data-stu-id="49461-220">Figures 5-10 and 5-11 show how tests fit into this architecture.</span></span>

![UnitTestCore](./media/image5-10.png)

<span data-ttu-id="49461-222">**Figura 5-10.**</span><span class="sxs-lookup"><span data-stu-id="49461-222">**Figure 5-10.**</span></span> <span data-ttu-id="49461-223">Unit test di base dell'applicazione in isolamento.</span><span class="sxs-lookup"><span data-stu-id="49461-223">Unit testing Application Core in isolation.</span></span>

![IntegrationTests](./media/image5-11.png)

<span data-ttu-id="49461-225">**Figura 5-11.**</span><span class="sxs-lookup"><span data-stu-id="49461-225">**Figure 5-11.**</span></span> <span data-ttu-id="49461-226">Test di integrazione delle implementazioni di infrastruttura con dipendenze esterne.</span><span class="sxs-lookup"><span data-stu-id="49461-226">Integration testing Infrastructure implementations with external dependencies.</span></span>

<span data-ttu-id="49461-227">Poiché il livello di interfaccia utente non dispone di qualsiasi dipendenza diretta per i tipi definiti nel progetto di infrastruttura, è allo stesso modo molto semplice eseguire lo swapping implementazioni per semplificare il test o in risposta alle variazioni dei requisiti dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="49461-227">Since the UI layer doesn't have any direct dependency on types defined in the Infrastructure project, it is likewise very easy to swap out implementations, either to facilitate testing or in response to changing application requirements.</span></span> <span data-ttu-id="49461-228">Utilizzo predefinito di ASP.NET Core e il supporto per l'inserimento di dipendenze rende il modo più appropriato per applicazioni monolitico non semplice struttura questa architettura.</span><span class="sxs-lookup"><span data-stu-id="49461-228">ASP.NET Core's built-in use of and support for dependency injection makes this architecture the most appropriate way to structure non-trivial monolithic applications.</span></span>

<span data-ttu-id="49461-229">Per le applicazioni monolitiche i progetti di componenti di base dell'applicazione, l'infrastruttura e interfaccia utente vengono tutti eseguiti come una singola applicazione.</span><span class="sxs-lookup"><span data-stu-id="49461-229">For monolithic applications the Application Core, Infrastructure, and User Interface projects are all run as a single application.</span></span> <span data-ttu-id="49461-230">Architettura dell'applicazione di runtime potrebbe essere simile a come nella figura 5-12.</span><span class="sxs-lookup"><span data-stu-id="49461-230">The runtime application architecture might look something like Figure 5-12.</span></span>

![Architettura di base ASPNET 2](./media/image5-12.png)

<span data-ttu-id="49461-232">**Figura 5-12.**</span><span class="sxs-lookup"><span data-stu-id="49461-232">**Figure 5-12.**</span></span> <span data-ttu-id="49461-233">Architettura del runtime dell'applicazione ASP.NET di base di esempio.</span><span class="sxs-lookup"><span data-stu-id="49461-233">A sample ASP.NET Core app's runtime architecture.</span></span>

### <a name="organizing-code-in-clean-architecture"></a><span data-ttu-id="49461-234">Organizzazione del codice nella nuova architettura</span><span class="sxs-lookup"><span data-stu-id="49461-234">Organizing Code in Clean Architecture</span></span>

<span data-ttu-id="49461-235">In una soluzione nuova architettura, ogni progetto dispone di responsabilità precise.</span><span class="sxs-lookup"><span data-stu-id="49461-235">In a Clean Architecture solution, each project has clear responsibilities.</span></span> <span data-ttu-id="49461-236">Di conseguenza, alcuni tipi apparterrà in ogni progetto e spesso sono disponibili le cartelle corrispondenti a questi tipi di progetto appropriato.</span><span class="sxs-lookup"><span data-stu-id="49461-236">As such, certain types will belong in each project and you'll frequently find folders corresponding to these types in the appropriate project.</span></span>

<span data-ttu-id="49461-237">La base dell'applicazione contiene il modello di business, che include le entità, servizi e interfacce.</span><span class="sxs-lookup"><span data-stu-id="49461-237">The Application Core holds the business model, which includes entities, services, and interfaces.</span></span> <span data-ttu-id="49461-238">Tali interfacce includono astrazioni per le operazioni che verranno eseguite utilizzando l'infrastruttura, ad esempio l'accesso ai dati, accesso al file system, chiamate di rete e così via. Talvolta i servizi o le interfacce definite in questo livello saranno necessario lavorare con i tipi non entità che non hanno dipendenze su un'interfaccia utente o dell'infrastruttura.</span><span class="sxs-lookup"><span data-stu-id="49461-238">These interfaces include abstractions for operations that will be performed using Infrastructure, such as data access, file system access, network calls, etc. Sometimes services or interfaces defined at this layer will need to work with non-entity types that have no dependencies on UI or Infrastructure.</span></span> <span data-ttu-id="49461-239">Questi può essere definiti come semplice dati trasferire oggetti DTO.</span><span class="sxs-lookup"><span data-stu-id="49461-239">These can be defined as simple Data Transfer Objects (DTOs).</span></span>

> ### <a name="application-core-types"></a><span data-ttu-id="49461-240">Tipi di base dell'applicazione</span><span class="sxs-lookup"><span data-stu-id="49461-240">Application Core Types</span></span>
> -   <span data-ttu-id="49461-241">Entità (business classi del modello che vengono rese persistenti)</span><span class="sxs-lookup"><span data-stu-id="49461-241">Entities (business model classes that are persisted)</span></span>
> -   <span data-ttu-id="49461-242">Interfacce</span><span class="sxs-lookup"><span data-stu-id="49461-242">Interfaces</span></span>
> -   <span data-ttu-id="49461-243">Servizi</span><span class="sxs-lookup"><span data-stu-id="49461-243">Services</span></span>
> -   <span data-ttu-id="49461-244">DTO</span><span class="sxs-lookup"><span data-stu-id="49461-244">DTOs</span></span>

<span data-ttu-id="49461-245">Il progetto di infrastruttura in genere comprendono le implementazioni di accesso ai dati.</span><span class="sxs-lookup"><span data-stu-id="49461-245">The Infrastructure project will typically include data access implementations.</span></span> <span data-ttu-id="49461-246">In una tipica applicazione web ASP.NET Core, si includerà DbContext Entity Framework, le migrazioni di Core EF che sono stati definiti e classi di implementazione di accesso ai dati.</span><span class="sxs-lookup"><span data-stu-id="49461-246">In a typical ASP.NET Core web application, this will include the Entity Framework DbContext, any EF Core Migrations that have been defined, and data access implementation classes.</span></span> <span data-ttu-id="49461-247">È il modo più comune per eseguire un'astrazione di codice di implementazione di accesso ai dati tramite l'utilizzo del [progettuale Repository](http://deviq.com/repository-pattern/).</span><span class="sxs-lookup"><span data-stu-id="49461-247">The most common way to abstract data access implementation code is through the use of the [Repository design pattern](http://deviq.com/repository-pattern/).</span></span>

<span data-ttu-id="49461-248">Oltre alle implementazioni di accesso ai dati, il progetto di infrastruttura deve contenere le implementazioni dei servizi che devono interagire con problemi di infrastruttura.</span><span class="sxs-lookup"><span data-stu-id="49461-248">In addition to data access implementations, the Infrastructure project should contain implementations of services that must interact with infrastructure concerns.</span></span> <span data-ttu-id="49461-249">Questi servizi devono implementare le interfacce definite nell'elemento principale dell'applicazione e pertanto infrastruttura deve avere un riferimento al progetto principale dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="49461-249">These services should implement interfaces defined in the Application Core, and so Infrastructure should have a reference to the Application Core project.</span></span>

> ### <a name="infrastructure-types"></a><span data-ttu-id="49461-250">Tipi di infrastruttura</span><span class="sxs-lookup"><span data-stu-id="49461-250">Infrastructure Types</span></span>
> -   <span data-ttu-id="49461-251">Tipi di base EF (DbContext, migrazioni)</span><span class="sxs-lookup"><span data-stu-id="49461-251">EF Core types (DbContext, Migrations)</span></span>
> -   <span data-ttu-id="49461-252">Tipi di implementazione (repository) di accesso ai dati</span><span class="sxs-lookup"><span data-stu-id="49461-252">Data access implementation types (Repositories)</span></span>
> -   <span data-ttu-id="49461-253">Servizi di infrastruttura specifici (FileLogger, SmtpNotifier e così via)</span><span class="sxs-lookup"><span data-stu-id="49461-253">Infrastructure-specific services (FileLogger, SmtpNotifier, etc.)</span></span>

<span data-ttu-id="49461-254">Il layer dell'interfaccia utente in un'applicazione ASP.NET MVC di base sarà il punto di ingresso per l'applicazione e sarà un progetto ASP.NET MVC di base.</span><span class="sxs-lookup"><span data-stu-id="49461-254">The user interface layer in an ASP.NET Core MVC application will be the entry point for the application, and will be an ASP.NET Core MVC project.</span></span> <span data-ttu-id="49461-255">Questo progetto deve fare riferimento al progetto principale dell'applicazione e relativi tipi devono interagire con l'infrastruttura esclusivamente tramite le interfacce definite nell'applicazione principale.</span><span class="sxs-lookup"><span data-stu-id="49461-255">This project should reference the Application Core project, and its types should interact with infrastructure strictly through interfaces defined in Application Core.</span></span> <span data-ttu-id="49461-256">Nessun creazione diretta di istanze di (o statiche chiamate a) i tipi di livello dell'infrastruttura devono essere consentiti nel livello dell'interfaccia utente.</span><span class="sxs-lookup"><span data-stu-id="49461-256">No direct instantiation of (or static calls to) Infrastructure layer types should be permitted in the UI layer.</span></span>

> ### <a name="ui-layer-types"></a><span data-ttu-id="49461-257">Tipi di livelli dell'interfaccia utente</span><span class="sxs-lookup"><span data-stu-id="49461-257">UI Layer Types</span></span>
> -   <span data-ttu-id="49461-258">Controller</span><span class="sxs-lookup"><span data-stu-id="49461-258">Controllers</span></span>
> -   <span data-ttu-id="49461-259">Filtri</span><span class="sxs-lookup"><span data-stu-id="49461-259">Filters</span></span>
> -   <span data-ttu-id="49461-260">Visualizzazioni</span><span class="sxs-lookup"><span data-stu-id="49461-260">Views</span></span>
> -   <span data-ttu-id="49461-261">ViewModel</span><span class="sxs-lookup"><span data-stu-id="49461-261">ViewModels</span></span>
> -   <span data-ttu-id="49461-262">Avvio</span><span class="sxs-lookup"><span data-stu-id="49461-262">Startup</span></span>

<span data-ttu-id="49461-263">La classe di avvio è responsabile per la configurazione dell'applicazione e per il collegamento dei tipi di implementazione di interfacce, consentendo l'inserimento di dipendenze per il corretto funzionamento in fase di esecuzione.</span><span class="sxs-lookup"><span data-stu-id="49461-263">The Startup class is responsible for configuring the application, and for wiring up implementation types to interfaces, allowing dependency injection to work properly at run time.</span></span>

> [!NOTE]
> <span data-ttu-id="49461-264">Per associare l'inserimento di dipendenze in ConfigureServices nel file Startup.cs del progetto dell'interfaccia utente, il progetto potrebbe essere necessario fare riferimento al progetto di infrastruttura.</span><span class="sxs-lookup"><span data-stu-id="49461-264">In order to wire up dependency injection in ConfigureServices in the Startup.cs file of the UI project, the project may need to reference the Infrastructure project.</span></span> <span data-ttu-id="49461-265">Questa dipendenza può essere eliminata più facilmente utilizzando un contenitore DI personalizzati.</span><span class="sxs-lookup"><span data-stu-id="49461-265">This dependency can be eliminated, most easily by using a custom DI container.</span></span> <span data-ttu-id="49461-266">Ai fini di questo esempio, l'approccio più semplice è il progetto di interfaccia utente fare riferimento al progetto di infrastruttura.</span><span class="sxs-lookup"><span data-stu-id="49461-266">For the purposes of this sample, the simplest approach is to allow the UI project to reference the Infrastructure project.</span></span>

## <a name="monolithic-applications-and-containers"></a><span data-ttu-id="49461-267">Contenitori e le applicazioni monolitiche</span><span class="sxs-lookup"><span data-stu-id="49461-267">Monolithic Applications and Containers</span></span> 

<span data-ttu-id="49461-268">È possibile compilare un singolo e monolitico distribuzione applicazione basata su Web o un servizio e distribuirlo come un contenitore.</span><span class="sxs-lookup"><span data-stu-id="49461-268">You can build a single and monolithic-deployment based Web Application or Service and deploy it as a container.</span></span> <span data-ttu-id="49461-269">All'interno dell'applicazione, potrebbe non essere monolitico ma organizzati in diverse librerie, componenti o livelli.</span><span class="sxs-lookup"><span data-stu-id="49461-269">Within the application, it might not be monolithic but organized into several libraries, components or layers.</span></span> <span data-ttu-id="49461-270">Esternamente è un singolo contenitore come un singolo processo, una singola applicazione web o singolo servizio.</span><span class="sxs-lookup"><span data-stu-id="49461-270">Externally it is a single container like a single process, single web application or single service.</span></span>

<span data-ttu-id="49461-271">Per gestire questo modello, si distribuisce un singolo contenitore per rappresentare l'applicazione.</span><span class="sxs-lookup"><span data-stu-id="49461-271">To manage this model, you deploy a single container to represent the application.</span></span> <span data-ttu-id="49461-272">Per applicare la scalabilità, è sufficiente aggiungere altre copie con un bilanciamento del carico in primo piano.</span><span class="sxs-lookup"><span data-stu-id="49461-272">To scale, just add additional copies with a load balancer in front.</span></span> <span data-ttu-id="49461-273">La semplicità proviene da un'unica distribuzione in un singolo contenitore o di una macchina virtuale di gestione.</span><span class="sxs-lookup"><span data-stu-id="49461-273">The simplicity comes from managing a single deployment in a single container or VM.</span></span>

![](./media/image5-13.png)

<span data-ttu-id="49461-274">È possibile includere più componenti/librerie o interni livelli all'interno di ogni contenitore, come illustrato nella figura 5-X.</span><span class="sxs-lookup"><span data-stu-id="49461-274">You can include multiple components/libraries or internal layers within each container, as illustrated in Figure 5-X.</span></span> <span data-ttu-id="49461-275">Ma, dopo l'entità contenitore di *"svolge una funzione, un contenitore e fa in un unico processo*", il modello monolitico potrebbe verificarsi un conflitto.</span><span class="sxs-lookup"><span data-stu-id="49461-275">But, following the container principal of *"a container does one thing, and does it in one process*", the monolithic pattern might be a conflict.</span></span>

<span data-ttu-id="49461-276">Lo svantaggio di questo approccio viene fornito se/quando si espande l'applicazione, che li richiede di scala.</span><span class="sxs-lookup"><span data-stu-id="49461-276">The downside of this approach comes if/when the application grows, requiring it to scale.</span></span> <span data-ttu-id="49461-277">Se l'intera applicazione ridimensionata, non è effettivamente un problema.</span><span class="sxs-lookup"><span data-stu-id="49461-277">If the entire application scaled, it's not really a problem.</span></span> <span data-ttu-id="49461-278">Tuttavia, nella maggior parte dei casi, alcune parti dell'applicazione sono utilizzati i punti di riduzione che richiedono scalabilità, mentre gli altri componenti sono minore.</span><span class="sxs-lookup"><span data-stu-id="49461-278">However, in most cases, a few parts of the application are the choke points requiring scaling, while other components are used less.</span></span>

<span data-ttu-id="49461-279">Utilizzando l'esempio tipico di e-commerce; che cos'è probabilmente necessario ridimensionare è il componente di informazioni di prodotto.</span><span class="sxs-lookup"><span data-stu-id="49461-279">Using the typical eCommerce example; what you likely need to scale is the product information component.</span></span> <span data-ttu-id="49461-280">Molti clienti più sfogliare i prodotti di acquistare le licenze.</span><span class="sxs-lookup"><span data-stu-id="49461-280">Many more customers browse products than purchase them.</span></span> <span data-ttu-id="49461-281">Numero di clienti Usa carrello di utilizzare la pipeline di pagamento.</span><span class="sxs-lookup"><span data-stu-id="49461-281">More customers use their basket than use the payment pipeline.</span></span> <span data-ttu-id="49461-282">I clienti meno aggiungono commenti o visualizzarne la cronologia di acquisto.</span><span class="sxs-lookup"><span data-stu-id="49461-282">Fewer customers add comments or view their purchase history.</span></span> <span data-ttu-id="49461-283">E, probabilmente è solo un numero limitato di dipendenti, in un'area singola, che devono gestire il contenuto e le campagne di marketing.</span><span class="sxs-lookup"><span data-stu-id="49461-283">And you likely only have a handful of employees, in a single region, that need to manage the content and marketing campaigns.</span></span> <span data-ttu-id="49461-284">Per la progettazione monolitica la scala, tutto il codice viene distribuito più volte.</span><span class="sxs-lookup"><span data-stu-id="49461-284">By scaling the monolithic design, all the code is deployed multiple times.</span></span>

<span data-ttu-id="49461-285">Oltre a scala tutto il problema, le modifiche apportate a un singolo componente necessitano completa la riesecuzione del test dell'intera applicazione e una ridistribuzione completa di tutte le istanze.</span><span class="sxs-lookup"><span data-stu-id="49461-285">In addition to the scale everything problem, changes to a single component require complete retesting of the entire application, and a complete redeployment of all the instances.</span></span>

<span data-ttu-id="49461-286">L'approccio monolitico è comune e molte organizzazioni sono lo sviluppo con questo approccio architetturale.</span><span class="sxs-lookup"><span data-stu-id="49461-286">The monolithic approach is common, and many organizations are developing with this architectural approach.</span></span> <span data-ttu-id="49461-287">Molti hanno buone sufficiente risultati, mentre altri raggiunge i limiti.</span><span class="sxs-lookup"><span data-stu-id="49461-287">Many are having good enough results, while others are hitting limits.</span></span> <span data-ttu-id="49461-288">Molti progettati le applicazioni in questo modello, poiché gli strumenti e l'infrastruttura sono troppo difficili da creare architetture orientate ai servizi (SOA) e visualizzano non ha la necessità, fino a quando l'app di dimensioni sono aumentate.</span><span class="sxs-lookup"><span data-stu-id="49461-288">Many designed their applications in this model, because the tools and infrastructure were too difficult to build service oriented architectures (SOA), and they didn't see the need - until the app grew.</span></span> <span data-ttu-id="49461-289">Se che si riscontrano i limiti dell'approccio monolitico, suddivisione dell'app per poter sfruttare più contenitori e microservizi potrebbe essere il successivo passaggio logico.</span><span class="sxs-lookup"><span data-stu-id="49461-289">If you find you're hitting the limits of the monolithic approach, breaking the app up to enable it to better leverage containers and microservices may be the next logical step.</span></span>

![](./media/image5-14.png)

<span data-ttu-id="49461-290">Distribuzione di applicazioni monolitiche in Microsoft Azure, è possibile utilizzare le macchine virtuali dedicate per ogni istanza.</span><span class="sxs-lookup"><span data-stu-id="49461-290">Deploying monolithic applications in Microsoft Azure can be achieved using dedicated VMs for each instance.</span></span> <span data-ttu-id="49461-291">Utilizzando [set di scalabilità di macchine Virtuali di Azure](https://docs.microsoft.com/azure/virtual-machine-scale-sets/), è possibile ridimensionare le macchine virtuali.</span><span class="sxs-lookup"><span data-stu-id="49461-291">Using [Azure VM Scale Sets](https://docs.microsoft.com/azure/virtual-machine-scale-sets/), you can easily scale the VMs.</span></span> <span data-ttu-id="49461-292">[Servizi App Azure](https://azure.microsoft.com/services/app-service/) possono eseguire applicazioni monolitiche e scalare facilmente istanze senza la necessità di gestire le macchine virtuali.</span><span class="sxs-lookup"><span data-stu-id="49461-292">[Azure App Services](https://azure.microsoft.com/services/app-service/) can run monolithic applications and easily scale instances without having to manage the VMs.</span></span> <span data-ttu-id="49461-293">Servizi App di Azure è possibile eseguire singole istanze di contenitori di Docker, nonché semplificando la distribuzione.</span><span class="sxs-lookup"><span data-stu-id="49461-293">Azure App Services can run single instances of Docker containers as well, simplifying the deployment.</span></span> <span data-ttu-id="49461-294">Usando Docker, è possibile distribuire una singola macchina virtuale come host Docker ed eseguire più istanze.</span><span class="sxs-lookup"><span data-stu-id="49461-294">Using Docker, you can deploy a single VM as a Docker host, and run multiple instances.</span></span> <span data-ttu-id="49461-295">Tramite il bilanciamento di Azure, come illustrato nella figura 5-14, è possibile gestire la scalabilità.</span><span class="sxs-lookup"><span data-stu-id="49461-295">Using the Azure balancer, as shown in the Figure 5-14, you can manage scaling.</span></span>

<span data-ttu-id="49461-296">La distribuzione agli host diversi può essere gestita con le tecniche tradizionali di distribuzione.</span><span class="sxs-lookup"><span data-stu-id="49461-296">The deployment to the various hosts can be managed with traditional deployment techniques.</span></span> <span data-ttu-id="49461-297">L'host Docker possono essere gestiti con comandi come **docker eseguire** eseguita manualmente o tramite l'automazione, ad esempio, la pipeline di recapito continuo (CD).</span><span class="sxs-lookup"><span data-stu-id="49461-297">The Docker hosts can be managed with commands like **docker run** performed manually, or through automation such as Continuous Delivery (CD) pipelines.</span></span>

### <a name="monolithic-application-deployed-as-a-container"></a><span data-ttu-id="49461-298">Qualsiasi applicazione distribuita come contenitore</span><span class="sxs-lookup"><span data-stu-id="49461-298">Monolithic application deployed as a container</span></span>

<span data-ttu-id="49461-299">Esistono vantaggi dell'utilizzo di contenitori per gestire le distribuzioni applicazione monolitico.</span><span class="sxs-lookup"><span data-stu-id="49461-299">There are benefits of using containers to manage monolithic application deployments.</span></span> <span data-ttu-id="49461-300">Le istanze di contenitori di ridimensionamento è molto più veloce e semplice rispetto alla distribuzione di macchine virtuali aggiuntive.</span><span class="sxs-lookup"><span data-stu-id="49461-300">Scaling the instances of containers is far faster and easier than deploying additional VMs.</span></span> <span data-ttu-id="49461-301">Anche quando si usa il set di scalabilità di macchine Virtuali di scala di macchine virtuali, hanno ora all'istanza.</span><span class="sxs-lookup"><span data-stu-id="49461-301">Even when using VM Scale Sets to scale VMs, they take time to instance.</span></span> <span data-ttu-id="49461-302">Quando viene distribuita come istanze dell'applicazione, la configurazione dell'app viene gestita come parte della macchina virtuale.</span><span class="sxs-lookup"><span data-stu-id="49461-302">When deployed as app instances, the configuration of the app is managed as part of the VM.</span></span>

<span data-ttu-id="49461-303">Distribuzione degli aggiornamenti, come immagini Docker è molto più veloce e rete efficiente.</span><span class="sxs-lookup"><span data-stu-id="49461-303">Deploying updates as Docker images is far faster and network efficient.</span></span> <span data-ttu-id="49461-304">Le immagini docker iniziano in genere espresso in secondi, velocizzando l'implementazione.</span><span class="sxs-lookup"><span data-stu-id="49461-304">Docker Images typically start in seconds, speeding rollouts.</span></span> <span data-ttu-id="49461-305">Chiudere un'istanza di Docker è facile come emittente un **stop docker** comando, in genere completato in meno di un secondo.</span><span class="sxs-lookup"><span data-stu-id="49461-305">Tearing down a Docker instance is as easy as issuing a **docker stop** command, typically completing in less than a second.</span></span>

<span data-ttu-id="49461-306">I contenitori sono intrinsecamente non modificabili in base alla progettazione e non occorre preoccuparsi di macchine virtuali danneggiate, mentre gli script di aggiornamento abbia dimenticato di account per alcuni configurazione specifica o a sinistra di file su disco.</span><span class="sxs-lookup"><span data-stu-id="49461-306">As containers are inherently immutable by design, you never need to worry about corrupted VMs, whereas update scripts might forget to account for some specific configuration or file left on disk.</span></span>

<span data-ttu-id="49461-307">Mentre l'App monolitica possono trarre vantaggio da Docker, interruzione dell'applicazione monolitico nei sistemi di sottoscrizione che possono essere ridimensionati, sviluppato e distribuito singolarmente potrebbe essere il punto di ingresso nell'area di autenticazione di microservizi.</span><span class="sxs-lookup"><span data-stu-id="49461-307">While monolithic apps can benefit from Docker, breaking up the monolithic application into sub systems which can be scaled, developed and deployed individually may be your entry point into the realm of microservices.</span></span>

> ### <a name="references--common-web-architectures"></a><span data-ttu-id="49461-308">Riferimenti: architetture Web comuni</span><span class="sxs-lookup"><span data-stu-id="49461-308">References – Common Web Architectures</span></span>
> - <span data-ttu-id="49461-309">**L'architettura di pulizia**</span><span class="sxs-lookup"><span data-stu-id="49461-309">**The Clean Architecture**</span></span>  
> <span data-ttu-id="49461-310"><https://8thlight.com/blog/Uncle-Bob/2012/08/13/the-Clean-Architecture.HTML></span><span class="sxs-lookup"><span data-stu-id="49461-310"><https://8thlight.com/blog/uncle-bob/2012/08/13/the-clean-architecture.html></span></span>
> - <span data-ttu-id="49461-311">**L'architettura ad anello**</span><span class="sxs-lookup"><span data-stu-id="49461-311">**The Onion Architecture**</span></span>  
> <span data-ttu-id="49461-312"><http://jeffreypalermo.com/blog/the-Onion-Architecture-part-1/></span><span class="sxs-lookup"><span data-stu-id="49461-312"><http://jeffreypalermo.com/blog/the-onion-architecture-part-1/></span></span>
> - <span data-ttu-id="49461-313">**Il modello di Repository**</span><span class="sxs-lookup"><span data-stu-id="49461-313">**The Repository Pattern**</span></span>  
> <span data-ttu-id="49461-314"><http://deviq.com/repository-pattern/></span><span class="sxs-lookup"><span data-stu-id="49461-314"><http://deviq.com/repository-pattern/></span></span>
> - <span data-ttu-id="49461-315">**Esempio di architettura Pulisci soluzione**</span><span class="sxs-lookup"><span data-stu-id="49461-315">**Clean Architecture Solution Sample**</span></span>  
> <span data-ttu-id="49461-316"><https://github.com/ardalis/cleanarchitecture></span><span class="sxs-lookup"><span data-stu-id="49461-316"><https://github.com/ardalis/cleanarchitecture></span></span>
> - <span data-ttu-id="49461-317">**Architettura di e-book di Microservizi** <http://aka.ms/MicroservicesEbook></span><span class="sxs-lookup"><span data-stu-id="49461-317">**Architecting Microservices e-book** <http://aka.ms/MicroservicesEbook></span></span>

>[!div class="step-by-step"]
<span data-ttu-id="49461-318">[Precedente] (dell'architettura principles.md) [Avanti] (comuni-client-side-web-technologies.md)</span><span class="sxs-lookup"><span data-stu-id="49461-318">[Previous] (architectural-principles.md) [Next] (common-client-side-web-technologies.md)</span></span>
