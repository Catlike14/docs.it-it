---
title: Gestione degli errori parziali
description: Architettura di Microservizi .NET per le applicazioni nei contenitori .NET | Gestione degli errori parziali
keywords: Docker, microservizi, ASP.NET, contenitore
author: CESARDELATORRE
ms.author: wiwagn
ms.date: 05/26/2017
ms.prod: .net-core
ms.technology: dotnet-docker
ms.topic: article
ms.openlocfilehash: b7d16acf3de2d395da70e8f46e59c129dec24f71
ms.sourcegitcommit: bd1ef61f4bb794b25383d3d72e71041a5ced172e
ms.translationtype: HT
ms.contentlocale: it-IT
ms.lasthandoff: 10/18/2017
---
# <a name="handling-partial-failure"></a><span data-ttu-id="522c0-104">Gestione degli errori parziali</span><span class="sxs-lookup"><span data-stu-id="522c0-104">Handling partial failure</span></span>

<span data-ttu-id="522c0-105">In sistemi distribuiti, ad esempio le applicazioni basate su microservizi, c'è un rischio più di un errore parziale.</span><span class="sxs-lookup"><span data-stu-id="522c0-105">In distributed systems like microservices-based applications, there is an ever-present risk of partial failure.</span></span> <span data-ttu-id="522c0-106">Ad esempio, un singolo microservizio/contenitore può avere esito negativo o potrebbe non essere disponibile per rispondere per un breve periodo di tempo oppure una singola macchina virtuale o server può arrestarsi in modo anomalo.</span><span class="sxs-lookup"><span data-stu-id="522c0-106">For instance, a single microservice/container can fail or might not be available to respond for a short time, or a single VM or server can crash.</span></span> <span data-ttu-id="522c0-107">Poiché i client e servizi sono processi separati, un servizio potrebbe non essere in grado di rispondere in modo tempestivo a una richiesta del client.</span><span class="sxs-lookup"><span data-stu-id="522c0-107">Since clients and services are separate processes, a service might not be able to respond in a timely way to a client’s request.</span></span> <span data-ttu-id="522c0-108">Il servizio potrebbe essere in overload e che risponde solo molto lentamente a richieste o può non essere accessibile per un breve periodo di tempo a causa di problemi di rete.</span><span class="sxs-lookup"><span data-stu-id="522c0-108">The service might be overloaded and responding extremely slowly to requests, or might simply not be accessible for a short time because of network issues.</span></span>

<span data-ttu-id="522c0-109">Si consideri ad esempio la pagina Dettagli ordine il eShopOnContainers applicazione di esempio.</span><span class="sxs-lookup"><span data-stu-id="522c0-109">For example, consider the Order details page from the eShopOnContainers sample application.</span></span> <span data-ttu-id="522c0-110">Se l'ordinamento microservizio non risponde quando l'utente tenta di inviare un ordine, un'implementazione non valida del processo client (l'applicazione web MVC), ad esempio, se il codice client utilizza RPC sincrona senza alcun timeout, ovvero Blocca thread per un periodo illimitato in attesa di una risposta.</span><span class="sxs-lookup"><span data-stu-id="522c0-110">If the ordering microservice is unresponsive when the user tries to submit an order, a bad implementation of the client process (the MVC web application)—for example, if the client code were to use synchronous RPCs with no timeout—would block threads indefinitely waiting for a response.</span></span> <span data-ttu-id="522c0-111">Oltre a creare un'esperienza utente errati, ogni attesa risponda utilizza o blocca un thread e i thread sono estremamente utili per applicazioni estremamente scalabili.</span><span class="sxs-lookup"><span data-stu-id="522c0-111">In addition to creating a bad user experience, every unresponsive wait consumes or blocks a thread, and threads are extremely valuable in highly scalable applications.</span></span> <span data-ttu-id="522c0-112">Se sono presenti numerosi thread bloccati, il runtime dell'applicazione può eseguire esaurimento.</span><span class="sxs-lookup"><span data-stu-id="522c0-112">If there are many blocked threads, eventually the application’s runtime can run out of threads.</span></span> <span data-ttu-id="522c0-113">In tal caso, l'applicazione potrebbe smettere di rispondere a livello globale anziché solo parzialmente non risponde, come illustrato nella figura 10-1.</span><span class="sxs-lookup"><span data-stu-id="522c0-113">In that case, the application can become globally unresponsive instead of just partially unresponsive, as show in Figure 10-1.</span></span>

![](./media/image1.png)

<span data-ttu-id="522c0-114">**Nella figura 10-1**.</span><span class="sxs-lookup"><span data-stu-id="522c0-114">**Figure 10-1**.</span></span> <span data-ttu-id="522c0-115">Le conversioni non riuscite a causa delle dipendenze impatto sulla disponibilità di thread del servizio</span><span class="sxs-lookup"><span data-stu-id="522c0-115">Partial failures because of dependencies that impact service thread availability</span></span>

<span data-ttu-id="522c0-116">In un'applicazione basata su microservizi grandi dimensioni, qualsiasi errore parziale può essere ampliate, soprattutto se la maggior parte dell'interazione microservizi interno si basa sulle chiamate HTTP sincrone (che è considerata un anti-pattern).</span><span class="sxs-lookup"><span data-stu-id="522c0-116">In a large microservices-based application, any partial failure can be amplified, especially if most of the internal microservices interaction is based on synchronous HTTP calls (which is considered an anti-pattern).</span></span> <span data-ttu-id="522c0-117">Considerare un sistema che riceve milioni di chiamate in ingresso al giorno.</span><span class="sxs-lookup"><span data-stu-id="522c0-117">Think about a system that receives millions of incoming calls per day.</span></span> <span data-ttu-id="522c0-118">Se il sistema dispone di una struttura non valida che si basa sul lunghe catene di chiamate HTTP sincrone, queste chiamate in ingresso potrebbero comportare molti milioni di chiamate in uscita (si supponga un rapporto 1:4) a decine di microservizi interno come dipendenze sincrone.</span><span class="sxs-lookup"><span data-stu-id="522c0-118">If your system has a bad design that is based on long chains of synchronous HTTP calls, these incoming calls might result in many more millions of outgoing calls (let’s suppose a ratio of 1:4) to dozens of internal microservices as synchronous dependencies.</span></span> <span data-ttu-id="522c0-119">Questa situazione è illustrata nella figura 10-2, soprattutto dipendenza \#3.</span><span class="sxs-lookup"><span data-stu-id="522c0-119">This situation is shown in Figure 10-2, especially dependency \#3.</span></span>

![](./media/image2.png)

<span data-ttu-id="522c0-120">**Figura 10-2**.</span><span class="sxs-lookup"><span data-stu-id="522c0-120">**Figure 10-2**.</span></span> <span data-ttu-id="522c0-121">L'impatto della presenza di una progettazione corretta con lunghe catene di richieste HTTP</span><span class="sxs-lookup"><span data-stu-id="522c0-121">The impact of having an incorrect design featuring long chains of HTTP requests</span></span>

<span data-ttu-id="522c0-122">Interruzione intermittente è praticamente garantita in distribuito e cloud sistema basato su, anche se dispone di tutte le dipendenze stesso disponibilità eccellente.</span><span class="sxs-lookup"><span data-stu-id="522c0-122">Intermittent failure is virtually guaranteed in a distributed and cloud based system, even if every dependency itself has excellent availability.</span></span> <span data-ttu-id="522c0-123">Deve trattarsi di un fatto, che è necessario prendere in considerazione.</span><span class="sxs-lookup"><span data-stu-id="522c0-123">This should be a fact you need to consider.</span></span>

<span data-ttu-id="522c0-124">Se non si progettare e implementare le tecniche per garantire la tolleranza di errore, è possibile amplificate anche tempi di inattività.</span><span class="sxs-lookup"><span data-stu-id="522c0-124">If you do not design and implement techniques to ensure fault tolerance, even small downtimes can be amplified.</span></span> <span data-ttu-id="522c0-125">Ad esempio, 50 dipendenze ogni con 99,99% di disponibilità comporta diverse ore di inattività ogni mese a causa di questo effetto ripple.</span><span class="sxs-lookup"><span data-stu-id="522c0-125">As an example, 50 dependencies each with 99.99% of availability would result in several hours of downtime each month because of this ripple effect.</span></span> <span data-ttu-id="522c0-126">Quando una dipendenza microservizio ha esito negativo durante la gestione di un volume elevato di richieste, questo tipo di errore possono rapidamente saturare tutti i thread di richiesta disponibili in ogni servizio e di arresto anomalo dell'intera applicazione.</span><span class="sxs-lookup"><span data-stu-id="522c0-126">When a microservice dependency fails while handling a high volume of requests, that failure can quickly saturate all available request threads in each service and crash the whole application.</span></span>

![](./media/image3.png)

<span data-ttu-id="522c0-127">**Nella figura 10-3**.</span><span class="sxs-lookup"><span data-stu-id="522c0-127">**Figure 10-3**.</span></span> <span data-ttu-id="522c0-128">Errore parziale amplificato da microservizi con lunghe catene di chiamate HTTP sincrone</span><span class="sxs-lookup"><span data-stu-id="522c0-128">Partial failure amplified by microservices with long chains of synchronous HTTP calls</span></span>

<span data-ttu-id="522c0-129">Per ridurre al minimo questo problema, nella sezione "*microservizio asincrona integrazione imporre l'autonomia del microservizio*" (nel capitolo architecture), è possibile usare la comunicazione asincrona tra interno è sconsigliato microservizi.</span><span class="sxs-lookup"><span data-stu-id="522c0-129">To minimize this problem, in the section "*Asynchronous microservice integration enforce microservice’s autonomy*” (in the architecture chapter), we encouraged you to use asynchronous communication across the internal microservices.</span></span> <span data-ttu-id="522c0-130">Viene brevemente descritto più nella sezione successiva.</span><span class="sxs-lookup"><span data-stu-id="522c0-130">We briefly explain more in the next section.</span></span>

<span data-ttu-id="522c0-131">Inoltre, è fondamentale progettare le applicazioni di microservizi e client per gestire gli errori parziali, vale a dire, delle applicazioni microservizi resilienti e client.</span><span class="sxs-lookup"><span data-stu-id="522c0-131">In addition, it is essential that you design your microservices and client applications to handle partial failures—that is, to build resilient microservices and client applications.</span></span>


>[!div class="step-by-step"]
<span data-ttu-id="522c0-132">[Precedente] [Avanti] (parziale-errore-strategies.md) (index.md)</span><span class="sxs-lookup"><span data-stu-id="522c0-132">[Previous] (index.md) [Next] (partial-failure-strategies.md)</span></span>
