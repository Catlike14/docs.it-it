---
title: Implementazione di comunicazione tra microservizi (eventi di integrazione) basata su eventi
description: Architettura di Microservizi .NET per le applicazioni nei contenitori .NET | Implementazione di comunicazione tra microservizi (eventi di integrazione) basata su eventi
keywords: Docker, microservizi, ASP.NET, contenitore
author: CESARDELATORRE
ms.author: wiwagn
ms.date: 05/26/2017
ms.prod: .net-core
ms.technology: dotnet-docker
ms.topic: article
ms.openlocfilehash: e438607ab3549d63b89bef6af64c6723a4cac950
ms.sourcegitcommit: bd1ef61f4bb794b25383d3d72e71041a5ced172e
ms.translationtype: HT
ms.contentlocale: it-IT
ms.lasthandoff: 10/18/2017
---
# <a name="implementing-event-based-communication-between-microservices-integration-events"></a><span data-ttu-id="ac7da-104">Implementazione di comunicazione tra microservizi (eventi di integrazione) basata su eventi</span><span class="sxs-lookup"><span data-stu-id="ac7da-104">Implementing event-based communication between microservices (integration events)</span></span>

<span data-ttu-id="ac7da-105">Come descritto in precedenza, quando si usa la comunicazione basata su eventi, un microservizio pubblica un evento quando rilevanti, ad esempio quando aggiorna un'entità di business.</span><span class="sxs-lookup"><span data-stu-id="ac7da-105">As described earlier, when you use event-based communication, a microservice publishes an event when something notable happens, such as when it updates a business entity.</span></span> <span data-ttu-id="ac7da-106">Altri microservizi sottoscrivono tali eventi.</span><span class="sxs-lookup"><span data-stu-id="ac7da-106">Other microservices subscribe to those events.</span></span> <span data-ttu-id="ac7da-107">Quando un microservizio riceve un evento, è possibile aggiornare il proprio entità aziendali, che è possibile che si verifichino più eventi in corso di pubblicazione.</span><span class="sxs-lookup"><span data-stu-id="ac7da-107">When a microservice receives an event, it can update its own business entities, which might lead to more events being published.</span></span> <span data-ttu-id="ac7da-108">Questo sistema di pubblicazione/sottoscrizione viene in genere eseguito tramite un'implementazione di un bus di eventi.</span><span class="sxs-lookup"><span data-stu-id="ac7da-108">This publish/subscribe system is usually performed by using an implementation of an event bus.</span></span> <span data-ttu-id="ac7da-109">Il bus di eventi può essere progettato come un'interfaccia con l'API necessaria per sottoscrivere e annullare la sottoscrizione a eventi e per pubblicare eventi.</span><span class="sxs-lookup"><span data-stu-id="ac7da-109">The event bus can be designed as an interface with the API needed to subscribe and unsubscribe to events and to publish events.</span></span> <span data-ttu-id="ac7da-110">Può anche avere uno o più implementazioni in base a qualsiasi comunicazione tra processi o messaggistica, ad esempio una coda di messaggi o di un bus di servizio che supporta la comunicazione asincrona e un modello di pubblicazione/sottoscrizione.</span><span class="sxs-lookup"><span data-stu-id="ac7da-110">It can also have one or more implementations based on any inter-process or messaging communication, such as a messaging queue or a service bus that supports asynchronous communication and a publish/subscribe model.</span></span>

<span data-ttu-id="ac7da-111">È possibile utilizzare gli eventi per implementare le transazioni di business che si estendono su più servizi, che offre la coerenza eventuale tra tali servizi.</span><span class="sxs-lookup"><span data-stu-id="ac7da-111">You can use events to implement business transactions that span multiple services, which gives you eventual consistency between those services.</span></span> <span data-ttu-id="ac7da-112">Una transazione alla fine coerente è costituito da una serie di azioni distribuite.</span><span class="sxs-lookup"><span data-stu-id="ac7da-112">An eventually consistent transaction consists of a series of distributed actions.</span></span> <span data-ttu-id="ac7da-113">In ogni azione, il microservizio aggiorna un'entità di business e pubblica un evento che attiva l'azione successiva.</span><span class="sxs-lookup"><span data-stu-id="ac7da-113">At each action, the microservice updates a business entity and publishes an event that triggers the next action.</span></span>

![](./media/image19.PNG)

<span data-ttu-id="ac7da-114">**Figura 8-18**.</span><span class="sxs-lookup"><span data-stu-id="ac7da-114">**Figure 8-18**.</span></span> <span data-ttu-id="ac7da-115">Comunicazione basata sugli eventi in base a un bus di eventi</span><span class="sxs-lookup"><span data-stu-id="ac7da-115">Event-driven communication based on an event bus</span></span>

<span data-ttu-id="ac7da-116">Questa sezione descrive come è possibile implementare questo tipo di comunicazione con .NET tramite un'interfaccia di bus di eventi generici, come illustrato nella figura 8-18.</span><span class="sxs-lookup"><span data-stu-id="ac7da-116">This section describes how you can implement this type of communication with .NET by using a generic event bus interface, as shown in Figure 8-18.</span></span> <span data-ttu-id="ac7da-117">Sono disponibili più implementazioni di potenziali, ognuno dei quali utilizza una tecnologia diversa o dell'infrastruttura, ad esempio RabbitMQ, Azure Service Bus, qualsiasi altro open source di terze parti o bus di servizio esterno.</span><span class="sxs-lookup"><span data-stu-id="ac7da-117">There are multiple potential implementations, each using a different technology or infrastructure such as RabbitMQ, Azure Service Bus, or any other third-party open source or commercial service bus.</span></span>

## <a name="using-message-brokers-and-services-buses-for-production-systems"></a><span data-ttu-id="ac7da-118">Tramite il bus di servizi e i gestori di messaggi per i sistemi di produzione</span><span class="sxs-lookup"><span data-stu-id="ac7da-118">Using message brokers and services buses for production systems</span></span>

<span data-ttu-id="ac7da-119">Come indicato nella sezione architettura, è possibile scegliere tra più tecnologie di messaggistica per l'implementazione del bus di eventi astratti.</span><span class="sxs-lookup"><span data-stu-id="ac7da-119">As noted in the architecture section, you can choose from multiple messaging technologies for implementing your abstract event bus.</span></span> <span data-ttu-id="ac7da-120">Ma queste tecnologie sono a livelli diversi.</span><span class="sxs-lookup"><span data-stu-id="ac7da-120">But these technologies are at different levels.</span></span> <span data-ttu-id="ac7da-121">RabbitMQ, un trasporto di Service broker di messaggistica, ad esempio, è un livello inferiore rispetto a come Azure Service Bus, NServiceBus, MassTransit o Brighter prodotti.</span><span class="sxs-lookup"><span data-stu-id="ac7da-121">For instance, RabbitMQ, a messaging broker transport, is at a lower level than commercial products like Azure Service Bus, NServiceBus, MassTransit, or Brighter.</span></span> <span data-ttu-id="ac7da-122">La maggior parte di questi prodotti possono lavorare su RabbitMQ o Azure Service Bus.</span><span class="sxs-lookup"><span data-stu-id="ac7da-122">Most of these products can work on top of either RabbitMQ or Azure Service Bus.</span></span> <span data-ttu-id="ac7da-123">La scelta del prodotto dipende il numero di funzionalità e la scalabilità quanto out-of-the-box è necessario per l'applicazione.</span><span class="sxs-lookup"><span data-stu-id="ac7da-123">Your choice of product depends on how many features and how much out-of-the-box scalability you need for your application.</span></span>

<span data-ttu-id="ac7da-124">Per implementare solo un evento bus di prova per l'ambiente di sviluppo, come nell'esempio eShopOnContainers, un'implementazione semplice sopra RabbitMQ in esecuzione come un contenitore potrebbe essere sufficiente.</span><span class="sxs-lookup"><span data-stu-id="ac7da-124">For implementing just an event bus proof-of-concept for your development environment, as in the eShopOnContainers sample, a simple implementation on top of RabbitMQ running as a container might be enough.</span></span> <span data-ttu-id="ac7da-125">Ma per mission-critical e sistemi di produzione che richiedono scalabilità elevata, può essere opportuno valutare e utilizzare Azure Service Fabric.</span><span class="sxs-lookup"><span data-stu-id="ac7da-125">But for mission-critical and production systems that need high scalability, you might want to evaluate and use Azure Service Fabric.</span></span> <span data-ttu-id="ac7da-126">Se è necessario astrazioni di alto livello e le funzionalità più dettagliate come [sagas](https://docs.particular.net/nservicebus/sagas/) per processi a esecuzione prolungata che consentono uno sviluppo distribuito bus più semplice e altri servizi commerciali e open-source come NServiceBus, MassTransit, e Sono più opportuno valutare.</span><span class="sxs-lookup"><span data-stu-id="ac7da-126">If you require high-level abstractions and richer features like [sagas](https://docs.particular.net/nservicebus/sagas/) for long-running processes that make distributed development easier, other commercial and open-source service buses like NServiceBus, MassTransit, and Brighter are worth evaluating.</span></span> <span data-ttu-id="ac7da-127">Naturalmente, è sempre possibile creare funzionalità personalizzate bus di servizio su tecnologie di livello inferiore come RabbitMQ e Docker, ma il lavoro necessario per rifare potrebbe essere troppo costoso per un'applicazione personalizzati dell'organizzazione.</span><span class="sxs-lookup"><span data-stu-id="ac7da-127">Of course, you could always build your own service bus features on top of lower-level technologies like RabbitMQ and Docker, but the work needed to reinvent the wheel might be too costly for a custom enterprise application.</span></span>

<span data-ttu-id="ac7da-128">Per riepilogare: l'astrazioni di bus di eventi campione e l'implementazione mostrata nell'esempio di eShopOnContainers deve essere utilizzato solo come un modello di prova.</span><span class="sxs-lookup"><span data-stu-id="ac7da-128">To reiterate: the sample event bus abstractions and implementation showcased in the eShopOnContainers sample are intended to be used only as a proof of concept.</span></span> <span data-ttu-id="ac7da-129">Dopo aver scelto che si desidera la comunicazione asincrona e basata sugli eventi, come illustrato nella sezione corrente, è necessario scegliere il prodotto di bus di servizio che meglio si adatta alle esigenze.</span><span class="sxs-lookup"><span data-stu-id="ac7da-129">Once you have decided that you want to have asynchronous and event-driven communication, as explained in the current section, you should choose the service bus product that best fits your needs.</span></span>

## <a name="integration-events"></a><span data-ttu-id="ac7da-130">Eventi di integrazione</span><span class="sxs-lookup"><span data-stu-id="ac7da-130">Integration events</span></span>

<span data-ttu-id="ac7da-131">Eventi di integrazione vengono utilizzati per riportare lo stato di dominio di sincronizzazione tra più microservizi o sistemi esterni.</span><span class="sxs-lookup"><span data-stu-id="ac7da-131">Integration events are used for bringing domain state in sync across multiple microservices or external systems.</span></span> <span data-ttu-id="ac7da-132">Questa operazione viene eseguita tramite la pubblicazione di eventi di integrazione di fuori di microservizio.</span><span class="sxs-lookup"><span data-stu-id="ac7da-132">This is done by publishing integration events outside the microservice.</span></span> <span data-ttu-id="ac7da-133">Quando un evento viene pubblicato in più microservizi ricevitore (per tante microservizi come sottoscritto l'evento di integrazione), il gestore eventi appropriato in ogni microservizio ricevitore gestisce l'evento.</span><span class="sxs-lookup"><span data-stu-id="ac7da-133">When an event is published to multiple receiver microservices (to as many microservices as are subscribed to the integration event), the appropriate event handler in each receiver microservice handles the event.</span></span>

<span data-ttu-id="ac7da-134">Un evento di integrazione è sostanzialmente una classe che contiene di dati, come nell'esempio seguente:</span><span class="sxs-lookup"><span data-stu-id="ac7da-134">An integration event is basically a data-holding class, as in the following example:</span></span>

```csharp
public class ProductPriceChangedIntegrationEvent : IntegrationEvent
{
    public int ProductId { get; private set; }
    public decimal NewPrice { get; private set; }
    public decimal OldPrice { get; private set; }

    public ProductPriceChangedIntegrationEvent(int productId, decimal newPrice,
        decimal oldPrice)
    {
        ProductId = productId;
        NewPrice = newPrice;
        OldPrice = oldPrice;
    }
}
```

<span data-ttu-id="ac7da-135">La classe di evento di integrazione può essere semplice. ad esempio, potrebbe contenere un GUID per il relativo ID.</span><span class="sxs-lookup"><span data-stu-id="ac7da-135">The integration event class can be simple; for example, it might contain a GUID for its ID.</span></span>

<span data-ttu-id="ac7da-136">Gli eventi di integrazione possono essere definiti a livello di applicazione di ogni microservizio, in modo che vengono disaccoppiati da altri microservizi, in modo analogo a come ViewModel sono definiti nel server e client.</span><span class="sxs-lookup"><span data-stu-id="ac7da-136">The integration events can be defined at the application level of each microservice, so they are decoupled from other microservices, in a way comparable to how ViewModels are defined in the server and client.</span></span> <span data-ttu-id="ac7da-137">Che cos'è consigliabile non condivide una libreria di eventi di integrazione comuni tra più microservizi; Questa operazione potrebbe essere accoppiamento tra tali microservizi con una raccolta di dati singolo evento definizione.</span><span class="sxs-lookup"><span data-stu-id="ac7da-137">What is not recommended is sharing a common integration events library across multiple microservices; doing that would be coupling those microservices with a single event definition data library.</span></span> <span data-ttu-id="ac7da-138">Non si desidera eseguire questa operazione per gli stessi motivi non si desidera condividere un comune modello di dominio più microservizi: microservizi devono essere completamente autonomo.</span><span class="sxs-lookup"><span data-stu-id="ac7da-138">You do not want to do that for the same reasons that you do not want to share a common domain model across multiple microservices: microservices must be completely autonomous.</span></span>

<span data-ttu-id="ac7da-139">Esistono solo alcuni tipi di librerie, che è necessario condividere microservizi.</span><span class="sxs-lookup"><span data-stu-id="ac7da-139">There are only a few kinds of libraries you should share across microservices.</span></span> <span data-ttu-id="ac7da-140">Uno è librerie di blocchi dell'applicazione finale, ad esempio il [API client di Bus di eventi](https://github.com/dotnet-architecture/eShopOnContainers/tree/master/src/BuildingBlocks/EventBus), come nel eShopOnContainers.</span><span class="sxs-lookup"><span data-stu-id="ac7da-140">One is libraries that are final application blocks, like the [Event Bus client API](https://github.com/dotnet-architecture/eShopOnContainers/tree/master/src/BuildingBlocks/EventBus), as in eShopOnContainers.</span></span> <span data-ttu-id="ac7da-141">Un vantaggio è librerie che costituiscono gli strumenti che può essere condivisa anche come componenti di NuGet, come i serializzatori JSON.</span><span class="sxs-lookup"><span data-stu-id="ac7da-141">Another is libraries that constitute tools that could also be shared as NuGet components, like JSON serializers.</span></span>

## <a name="the-event-bus"></a><span data-ttu-id="ac7da-142">Il bus di eventi</span><span class="sxs-lookup"><span data-stu-id="ac7da-142">The event bus</span></span>

<span data-ttu-id="ac7da-143">Un bus di eventi consente la comunicazione di pubblicazione/sottoscrizione-stile tra microservizi senza i componenti in modo esplicito essere a conoscenza della loro, come illustrato nella figura 8-19.</span><span class="sxs-lookup"><span data-stu-id="ac7da-143">An event bus allows publish/subscribe-style communication between microservices without requiring the components to explicitly be aware of each other, as shown in Figure 8-19.</span></span>

![](./media/image20.png)

<span data-ttu-id="ac7da-144">**Figura 8-19**.</span><span class="sxs-lookup"><span data-stu-id="ac7da-144">**Figure 8-19**.</span></span> <span data-ttu-id="ac7da-145">Nozioni di base con un bus di eventi di pubblicazione/sottoscrizione</span><span class="sxs-lookup"><span data-stu-id="ac7da-145">Publish/subscribe basics with an event bus</span></span>

<span data-ttu-id="ac7da-146">Il bus di eventi è correlato all'Observer (modello) e la pubblicazione-modello di sottoscrizione.</span><span class="sxs-lookup"><span data-stu-id="ac7da-146">The event bus is related to the Observer pattern and the publish-subscribe pattern.</span></span>

### <a name="observer-pattern"></a><span data-ttu-id="ac7da-147">Observer (modello)</span><span class="sxs-lookup"><span data-stu-id="ac7da-147">Observer pattern</span></span>

<span data-ttu-id="ac7da-148">Nel [osservatore](https://en.wikipedia.org/wiki/Observer_pattern), l'oggetto primario (noto come Observable) notifica agli altri oggetti interessati (noti come osservatori) con le informazioni pertinenti (eventi).</span><span class="sxs-lookup"><span data-stu-id="ac7da-148">In the [Observer pattern](https://en.wikipedia.org/wiki/Observer_pattern), your primary object (known as the Observable) notifies other interested objects (known as Observers) with relevant information (events).</span></span>

### <a name="publish-subscribe-pubsub-pattern"></a><span data-ttu-id="ac7da-149">Modello pubblicazione-sottoscrizione (Pub/Sub)</span><span class="sxs-lookup"><span data-stu-id="ac7da-149">Publish-subscribe (Pub/Sub) pattern</span></span> 

<span data-ttu-id="ac7da-150">Lo scopo del [modello Pub/Sub](https://msdn.microsoft.com/en-us/library/ff649664.aspx) corrisponde al modello di osservatore: si desidera notificare agli altri servizi quando si verificano determinati eventi.</span><span class="sxs-lookup"><span data-stu-id="ac7da-150">The purpose of the [Pub/Sub pattern](https://msdn.microsoft.com/en-us/library/ff649664.aspx) is the same as the Observer pattern: you want to notify other services when certain events take place.</span></span> <span data-ttu-id="ac7da-151">Ma non esiste una differenza importante semantica tra i modelli di osservatore e pubblicazione/sottoscrizione.</span><span class="sxs-lookup"><span data-stu-id="ac7da-151">But there is an important semantic difference between the Observer and Pub/Sub patterns.</span></span> <span data-ttu-id="ac7da-152">Nel modello di pubblicazione/sottoscrizione, è attiva la diffusione messaggi.</span><span class="sxs-lookup"><span data-stu-id="ac7da-152">In the Pub/Sub pattern, the focus is on broadcasting messages.</span></span> <span data-ttu-id="ac7da-153">Al contrario, nel modello Observer, Observable non riconosce che gli eventi verranno, solo che che sono state registrate out. In altre parole, Observable (server di pubblicazione) non riconosce che gli osservatori (sottoscrittori).</span><span class="sxs-lookup"><span data-stu-id="ac7da-153">In contrast, in the Observer pattern, the Observable does not know who the events are going to, just that they have gone out. In other words, the Observable (the publisher) does not know who the Observers (the subscribers) are.</span></span>

### <a name="the-middleman-or-event-bus"></a><span data-ttu-id="ac7da-154">Il bus di eventi o di intermediario</span><span class="sxs-lookup"><span data-stu-id="ac7da-154">The middleman or event bus</span></span> 

<span data-ttu-id="ac7da-155">Come è possibile ottenere anonimato tra server di pubblicazione e sottoscrittore?</span><span class="sxs-lookup"><span data-stu-id="ac7da-155">How do you achieve anonymity between publisher and subscriber?</span></span> <span data-ttu-id="ac7da-156">Un modo semplice è fare in modo che un intermediario di tutte le comunicazioni.</span><span class="sxs-lookup"><span data-stu-id="ac7da-156">An easy way is let a middleman take care of all the communication.</span></span> <span data-ttu-id="ac7da-157">Un bus di eventi è un intermediario di questo tipo.</span><span class="sxs-lookup"><span data-stu-id="ac7da-157">An event bus is one such middleman.</span></span>

<span data-ttu-id="ac7da-158">Un bus di eventi è in genere costituito da due parti:</span><span class="sxs-lookup"><span data-stu-id="ac7da-158">An event bus is typically composed of two parts:</span></span>

-   <span data-ttu-id="ac7da-159">Astrazione o interfaccia.</span><span class="sxs-lookup"><span data-stu-id="ac7da-159">The abstraction or interface.</span></span>

-   <span data-ttu-id="ac7da-160">Uno o più implementazioni.</span><span class="sxs-lookup"><span data-stu-id="ac7da-160">One or more implementations.</span></span>

<span data-ttu-id="ac7da-161">Nella figura 8-19 è possibile visualizzare, dal punto di vista dell'applicazione, il bus di eventi è di un canale di pubblicazione/sottoscrizione.</span><span class="sxs-lookup"><span data-stu-id="ac7da-161">In Figure 8-19 you can see how, from an application point of view, the event bus is nothing more than a Pub/Sub channel.</span></span> <span data-ttu-id="ac7da-162">La modalità di implementazione di questa comunicazione asincrona può variare.</span><span class="sxs-lookup"><span data-stu-id="ac7da-162">The way you implement this asynchronous communication can vary.</span></span> <span data-ttu-id="ac7da-163">Ciò può avere più implementazioni in modo che sia possibile passare tra di esse, a seconda dei requisiti di ambiente (ad esempio, di produzione e gli ambienti di sviluppo).</span><span class="sxs-lookup"><span data-stu-id="ac7da-163">It can have multiple implementations so that you can swap between them, depending on the environment requirements (for example, production versus development environments).</span></span>

<span data-ttu-id="ac7da-164">Nella figura 8-20 è possibile visualizzare un'astrazione di un bus di eventi con più implementazioni in base all'infrastruttura di messaggistica di tecnologie quali RabbitMQ, Bus di servizio di Azure o altri bus di servizio NServiceBus, MassTransit, ecc.</span><span class="sxs-lookup"><span data-stu-id="ac7da-164">In Figure 8-20 you can see an abstraction of an event bus with multiple implementations based on infrastructure messaging technologies like RabbitMQ, Azure Service Bus, or other service buses like NServiceBus, MassTransit, etc.</span></span>

![](./media/image21.png)

<span data-ttu-id="ac7da-165">**Figura 8 - 20.**</span><span class="sxs-lookup"><span data-stu-id="ac7da-165">**Figure 8- 20.**</span></span> <span data-ttu-id="ac7da-166">Più implementazioni del bus di eventi</span><span class="sxs-lookup"><span data-stu-id="ac7da-166">Multiple implementations of an event bus</span></span>

<span data-ttu-id="ac7da-167">Tuttavia, come evidenziato in precedenza, mediante astrazioni (l'interfaccia di bus di eventi) è possibile solo se sono necessarie funzionalità di bus di eventi di base supportate dalle astrazioni.</span><span class="sxs-lookup"><span data-stu-id="ac7da-167">However, as highlighted previously, using abstractions (the event bus interface) is possible only if you need basic event bus features supported by your abstractions.</span></span> <span data-ttu-id="ac7da-168">Se è necessario maggiori funzionalità di bus di servizio, utilizzare probabilmente all'API fornita da del bus di servizio preferito anziché la propria astrazioni.</span><span class="sxs-lookup"><span data-stu-id="ac7da-168">If you need richer service bus features, you should probably use the API provided by your preferred service bus instead of your own abstractions.</span></span>

### <a name="defining-an-event-bus-interface"></a><span data-ttu-id="ac7da-169">Definizione di un'interfaccia di bus di eventi</span><span class="sxs-lookup"><span data-stu-id="ac7da-169">Defining an event bus interface</span></span>

<span data-ttu-id="ac7da-170">Iniziamo con un codice di implementazione per l'interfaccia del bus di eventi e le implementazioni possibili per scopi di esplorazione.</span><span class="sxs-lookup"><span data-stu-id="ac7da-170">Let’s start with some implementation code for the event bus interface and possible implementations for exploration purposes.</span></span> <span data-ttu-id="ac7da-171">L'interfaccia deve essere generico e semplice, come l'interfaccia seguente.</span><span class="sxs-lookup"><span data-stu-id="ac7da-171">The interface should be generic and straightforward, as in the following interface.</span></span>

```csharp
public interface IEventBus
{
    void Publish(IntegrationEvent @event);
    void Subscribe<T>(IIntegrationEventHandler<T> handler)
        where T: IntegrationEvent;

    void Unsubscribe<T>(IIntegrationEventHandler<T> handler)
        where T : IntegrationEvent;
}
```

<span data-ttu-id="ac7da-172">Il metodo di pubblicazione è semplice.</span><span class="sxs-lookup"><span data-stu-id="ac7da-172">The Publish method is straightforward.</span></span> <span data-ttu-id="ac7da-173">Il bus di eventi verrà trasmesso l'evento di integrazione passato a qualsiasi microservizio sottoscritta l'evento.</span><span class="sxs-lookup"><span data-stu-id="ac7da-173">The event bus will broadcast the integration event passed to it to any microservice subscribed to that event.</span></span> <span data-ttu-id="ac7da-174">Questo metodo viene utilizzato da microservizio che pubblica l'evento.</span><span class="sxs-lookup"><span data-stu-id="ac7da-174">This method is used by the microservice that is publishing the event.</span></span>

<span data-ttu-id="ac7da-175">Viene utilizzato il metodo di sottoscrizione da microservizi che desidera ricevere gli eventi.</span><span class="sxs-lookup"><span data-stu-id="ac7da-175">The Subscribe method is used by the microservices that want to receive events.</span></span> <span data-ttu-id="ac7da-176">Questo metodo è costituito da due parti.</span><span class="sxs-lookup"><span data-stu-id="ac7da-176">This method has two parts.</span></span> <span data-ttu-id="ac7da-177">Il primo è l'evento di integrazione per la sottoscrizione (IntegrationEvent).</span><span class="sxs-lookup"><span data-stu-id="ac7da-177">The first is the integration event to subscribe to (IntegrationEvent).</span></span> <span data-ttu-id="ac7da-178">La seconda parte è il gestore di eventi di integrazione (o metodo di callback) da chiamare (IIntegrationEventHandler&lt;T&gt;) quando il microservizio riceve il messaggio di evento di integrazione.</span><span class="sxs-lookup"><span data-stu-id="ac7da-178">The second part is the integration event handler (or callback method) to be called (IIntegrationEventHandler&lt;T&gt;) when the microservice receives that integration event message.</span></span>


>[!div class="step-by-step"]
<span data-ttu-id="ac7da-179">[Precedente] (container.md-server-database) [Avanti] (rabbitmq-event-bus-development-test-environment.md)</span><span class="sxs-lookup"><span data-stu-id="ac7da-179">[Previous] (database-server-container.md) [Next] (rabbitmq-event-bus-development-test-environment.md)</span></span>
