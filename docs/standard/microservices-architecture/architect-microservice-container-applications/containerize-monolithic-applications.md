---
title: Applicazioni monolitiche containerizing
description: Architettura di Microservizi .NET per le applicazioni nei contenitori .NET | Applicazioni monolitiche containerizing
keywords: Docker, microservizi, ASP.NET, contenitore
author: CESARDELATORRE
ms.author: wiwagn
ms.date: 05/26/2017
ms.prod: .net-core
ms.technology: dotnet-docker
ms.topic: article
ms.openlocfilehash: 11e2c24403b9b61584e424696c844e00e5d34b03
ms.sourcegitcommit: 4f3fef493080a43e70e951223894768d36ce430a
ms.translationtype: HT
ms.contentlocale: it-IT
ms.lasthandoff: 11/21/2017
---
# <a name="containerizing-monolithic-applications"></a><span data-ttu-id="19ad8-104">Applicazioni monolitiche containerizing</span><span class="sxs-lookup"><span data-stu-id="19ad8-104">Containerizing monolithic applications</span></span>

<span data-ttu-id="19ad8-105">Si potrebbe voler creare applicazione web distribuito monolithically singolo o un servizio e distribuirlo come un contenitore.</span><span class="sxs-lookup"><span data-stu-id="19ad8-105">You might want to build a single, monolithically deployed web application or service and deploy it as a container.</span></span> <span data-ttu-id="19ad8-106">L'applicazione potrebbe non essere internamente monolitico, ma strutturato da diverse librerie, componenti o livelli anche (livello di applicazione, il livello di dominio, il livello di accesso ai dati e così via).</span><span class="sxs-lookup"><span data-stu-id="19ad8-106">The application itself might not be internally monolithic, but structured as several libraries, components, or even layers (application layer, domain layer, data-access layer, etc.).</span></span> <span data-ttu-id="19ad8-107">Esternamente, tuttavia, è un singolo contenitore, un singolo processo, una singola applicazione web o un singolo servizio.</span><span class="sxs-lookup"><span data-stu-id="19ad8-107">Externally, however, it is a single container—a single process, a single web application, or a single service.</span></span>

<span data-ttu-id="19ad8-108">Per gestire questo modello, si distribuisce un singolo contenitore per rappresentare l'applicazione.</span><span class="sxs-lookup"><span data-stu-id="19ad8-108">To manage this model, you deploy a single container to represent the application.</span></span> <span data-ttu-id="19ad8-109">Per applicare la scalabilità verticale, è sufficiente aggiungere più copie con un bilanciamento del carico in primo piano.</span><span class="sxs-lookup"><span data-stu-id="19ad8-109">To scale up, you just add more copies with a load balancer in front.</span></span> <span data-ttu-id="19ad8-110">La semplicità proviene da un'unica distribuzione in un singolo contenitore o di una macchina virtuale di gestione.</span><span class="sxs-lookup"><span data-stu-id="19ad8-110">The simplicity comes from managing a single deployment in a single container or VM.</span></span>

![](./media/image1.png)

<span data-ttu-id="19ad8-111">**Figura 4-1**.</span><span class="sxs-lookup"><span data-stu-id="19ad8-111">**Figure 4-1**.</span></span> <span data-ttu-id="19ad8-112">Esempio dell'architettura di un'applicazione monolitica nei contenitori</span><span class="sxs-lookup"><span data-stu-id="19ad8-112">Example of the architecture of a containerized monolithic application</span></span>

<span data-ttu-id="19ad8-113">È possibile includere più componenti, librerie o livelli interni in ogni contenitore, come illustrato nella figura 4-1.</span><span class="sxs-lookup"><span data-stu-id="19ad8-113">You can include multiple components, libraries, or internal layers in each container, as illustrated in Figure 4-1.</span></span> <span data-ttu-id="19ad8-114">Tuttavia, questo modello monolitico potrebbe essere in conflitto con il principio di contenitore "un contenitore consente di eseguire un'operazione e non un processo", ma potrebbe essere adatta per alcuni casi.</span><span class="sxs-lookup"><span data-stu-id="19ad8-114">However, this monolithic pattern might conflict with the container principle “a container does one thing, and does it in one process”, but might be ok for some cases.</span></span>

<span data-ttu-id="19ad8-115">Lo svantaggio di questo approccio diventa evidente se si estende l'applicazione, che li richiede di scala.</span><span class="sxs-lookup"><span data-stu-id="19ad8-115">The downside of this approach becomes evident if the application grows, requiring it to scale.</span></span> <span data-ttu-id="19ad8-116">Se è possibile ridimensionare l'intera applicazione, non è effettivamente un problema.</span><span class="sxs-lookup"><span data-stu-id="19ad8-116">If the entire application can scale, it is not really a problem.</span></span> <span data-ttu-id="19ad8-117">Tuttavia, nella maggior parte dei casi, solo alcune parti dell'applicazione sono i punti di riduzione che richiedono scalabilità, mentre gli altri componenti sono utilizzate minore.</span><span class="sxs-lookup"><span data-stu-id="19ad8-117">However, in most cases, just a few parts of the application are the choke points that requiring scaling, while other components are used less.</span></span>

<span data-ttu-id="19ad8-118">Ad esempio, in un'applicazione di e-commerce tipico, è probabilmente necessario ridimensionare il sottosistema di informazioni di prodotto, poiché molti clienti più sfogliare i prodotti di acquistare le licenze.</span><span class="sxs-lookup"><span data-stu-id="19ad8-118">For example, in a typical e-commerce application, you likely need to scale the product information subsystem, because many more customers browse products than purchase them.</span></span> <span data-ttu-id="19ad8-119">Numero di clienti Usa carrello di utilizzare la pipeline di pagamento.</span><span class="sxs-lookup"><span data-stu-id="19ad8-119">More customers use their basket than use the payment pipeline.</span></span> <span data-ttu-id="19ad8-120">I clienti meno aggiungono commenti o visualizzarne la cronologia di acquisto.</span><span class="sxs-lookup"><span data-stu-id="19ad8-120">Fewer customers add comments or view their purchase history.</span></span> <span data-ttu-id="19ad8-121">E potrebbe essere un numero limitato di dipendenti, che devono gestire il contenuto e le campagne di marketing.</span><span class="sxs-lookup"><span data-stu-id="19ad8-121">And you might have only a handful of employees, that need to manage the content and marketing campaigns.</span></span> <span data-ttu-id="19ad8-122">Se si modifica la scala progettazione monolitica, tutto il codice per le diverse attività viene distribuito più volte e scala in stesso grado.</span><span class="sxs-lookup"><span data-stu-id="19ad8-122">If you scale the monolithic design, all the code for these different tasks is deployed multiple times and scaled at the same grade.</span></span>

<span data-ttu-id="19ad8-123">Esistono diversi modi per scalare un'applicazione, la duplicazione orizzontale diverse aree di dati dell'applicazione e partizionamento concetti simili di business o di divisione.</span><span class="sxs-lookup"><span data-stu-id="19ad8-123">There are multiple ways to scale an application—horizontal duplication, splitting different areas of the application, and partitioning similar business concepts or data.</span></span> <span data-ttu-id="19ad8-124">Tuttavia, oltre il problema di scalabilità di tutti i componenti, le modifiche apportate a un singolo componente richiedono completa la riesecuzione del test dell'intera applicazione e una ridistribuzione completa di tutte le istanze.</span><span class="sxs-lookup"><span data-stu-id="19ad8-124">But, in addition to the problem of scaling all components, changes to a single component require complete retesting of the entire application, and a complete redeployment of all the instances.</span></span>

<span data-ttu-id="19ad8-125">Tuttavia, l'approccio monolitico è comune, in quanto lo sviluppo dell'applicazione è più semplice per gli approcci di microservizi inizialmente.</span><span class="sxs-lookup"><span data-stu-id="19ad8-125">However, the monolithic approach is common, because the development of the application is initially easier than for microservices approaches.</span></span> <span data-ttu-id="19ad8-126">Di conseguenza, molte organizzazioni sviluppano utilizzando questo approccio architetturale.</span><span class="sxs-lookup"><span data-stu-id="19ad8-126">Thus, many organizations develop using this architectural approach.</span></span> <span data-ttu-id="19ad8-127">Sebbene in alcune organizzazioni hanno buone risultati insufficienti, altri raggiunge i limiti.</span><span class="sxs-lookup"><span data-stu-id="19ad8-127">While some organizations have had good enough results, others are hitting limits.</span></span> <span data-ttu-id="19ad8-128">Molte organizzazioni progettavano le applicazioni utilizzando questo modello perché gli strumenti e l'infrastruttura rendeva troppo difficile per compilare un servizio architetture orientate ai (servizi SOA), anni e non visualizzano la necessità, fino a quando l'applicazione aumento delle dimensioni.</span><span class="sxs-lookup"><span data-stu-id="19ad8-128">Many organizations designed their applications using this model because tools and infrastructure made it too difficult to build service oriented architectures (SOA) years ago, and they did not see the need—until the application grew.</span></span>

<span data-ttu-id="19ad8-129">Dal punto di vista dell'infrastruttura, ogni server può eseguire molte applicazioni all'interno dello stesso host e dispone di un rapporto accettabile di efficienza di utilizzo di risorse, come illustrato nella figura 4-2.</span><span class="sxs-lookup"><span data-stu-id="19ad8-129">From an infrastructure perspective, each server can run many applications within the same host and have an acceptable ratio of efficiency in resources usage, as shown in Figure 4-2.</span></span>

![](./media/image2.png)

<span data-ttu-id="19ad8-130">**Figura 4-2**.</span><span class="sxs-lookup"><span data-stu-id="19ad8-130">**Figure 4-2**.</span></span> <span data-ttu-id="19ad8-131">Approccio monolitico: Host che esegue più applicazioni, ciascuna applicazione in esecuzione come un contenitore</span><span class="sxs-lookup"><span data-stu-id="19ad8-131">Monolithic approach: Host running multiple apps, each app running as a container</span></span>

<span data-ttu-id="19ad8-132">Applicazioni monolitiche in Microsoft Azure possono essere distribuite utilizzando macchine virtuali dedicate per ogni istanza.</span><span class="sxs-lookup"><span data-stu-id="19ad8-132">Monolithic applications in Microsoft Azure can be deployed using dedicated VMs for each instance.</span></span> <span data-ttu-id="19ad8-133">Inoltre, l'uso [set di scalabilità di macchine Virtuali di Azure](https://docs.microsoft.com/azure/virtual-machine-scale-sets/), è possibile ridimensionare le macchine virtuali.</span><span class="sxs-lookup"><span data-stu-id="19ad8-133">Additionally, using [Azure VM Scale Sets](https://docs.microsoft.com/azure/virtual-machine-scale-sets/), you can easily scale the VMs.</span></span> <span data-ttu-id="19ad8-134">[Servizio App di Azure](https://azure.microsoft.com/services/app-service/) può anche eseguire applicazioni monolitiche e scalare facilmente istanze senza che sia necessario gestire le macchine virtuali.</span><span class="sxs-lookup"><span data-stu-id="19ad8-134">[Azure App Service](https://azure.microsoft.com/services/app-service/) can also run monolithic applications and easily scale instances without requiring you to manage the VMs.</span></span> <span data-ttu-id="19ad8-135">A partire da 2016, servizi di App di Azure può eseguito singole istanze di contenitori di Docker, nonché semplificando la distribuzione.</span><span class="sxs-lookup"><span data-stu-id="19ad8-135">Since 2016, Azure App Services can run single instances of Docker containers as well, simplifying deployment.</span></span>

<span data-ttu-id="19ad8-136">Come un ambiente QA o un ambiente di produzione limitato, è possibile distribuire un host Docker più macchine virtuali e bilanciare mediante il servizio di bilanciamento Azure, come illustrato nella figura 4-3.</span><span class="sxs-lookup"><span data-stu-id="19ad8-136">As a QA environment or a limited production environment, you can deploy multiple Docker host VMs and balance them using the Azure balancer, as shown in Figure 4-3.</span></span> <span data-ttu-id="19ad8-137">Ciò consente di gestire la scalabilità con un approccio con granularità grossolana, poiché l'intera applicazione risiede all'interno di un singolo contenitore.</span><span class="sxs-lookup"><span data-stu-id="19ad8-137">This lets you manage scaling with a coarse-grain approach, because the whole application lives within a single container.</span></span>

![](./media/image3.png)

<span data-ttu-id="19ad8-138">**Figura 4-3**.</span><span class="sxs-lookup"><span data-stu-id="19ad8-138">**Figure 4-3**.</span></span> <span data-ttu-id="19ad8-139">Esempio di più host, la scalabilità dell'applicazione di un singolo contenitore</span><span class="sxs-lookup"><span data-stu-id="19ad8-139">Example of multiple hosts scaling up a single container application</span></span>

<span data-ttu-id="19ad8-140">Distribuzione di host diversi può essere gestita con le tecniche tradizionali di distribuzione.</span><span class="sxs-lookup"><span data-stu-id="19ad8-140">Deployment to the various hosts can be managed with traditional deployment techniques.</span></span> <span data-ttu-id="19ad8-141">Host docker possono essere gestiti con comandi come `docker run` o `docker-compose` eseguiti manualmente o tramite l'automazione, ad esempio le pipeline di recapito continuo (CD).</span><span class="sxs-lookup"><span data-stu-id="19ad8-141">Docker hosts can be managed with commands like `docker run` or `docker-compose` performed manually, or through automation such as continuous delivery (CD) pipelines.</span></span>

## <a name="deploying-a-monolithic-application-as-a-container"></a><span data-ttu-id="19ad8-142">Distribuzione di un'applicazione monolitica come un contenitore</span><span class="sxs-lookup"><span data-stu-id="19ad8-142">Deploying a monolithic application as a container</span></span>

<span data-ttu-id="19ad8-143">Esistono vantaggi derivanti dall'utilizzo di contenitori per gestire le distribuzioni applicazione monolitico.</span><span class="sxs-lookup"><span data-stu-id="19ad8-143">There are benefits to using containers to manage monolithic application deployments.</span></span> <span data-ttu-id="19ad8-144">La scalabilità di istanze di contenitori è molto più veloce e semplice rispetto alla distribuzione di macchine virtuali aggiuntive.</span><span class="sxs-lookup"><span data-stu-id="19ad8-144">Scaling container instances is far faster and easier than deploying additional VMs.</span></span> <span data-ttu-id="19ad8-145">Anche se si utilizza il set di scalabilità di macchine Virtuali, le macchine virtuali richiedere ora di inizio.</span><span class="sxs-lookup"><span data-stu-id="19ad8-145">Even if you use VM Scale Sets, VMs take time to start.</span></span> <span data-ttu-id="19ad8-146">Quando viene distribuita come le istanze dell'applicazione tradizionale anziché contenitori, la configurazione dell'applicazione viene gestita come parte della macchina virtuale, che non è ideale.</span><span class="sxs-lookup"><span data-stu-id="19ad8-146">When deployed as traditional application instances instead of containers, the configuration of the application is managed as part of the VM, which is not ideal.</span></span>

<span data-ttu-id="19ad8-147">Distribuzione degli aggiornamenti, come immagini Docker è molto più veloce e rete efficiente.</span><span class="sxs-lookup"><span data-stu-id="19ad8-147">Deploying updates as Docker images is far faster and network efficient.</span></span> <span data-ttu-id="19ad8-148">Le immagini docker iniziano in genere espresso in secondi, velocizzando le implementazioni.</span><span class="sxs-lookup"><span data-stu-id="19ad8-148">Docker images typically start in seconds, which speeds rollouts.</span></span> <span data-ttu-id="19ad8-149">Chiudere un'istanza di immagine di Docker è facile come emittente un `docker stop` comandi e in genere viene completato in meno di un secondo.</span><span class="sxs-lookup"><span data-stu-id="19ad8-149">Tearing down a Docker image instance is as easy as issuing a `docker stop` command, and typically completes in less than a second.</span></span>

<span data-ttu-id="19ad8-150">Poiché i contenitori sono modificabili in base alla progettazione, è non necessario mai preoccuparsi di macchine virtuali danneggiate.</span><span class="sxs-lookup"><span data-stu-id="19ad8-150">Because containers are immutable by design, you never need to worry about corrupted VMs.</span></span> <span data-ttu-id="19ad8-151">Al contrario, gli script di aggiornamento per una macchina virtuale abbia dimenticato di account per alcuni specifici file di configurazione o su disco.</span><span class="sxs-lookup"><span data-stu-id="19ad8-151">In contrast, update scripts for a VM might forget to account for some specific configuration or file left on disk.</span></span>

<span data-ttu-id="19ad8-152">Mentre monolitiche applicazioni possono trarre vantaggio da Docker, ci stiamo tocca solo sui vantaggi.</span><span class="sxs-lookup"><span data-stu-id="19ad8-152">While monolithic applications can benefit from Docker, we are touching only on the benefits.</span></span> <span data-ttu-id="19ad8-153">Vantaggi aggiuntivi di gestione dei contenitori provengono dalla distribuzione con orchestrators contenitore, gestire le varie istanze e ciclo di vita di ogni istanza del contenitore.</span><span class="sxs-lookup"><span data-stu-id="19ad8-153">Additional benefits of managing containers come from deploying with container orchestrators, which manage the various instances and lifecycle of each container instance.</span></span> <span data-ttu-id="19ad8-154">L'interruzione dell'applicazione monolitica in sottosistemi che possono essere ridimensionate, sviluppato e distribuito singolarmente è il punto di ingresso nell'area di autenticazione di microservizi.</span><span class="sxs-lookup"><span data-stu-id="19ad8-154">Breaking up the monolithic application into subsystems that can be scaled, developed, and deployed individually is your entry point into the realm of microservices.</span></span>

## <a name="publishing-a-single-container-based-application-to-azure-app-service"></a><span data-ttu-id="19ad8-155">Pubblicazione di un'applicazione basato su singolo contenitore al servizio App di Azure</span><span class="sxs-lookup"><span data-stu-id="19ad8-155">Publishing a single-container-based application to Azure App Service</span></span>

<span data-ttu-id="19ad8-156">Se si desidera ottenere la convalida di un contenitore distribuito in Azure o quando un'applicazione è semplicemente un'applicazione contenitore di singolo servizio App di Azure fornisce un ottimo modo per fornire servizi scalabili basato su singolo contenitore.</span><span class="sxs-lookup"><span data-stu-id="19ad8-156">Whether you want to get validation of a container deployed to Azure or when an application is simply a single-container application, Azure App Service provides a great way to provide scalable single-container-based services.</span></span> <span data-ttu-id="19ad8-157">Utilizzo del servizio App di Azure è semplice.</span><span class="sxs-lookup"><span data-stu-id="19ad8-157">Using Azure App Service is simple.</span></span> <span data-ttu-id="19ad8-158">Fornisce integrazione ottima con Git per renderlo più facile eseguire il codice, compilazione in Visual Studio e distribuirlo direttamente in Azure.</span><span class="sxs-lookup"><span data-stu-id="19ad8-158">It provides great integration with Git to make it easy to take your code, build it in Visual Studio, and deploy it directly to Azure.</span></span>

![](./media/image4.png)

<span data-ttu-id="19ad8-159">**Figura 4-4**.</span><span class="sxs-lookup"><span data-stu-id="19ad8-159">**Figure 4-4**.</span></span> <span data-ttu-id="19ad8-160">Pubblicazione di un'applicazione single-container al servizio App di Azure da Visual Studio</span><span class="sxs-lookup"><span data-stu-id="19ad8-160">Publishing a single-container application to Azure App Service from Visual Studio</span></span>

<span data-ttu-id="19ad8-161">Senza Docker, se sono necessarie altre funzionalità, Framework o le dipendenze che non sono supportate in Azure App Service, era necessario attendere che il team di Azure aggiornate di tali dipendenze nel servizio App.</span><span class="sxs-lookup"><span data-stu-id="19ad8-161">Without Docker, if you needed other capabilities, frameworks, or dependencies that are not supported in Azure App Service, you had to wait until the Azure team updated those dependencies in App Service.</span></span> <span data-ttu-id="19ad8-162">O era necessario passare ad altri servizi come Azure Service Fabric, servizi Cloud di Azure o anche le macchine virtuali, in cui è stato ulteriormente controllo ed è possibile installare un componente richiesto o un framework per l'applicazione.</span><span class="sxs-lookup"><span data-stu-id="19ad8-162">Or you had to switch to other services like Azure Service Fabric, Azure Cloud Services, or even VMs, where you had further control and you could install a required component or framework for your application.</span></span>

<span data-ttu-id="19ad8-163">Supporto contenitore in Visual Studio 2017 offre la possibilità di includere desiderato nell'ambiente dell'applicazione, come illustrato nella figura 4-4.</span><span class="sxs-lookup"><span data-stu-id="19ad8-163">Container support in Visual Studio 2017 gives you the ability to include whatever you want in your application environment, as shown in Figure 4-4.</span></span> <span data-ttu-id="19ad8-164">Poiché si sta eseguendo in un contenitore, se si aggiunge una dipendenza all'applicazione, è possibile includere la dipendenza nell'immagine del Dockerfile o Docker.</span><span class="sxs-lookup"><span data-stu-id="19ad8-164">Since you are running it in a container, if you add a dependency to your application, you can include the dependency in your Dockerfile or Docker image.</span></span>

<span data-ttu-id="19ad8-165">Come anche illustrata nella figura 4-4, il flusso di pubblicazione inserisce un'immagine tramite un registro di sistema del contenitore.</span><span class="sxs-lookup"><span data-stu-id="19ad8-165">As also shown in Figure 4-4, the publish flow pushes an image through a container registry.</span></span> <span data-ttu-id="19ad8-166">Può trattarsi di qualsiasi altro Docker Registro di sistema come Hub Docker oppure un registro di sistema locale o del contenitore Azure (un registro di sistema su Chiudi per le distribuzioni in Azure e protetto dall'account e gruppi di Azure Active Directory).</span><span class="sxs-lookup"><span data-stu-id="19ad8-166">This can be the Azure Container Registry (a registry close to your deployments in Azure and secured by Azure Active Directory groups and accounts), or any other Docker registry, like Docker Hub or an on-premises registry.</span></span>


>[!div class="step-by-step"]
<span data-ttu-id="19ad8-167">[Precedente] [Avanti] (docker applicazione-stato data.md) (index.md)</span><span class="sxs-lookup"><span data-stu-id="19ad8-167">[Previous] (index.md) [Next] (docker-application-state-data.md)</span></span>
