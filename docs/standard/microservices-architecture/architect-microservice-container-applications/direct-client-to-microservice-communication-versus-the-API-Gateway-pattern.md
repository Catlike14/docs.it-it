---
title: Confronto tra comunicazione da client a microservizio diretta e schema API Gateway
description: Architettura di microservizi .NET per applicazioni .NET in contenitori | Confronto tra comunicazione da client a microservizio diretta e schema API Gateway
keywords: Docker, microservizi, ASP.NET, contenitore, API Gateway
author: CESARDELATORRE
ms.author: wiwagn
ms.date: 10/18/2017
ms.prod: .net-core
ms.technology: dotnet-docker
ms.topic: article
ms.workload:
- dotnet
- dotnetcore
ms.openlocfilehash: 96a02958ef5750aec7a92ff0dd145edc15a5953a
ms.sourcegitcommit: e7f04439d78909229506b56935a1105a4149ff3d
ms.translationtype: HT
ms.contentlocale: it-IT
ms.lasthandoff: 12/23/2017
---
# <a name="direct-client-to-microservice-communication-versus-the-api-gateway-pattern"></a><span data-ttu-id="37688-104">Confronto tra comunicazione da client a microservizio diretta e schema API Gateway</span><span class="sxs-lookup"><span data-stu-id="37688-104">Direct client-to-microservice communication versus the API Gateway pattern</span></span>

<span data-ttu-id="37688-105">In un'architettura di microservizi, ogni microservizio espone un set di endpoint (generalmente) specifici.</span><span class="sxs-lookup"><span data-stu-id="37688-105">In a microservices architecture, each microservice exposes a set of (typically) fine‑grained endpoints.</span></span> <span data-ttu-id="37688-106">Ciò può influire sulla comunicazione da client a microservizio, come spiegato in questa sezione.</span><span class="sxs-lookup"><span data-stu-id="37688-106">This fact can impact the client‑to‑microservice communication, as explained in this section.</span></span>

## <a name="direct-client-to-microservice-communication"></a><span data-ttu-id="37688-107">Comunicazione da client a microservizio diretta</span><span class="sxs-lookup"><span data-stu-id="37688-107">Direct client-to-microservice communication</span></span>

<span data-ttu-id="37688-108">Un possibile approccio prevede l'uso di un'architettura di comunicazione da client a microservizio diretta.</span><span class="sxs-lookup"><span data-stu-id="37688-108">A possible approach is to use a direct client-to-microservice communication architecture.</span></span> <span data-ttu-id="37688-109">In questo caso, un'app client può effettuare richieste direttamente ad alcuni microservizi, come illustrato nella figura 4-12.</span><span class="sxs-lookup"><span data-stu-id="37688-109">In this approach, a client app can make requests directly to some of the microservices, as shown in Figure 4-12.</span></span>

![](./media/image12.png)

<span data-ttu-id="37688-110">**Figura 4-12**.</span><span class="sxs-lookup"><span data-stu-id="37688-110">**Figure 4-12**.</span></span> <span data-ttu-id="37688-111">Uso di un'architettura di comunicazione da client a microservizio diretta</span><span class="sxs-lookup"><span data-stu-id="37688-111">Using a direct client-to-microservice communication architecture</span></span>

<span data-ttu-id="37688-112">In questo approccio</span><span class="sxs-lookup"><span data-stu-id="37688-112">In this approach.</span></span> <span data-ttu-id="37688-113">ogni microservizio include un endpoint pubblico, talvolta con una porta TCP diversa per ogni microservizio.</span><span class="sxs-lookup"><span data-stu-id="37688-113">each microservice has a public endpoint, sometimes with a different TCP port for each microservice.</span></span> <span data-ttu-id="37688-114">Un esempio di URL per un determinato servizio potrebbe essere l'URL seguente in Azure:</span><span class="sxs-lookup"><span data-stu-id="37688-114">An example of a URL for a particular service could be the following URL in Azure:</span></span>

<span data-ttu-id="37688-115"><http://eshoponcontainers.westus.cloudapp.azure.com:88/></span><span class="sxs-lookup"><span data-stu-id="37688-115"><http://eshoponcontainers.westus.cloudapp.azure.com:88/></span></span>

<span data-ttu-id="37688-116">In un ambiente di produzione basato su un cluster, questo URL esegue il mapping al servizio di bilanciamento del carico usato nel cluster, che a sua volta distribuisce le richieste nei vari microservizi.</span><span class="sxs-lookup"><span data-stu-id="37688-116">In a production environment based on a cluster, that URL would map to the load balancer used in the cluster, which in turn distributes the requests across the microservices.</span></span> <span data-ttu-id="37688-117">Negli ambienti di produzione, tra i microservizi e Internet potrebbe esserci un controller per la distribuzione delle applicazioni (ADC, Application Delivery Controller), ad esempio il [gateway applicazione di Azure](https://docs.microsoft.com/azure/application-gateway/application-gateway-introduction).</span><span class="sxs-lookup"><span data-stu-id="37688-117">In production environments, you could have an Application Delivery Controller (ADC) like [Azure Application Gateway](https://docs.microsoft.com/azure/application-gateway/application-gateway-introduction) between your microservices and the Internet.</span></span> <span data-ttu-id="37688-118">Questo controller funge da livello trasparente ed esegue non solo il bilanciamento del carico, ma anche la terminazione SSL per proteggere i servizi.</span><span class="sxs-lookup"><span data-stu-id="37688-118">This acts as a transparent tier that not only performs load balancing, but secures your services by offering SSL termination.</span></span> <span data-ttu-id="37688-119">In questo modo, migliora il carico degli host eliminando le operazioni di terminazione SSL che richiedono un utilizzo intensivo della CPU e altre attività di routing al gateway applicazione di Azure.</span><span class="sxs-lookup"><span data-stu-id="37688-119">This improves the load of your hosts by offloading CPU-intensive SSL termination and other routing duties to the Azure Application Gateway.</span></span> <span data-ttu-id="37688-120">In ogni caso, dal punto di vista dell'architettura dell'applicazione logica, un servizio di bilanciamento del carico e un controller per la distribuzione delle applicazioni sono trasparenti.</span><span class="sxs-lookup"><span data-stu-id="37688-120">In any case, a load balancer and ADC are transparent from a logical application architecture point of view.</span></span>

<span data-ttu-id="37688-121">Un'architettura di comunicazione da client a microservizio diretta potrebbe essere sufficiente per un'applicazione basata su microservizi di piccole dimensioni, soprattutto se l'app client è un'applicazione Web sul lato server, ad esempio un'applicazione MVC ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="37688-121">A direct client-to-microservice communication architecture could be good enough for a small microservice-based application, especially if the client app is a server-side web application like an ASP.NET MVC app.</span></span> <span data-ttu-id="37688-122">Questo approccio, tuttavia, presenta dei problemi quando si compilano applicazioni grandi e complesse basate su microservizi, ad esempio quando si gestiscono decine di tipi di microservizi, e sopratutto quando le app client sono app per dispositivi mobili remote o applicazioni Web SPA.</span><span class="sxs-lookup"><span data-stu-id="37688-122">However, when you build large and complex microservice-based applications (for example, when handling dozens of microservice types), and especially when the client apps are remote mobile apps or SPA web applications, that approach faces a few issues.</span></span>

<span data-ttu-id="37688-123">Quando si sviluppa un'applicazione di grandi dimensioni basata su microservizi, porsi le domande seguenti:</span><span class="sxs-lookup"><span data-stu-id="37688-123">Consider the following questions when developing a large application based on microservices:</span></span>

-   <span data-ttu-id="37688-124">*Come si può ridurre al minimo il numero di richieste per il back-end e le comunicazioni "frammentate" con più microservizi nelle app client?*</span><span class="sxs-lookup"><span data-stu-id="37688-124">*How can client apps minimize the number of requests to the backend and reduce chatty communication to multiple microservices?*</span></span>

<span data-ttu-id="37688-125">L'interazione con più microservizi per compilare una singola schermata dell'interfaccia utente aumenta il numero di round trip in Internet.</span><span class="sxs-lookup"><span data-stu-id="37688-125">Interacting with multiple microservices to build a single UI screen increases the number of roundtrips across the Internet.</span></span> <span data-ttu-id="37688-126">In questo modo si aumenta la latenza e la complessità sul lato dell'interfaccia utente.</span><span class="sxs-lookup"><span data-stu-id="37688-126">This increases latency and complexity on the UI side.</span></span> <span data-ttu-id="37688-127">In teoria, le risposte dovrebbero essere aggregate in modo efficiente sul lato server: ciò consente di ridurre la latenza, perché vengono restituiti più blocchi di dati in parallelo e alcune interfacce utente possono visualizzare i dati appena vengono resi disponibili.</span><span class="sxs-lookup"><span data-stu-id="37688-127">Ideally, responses should be efficiently aggregated in the server side—this reduces latency, since multiple pieces of data come back in parallel and some UI can show data as soon as it is ready.</span></span>

-   <span data-ttu-id="37688-128">*Come si gestiscono i problemi di montaggio incrociato, ad esempio le autorizzazioni, le trasformazioni dei dati e l'invio di richieste dinamiche?*</span><span class="sxs-lookup"><span data-stu-id="37688-128">*How can you handle cross-cutting concerns such as authorization, data transformations, and dynamic request dispatching?*</span></span>

<span data-ttu-id="37688-129">L'implementazione di soluzioni per la sicurezza e il montaggio incrociato, ad esempio la sicurezza e le autorizzazioni in ogni microservizio, possono richiedere un notevole impegno in termini di sviluppo.</span><span class="sxs-lookup"><span data-stu-id="37688-129">Implementing security and cross-cutting concerns like security and authorization on every microservice can require significant development effort.</span></span> <span data-ttu-id="37688-130">Un possibile approccio prevede di inserire questi servizi all'interno dell'host Docker o di un cluster interno, allo scopo di limitare l'accesso diretto dall'esterno, e di implementare queste soluzioni di montaggio incrociato in una posizione centralizzata, ad esempio un gateway API.</span><span class="sxs-lookup"><span data-stu-id="37688-130">A possible approach is to have those services within the Docker host or internal cluster, in order to restrict direct access to them from the outside, and to implement those cross-cutting concerns in a centralized place, like an API Gateway.</span></span>

-   <span data-ttu-id="37688-131">*In che modo le app client possono comunicare con i servizi che usano protocolli non adatti a Internet?*</span><span class="sxs-lookup"><span data-stu-id="37688-131">*How can client apps communicate with services that use non-Internet-friendly protocols?*</span></span>

<span data-ttu-id="37688-132">In genere i protocolli usati sul lato server, ad esempio AMQP o i protocolli binari, non sono supportati nelle app client.</span><span class="sxs-lookup"><span data-stu-id="37688-132">Protocols used on the server side (like AMQP or binary protocols) are usually not supported in client apps.</span></span> <span data-ttu-id="37688-133">Quindi, le richieste devono essere eseguite con protocolli come HTTP/HTTPS e trasferite in un secondo momento in altri protocolli.</span><span class="sxs-lookup"><span data-stu-id="37688-133">Therefore, requests must be performed through protocols like HTTP/HTTPS and translated to the other protocols afterwards.</span></span> <span data-ttu-id="37688-134">Un approccio *man-in-the-middle* può risultare utile per questa situazione.</span><span class="sxs-lookup"><span data-stu-id="37688-134">A *man-in-the-middle* approach can help in this situation.</span></span>

-   <span data-ttu-id="37688-135">*Come si può modellare una facciata progettata specificamente per le app per dispositivi mobili?*</span><span class="sxs-lookup"><span data-stu-id="37688-135">*How can you shape a façade especially made for mobile apps?*</span></span>

<span data-ttu-id="37688-136">L'API di più microservizi potrebbe non essere progettata adeguatamente per le esigenze delle diverse applicazioni client.</span><span class="sxs-lookup"><span data-stu-id="37688-136">The API of multiple microservices might not be well designed for the needs of different client applications.</span></span> <span data-ttu-id="37688-137">Ad esempio, le esigenze di un'app per dispositivi mobili potrebbero essere diverse rispetto a quelle di un'app Web.</span><span class="sxs-lookup"><span data-stu-id="37688-137">For instance, the needs of a mobile app might be different than the needs of a web app.</span></span> <span data-ttu-id="37688-138">Per le app per dispositivi mobili potrebbe essere necessario un livello ancora maggiore di ottimizzazione per rendere più efficienti le risposte dei dati.</span><span class="sxs-lookup"><span data-stu-id="37688-138">For mobile apps, you might need to optimize even further so that data responses can be more efficient.</span></span> <span data-ttu-id="37688-139">Per farlo, è possibile aggregare i dati di più microservizi e restituire un singolo set di dati, eliminando talvolta tutti i dati nella risposta non necessari per l'app per dispositivi mobili.</span><span class="sxs-lookup"><span data-stu-id="37688-139">You might do this by aggregating data from multiple microservices and returning a single set of data, and sometimes eliminating any data in the response that is not needed by the mobile app.</span></span> <span data-ttu-id="37688-140">E, naturalmente, si possono comprimere i dati.</span><span class="sxs-lookup"><span data-stu-id="37688-140">And, of course, you might compress that data.</span></span> <span data-ttu-id="37688-141">Anche in questo scenario può risultare utile inserire una facciata o un'API tra le app per dispositivi mobili e i microservizi.</span><span class="sxs-lookup"><span data-stu-id="37688-141">Again, a façade or API in between the mobile app and the microservices can be convenient for this scenario.</span></span>

## <a name="using-an-api-gateway"></a><span data-ttu-id="37688-142">Utilizzo di un gateway API</span><span class="sxs-lookup"><span data-stu-id="37688-142">Using an API Gateway</span></span>

<span data-ttu-id="37688-143">Quando si progettano e si compilano applicazioni grandi e complesse basate su microservizi con più app client, si può prendere in considerazione l'uso di un [gateway API](http://microservices.io/patterns/apigateway.html).</span><span class="sxs-lookup"><span data-stu-id="37688-143">When you design and build large or complex microservice-based applications with multiple client apps, a good approach to consider can be an [API Gateway](http://microservices.io/patterns/apigateway.html).</span></span> <span data-ttu-id="37688-144">Si tratta di un servizio che fornisce un singolo punto di ingresso per alcuni gruppi di microservizi.</span><span class="sxs-lookup"><span data-stu-id="37688-144">This is a service that provides a single entry point for certain groups of microservices.</span></span> <span data-ttu-id="37688-145">È simile allo [schema Facade](https://en.wikipedia.org/wiki/Facade_pattern) della progettazione orientata a oggetti, ma, in questo caso, fa parte di un sistema distribuito.</span><span class="sxs-lookup"><span data-stu-id="37688-145">It is similar to the [Facade pattern](https://en.wikipedia.org/wiki/Facade_pattern) from object‑oriented design, but in this case, it is part of a distributed system.</span></span> <span data-ttu-id="37688-146">Lo schema API Gateway è noto anche come "backend for frontend" [(BFF)](http://samnewman.io/patterns/architectural/bff/) perché viene compilato pensando alle esigenze dell'app client.</span><span class="sxs-lookup"><span data-stu-id="37688-146">The API Gateway pattern is also sometimes known as the “backend for frontend” [(BFF)](http://samnewman.io/patterns/architectural/bff/) because you build it while thinking about the needs of the client app.</span></span>

<span data-ttu-id="37688-147">La figura 4-13 mostra in che modo un gateway API personalizzato può essere inserito in un'architettura basata su microservizi.</span><span class="sxs-lookup"><span data-stu-id="37688-147">Figure 4-13 shows how a custom API Gateway can fit into a microservice-based architecture.</span></span>
<span data-ttu-id="37688-148">È importante evidenziare che nel diagramma viene usato un solo servizio di gateway API personalizzato per numerose app client di diverso tipo.</span><span class="sxs-lookup"><span data-stu-id="37688-148">It is important to highlight that in that diagram, you would be using a single custom API Gateway service facing multiple and different client apps.</span></span> <span data-ttu-id="37688-149">Ciò può presentare dei rischi significativi perché il servizio API Gateway verrà ampliato e sviluppato in base alle diverse esigenze delle app client.</span><span class="sxs-lookup"><span data-stu-id="37688-149">That fact can be an important risk because your API Gateway service will be growing and evolving based on many different requirements from the client apps.</span></span> <span data-ttu-id="37688-150">Alla fine, per soddisfare tutte le esigenze, il servizio potrebbe diventare talmente esteso da sembrare un'unica applicazione o servizio monolitico.</span><span class="sxs-lookup"><span data-stu-id="37688-150">Eventually, it will be bloated because of those different needs and effectively it could be pretty similar to a monolithic application or monolithic service.</span></span> <span data-ttu-id="37688-151">Ecco perché si consiglia vivamente di suddividere il gateway API in più servizi o in gateway API più piccoli, uno per ogni tipo di fattore di forma, ad esempio.</span><span class="sxs-lookup"><span data-stu-id="37688-151">That is why it is very much recommended to split the API Gateway in multiple services or multiple smaller API Gateways, one per form-factor type, for instance.</span></span>

![](./media/image13.png)

<span data-ttu-id="37688-152">**Figura 4-13**.</span><span class="sxs-lookup"><span data-stu-id="37688-152">**Figure 4-13**.</span></span> <span data-ttu-id="37688-153">Utilizzo di un gateway API implementato come servizio Web API personalizzato</span><span class="sxs-lookup"><span data-stu-id="37688-153">Using an API Gateway implemented as a custom Web API service</span></span>

<span data-ttu-id="37688-154">In questo esempio, il gateway API viene implementato sotto forma di servizio Web API personalizzato eseguito come contenitore.</span><span class="sxs-lookup"><span data-stu-id="37688-154">In this example, the API Gateway would be implemented as a custom Web API service running as a container.</span></span>

<span data-ttu-id="37688-155">Come accennato, è necessario implementare diversi gateway API per avere più facciate distinte dedicate alle esigenze di ciascuna app client.</span><span class="sxs-lookup"><span data-stu-id="37688-155">As mentioned, you should implement several API Gateways so that you can have a different façade for the needs of each client app.</span></span> <span data-ttu-id="37688-156">Ogni gateway API può fornire un'API specifica per ogni app client, eventualmente anche basata sul fattore di forma del client, mediante l'implementazione di un codice dell'adattatore specifico che chiama più microservizi interni.</span><span class="sxs-lookup"><span data-stu-id="37688-156">Each API Gateway can provide a different API tailored for each client app, possibly even based on the client form factor by implementing specific adapter code which underneath calls multiple internal microservices.</span></span>

<span data-ttu-id="37688-157">Un gateway API personalizzato in genere è un aggregatore di dati, quindi è necessario procedere con cautela.</span><span class="sxs-lookup"><span data-stu-id="37688-157">Since a custom API Gateway is usually a data aggregator, you need to be careful with it.</span></span> <span data-ttu-id="37688-158">Di solito non è consigliabile lasciare che un singolo gateway API aggreghi tutti i microservizi interni dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="37688-158">Usually it isn't a good idea to have a single API Gateway aggregating all the internal microservices of your application.</span></span> <span data-ttu-id="37688-159">Se accade, funge da aggregatore monolitico o da agente di orchestrazione e viola l'autonomia del microservizio accoppiando tutti i microservizi.</span><span class="sxs-lookup"><span data-stu-id="37688-159">If it does, it acts as a monolithic aggregator or orchestrator and violates microservice autonomy by coupling all the microservices.</span></span> <span data-ttu-id="37688-160">Di conseguenza, i gateway API devono essere separati in base ai limiti aziendali e non fungere da aggregatori per l'intera applicazione.</span><span class="sxs-lookup"><span data-stu-id="37688-160">Therefore, the API Gateways should be segregated based on business boundaries and not act as an aggregator for the whole application.</span></span>

<span data-ttu-id="37688-161">Talvolta, un gateway API granulare può essere un microservizio e può anche avere un nome di dominio o aziendale, oltre a tutti i dati correlati.</span><span class="sxs-lookup"><span data-stu-id="37688-161">Sometimes a granular API Gateway can also be a microservice by itself, and even have a domain or business name and related data.</span></span> <span data-ttu-id="37688-162">Se per il gateway API si usano limiti stabiliti dall'azienda o dal dominio, si avrà una progettazione migliore.</span><span class="sxs-lookup"><span data-stu-id="37688-162">Having the API Gateway’s boundaries dictated by the business or domain will help you to get a better design.</span></span>

<span data-ttu-id="37688-163">La granularità nel livello del gateway API può essere particolarmente utile per le applicazioni dell'interfaccia utente composita più avanzate basate su microservizi, perché il concetto di gateway API specifici è analogo a quello del servizio di composizione dell'interfaccia utente.</span><span class="sxs-lookup"><span data-stu-id="37688-163">Granularity in the API Gateway tier can be especially useful for more advanced composite UI applications based on microservices, because the concept of a fine-grained API Gateway is similar to a UI composition service.</span></span> <span data-ttu-id="37688-164">Questo argomento viene illustrato più avanti in [Creazione dell'interfaccia utente composita basata su microservizi](#creating-composite-ui-based-on-microservices-including-visual-ui-shape-and-layout-generated-by-multiple-microservices).</span><span class="sxs-lookup"><span data-stu-id="37688-164">We discuss this later in the [Creating composite UI based on microservices](#creating-composite-ui-based-on-microservices-including-visual-ui-shape-and-layout-generated-by-multiple-microservices).</span></span>

<span data-ttu-id="37688-165">Per molte applicazioni di medie e grandi dimensioni, quindi, l'uso di un gateway API personalizzato rappresenta in genere una buona soluzione, tranne quando viene usato come unico aggregatore monolitico o come gateway API personalizzato univoco centrale.</span><span class="sxs-lookup"><span data-stu-id="37688-165">Therefore, for many medium- and large-size applications, using a custom-built API Gateway is usually a good approach, but not as a single monolithic aggregator or unique central custom API Gateway.</span></span>

<span data-ttu-id="37688-166">Un altro approccio consiste nell'usare un prodotto come [Gestione API di Azure](https://azure.microsoft.com/services/api-management/) come illustrato nella figura 4-14.</span><span class="sxs-lookup"><span data-stu-id="37688-166">Another approach is to use a product like [Azure API Management](https://azure.microsoft.com/services/api-management/) as shown in Figure 4-14.</span></span> <span data-ttu-id="37688-167">Questo approccio non solo risolvere le esigenze del gateway API, ma fornisce anche funzionalità come la raccolta di informazioni dalle API.</span><span class="sxs-lookup"><span data-stu-id="37688-167">This approach not only solves your API Gateway needs, but provides features like gathering insights from your APIs.</span></span> <span data-ttu-id="37688-168">Se si usa una soluzione per la gestione delle API, un gateway API è semplicemente un componente all'interno della soluzione completa.</span><span class="sxs-lookup"><span data-stu-id="37688-168">If you are using an API management solution, an API Gateway is only a component within that full API management solution.</span></span>

![](./media/image14.png)

<span data-ttu-id="37688-169">**Figura 4-14**.</span><span class="sxs-lookup"><span data-stu-id="37688-169">**Figure 4-14**.</span></span> <span data-ttu-id="37688-170">Utilizzo di Gestione API di Azure per il gateway API</span><span class="sxs-lookup"><span data-stu-id="37688-170">Using Azure API Management for your API Gateway</span></span>

<span data-ttu-id="37688-171">In questo caso, quando si usa un prodotto come Gestione API di Azure, la presenza di un solo gateway API non è così rischiosa perché questi tipi di gateway API sono più "sottili", in altre parole non comportano l'implementazione di codice C# personalizzato che potrebbe diventare un componente monolitico.</span><span class="sxs-lookup"><span data-stu-id="37688-171">In this case, when using a product like Azure API Management, the fact that you might have a single API Gateway is not so risky because these kinds of API Gateways are "thinner", meaning that you don't implement custom C# code that could evolve towards a monolithic component.</span></span> 

<span data-ttu-id="37688-172">Questo tipo di prodotto funge più da proxy inverso per le comunicazioni in ingresso, in cui è possibile anche filtrare le API dai microservizi interni e applicare l'autorizzazione alle API pubblicate in questo singolo livello.</span><span class="sxs-lookup"><span data-stu-id="37688-172">This type of product acts more like a reverse proxy for ingress communication, where you can also filter the APIs from the internal microservices plus apply authorization to the published APIs in this single tier.</span></span>

<span data-ttu-id="37688-173">Le informazioni disponibili nel sistema di gestione API aiutano a capire le modalità di utilizzo e le prestazioni delle API.</span><span class="sxs-lookup"><span data-stu-id="37688-173">The insights available from an API Management system help you get an understanding of how your APIs are being used and how they are performing.</span></span> <span data-ttu-id="37688-174">Questi dati vengono visualizzati in report di analisi quasi in tempo reale e codificati grazie all'identificazione di tendenze che potrebbero avere un impatto aziendale.</span><span class="sxs-lookup"><span data-stu-id="37688-174">They do this by letting you view near real-time analytics reports and identifying trends that might impact your business.</span></span> <span data-ttu-id="37688-175">Inoltre, possono essere forniti log sulle attività di richiesta e risposta che permettono ulteriori analisi online e offline.</span><span class="sxs-lookup"><span data-stu-id="37688-175">Plus, you can have logs about request and response activity for further online and offline analysis.</span></span>

<span data-ttu-id="37688-176">Con Gestione API di Azure è possibile proteggere le API usando una chiave, un token e il filtro IP.</span><span class="sxs-lookup"><span data-stu-id="37688-176">With Azure API Management, you can secure your APIs using a key, a token, and IP filtering.</span></span> <span data-ttu-id="37688-177">Queste funzionalità consentono di applicare limiti di velocità e quote flessibili e specifiche, modificare la forma e il comportamento delle API usando i criteri e migliorare le prestazioni con la memorizzazione nella cache delle risposte.</span><span class="sxs-lookup"><span data-stu-id="37688-177">These features let you enforce flexible and fine-grained quotas and rate limits, modify the shape and behavior of your APIs using policies, and improve performance with response caching.</span></span>

<span data-ttu-id="37688-178">In questa guida e nell'applicazione di esempio di riferimento (eShopOnContainers), l'architettura è una semplice architettura in contenitori personalizzata che consente di concentrarsi sui contenitori normali senza usare prodotti PaaS come Gestione API di Azure.</span><span class="sxs-lookup"><span data-stu-id="37688-178">In this guide and the reference sample application (eShopOnContainers), we are limiting the architecture to a simpler and custom-made containerized architecture in order to focus on plain containers without using PaaS products like Azure API Management.</span></span> <span data-ttu-id="37688-179">Per le applicazioni di grandi dimensioni basate su microservizi distribuite in Microsoft Azure, invece, si consiglia di esaminare e adottare Gestione API di Azure come base per i gateway API.</span><span class="sxs-lookup"><span data-stu-id="37688-179">But for large microservice-based applications that are deployed into Microsoft Azure, we encourage you to review and adopt Azure API Management as the base for your API Gateways.</span></span>

## <a name="drawbacks-of-the-api-gateway-pattern"></a><span data-ttu-id="37688-180">Svantaggi dello schema API Gateway</span><span class="sxs-lookup"><span data-stu-id="37688-180">Drawbacks of the API Gateway pattern</span></span>

-   <span data-ttu-id="37688-181">Lo svantaggio più importante consiste nel fatto che, quando si implementa un gateway API, tale livello viene accoppiato con i microservizi interni.</span><span class="sxs-lookup"><span data-stu-id="37688-181">The most important drawback is that when you implement an API Gateway, you are coupling that tier with the internal microservices.</span></span> <span data-ttu-id="37688-182">Un accoppiamento di questo tipo potrebbe causare gravi difficoltà per l'applicazione.</span><span class="sxs-lookup"><span data-stu-id="37688-182">Coupling like this might introduce serious difficulties for your application.</span></span> <span data-ttu-id="37688-183">Clemens Vaster, architetto del team del bus di servizio di Azure, chiama questa difficoltà potenziale "il nuovo ESB" nella sua sessione sulla [messaggistica e i microservizi](https://www.youtube.com/watch?v=rXi5CLjIQ9k) di GOTO 2016.</span><span class="sxs-lookup"><span data-stu-id="37688-183">Clemens Vaster, architect at the Azure Service Bus team, refers to this potential difficulty as “the new ESB” in his "[Messaging and Microservices](https://www.youtube.com/watch?v=rXi5CLjIQ9k)" session at GOTO 2016.</span></span>

-   <span data-ttu-id="37688-184">Usando un gateway API per i microservizi, si crea un altro possibile singolo punto di guasto.</span><span class="sxs-lookup"><span data-stu-id="37688-184">Using a microservices API Gateway creates an additional possible single point of failure.</span></span>

-   <span data-ttu-id="37688-185">Un gateway API può aumentare il tempo di risposta a causa della chiamata di rete aggiuntiva.</span><span class="sxs-lookup"><span data-stu-id="37688-185">An API Gateway can introduce increased response time due to the additional network call.</span></span> <span data-ttu-id="37688-186">Tuttavia, il ritardo dovuto a questa chiamata di solito è minore del tempo perso in comunicazioni frammentate da un'interfaccia client che chiama direttamente i microservizi interni.</span><span class="sxs-lookup"><span data-stu-id="37688-186">However, this extra call usually has less impact than having a client interface that is too chatty directly calling the internal microservices.</span></span>

-   <span data-ttu-id="37688-187">Se la scalabilità orizzontale non viene eseguita correttamente, il gateway API può diventare un collo di bottiglia.</span><span class="sxs-lookup"><span data-stu-id="37688-187">If not scaled out properly, the API Gateway can become a bottleneck.</span></span>

-   <span data-ttu-id="37688-188">Un gateway API richiede un costo di sviluppo aggiuntivo e ulteriori operazioni di manutenzione future se include la logica personalizzata e l'aggregazione dei dati.</span><span class="sxs-lookup"><span data-stu-id="37688-188">An API Gateway requires additional development cost and future maintenance if it includes custom logic and data aggregation.</span></span> <span data-ttu-id="37688-189">Gli sviluppatori devono aggiornare il gateway API per esporre gli endpoint di ogni microservizio.</span><span class="sxs-lookup"><span data-stu-id="37688-189">Developers must update the API Gateway in order to expose each microservice’s endpoints.</span></span> <span data-ttu-id="37688-190">Inoltre, le modifiche di implementazione nei microservizi interni potrebbero causare modifiche al codice al livello del gateway API.</span><span class="sxs-lookup"><span data-stu-id="37688-190">Moreover, implementation changes in the internal microservices might cause code changes at the API Gateway level.</span></span> <span data-ttu-id="37688-191">Tuttavia, se il gateway API viene usato semplicemente per le attività di sicurezza, registrazione e controllo delle versioni, come avviene con Gestione API di Azure, il costo di sviluppo aggiuntivo potrebbe non essere applicato.</span><span class="sxs-lookup"><span data-stu-id="37688-191">However, if the API Gateway is just applying security, logging, and versioning (as when using Azure API Management), this additional development cost might not apply.</span></span>

-   <span data-ttu-id="37688-192">Se il gateway API viene sviluppato da un singolo team, potrebbe verificarsi un collo di bottiglia nello sviluppo.</span><span class="sxs-lookup"><span data-stu-id="37688-192">If the API Gateway is developed by a single team, there can be a development bottleneck.</span></span> <span data-ttu-id="37688-193">Ecco un altro motivo per cui è preferibile avere più gateway API specifici che rispondono alle diverse esigenze dei client.</span><span class="sxs-lookup"><span data-stu-id="37688-193">This is another reason why a better approach is to have several fined-grained API Gateways that respond to different client needs.</span></span> <span data-ttu-id="37688-194">È anche possibile suddividere internamente il gateway API in più aree o livelli di proprietà dei diversi team che lavorano sui microservizi interni.</span><span class="sxs-lookup"><span data-stu-id="37688-194">You could also segregate the API Gateway internally into multiple areas or layers that are owned by the different teams working on the internal microservices.</span></span>

## <a name="additional-resources"></a><span data-ttu-id="37688-195">Risorse aggiuntive</span><span class="sxs-lookup"><span data-stu-id="37688-195">Additional resources</span></span>

-   <span data-ttu-id="37688-196">**Charles Richardson. Pattern: API Gateway / Backend for Front-End (Schema: API Gateway/Backend for Front-End)**
    [*http://microservices.io/patterns/apigateway.html*](http://microservices.io/patterns/apigateway.html)</span><span class="sxs-lookup"><span data-stu-id="37688-196">**Charles Richardson. Pattern: API Gateway / Backend for Front-End**
[*http://microservices.io/patterns/apigateway.html*](http://microservices.io/patterns/apigateway.html)</span></span>

-   <span data-ttu-id="37688-197">**Gestione API di Azure**
    [*https://azure.microsoft.com/services/api-management/*](https://azure.microsoft.com/services/api-management/)</span><span class="sxs-lookup"><span data-stu-id="37688-197">**Azure API Management**
[*https://azure.microsoft.com/services/api-management/*](https://azure.microsoft.com/services/api-management/)</span></span>

-   <span data-ttu-id="37688-198">**Udi Dahan. Service Oriented Composition (Composizione orientata ai servizi)**\\</span><span class="sxs-lookup"><span data-stu-id="37688-198">**Udi Dahan. Service Oriented Composition**\\</span></span>
    [<span data-ttu-id="37688-199">*http://udidahan.com/2014/07/30/service-oriented-composition-with-video/*</span><span class="sxs-lookup"><span data-stu-id="37688-199">*http://udidahan.com/2014/07/30/service-oriented-composition-with-video/*</span></span>](http://udidahan.com/2014/07/30/service-oriented-composition-with-video/)

-   <span data-ttu-id="37688-200">**Clemens Vasters. Messaging and Microservices at GOTO 2016 (Messaggistica e microservizi in GOTO 2016)** (video) [*https://www.youtube.com/watch?v=rXi5CLjIQ9k*](https://www.youtube.com/watch?v=rXi5CLjIQ9k)</span><span class="sxs-lookup"><span data-stu-id="37688-200">**Clemens Vasters. Messaging and Microservices at GOTO 2016** (video) [*https://www.youtube.com/watch?v=rXi5CLjIQ9k*](https://www.youtube.com/watch?v=rXi5CLjIQ9k)</span></span>


>[!div class="step-by-step"]
<span data-ttu-id="37688-201">[Indietro] (identify-microservice-domain-model-boundaries.md) [Avanti] (communication-in-microservice-architecture.md)</span><span class="sxs-lookup"><span data-stu-id="37688-201">[Previous] (identify-microservice-domain-model-boundaries.md) [Next] (communication-in-microservice-architecture.md)</span></span>
