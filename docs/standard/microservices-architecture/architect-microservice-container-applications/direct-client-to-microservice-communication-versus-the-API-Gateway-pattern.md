---
title: Comunicazione client-a-microservizio diretta e il modello API Gateway
description: Architettura di Microservizi .NET per le applicazioni nei contenitori .NET | Comunicazione client-a-microservizio diretta e il modello API Gateway
keywords: Docker, Microservizi, ASP.NET, contenitore, il Gateway API
author: CESARDELATORRE
ms.author: wiwagn
ms.date: 10/18/2017
ms.prod: .net-core
ms.technology: dotnet-docker
ms.topic: article
ms.openlocfilehash: c8227ec47888c7cf361f34c4c85a09c0666f886e
ms.sourcegitcommit: c2e216692ef7576a213ae16af2377cd98d1a67fa
ms.translationtype: HT
ms.contentlocale: it-IT
ms.lasthandoff: 10/22/2017
---
# <a name="direct-client-to-microservice-communication-versus-the-api-gateway-pattern"></a><span data-ttu-id="ba4cd-104">Comunicazione client-a-microservizio diretta e il modello API Gateway</span><span class="sxs-lookup"><span data-stu-id="ba4cd-104">Direct client-to-microservice communication versus the API Gateway pattern</span></span>

<span data-ttu-id="ba4cd-105">In un'architettura di microservizi, ogni microservizio espone un set di endpoint di fine‑grained (in genere).</span><span class="sxs-lookup"><span data-stu-id="ba4cd-105">In a microservices architecture, each microservice exposes a set of (typically) fine‑grained endpoints.</span></span> <span data-ttu-id="ba4cd-106">Ciò può influire sulla comunicazione client‑to‑microservice, come illustrato in questa sezione.</span><span class="sxs-lookup"><span data-stu-id="ba4cd-106">This fact can impact the client‑to‑microservice communication, as explained in this section.</span></span>

## <a name="direct-client-to-microservice-communication"></a><span data-ttu-id="ba4cd-107">Comunicazione client-a-microservizio diretta</span><span class="sxs-lookup"><span data-stu-id="ba4cd-107">Direct client-to-microservice communication</span></span>

<span data-ttu-id="ba4cd-108">Un possibile approccio consiste nell'utilizzare un'architettura di comunicazione client-a-microservizio diretta.</span><span class="sxs-lookup"><span data-stu-id="ba4cd-108">A possible approach is to use a direct client-to-microservice communication architecture.</span></span> <span data-ttu-id="ba4cd-109">In questo caso, un'app client può effettuare richieste direttamente ad alcune delle microservizi, come illustrato nella figura 4-12.</span><span class="sxs-lookup"><span data-stu-id="ba4cd-109">In this approach, a client app can make requests directly to some of the microservices, as shown in Figure 4-12.</span></span>

![](./media/image12.png)

<span data-ttu-id="ba4cd-110">**Figura 4-12**.</span><span class="sxs-lookup"><span data-stu-id="ba4cd-110">**Figure 4-12**.</span></span> <span data-ttu-id="ba4cd-111">Utilizzo di un'architettura di comunicazione client-a-microservizio diretta</span><span class="sxs-lookup"><span data-stu-id="ba4cd-111">Using a direct client-to-microservice communication architecture</span></span>

<span data-ttu-id="ba4cd-112">In questo approccio.</span><span class="sxs-lookup"><span data-stu-id="ba4cd-112">In this approach.</span></span> <span data-ttu-id="ba4cd-113">ogni microservizio dispone di un endpoint pubblico, talvolta con una porta TCP diversa per ogni microservizio.</span><span class="sxs-lookup"><span data-stu-id="ba4cd-113">each microservice has a public endpoint, sometimes with a different TCP port for each microservice.</span></span> <span data-ttu-id="ba4cd-114">Un esempio di un URL per un determinato servizio potrebbe essere l'URL seguente in Azure:</span><span class="sxs-lookup"><span data-stu-id="ba4cd-114">An example of a URL for a particular service could be the following URL in Azure:</span></span>

<span data-ttu-id="ba4cd-115"><http://eshoponcontainers.westus.cloudapp.Azure.com:88 /></span><span class="sxs-lookup"><span data-stu-id="ba4cd-115"><http://eshoponcontainers.westus.cloudapp.azure.com:88/></span></span>

<span data-ttu-id="ba4cd-116">In un ambiente di produzione in base a un cluster, che consente il mapping di URL per il bilanciamento del carico utilizzato nel cluster, che a sua volta consente di distribuire le richieste di microservizi.</span><span class="sxs-lookup"><span data-stu-id="ba4cd-116">In a production environment based on a cluster, that URL would map to the load balancer used in the cluster, which in turn distributes the requests across the microservices.</span></span> <span data-ttu-id="ba4cd-117">In ambienti di produzione, è possibile disporre di un Controller di recapito dell'applicazione (ADC) come [Gateway applicazione Azure](https://docs.microsoft.com/azure/application-gateway/application-gateway-introduction) tra il microservizi e Internet.</span><span class="sxs-lookup"><span data-stu-id="ba4cd-117">In production environments, you could have an Application Delivery Controller (ADC) like [Azure Application Gateway](https://docs.microsoft.com/azure/application-gateway/application-gateway-introduction) between your microservices and the Internet.</span></span> <span data-ttu-id="ba4cd-118">Questa funzione agisce come un livello trasparente che non solo consente di eseguire il bilanciamento del carico, ma consente di proteggere i servizi tramite l'offerta di terminazione SSL.</span><span class="sxs-lookup"><span data-stu-id="ba4cd-118">This acts as a transparent tier that not only performs load balancing, but secures your services by offering SSL termination.</span></span> <span data-ttu-id="ba4cd-119">Ciò migliora il carico degli host tramite l'offload della terminazione SSL con utilizzo intensivo della CPU e altre funzioni di routing al Gateway applicazione Azure.</span><span class="sxs-lookup"><span data-stu-id="ba4cd-119">This improves the load of your hosts by offloading CPU-intensive SSL termination and other routing duties to the Azure Application Gateway.</span></span> <span data-ttu-id="ba4cd-120">In ogni caso, un servizio di bilanciamento del carico e il servizio ADC sono trasparenti da un punto di vista di logica dell'applicazione architettura.</span><span class="sxs-lookup"><span data-stu-id="ba4cd-120">In any case, a load balancer and ADC are transparent from a logical application architecture point of view.</span></span>

<span data-ttu-id="ba4cd-121">Un'architettura di comunicazione client-a-microservizio diretta potrebbe essere sufficiente una piccola applicazione basata su microservizio, soprattutto se l'applicazione client è un'applicazione web sul lato server come un'applicazione MVC ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="ba4cd-121">A direct client-to-microservice communication architecture could be good enough for a small microservice-based application, especially if the client app is a server-side web application like an ASP.NET MVC app.</span></span> <span data-ttu-id="ba4cd-122">Tuttavia, quando si compilano grandi e complesse applicazioni basate su microservizio (ad esempio, durante la gestione di decine di tipi microservizio) e in particolare quando le applicazioni client sono remota App per dispositivi mobili o le applicazioni web SPA, tale approccio deve affrontare alcuni problemi.</span><span class="sxs-lookup"><span data-stu-id="ba4cd-122">However, when you build large and complex microservice-based applications (for example, when handling dozens of microservice types), and especially when the client apps are remote mobile apps or SPA web applications, that approach faces a few issues.</span></span>

<span data-ttu-id="ba4cd-123">Quando si sviluppa un'applicazione di grandi dimensioni in base a microservizi, considerare le domande seguenti:</span><span class="sxs-lookup"><span data-stu-id="ba4cd-123">Consider the following questions when developing a large application based on microservices:</span></span>

-   <span data-ttu-id="ba4cd-124">*Come possono ridurre al minimo il numero di richieste per il back-end e ridurre le comunicazioni "frammentate" per microservizi più applicazioni client?*</span><span class="sxs-lookup"><span data-stu-id="ba4cd-124">*How can client apps minimize the number of requests to the backend and reduce chatty communication to multiple microservices?*</span></span>

<span data-ttu-id="ba4cd-125">L'interazione con più microservizi per compilare una singola schermata dell'interfaccia utente aumenta il numero di round trip in Internet.</span><span class="sxs-lookup"><span data-stu-id="ba4cd-125">Interacting with multiple microservices to build a single UI screen increases the number of roundtrips across the Internet.</span></span> <span data-ttu-id="ba4cd-126">In questo modo si aumenta la latenza e la complessità sul lato dell'interfaccia utente.</span><span class="sxs-lookup"><span data-stu-id="ba4cd-126">This increases latency and complexity on the UI side.</span></span> <span data-ttu-id="ba4cd-127">In teoria, le risposte devono essere aggregate in modo efficiente sul lato server, ciò riduce la latenza, poiché più blocchi di dati in parallelo per poi un'interfaccia utente consente di visualizzare dati non appena è pronto.</span><span class="sxs-lookup"><span data-stu-id="ba4cd-127">Ideally, responses should be efficiently aggregated in the server side—this reduces latency, since multiple pieces of data come back in parallel and some UI can show data as soon as it is ready.</span></span>

-   <span data-ttu-id="ba4cd-128">*Per gestire la possibilità a montaggio incrociato problemi, ad esempio l'autorizzazione, le trasformazioni dei dati e dell'invio della richiesta dinamico?*</span><span class="sxs-lookup"><span data-stu-id="ba4cd-128">*How can you handle cross-cutting concerns such as authorization, data transformations, and dynamic request dispatching?*</span></span>

<span data-ttu-id="ba4cd-129">Implementazione di problemi di sicurezza e a montaggio incrociato ad esempio sicurezza e l'autorizzazione ogni microservizio possono richiedere notevole impegno di sviluppo.</span><span class="sxs-lookup"><span data-stu-id="ba4cd-129">Implementing security and cross-cutting concerns like security and authorization on every microservice can require significant development effort.</span></span> <span data-ttu-id="ba4cd-130">Un possibile approccio è che i servizi all'interno dell'host Docker o interne al cluster, allo scopo di limitare l'accesso diretto dall'esterno e implementare tali problemi di montaggio incrociato in una posizione centralizzata, ad esempio un API Gateway.</span><span class="sxs-lookup"><span data-stu-id="ba4cd-130">A possible approach is to have those services within the Docker host or internal cluster, in order to restrict direct access to them from the outside, and to implement those cross-cutting concerns in a centralized place, like an API Gateway.</span></span>

-   <span data-ttu-id="ba4cd-131">*Modo le applicazioni client possono comunicare con i servizi che utilizzano i protocolli di facile integrazione Internet?*</span><span class="sxs-lookup"><span data-stu-id="ba4cd-131">*How can client apps communicate with services that use non-Internet-friendly protocols?*</span></span>

<span data-ttu-id="ba4cd-132">In genere i protocolli utilizzati sul lato server (ad esempio AMQP o i protocolli binari) non sono supportati nelle App client.</span><span class="sxs-lookup"><span data-stu-id="ba4cd-132">Protocols used on the server side (like AMQP or binary protocols) are usually not supported in client apps.</span></span> <span data-ttu-id="ba4cd-133">Pertanto, le richieste devono essere eseguite tramite protocolli quali HTTP/HTTPS e convertite in un secondo momento gli altri protocolli.</span><span class="sxs-lookup"><span data-stu-id="ba4cd-133">Therefore, requests must be performed through protocols like HTTP/HTTPS and translated to the other protocols afterwards.</span></span> <span data-ttu-id="ba4cd-134">Oggetto *man-in-the-middle* approccio è utile per questa situazione.</span><span class="sxs-lookup"><span data-stu-id="ba4cd-134">A *man-in-the-middle* approach can help in this situation.</span></span>

-   <span data-ttu-id="ba4cd-135">*Come è possibile modellare un aspetto particolarmente apportato App per dispositivi mobili?*</span><span class="sxs-lookup"><span data-stu-id="ba4cd-135">*How can you shape a façade especially made for mobile apps?*</span></span>

<span data-ttu-id="ba4cd-136">L'API di microservizi più potrebbe non essere progettata anche per le esigenze di diverse applicazioni client.</span><span class="sxs-lookup"><span data-stu-id="ba4cd-136">The API of multiple microservices might not be well designed for the needs of different client applications.</span></span> <span data-ttu-id="ba4cd-137">Le esigenze di un'app per dispositivi mobili, ad esempio, potrebbero essere diverse rispetto alle esigenze di un'app web.</span><span class="sxs-lookup"><span data-stu-id="ba4cd-137">For instance, the needs of a mobile app might be different than the needs of a web app.</span></span> <span data-ttu-id="ba4cd-138">App per dispositivi mobili, potrebbe essere necessario ottimizzare ulteriormente in modo che le risposte di dati possono essere più efficiente.</span><span class="sxs-lookup"><span data-stu-id="ba4cd-138">For mobile apps, you might need to optimize even further so that data responses can be more efficient.</span></span> <span data-ttu-id="ba4cd-139">È possibile farlo l'aggregazione dei dati da più microservizi e restituzione di un singolo set di dati e talvolta eliminando tutti i dati nella risposta non è necessario per l'app per dispositivi mobili.</span><span class="sxs-lookup"><span data-stu-id="ba4cd-139">You might do this by aggregating data from multiple microservices and returning a single set of data, and sometimes eliminating any data in the response that is not needed by the mobile app.</span></span> <span data-ttu-id="ba4cd-140">E, naturalmente, si potrebbero comprimere i dati.</span><span class="sxs-lookup"><span data-stu-id="ba4cd-140">And, of course, you might compress that data.</span></span> <span data-ttu-id="ba4cd-141">Nuovamente, un'API tra le app per dispositivi mobili e di microservizi facciata può risultare utile per questo scenario.</span><span class="sxs-lookup"><span data-stu-id="ba4cd-141">Again, a façade or API in between the mobile app and the microservices can be convenient for this scenario.</span></span>

## <a name="using-an-api-gateway"></a><span data-ttu-id="ba4cd-142">Utilizzo di un Gateway API</span><span class="sxs-lookup"><span data-stu-id="ba4cd-142">Using an API Gateway</span></span>

<span data-ttu-id="ba4cd-143">Quando si progettano e creare app di grandi dimensioni o complesse microservizio applicazioni con più client, può essere un buon approccio per prendere in considerazione un [API Gateway](http://microservices.io/patterns/apigateway.html).</span><span class="sxs-lookup"><span data-stu-id="ba4cd-143">When you design and build large or complex microservice-based applications with multiple client apps, a good approach to consider can be an [API Gateway](http://microservices.io/patterns/apigateway.html).</span></span> <span data-ttu-id="ba4cd-144">Si tratta di un servizio che fornisce un singolo punto di ingresso per alcuni gruppi di microservizi.</span><span class="sxs-lookup"><span data-stu-id="ba4cd-144">This is a service that provides a single entry point for certain groups of microservices.</span></span> <span data-ttu-id="ba4cd-145">È simile al [modello facciata](https://en.wikipedia.org/wiki/Facade_pattern) dalla progettazione object‑oriented, ma in questo caso, fa parte di un sistema distribuito.</span><span class="sxs-lookup"><span data-stu-id="ba4cd-145">It is similar to the [Facade pattern](https://en.wikipedia.org/wiki/Facade_pattern) from object‑oriented design, but in this case, it is part of a distributed system.</span></span> <span data-ttu-id="ba4cd-146">Il modello API Gateway è noto anche come "back-end per i server front-end" [(BFF)](http://samnewman.io/patterns/architectural/bff/) perché compili durante considerare le esigenze dell'applicazione client.</span><span class="sxs-lookup"><span data-stu-id="ba4cd-146">The API Gateway pattern is also sometimes known as the “backend for frontend” [(BFF)](http://samnewman.io/patterns/architectural/bff/) because you build it while thinking about the needs of the client app.</span></span>

<span data-ttu-id="ba4cd-147">Figura 4-13 viene illustrato come un Gateway di API personalizzata è possibile inserire in un'architettura basata su microservizio.</span><span class="sxs-lookup"><span data-stu-id="ba4cd-147">Figure 4-13 shows how a custom API Gateway can fit into a microservice-based architecture.</span></span>
<span data-ttu-id="ba4cd-148">È importante che evidenziare nel diagramma, si utilizzassero un singolo servizio Gateway di API personalizzato rivolta a più e le applicazioni client diversi.</span><span class="sxs-lookup"><span data-stu-id="ba4cd-148">It is important to highlight that in that diagram, you would be using a single custom API Gateway service facing multiple and different client apps.</span></span> <span data-ttu-id="ba4cd-149">Di fatto può essere un rischio significativo perché il servizio API Gateway verrà aumento delle dimensioni e in continua evoluzione dipende dalle esigenze diverse dalle App client.</span><span class="sxs-lookup"><span data-stu-id="ba4cd-149">That fact can be an important risk because your API Gateway service will be growing and evolving based on many different requirements from the client apps.</span></span> <span data-ttu-id="ba4cd-150">Infine, sarà troppo grandi a causa di tali requisiti diversi e in modo efficace potrebbe essere abbastanza simile a qualsiasi applicazione o un servizio monolitico.</span><span class="sxs-lookup"><span data-stu-id="ba4cd-150">Eventually, it will be bloated because of those different needs and effectively it could be pretty similar to a monolithic application or monolithic service.</span></span> <span data-ttu-id="ba4cd-151">Che è molto è consigliabile suddividere il API Gateway in più servizi o più gateway API più piccoli, uno per ogni tipo di fattore di forma, ad esempio.</span><span class="sxs-lookup"><span data-stu-id="ba4cd-151">That is why it is very much recommended to split the API Gateway in multiple services or multiple smaller API Gateways, one per form-factor type, for instance.</span></span>

![](./media/image13.png)

<span data-ttu-id="ba4cd-152">**Figura 4-13**.</span><span class="sxs-lookup"><span data-stu-id="ba4cd-152">**Figure 4-13**.</span></span> <span data-ttu-id="ba4cd-153">Utilizzando un API Gateway implementato come un servizio Web API personalizzato</span><span class="sxs-lookup"><span data-stu-id="ba4cd-153">Using an API Gateway implemented as a custom Web API service</span></span>

<span data-ttu-id="ba4cd-154">In questo esempio, il API Gateway potrebbe essere implementato come un servizio Web API personalizzato in esecuzione come un contenitore.</span><span class="sxs-lookup"><span data-stu-id="ba4cd-154">In this example, the API Gateway would be implemented as a custom Web API service running as a container.</span></span>

<span data-ttu-id="ba4cd-155">Come accennato, è necessario implementare diverse API gateway in modo che è possibile avere un aspetto diverso per le esigenze di ciascuna applicazione client.</span><span class="sxs-lookup"><span data-stu-id="ba4cd-155">As mentioned, you should implement several API Gateways so that you can have a different façade for the needs of each client app.</span></span> <span data-ttu-id="ba4cd-156">Ogni API Gateway può fornire un diverso API personalizzate per ogni app client, eventualmente anche in base al fattore di forma client mediante l'implementazione di codice specifico adapter quali sotto chiama più microservizi interno.</span><span class="sxs-lookup"><span data-stu-id="ba4cd-156">Each API Gateway can provide a different API tailored for each client app, possibly even based on the client form factor by implementing specific adapter code which underneath calls multiple internal microservices.</span></span>

<span data-ttu-id="ba4cd-157">Poiché un Gateway di API personalizzata è in genere un aggregatore di dati, è necessario prestare attenzione con esso.</span><span class="sxs-lookup"><span data-stu-id="ba4cd-157">Since a custom API Gateway is usually a data aggregator, you need to be careful with it.</span></span> <span data-ttu-id="ba4cd-158">In genere non è consigliabile disporre di un singolo API Gateway l'aggregazione di tutte le microservizi interne dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="ba4cd-158">Usually it isn't a good idea to have a single API Gateway aggregating all the internal microservices of your application.</span></span> <span data-ttu-id="ba4cd-159">In caso affermativo, funge da aggregator monolitico o orchestrator e viola l'autonomia microservizio accoppiando tutti di microservizi.</span><span class="sxs-lookup"><span data-stu-id="ba4cd-159">If it does, it acts as a monolithic aggregator or orchestrator and violates microservice autonomy by coupling all the microservices.</span></span> <span data-ttu-id="ba4cd-160">Di conseguenza, i gateway API devono essere separati in base ai limiti di business e di non agire come un aggregatore per l'intera applicazione.</span><span class="sxs-lookup"><span data-stu-id="ba4cd-160">Therefore, the API Gateways should be segregated based on business boundaries and not act as an aggregator for the whole application.</span></span>

<span data-ttu-id="ba4cd-161">Talvolta un Gateway di API granulare possono anche essere un microservizio autonomamente e dispone inoltre di un dominio o nome dell'azienda e i dati correlati.</span><span class="sxs-lookup"><span data-stu-id="ba4cd-161">Sometimes a granular API Gateway can also be a microservice by itself, and even have a domain or business name and related data.</span></span> <span data-ttu-id="ba4cd-162">Con i limiti del API Gateway stabiliti dall'azienda o dominio consentirà di ottenere una progettazione migliore.</span><span class="sxs-lookup"><span data-stu-id="ba4cd-162">Having the API Gateway’s boundaries dictated by the business or domain will help you to get a better design.</span></span>

<span data-ttu-id="ba4cd-163">Granularità nel livello API Gateway può essere particolarmente utile per applicazioni composite più avanzate dell'interfaccia utente in base a microservizi, poiché il concetto di un API Gateway con granularità fine è simile a un servizio di composizione dell'interfaccia utente.</span><span class="sxs-lookup"><span data-stu-id="ba4cd-163">Granularity in the API Gateway tier can be especially useful for more advanced composite UI applications based on microservices, because the concept of a fine-grained API Gateway is similar to a UI composition service.</span></span> <span data-ttu-id="ba4cd-164">Viene illustrato questo più avanti nel [creazione composito dell'interfaccia utente basata su microservizi](#creating-composite-ui-based-on-microservices-including-visual-ui-shape-and-layout-generated-by-multiple-microservices).</span><span class="sxs-lookup"><span data-stu-id="ba4cd-164">We discuss this later in the [Creating composite UI based on microservices](#creating-composite-ui-based-on-microservices-including-visual-ui-shape-and-layout-generated-by-multiple-microservices).</span></span>

<span data-ttu-id="ba4cd-165">Pertanto, per molte applicazioni di medie e grandi dimensioni, dimensioni, tramite un Gateway di API personalizzata è in genere un buon approccio, ma non come un singolo aggregator monolitico o univoco Gateway centrale API personalizzata.</span><span class="sxs-lookup"><span data-stu-id="ba4cd-165">Therefore, for many medium- and large-size applications, using a custom-built API Gateway is usually a good approach, but not as a single monolithic aggregator or unique central custom API Gateway.</span></span>

<span data-ttu-id="ba4cd-166">Un altro approccio consiste nell'utilizzare un prodotto come [gestione API di Azure](https://azure.microsoft.com/services/api-management/) come illustrato nella figura 4-14.</span><span class="sxs-lookup"><span data-stu-id="ba4cd-166">Another approach is to use a product like [Azure API Management](https://azure.microsoft.com/services/api-management/) as shown in Figure 4-14.</span></span> <span data-ttu-id="ba4cd-167">Questo approccio non solo le proprie esigenze API Gateway è stato risolto, ma fornisce funzionalità come la raccolta di informazioni dalle API.</span><span class="sxs-lookup"><span data-stu-id="ba4cd-167">This approach not only solves your API Gateway needs, but provides features like gathering insights from your APIs.</span></span> <span data-ttu-id="ba4cd-168">Se si utilizza una soluzione di gestione API, un API Gateway è solo un componente all'interno di tale completa soluzione di gestione API.</span><span class="sxs-lookup"><span data-stu-id="ba4cd-168">If you are using an API management solution, an API Gateway is only a component within that full API management solution.</span></span>

![](./media/image14.png)

<span data-ttu-id="ba4cd-169">**Figura 4-14**.</span><span class="sxs-lookup"><span data-stu-id="ba4cd-169">**Figure 4-14**.</span></span> <span data-ttu-id="ba4cd-170">Tramite Gestione API di Azure per il Gateway API</span><span class="sxs-lookup"><span data-stu-id="ba4cd-170">Using Azure API Management for your API Gateway</span></span>

<span data-ttu-id="ba4cd-171">In questo caso, quando si utilizza un prodotto come gestione API di Azure, il fatto che potrebbe essere un singolo API Gateway non è così rischiosa perché questi tipi di gateway API sono "sottili", vale a dire non implementare c# codice personalizzato che può evolversi verso un monolitico componente.</span><span class="sxs-lookup"><span data-stu-id="ba4cd-171">In this case, when using a product like Azure API Management, the fact that you might have a single API Gateway is not so risky because these kinds of API Gateways are "thinner", meaning that you don't implement custom C# code that could evolve towards a monolithic component.</span></span> 

<span data-ttu-id="ba4cd-172">Questo tipo di prodotto è più un proxy inverso per le comunicazioni in ingresso, in cui è possibile anche filtrare le API da di microservizi interno nonché applicare l'autorizzazione per le API pubblicate di questo singolo livello.</span><span class="sxs-lookup"><span data-stu-id="ba4cd-172">This type of product acts more like a reverse proxy for ingress communication, where you can also filter the APIs from the internal microservices plus apply authorization to the published APIs in this single tier.</span></span>

<span data-ttu-id="ba4cd-173">Le informazioni disponibili da una Guida di sistema di gestione API comprendere come vengono utilizzate le API e come sono in esecuzione.</span><span class="sxs-lookup"><span data-stu-id="ba4cd-173">The insights available from an API Management system help you get an understanding of how your APIs are being used and how they are performing.</span></span> <span data-ttu-id="ba4cd-174">Tale scopo, consentendo di visualizzare quasi in tempo reale analitica report e identificare le tendenze che potrebbero avere un impatto aziendale.</span><span class="sxs-lookup"><span data-stu-id="ba4cd-174">They do this by letting you view near real-time analytics reports and identifying trends that might impact your business.</span></span> <span data-ttu-id="ba4cd-175">Inoltre, è possibile avere log sull'attività di richiesta e risposta per un'ulteriore analisi offline e online.</span><span class="sxs-lookup"><span data-stu-id="ba4cd-175">Plus, you can have logs about request and response activity for further online and offline analysis.</span></span>

<span data-ttu-id="ba4cd-176">Con gestione API di Azure, è possibile proteggere le API mediante una chiave, un token e il filtro IP.</span><span class="sxs-lookup"><span data-stu-id="ba4cd-176">With Azure API Management, you can secure your APIs using a key, a token, and IP filtering.</span></span> <span data-ttu-id="ba4cd-177">Queste funzionalità consentono di applicare quote flessibili e con granularità fine e limiti di velocità, modificare la forma e il comportamento delle API usando i criteri e migliorare le prestazioni con la memorizzazione nella cache di risposta.</span><span class="sxs-lookup"><span data-stu-id="ba4cd-177">These features let you enforce flexible and fine-grained quotas and rate limits, modify the shape and behavior of your APIs using policies, and improve performance with response caching.</span></span>

<span data-ttu-id="ba4cd-178">In questa Guida e l'applicazione di esempio di riferimento (eShopOnContainers), ci stiamo limitando l'architettura a un'architettura più semplice e personalizzata nei contenitori per concentrarsi sui contenitori normali senza l'utilizzo di prodotti PaaS come gestione API di Azure.</span><span class="sxs-lookup"><span data-stu-id="ba4cd-178">In this guide and the reference sample application (eShopOnContainers), we are limiting the architecture to a simpler and custom-made containerized architecture in order to focus on plain containers without using PaaS products like Azure API Management.</span></span> <span data-ttu-id="ba4cd-179">Ma microservizio basato su applicazioni di grandi dimensioni che vengono distribuiti in Microsoft Azure, si consiglia di esaminare e adottare gestione API di Azure come base per il gateway API.</span><span class="sxs-lookup"><span data-stu-id="ba4cd-179">But for large microservice-based applications that are deployed into Microsoft Azure, we encourage you to review and adopt Azure API Management as the base for your API Gateways.</span></span>

## <a name="drawbacks-of-the-api-gateway-pattern"></a><span data-ttu-id="ba4cd-180">Svantaggi della serie API Gateway</span><span class="sxs-lookup"><span data-stu-id="ba4cd-180">Drawbacks of the API Gateway pattern</span></span>

-   <span data-ttu-id="ba4cd-181">Lo svantaggio più importante è che quando si implementa un API Gateway, si è accoppiamento tale livello con il microservizi interno.</span><span class="sxs-lookup"><span data-stu-id="ba4cd-181">The most important drawback is that when you implement an API Gateway, you are coupling that tier with the internal microservices.</span></span> <span data-ttu-id="ba4cd-182">Accoppiamento questo potrebbe comportare gravi difficoltà per l'applicazione.</span><span class="sxs-lookup"><span data-stu-id="ba4cd-182">Coupling like this might introduce serious difficulties for your application.</span></span> <span data-ttu-id="ba4cd-183">Vaster Clemens architect team di Azure Service Bus, fa riferimento a questa difficoltà potenziali come "nuovo ESB" nel suo "[messaggistica e Microservizi](https://www.youtube.com/watch?v=rXi5CLjIQ9k)" sessione GOTO 2016.</span><span class="sxs-lookup"><span data-stu-id="ba4cd-183">Clemens Vaster, architect at the Azure Service Bus team, refers to this potential difficulty as “the new ESB” in his "[Messaging and Microservices](https://www.youtube.com/watch?v=rXi5CLjIQ9k)" session at GOTO 2016.</span></span>

-   <span data-ttu-id="ba4cd-184">Usando un API Gateway microservizi crea un aggiuntivo possibile singolo punto di errore.</span><span class="sxs-lookup"><span data-stu-id="ba4cd-184">Using a microservices API Gateway creates an additional possible single point of failure.</span></span>

-   <span data-ttu-id="ba4cd-185">Un API Gateway può introdurre il tempo di risposta maggiore a causa della chiamata di rete aggiuntiva.</span><span class="sxs-lookup"><span data-stu-id="ba4cd-185">An API Gateway can introduce increased response time due to the additional network call.</span></span> <span data-ttu-id="ba4cd-186">Tuttavia, questa chiamata aggiuntiva presenta in genere un impatto minore rispetto a quelle con un client di interfaccia che troppo "frammentate" chiamare direttamente il microservizi interno.</span><span class="sxs-lookup"><span data-stu-id="ba4cd-186">However, this extra call usually has less impact than having a client interface that is too chatty directly calling the internal microservices.</span></span>

-   <span data-ttu-id="ba4cd-187">Se non scalabilità correttamente, il API Gateway può diventare un collo di bottiglia.</span><span class="sxs-lookup"><span data-stu-id="ba4cd-187">If not scaled out properly, the API Gateway can become a bottleneck.</span></span>

-   <span data-ttu-id="ba4cd-188">Un API Gateway richiede il costo di sviluppo aggiuntive e manutenzione future se include la logica personalizzata e aggregazione dei dati.</span><span class="sxs-lookup"><span data-stu-id="ba4cd-188">An API Gateway requires additional development cost and future maintenance if it includes custom logic and data aggregation.</span></span> <span data-ttu-id="ba4cd-189">Gli sviluppatori devono aggiornare il Gateway di API per esporre gli endpoint di ogni del microservizio.</span><span class="sxs-lookup"><span data-stu-id="ba4cd-189">Developers must update the API Gateway in order to expose each microservice’s endpoints.</span></span> <span data-ttu-id="ba4cd-190">Inoltre, le modifiche implementazione di microservizi interno potrebbero provocare modifiche al codice a livello di API Gateway.</span><span class="sxs-lookup"><span data-stu-id="ba4cd-190">Moreover, implementation changes in the internal microservices might cause code changes at the API Gateway level.</span></span> <span data-ttu-id="ba4cd-191">Tuttavia, se il API Gateway semplicemente l'applicazione di sicurezza, la registrazione e controllo delle versioni (come avviene quando si utilizza Gestione API di Azure), il costo di sviluppo aggiuntive potrebbe non essere applicabili.</span><span class="sxs-lookup"><span data-stu-id="ba4cd-191">However, if the API Gateway is just applying security, logging, and versioning (as when using Azure API Management), this additional development cost might not apply.</span></span>

-   <span data-ttu-id="ba4cd-192">Se il API Gateway sviluppato da un singolo gruppo, è possibile che un collo di bottiglia di sviluppo.</span><span class="sxs-lookup"><span data-stu-id="ba4cd-192">If the API Gateway is developed by a single team, there can be a development bottleneck.</span></span> <span data-ttu-id="ba4cd-193">Si tratta di un altro motivo un approccio migliore per diversi specifico API gateway che rispondono alle esigenze del client diversi.</span><span class="sxs-lookup"><span data-stu-id="ba4cd-193">This is another reason why a better approach is to have several fined-grained API Gateways that respond to different client needs.</span></span> <span data-ttu-id="ba4cd-194">È anche possibile isolare internamente il API Gateway in più aree o i livelli di proprietà di diversi team lavorando di microservizi interno.</span><span class="sxs-lookup"><span data-stu-id="ba4cd-194">You could also segregate the API Gateway internally into multiple areas or layers that are owned by the different teams working on the internal microservices.</span></span>

## <a name="additional-resources"></a><span data-ttu-id="ba4cd-195">Risorse aggiuntive</span><span class="sxs-lookup"><span data-stu-id="ba4cd-195">Additional resources</span></span>

-   <span data-ttu-id="ba4cd-196">**Charles Richardson. Modello: API Gateway / back-end per front-end**
    [*http://microservices.io/patterns/apigateway.html*](http://microservices.io/patterns/apigateway.html)</span><span class="sxs-lookup"><span data-stu-id="ba4cd-196">**Charles Richardson. Pattern: API Gateway / Backend for Front-End**
[*http://microservices.io/patterns/apigateway.html*](http://microservices.io/patterns/apigateway.html)</span></span>

-   <span data-ttu-id="ba4cd-197">**Gestione API di Azure**
    [*https://azure.microsoft.com/services/api-management/*](https://azure.microsoft.com/services/api-management/)</span><span class="sxs-lookup"><span data-stu-id="ba4cd-197">**Azure API Management**
[*https://azure.microsoft.com/services/api-management/*](https://azure.microsoft.com/services/api-management/)</span></span>

-   <span data-ttu-id="ba4cd-198">**udi Dahan. Composizione orientato ai servizi**\\</span><span class="sxs-lookup"><span data-stu-id="ba4cd-198">**Udi Dahan. Service Oriented Composition**\\</span></span>
    [<span data-ttu-id="ba4cd-199">*http://UdiDahan.com/2014/07/30/Service-Oriented-Composition-with-video/*</span><span class="sxs-lookup"><span data-stu-id="ba4cd-199">*http://udidahan.com/2014/07/30/service-oriented-composition-with-video/*</span></span>](http://udidahan.com/2014/07/30/service-oriented-composition-with-video/)

-   <span data-ttu-id="ba4cd-200">**Clemens Vasters. Messaggistica e Microservizi a GOTO 2016** (video) [ *https://www.youtube.com/watch?v=rXi5CLjIQ9k*](https://www.youtube.com/watch?v=rXi5CLjIQ9k)</span><span class="sxs-lookup"><span data-stu-id="ba4cd-200">**Clemens Vasters. Messaging and Microservices at GOTO 2016** (video) [*https://www.youtube.com/watch?v=rXi5CLjIQ9k*](https://www.youtube.com/watch?v=rXi5CLjIQ9k)</span></span>


>[!div class="step-by-step"]
<span data-ttu-id="ba4cd-201">[Precedente] (identificare-microservizio-dominio-modello-boundaries.md) [Avanti] (comunicazione-in-microservizio-architecture.md)</span><span class="sxs-lookup"><span data-stu-id="ba4cd-201">[Previous] (identify-microservice-domain-model-boundaries.md) [Next] (communication-in-microservice-architecture.md)</span></span>
