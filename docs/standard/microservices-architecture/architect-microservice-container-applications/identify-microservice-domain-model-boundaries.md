---
title: Identificazione dei limiti di modello di dominio per ogni microservizio
description: Architettura di Microservizi .NET per le applicazioni nei contenitori .NET | Identificazione dei limiti di modello di dominio per ogni microservizio
keywords: Docker, microservizi, ASP.NET, contenitore
author: CESARDELATORRE
ms.author: wiwagn
ms.date: 05/26/2017
ms.prod: .net-core
ms.technology: dotnet-docker
ms.topic: article
ms.openlocfilehash: 6fef11e5718706701abb29149c4c4a23ba39bde0
ms.sourcegitcommit: c2e216692ef7576a213ae16af2377cd98d1a67fa
ms.translationtype: HT
ms.contentlocale: it-IT
ms.lasthandoff: 10/22/2017
---
# <a name="identify-domain-model-boundaries-for-each-microservice"></a><span data-ttu-id="6083c-104">Identificare i limiti di modello di dominio per ogni microservizio</span><span class="sxs-lookup"><span data-stu-id="6083c-104">Identify domain-model boundaries for each microservice</span></span>

<span data-ttu-id="6083c-105">L'obiettivo quando si identificano i limiti di modello e la dimensione di ogni microservizio è non per ottenere la separazione più granulare possibile, anche se si deve tende verso microservizi piccolo se possibile.</span><span class="sxs-lookup"><span data-stu-id="6083c-105">The goal when identifying model boundaries and size for each microservice is not to get to the most granular separation possible, although you should tend toward small microservices if possible.</span></span> <span data-ttu-id="6083c-106">Al contrario, l'obiettivo dovrebbe essere per ottenere la separazione di più significativa interattiva per le informazioni sul dominio.</span><span class="sxs-lookup"><span data-stu-id="6083c-106">Instead, your goal should be to get to the most meaningful separation guided by your domain knowledge.</span></span> <span data-ttu-id="6083c-107">Non viene sulle dimensioni, ma le funzionalità di business.</span><span class="sxs-lookup"><span data-stu-id="6083c-107">The emphasis is not on the size, but instead on business capabilities.</span></span> <span data-ttu-id="6083c-108">Inoltre, se è chiaro coesione necessari per una determinata area dell'applicazione in base a un numero elevato di dipendenze, che indica la necessità di un singolo microservizio, troppo.</span><span class="sxs-lookup"><span data-stu-id="6083c-108">In addition, if there is clear cohesion needed for a certain area of the application based on a high number of dependencies, that indicates the need for a single microservice, too.</span></span> <span data-ttu-id="6083c-109">Coesione è un modo per identificare come separare o gruppo di microservizi insieme.</span><span class="sxs-lookup"><span data-stu-id="6083c-109">Cohesion is a way to identify how to break apart or group together microservices.</span></span> <span data-ttu-id="6083c-110">Infine, ottenere ulteriori informazioni sul dominio, è necessario adattare le dimensioni del microservizio, in modo iterativo.</span><span class="sxs-lookup"><span data-stu-id="6083c-110">Ultimately, while you gain more knowledge about the domain, you should adapt the size of your microservice, iteratively.</span></span> <span data-ttu-id="6083c-111">Individuazione della dimensione giusta non è un processo monofase.</span><span class="sxs-lookup"><span data-stu-id="6083c-111">Finding the right size is not a one-shot process.</span></span>

<span data-ttu-id="6083c-112">[SAM Newman](http://samnewman.io/), un promotore riconosciuto di microservizi e l'autore del libro [Microservizi compilazione](http://samnewman.io/books/building_microservices/), viene evidenziato che è necessario progettare il microservizi basato sul modello di contesto limitato (BC) (parte di basati su dominio progettazione), come descritto in precedenza.</span><span class="sxs-lookup"><span data-stu-id="6083c-112">[Sam Newman](http://samnewman.io/), a recognized promoter of microservices and author of the book [Building Microservices](http://samnewman.io/books/building_microservices/), highlights that you should design your microservices based on the Bounded Context (BC) pattern (part of domain-driven design), as introduced earlier.</span></span> <span data-ttu-id="6083c-113">In alcuni casi, a BC potrebbe essere composte di diversi servizi fisici, ma non viceversa.</span><span class="sxs-lookup"><span data-stu-id="6083c-113">Sometimes, a BC could be composed of several physical services, but not vice versa.</span></span>

<span data-ttu-id="6083c-114">Si applica un modello di dominio con le entità di dominio specifico all'interno di un BC concreti o microservizio.</span><span class="sxs-lookup"><span data-stu-id="6083c-114">A domain model with specific domain entities applies within a concrete BC or microservice.</span></span> <span data-ttu-id="6083c-115">Un BC delimita l'applicabilità di un modello di dominio e i membri del team developer offre una comprensione chiara e condivisa della quale deve essere coerente e cosa possono essere sviluppata in modo indipendente.</span><span class="sxs-lookup"><span data-stu-id="6083c-115">A BC delimits the applicability of a domain model and gives developer team members a clear and shared understanding of what must be cohesive and what can be developed independently.</span></span> <span data-ttu-id="6083c-116">Questi sono gli stessi obiettivi per microservizi.</span><span class="sxs-lookup"><span data-stu-id="6083c-116">These are the same goals for microservices.</span></span>

<span data-ttu-id="6083c-117">Un altro strumento che segnala la scelta di progettazione è [legge di Conway](https://en.wikipedia.org/wiki/Conway%27s_law), che indica che un'applicazione non rifletteranno i limiti dell'organizzazione che ha prodotto sociali.</span><span class="sxs-lookup"><span data-stu-id="6083c-117">Another tool that informs your design choice is [Conway’s law](https://en.wikipedia.org/wiki/Conway%27s_law), which states that an application will reflect the social boundaries of the organization that produced it.</span></span> <span data-ttu-id="6083c-118">Ma in alcuni casi è vero il contrario: organizzazione della società è costituita da software.</span><span class="sxs-lookup"><span data-stu-id="6083c-118">But sometimes the opposite is true—the company’s organization is formed by the software.</span></span> <span data-ttu-id="6083c-119">Potrebbe essere necessario invertire legge di Conway e i limiti di compilazione nel modo desiderato all'azienda di essere organizzate, inclinati verso consulenza per processi di business.</span><span class="sxs-lookup"><span data-stu-id="6083c-119">You might need to reverse Conway’s law and build the boundaries the way you want the company to be organized, leaning toward business process consulting.</span></span>

<span data-ttu-id="6083c-120">Per identificare i contesti delimitati, un modello DDD che può essere utilizzato per questo è il [contesto Mapping modello](https://www.infoq.com/articles/ddd-contextmapping).</span><span class="sxs-lookup"><span data-stu-id="6083c-120">In order to identify bounded contexts, a DDD pattern that can be used for this is the [Context Mapping pattern](https://www.infoq.com/articles/ddd-contextmapping).</span></span> <span data-ttu-id="6083c-121">Con il Mapping di contesto, si identificano i vari contesti in cui l'applicazione e i loro limiti.</span><span class="sxs-lookup"><span data-stu-id="6083c-121">With Context Mapping, you identify the various contexts in the application and their boundaries.</span></span> <span data-ttu-id="6083c-122">È comune disporre di un limite per ogni sottosistema, piccolo e un contesto diverso per l'istanza.</span><span class="sxs-lookup"><span data-stu-id="6083c-122">It is common to have a different context and boundary for each small subsystem, for instance.</span></span> <span data-ttu-id="6083c-123">La mappa di contesto è un modo per definire e rendere esplicito tali limiti tra domini.</span><span class="sxs-lookup"><span data-stu-id="6083c-123">The Context Map is a way to define and make explicit those boundaries between domains.</span></span> <span data-ttu-id="6083c-124">Un BC è autonomo e include i dettagli di un singolo dominio, dettagli come le entità di dominio e definisce contratti di integrazione con altri BCs.</span><span class="sxs-lookup"><span data-stu-id="6083c-124">A BC is autonomous and includes the details of a single domain—details like the domain entities—and defines integration contracts with other BCs.</span></span> <span data-ttu-id="6083c-125">Questa operazione è simile alla definizione di un microservizio: è autonomo, implementa alcune funzionalità del dominio e deve fornire le interfacce.</span><span class="sxs-lookup"><span data-stu-id="6083c-125">This is similar to the definition of a microservice: it is autonomous, it implements certain domain capability, and it must provide interfaces.</span></span> <span data-ttu-id="6083c-126">Ecco perché il Mapping di contesto e il criterio di contesto delimitata sono approcci corretti per identificare i limiti del modello di dominio del microservizi.</span><span class="sxs-lookup"><span data-stu-id="6083c-126">This is why Context Mapping and the Bounded Context pattern are good approaches for identifying the domain model boundaries of your microservices.</span></span>

<span data-ttu-id="6083c-127">Quando si progetta un'applicazione di grandi dimensioni, verrà visualizzato come il modello di dominio possa essere frammentato, ovvero un esperto di dominio del dominio di catalogo il nome entità in modo diverso nei domini di catalogo e inventario rispetto a un dominio di spedizione esperto di dominio, per l'istanza.</span><span class="sxs-lookup"><span data-stu-id="6083c-127">When designing a large application, you will see how its domain model can be fragmented — a domain expert from the catalog domain will name entities differently in the catalog and inventory domains than a shipping domain expert, for instance.</span></span> <span data-ttu-id="6083c-128">O l'entità utente di dominio potrebbe essere diverso in dimensioni e il numero di attributi quando si lavora con CRM esperti che desiderano archiviare ogni dettaglio sul cliente rispetto a per un ordinamento esperto di dominio che è necessario impostare solo dati parziali sul cliente.</span><span class="sxs-lookup"><span data-stu-id="6083c-128">Or the user domain entity might be different in size and number of attributes when dealing with a CRM expert who wants to store every detail about the customer than for an ordering domain expert who just needs partial data about the customer.</span></span> <span data-ttu-id="6083c-129">È molto difficile evitare ambiguità tra tutti i termini di dominio in tutti i domini correlati a un'applicazione di grandi dimensioni.</span><span class="sxs-lookup"><span data-stu-id="6083c-129">It is very hard to disambiguate all domain terms across all the domains related to a large application.</span></span> <span data-ttu-id="6083c-130">Ma la cosa più importante è che non tentare di unificare le condizioni; al contrario, accettare le differenze e ricchezza fornite da ogni dominio.</span><span class="sxs-lookup"><span data-stu-id="6083c-130">But the most important thing is that you should not try to unify the terms; instead, accept the differences and richness provided by each domain.</span></span> <span data-ttu-id="6083c-131">Se si tenta di disporre di un database unificato per l'intera applicazione, tentativi di un vocabolario unificato saranno difficili e non saranno chiaro a uno dei più esperti di dominio.</span><span class="sxs-lookup"><span data-stu-id="6083c-131">If you try to have a unified database for the whole application, attempts at a unified vocabulary will be awkward and will not sound right to any of the multiple domain experts.</span></span> <span data-ttu-id="6083c-132">Pertanto, BCs (implementato come microservizi) consentirà di chiarire in cui è possibile utilizzare alcuni termini di dominio e in cui è necessario suddividere il sistema e creare ulteriori BCs con domini diversi.</span><span class="sxs-lookup"><span data-stu-id="6083c-132">Therefore, BCs (implemented as microservices) will help you to clarify where you can use certain domain terms and where you will need to split the system and create additional BCs with different domains.</span></span>

<span data-ttu-id="6083c-133">Si saprà che è stato ottenuto i limiti di destra e le dimensioni di ogni BC e modello di dominio se si dispone di alcune relazioni complesse tra i modelli di dominio e in genere non si desidera unire le informazioni da più modelli di dominio durante l'esecuzione di una tipica applicazione operazioni.</span><span class="sxs-lookup"><span data-stu-id="6083c-133">You will know that you got the right boundaries and sizes of each BC and domain model if you have few strong relationships between domain models, and you do not usually need to merge information from multiple domain models when performing typical application operations.</span></span>

<span data-ttu-id="6083c-134">Ad esempio la risposta alla domanda di dimensioni deve essere un modello di dominio per ogni microservizio migliore è il seguente: deve essere un BC autonomi, isolata possibili, che consente di lavorare senza dover costantemente passare ad altri contesti (altro modelli del microservizio).</span><span class="sxs-lookup"><span data-stu-id="6083c-134">Perhaps the best answer to the question of how big a domain model for each microservice should be is the following: it should have an autonomous BC, as isolated as possible, that enables you to work without having to constantly switch to other contexts (other microservice’s models).</span></span> <span data-ttu-id="6083c-135">Nella figura 4-10 è possibile visualizzare la modalità più microservizi (più BCs) ogni hanno i propri modelli e come è possono definire le relative entità, a seconda dei requisiti specifici per ogni dominio identificato nell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="6083c-135">In Figure 4-10 you can see how multiple microservices (multiple BCs) each have their own model and how their entities can be defined, depending on the specific requirements for each of the identified domains in your application.</span></span>

![](./media/image10.png)

<span data-ttu-id="6083c-136">**Figura 4-10**.</span><span class="sxs-lookup"><span data-stu-id="6083c-136">**Figure 4-10**.</span></span> <span data-ttu-id="6083c-137">Identificazione di entità e i limiti di modello microservizio</span><span class="sxs-lookup"><span data-stu-id="6083c-137">Identifying entities and microservice model boundaries</span></span>

<span data-ttu-id="6083c-138">Figura 4-10 è illustrato uno scenario di esempio relative a un sistema di gestione di conferenza in linea.</span><span class="sxs-lookup"><span data-stu-id="6083c-138">Figure 4-10 illustrates a sample scenario related to an online conference management system.</span></span> <span data-ttu-id="6083c-139">È stato identificato BCs diversi che possa essere implementata come microservizi, in base al dominio che gli esperti di dominio definiti per l'utente.</span><span class="sxs-lookup"><span data-stu-id="6083c-139">You have identified several BCs that could be implemented as microservices, based on domains that domain experts defined for you.</span></span> <span data-ttu-id="6083c-140">Come si può notare, vi sono entità che sono presenti solo in un modello di microservizio singolo, ad esempio pagamenti in microservizio il pagamento.</span><span class="sxs-lookup"><span data-stu-id="6083c-140">As you can see, there are entities that are present just in a single microservice model, like Payments in the Payment microservice.</span></span> <span data-ttu-id="6083c-141">Quelli sarà facili da implementare.</span><span class="sxs-lookup"><span data-stu-id="6083c-141">Those will be easy to implement.</span></span>

<span data-ttu-id="6083c-142">Tuttavia, potrebbe essere anche le entità che dispongono di una forma diversa ma condividono la stessa identità tra più modelli di dominio da di microservizi più.</span><span class="sxs-lookup"><span data-stu-id="6083c-142">However, you might also have entities that have a different shape but share the same identity across the multiple domain models from the multiple microservices.</span></span> <span data-ttu-id="6083c-143">Ad esempio, l'entità utente viene identificato in microservizio la gestione di conferenze.</span><span class="sxs-lookup"><span data-stu-id="6083c-143">For example, the User entity is identified in the Conferences Management microservice.</span></span> <span data-ttu-id="6083c-144">Dello stesso utente, con la stessa identità, è quello denominato acquirenti in microservizio l'ordinamento o quello denominato Payer microservizio il pagamento e anche di un cliente denominato in microservizio il servizio clienti.</span><span class="sxs-lookup"><span data-stu-id="6083c-144">That same user, with the same identity, is the one named Buyers in the Ordering microservice, or the one named Payer in the Payment microservice, and even the one named Customer in the Customer Service microservice.</span></span> <span data-ttu-id="6083c-145">Questo avviene perché, a seconda di [linguaggio universale](https://martinfowler.com/bliki/UbiquitousLanguage.html) che usa ogni esperto di dominio, un utente potrebbe avere una prospettiva diversa, anche con attributi diversi.</span><span class="sxs-lookup"><span data-stu-id="6083c-145">This is because, depending on the [ubiquitous language](https://martinfowler.com/bliki/UbiquitousLanguage.html) that each domain expert is using, a user might have a different perspective even with different attributes.</span></span> <span data-ttu-id="6083c-146">L'entità utente nel modello microservizio denominato gestione conferenze potrebbe essere la maggior parte dei relativi attributi dati personali.</span><span class="sxs-lookup"><span data-stu-id="6083c-146">The user entity in the microservice model named Conferences Management might have most of its personal data attributes.</span></span> <span data-ttu-id="6083c-147">Tuttavia, nella forma del contribuente microservizio pagamento o nella forma del cliente microservizio servizio clienti dello stesso utente potrebbe non essere necessario lo stesso elenco di attributi.</span><span class="sxs-lookup"><span data-stu-id="6083c-147">However, that same user in the shape of Payer in the microservice Payment or in the shape of Customer in the microservice Customer Service might not need the same list of attributes.</span></span>

<span data-ttu-id="6083c-148">Un approccio simile è illustrato nella figura 4-11.</span><span class="sxs-lookup"><span data-stu-id="6083c-148">A similar approach is illustrated in Figure 4-11.</span></span>

![](./media/image11.png)

<span data-ttu-id="6083c-149">**Figura 4-11**.</span><span class="sxs-lookup"><span data-stu-id="6083c-149">**Figure 4-11**.</span></span> <span data-ttu-id="6083c-150">La scomposizione di modelli di dati tradizionali in più modelli di dominio</span><span class="sxs-lookup"><span data-stu-id="6083c-150">Decomposing traditional data models into multiple domain models</span></span>

<span data-ttu-id="6083c-151">Si può notare come l'utente è presente nel modello microservizio conferenze gestione dell'entità utente è anche presente nel modulo dell'entità dell'acquirente in microservizio i prezzi, con attributi alternativi o i dettagli relativi all'utente quando è effettivamente un acquirente.</span><span class="sxs-lookup"><span data-stu-id="6083c-151">You can see how the user is present in the Conferences Management microservice model as the User entity and is also present in the form of the Buyer entity in the Pricing microservice, with alternate attributes or details about the user when it is actually a buyer.</span></span> <span data-ttu-id="6083c-152">Ogni microservizio o BC potrebbe non essere necessario tutti i dati relativi a un'entità utente solo parte di esso, a seconda del contesto o di problema da risolvere.</span><span class="sxs-lookup"><span data-stu-id="6083c-152">Each microservice or BC might not need all the data related to a User entity, just part of it, depending on the problem to solve or the context.</span></span> <span data-ttu-id="6083c-153">Ad esempio, nel modello di determinazione dei prezzi microservizio, non è necessario l'indirizzo o l'ID dell'utente, è sufficiente ID (identità) e lo stato, che hanno un impatto su sconti prezzi alle postazioni per acquirente.</span><span class="sxs-lookup"><span data-stu-id="6083c-153">For instance, in the Pricing microservice model, you do not need the address or the ID of the user, just ID (as identity) and Status, which will have an impact on discounts when pricing the seats per buyer.</span></span>

<span data-ttu-id="6083c-154">L'entità postazione ha lo stesso nome e attributi diversi in ogni modello di dominio.</span><span class="sxs-lookup"><span data-stu-id="6083c-154">The Seat entity has the same name but different attributes in each domain model.</span></span> <span data-ttu-id="6083c-155">Tuttavia, postazione condivide identità in base all'ID stesso, come accade con l'utente e l'acquirente.</span><span class="sxs-lookup"><span data-stu-id="6083c-155">However, Seat shares identity based on the same ID, as happens with User and Buyer.</span></span>

<span data-ttu-id="6083c-156">In pratica, è un concetto condiviso di un utente esistente in più servizi (domini), che condividono l'identità dell'utente.</span><span class="sxs-lookup"><span data-stu-id="6083c-156">Basically, there is a shared concept of a user that exists in multiple services (domains), which all share the identity of that user.</span></span> <span data-ttu-id="6083c-157">Ma in ogni modello di dominio potrebbero essere presenti informazioni aggiuntive o diverse entità utente.</span><span class="sxs-lookup"><span data-stu-id="6083c-157">But in each domain model there might be additional or different details about the user entity.</span></span> <span data-ttu-id="6083c-158">Pertanto, è necessario un modo per eseguire il mapping di un'entità utente da un dominio (microservizio) a un altro.</span><span class="sxs-lookup"><span data-stu-id="6083c-158">Therefore, there needs to be a way to map a user entity from one domain (microservice) to another.</span></span>

<span data-ttu-id="6083c-159">Esistono diversi vantaggi alle non condividere la stessa entità utente con lo stesso numero di attributi tra domini.</span><span class="sxs-lookup"><span data-stu-id="6083c-159">There are several benefits to not sharing the same user entity with the same number of attributes across domains.</span></span> <span data-ttu-id="6083c-160">Un vantaggio è ridurre la duplicazione, in modo che i modelli di microservizio non dispone di tutti i dati che non richiedono.</span><span class="sxs-lookup"><span data-stu-id="6083c-160">One benefit is to reduce duplication, so that microservice models do not have any data that they do not need.</span></span> <span data-ttu-id="6083c-161">Un altro vantaggio è che un microservizio master a cui appartiene un determinato tipo di dati per ogni entità in modo che gli aggiornamenti e query per il tipo di dati sono dovute solo tale microservizio.</span><span class="sxs-lookup"><span data-stu-id="6083c-161">Another benefit is having a master microservice that owns a certain type of data per entity so that updates and queries for that type of data are driven only by that microservice.</span></span>


>[!div class="step-by-step"]
<span data-ttu-id="6083c-162">[Precedente] (distributed-data-management.md) [Avanti] (direct-client-to-microservice-communication-versus-the-api-gateway-pattern.md)</span><span class="sxs-lookup"><span data-stu-id="6083c-162">[Previous] (distributed-data-management.md) [Next] (direct-client-to-microservice-communication-versus-the-api-gateway-pattern.md)</span></span>
