---
title: Stato e i dati nelle applicazioni di Docker
description: Architettura di Microservizi .NET per le applicazioni nei contenitori .NET | Stato e i dati nelle applicazioni di Docker
keywords: Docker, Microservizi, ASP.NET, contenitore, SQL, CosmosDB, Docker
author: CESARDELATORRE
ms.author: wiwagn
ms.date: 10/18/2017
ms.prod: .net-core
ms.technology: dotnet-docker
ms.topic: article
ms.openlocfilehash: 36d0fb9f27ef56b36c380e2fc972c79cff77003e
ms.sourcegitcommit: c2e216692ef7576a213ae16af2377cd98d1a67fa
ms.translationtype: HT
ms.contentlocale: it-IT
ms.lasthandoff: 10/22/2017
---
# <a name="state-and-data-in-docker-applications"></a><span data-ttu-id="66128-104">Stato e i dati nelle applicazioni di Docker</span><span class="sxs-lookup"><span data-stu-id="66128-104">State and data in Docker applications</span></span>

<span data-ttu-id="66128-105">Nella maggior parte dei casi, è possibile considerare un contenitore come un'istanza di un processo.</span><span class="sxs-lookup"><span data-stu-id="66128-105">In most cases, you can think of a container as an instance of a process.</span></span> <span data-ttu-id="66128-106">Un processo non mantiene uno stato persistente.</span><span class="sxs-lookup"><span data-stu-id="66128-106">A process does not maintain persistent state.</span></span> <span data-ttu-id="66128-107">Mentre un contenitore è possibile scrivere nello spazio di archiviazione locale, presupponendo che un'istanza sarà intorno all'infinito sarebbe simile a quanto presupponendo che un'unica posizione in memoria siano durevole.</span><span class="sxs-lookup"><span data-stu-id="66128-107">While a container can write to its local storage, assuming that an instance will be around indefinitely would be like assuming that a single location in memory will be durable.</span></span> <span data-ttu-id="66128-108">Immagini contenitore, ad esempio i processi, devono essere presupposto di avere più istanze o che sono infine essere terminate; Se vengono gestiti con un agente di orchestrazione del contenitore, è necessario considerare che potrebbe essere stata spostate da un nodo o da macchina virtuale a un altro.</span><span class="sxs-lookup"><span data-stu-id="66128-108">Container images, like processes, should be assumed to have multiple instances or that they will eventually be killed; if they’re managed with a container orchestrator, it should be assumed that they might get moved from one node or VM to another.</span></span>

<span data-ttu-id="66128-109">Docker offre una funzionalità denominata la *sovrapposizione sistema file*.</span><span class="sxs-lookup"><span data-stu-id="66128-109">Docker provides a feature named the *overlay file system*.</span></span> <span data-ttu-id="66128-110">Implementa un'operazione copy-on-write che archivia informazioni aggiornate al file system del contenitore radice.</span><span class="sxs-lookup"><span data-stu-id="66128-110">This implements a copy-on-write task that stores updated information to the root file system of the container.</span></span> <span data-ttu-id="66128-111">Tali informazioni sono inoltre l'immagine originale su cui è basato il contenitore.</span><span class="sxs-lookup"><span data-stu-id="66128-111">That information is in addition to the original image on which the container is based.</span></span> <span data-ttu-id="66128-112">Se il contenitore viene eliminato dal sistema, tali modifiche andranno perdute.</span><span class="sxs-lookup"><span data-stu-id="66128-112">If the container is deleted from the system, those changes are lost.</span></span> <span data-ttu-id="66128-113">Pertanto, sebbene sia possibile salvare lo stato di un contenitore entro lo spazio di archiviazione locale, la progettazione di un sistema di risoluzione di questo problema genererebbe un conflitto con il presupposto di progettazione di contenitore, che per impostazione predefinita è senza stato.</span><span class="sxs-lookup"><span data-stu-id="66128-113">Therefore, while it is possible to save the state of a container within its local storage, designing a system around this would conflict with the premise of container design, which by default is stateless.</span></span>

<span data-ttu-id="66128-114">Le soluzioni seguenti consentono di gestire i dati nelle applicazioni di Docker:</span><span class="sxs-lookup"><span data-stu-id="66128-114">The following solutions are used to manage persistent data in Docker applications:</span></span>

-   <span data-ttu-id="66128-115">[I volumi di dati](https://docs.docker.com/engine/tutorials/dockervolumes/) che di montaggio all'host.</span><span class="sxs-lookup"><span data-stu-id="66128-115">[Data volumes](https://docs.docker.com/engine/tutorials/dockervolumes/) that mount to the host.</span></span>

-   <span data-ttu-id="66128-116">[Contenitori di volumi di dati](https://docs.docker.com/engine/tutorials/dockervolumes/#creating-and-mounting-a-data-volume-container) che forniscono spazio di archiviazione condiviso tra contenitori tramite un contenitore esterno.</span><span class="sxs-lookup"><span data-stu-id="66128-116">[Data volume containers](https://docs.docker.com/engine/tutorials/dockervolumes/#creating-and-mounting-a-data-volume-container) that provide shared storage across containers using an external container.</span></span>

-   <span data-ttu-id="66128-117">[I plug-in di volume](https://docs.docker.com/engine/tutorials/dockervolumes/) che montare i volumi ai servizi remoti, fornendo la persistenza a lungo termine.</span><span class="sxs-lookup"><span data-stu-id="66128-117">[Volume plugins](https://docs.docker.com/engine/tutorials/dockervolumes/) that mount volumes to remote services, providing long-term persistence.</span></span>

-   <span data-ttu-id="66128-118">[Archiviazione di Azure](https://docs.microsoft.com/azure/storage/), che fornisce l'archiviazione geo-distribuibile, fornendo una buona soluzione persistenza a lungo termine per i contenitori.</span><span class="sxs-lookup"><span data-stu-id="66128-118">[Azure Storage](https://docs.microsoft.com/azure/storage/), which provides geo-distributable storage, providing a good long-term persistence solution for containers.</span></span>

-   <span data-ttu-id="66128-119">Ad esempio database relazionali remoti [Database SQL di Azure](https://azure.microsoft.com/services/sql-database/) o nei database NoSQL, ad esempio [Azure Cosmos DB](https://docs.microsoft.com/azure/cosmos-db/introduction), oppure memorizzare nella cache di servizi come [Redis](https://redis.io/).</span><span class="sxs-lookup"><span data-stu-id="66128-119">Remote relational databases like [Azure SQL Database](https://azure.microsoft.com/services/sql-database/) or NoSQL databases like [Azure Cosmos DB](https://docs.microsoft.com/azure/cosmos-db/introduction), or cache services like [Redis](https://redis.io/).</span></span>

<span data-ttu-id="66128-120">Nelle sezioni che seguono vengono fornite ulteriori informazioni su queste opzioni.</span><span class="sxs-lookup"><span data-stu-id="66128-120">The following provides more detail about these options.</span></span>

<span data-ttu-id="66128-121">**I volumi di dati** sono directory associate dal sistema operativo host per le directory nei contenitori.</span><span class="sxs-lookup"><span data-stu-id="66128-121">**Data volumes** are directories mapped from the host OS to directories in containers.</span></span> <span data-ttu-id="66128-122">Quando codice nel contenitore dispone di accesso alla directory, che l'accesso sia effettivamente in una directory nel sistema operativo host.</span><span class="sxs-lookup"><span data-stu-id="66128-122">When code in the container has access to the directory, that access is actually to a directory on the host OS.</span></span> <span data-ttu-id="66128-123">Questa directory non è correlata al ciclo di vita del contenitore e la directory sia accessibile dal codice eseguito direttamente nel sistema operativo host o da un altro contenitore che esegue il mapping nella stessa directory di host a se stessa.</span><span class="sxs-lookup"><span data-stu-id="66128-123">This directory is not tied to the lifetime of the container itself, and the directory can be accessed from code running directly on the host OS or by another container that maps the same host directory to itself.</span></span> <span data-ttu-id="66128-124">Di conseguenza, i volumi di dati sono progettati per rendere persistenti i dati in modo indipendente dal ciclo di vita del contenitore.</span><span class="sxs-lookup"><span data-stu-id="66128-124">Thus, data volumes are designed to persist data independently of the life of the container.</span></span> <span data-ttu-id="66128-125">Se si elimina un contenitore o un'immagine dall'host Docker, i dati persistenti nel volume di dati non viene eliminato.</span><span class="sxs-lookup"><span data-stu-id="66128-125">If you delete a container or an image from the Docker host, the data persisted in the data volume is not deleted.</span></span> <span data-ttu-id="66128-126">I dati in un volume è accessibile dall'host del sistema operativo anche.</span><span class="sxs-lookup"><span data-stu-id="66128-126">The data in a volume can be accessed from the host OS as well.</span></span>

<span data-ttu-id="66128-127">**Contenitori di volumi di dati** sono un'evoluzione di volumi di dati normali.</span><span class="sxs-lookup"><span data-stu-id="66128-127">**Data volume containers** are an evolution of regular data volumes.</span></span> <span data-ttu-id="66128-128">Un contenitore di volumi di dati è un contenitore semplice che include uno o più volumi di dati in esso contenuti.</span><span class="sxs-lookup"><span data-stu-id="66128-128">A data volume container is a simple container that has one or more data volumes within it.</span></span> <span data-ttu-id="66128-129">Il contenitore del volume di dati fornisce l'accesso ai contenitori da un punto di montaggio centrale.</span><span class="sxs-lookup"><span data-stu-id="66128-129">The data volume container provides access to containers from a central mount point.</span></span> <span data-ttu-id="66128-130">Questo metodo di accesso ai dati è utile perché estrae il percorso dei dati originali.</span><span class="sxs-lookup"><span data-stu-id="66128-130">This method of data access is convenient because it abstracts the location of the original data.</span></span> <span data-ttu-id="66128-131">A parte ciò, il comportamento è simile a quello di un volume di dati normale, pertanto i dati sono persistenti in questo contenitore dedicato in modo indipendente dal ciclo di vita dei contenitori dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="66128-131">Other than that, its behavior is similar to that of a regular data volume, so data is persisted in this dedicated container independently of the lifecycle of the application’s containers.</span></span>

<span data-ttu-id="66128-132">Come illustrato nella figura 4-5, volumi Docker regolari possono essere archiviati di fuori di contenitori stessi ma entro i limiti fisici del server host o VM.</span><span class="sxs-lookup"><span data-stu-id="66128-132">As shown in Figure 4-5, regular Docker volumes can be stored outside of the containers themselves but within the physical boundaries of the host server or VM.</span></span> <span data-ttu-id="66128-133">Tuttavia, i contenitori di Docker non possono accedere a un volume dal server di un host o macchina virtuale a un altro.</span><span class="sxs-lookup"><span data-stu-id="66128-133">However, Docker containers cannot access a volume from one host server or VM to another.</span></span> <span data-ttu-id="66128-134">In altre parole, con questi volumi, non è possibile gestire i dati condivisi tra contenitori che vengono eseguiti in diversi host Docker</span><span class="sxs-lookup"><span data-stu-id="66128-134">In other words, with these volumes, it is not possible to manage data shared between containers that run on different Docker hosts</span></span>

![](./media/image5.png)

<span data-ttu-id="66128-135">**Figura 4-5**.</span><span class="sxs-lookup"><span data-stu-id="66128-135">**Figure 4-5**.</span></span> <span data-ttu-id="66128-136">I volumi di dati e origini dati esterne per le applicazioni basate sul contenitore</span><span class="sxs-lookup"><span data-stu-id="66128-136">Data volumes and external data sources for container-based applications</span></span>

<span data-ttu-id="66128-137">Inoltre, quando da un agente di orchestrazione vengono gestiti i contenitori di Docker, contenitori potrebbero "Sposta" tra gli host, a seconda che le ottimizzazioni eseguite dal cluster.</span><span class="sxs-lookup"><span data-stu-id="66128-137">In addition, when Docker containers are managed by an orchestrator, containers might “move” between hosts, depending on the optimizations performed by the cluster.</span></span> <span data-ttu-id="66128-138">Pertanto, non è consigliabile utilizzare i volumi di dati per i dati aziendali.</span><span class="sxs-lookup"><span data-stu-id="66128-138">Therefore, it is not recommended that you use data volumes for business data.</span></span> <span data-ttu-id="66128-139">Ma sono un meccanismo efficace per lavorare con file di traccia, il file temporale, o simile che non influiranno la coerenza dei dati di business.</span><span class="sxs-lookup"><span data-stu-id="66128-139">But they are a good mechanism to work with trace files, temporal files, or similar that will not impact business data consistency.</span></span>

<span data-ttu-id="66128-140">**I plug-in di volume** come [Flocker](https://clusterhq.com/flocker/) forniscono accesso ai dati in tutti gli host in un cluster.</span><span class="sxs-lookup"><span data-stu-id="66128-140">**Volume plugins** like [Flocker](https://clusterhq.com/flocker/) provide data access across all hosts in a cluster.</span></span> <span data-ttu-id="66128-141">Mentre non tutti i plug-in di volume vengono creati nello stesso modo, i plug-in di volume in genere forniscono esternalizzati archiviazione affidabile permanente dai contenitori non modificabili.</span><span class="sxs-lookup"><span data-stu-id="66128-141">While not all volume plugins are created equally, volume plugins typically provide externalized persistent reliable storage from immutable containers.</span></span>

<span data-ttu-id="66128-142">**Origini dati remote e cache** strumenti come Database SQL di Azure, Azure Cosmos DB o una cache remota come Redis può essere usato in contenitore applicazioni esattamente come vengono utilizzati durante lo sviluppo senza contenitori.</span><span class="sxs-lookup"><span data-stu-id="66128-142">**Remote data sources and cache** tools like Azure SQL Database, Azure Cosmos DB, or a remote cache like Redis can be used in containerized applications the same way they are used when developing without containers.</span></span> <span data-ttu-id="66128-143">Questo è un modo comprovato per archiviare i dati delle applicazioni aziendali.</span><span class="sxs-lookup"><span data-stu-id="66128-143">This is a proven way to store business application data.</span></span>

<span data-ttu-id="66128-144">**Archiviazione di Azure.**</span><span class="sxs-lookup"><span data-stu-id="66128-144">**Azure Storage.**</span></span> <span data-ttu-id="66128-145">Dati di business in genere dovrà essere inserito nel database, come archiviazione di Azure o di risorse esterne.</span><span class="sxs-lookup"><span data-stu-id="66128-145">Business data usually will need to be placed in external resources or databases, like Azure Storage.</span></span> <span data-ttu-id="66128-146">Archiviazione di Azure, in concreto, fornisce i seguenti servizi nel cloud:</span><span class="sxs-lookup"><span data-stu-id="66128-146">Azure Storage, in concrete, provides the following services in the cloud:</span></span>

-   <span data-ttu-id="66128-147">Archiviazione BLOB archivia i dati di oggetto non strutturati.</span><span class="sxs-lookup"><span data-stu-id="66128-147">Blob storage stores unstructured object data.</span></span> <span data-ttu-id="66128-148">Un blob può essere qualsiasi tipo di dati di testo o binario, ad esempio i file di documento o un supporto (file immagini, audio e video).</span><span class="sxs-lookup"><span data-stu-id="66128-148">A blob can be any type of text or binary data, such as document or media files (images, audio, and video files).</span></span> <span data-ttu-id="66128-149">Archiviazione BLOB è detta anche archiviazione di oggetti.</span><span class="sxs-lookup"><span data-stu-id="66128-149">Blob storage is also referred to as Object storage.</span></span>

-   <span data-ttu-id="66128-150">Archiviazione di file offre spazio di archiviazione condiviso per le applicazioni legacy utilizzando il protocollo SMB standard.</span><span class="sxs-lookup"><span data-stu-id="66128-150">File storage offers shared storage for legacy applications using standard SMB protocol.</span></span> <span data-ttu-id="66128-151">Macchine virtuali di Azure e servizi cloud possono condividere i dati dei file nei componenti delle applicazioni tramite condivisioni montate.</span><span class="sxs-lookup"><span data-stu-id="66128-151">Azure virtual machines and cloud services can share file data across application components via mounted shares.</span></span> <span data-ttu-id="66128-152">Applicazioni locali possono accedere dati dei file in una condivisione tramite l'API REST del servizio File.</span><span class="sxs-lookup"><span data-stu-id="66128-152">On-premises applications can access file data in a share via the File service REST API.</span></span>

-   <span data-ttu-id="66128-153">Archiviazione tabelle vengono memorizzati i set di dati strutturati.</span><span class="sxs-lookup"><span data-stu-id="66128-153">Table storage stores structured datasets.</span></span> <span data-ttu-id="66128-154">Archiviazione tabelle è un archivio dati degli attributi di chiave NoSQL, che consente lo sviluppo rapido e l'accesso rapido a quantità elevate di dati.</span><span class="sxs-lookup"><span data-stu-id="66128-154">Table storage is a NoSQL key-attribute data store, which allows rapid development and fast access to large quantities of data.</span></span>

<span data-ttu-id="66128-155">**I database relazionali e database NoSQL.**</span><span class="sxs-lookup"><span data-stu-id="66128-155">**Relational databases and NoSQL databases.**</span></span> <span data-ttu-id="66128-156">Esistono numerose opzioni per i database esterni, dai database relazionali, come i database di SQL Server, PostgreSQL, Oracle o NoSQL Azure Cosmos DB, MongoDB, ecc. Questi database non intende essere spiegato come parte di questa Guida, poiché si trovano in un oggetto completamente diverso.</span><span class="sxs-lookup"><span data-stu-id="66128-156">There are many choices for external databases, from relational databases like SQL Server, PostgreSQL, Oracle, or NoSQL databases like Azure Cosmos DB, MongoDB, etc. These databases are not going to be explained as part of this guide since they are in a completely different subject.</span></span>


>[!div class="step-by-step"]
<span data-ttu-id="66128-157">[Precedente] (inserita in un contenitore-monolitico-applications.md) [Avanti] (service-oriented-architecture.md)</span><span class="sxs-lookup"><span data-stu-id="66128-157">[Previous] (containerize-monolithic-applications.md) [Next] (service-oriented-architecture.md)</span></span>
