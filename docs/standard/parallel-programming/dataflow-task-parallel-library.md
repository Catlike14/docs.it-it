---
title: Flusso di dati (Task Parallel Library)
ms.custom: 
ms.date: 03/30/2017
ms.prod: .net
ms.reviewer: 
ms.suite: 
ms.technology: dotnet-standard
ms.tgt_pltfrm: 
ms.topic: article
dev_langs:
- csharp
- vb
helpviewer_keywords:
- Task Parallel Library, dataflows
- TPL dataflow library
ms.assetid: 643575d0-d26d-4c35-8de7-a9c403e97dd6
caps.latest.revision: "22"
author: rpetrusha
ms.author: ronpet
manager: wpickett
ms.openlocfilehash: 73933c5f171881b5b3a2479aabdb26d1abd58cfc
ms.sourcegitcommit: bd1ef61f4bb794b25383d3d72e71041a5ced172e
ms.translationtype: HT
ms.contentlocale: it-IT
ms.lasthandoff: 10/18/2017
---
# <a name="dataflow-task-parallel-library"></a><span data-ttu-id="aadf8-102">Flusso di dati (Task Parallel Library)</span><span class="sxs-lookup"><span data-stu-id="aadf8-102">Dataflow (Task Parallel Library)</span></span>
<a name="top"></a> <span data-ttu-id="aadf8-103">La libreria Task Parallel Library (TPL) fornisce componenti del flusso di dati per aumentare l'affidabilità delle applicazioni abilitate per la concorrenza.</span><span class="sxs-lookup"><span data-stu-id="aadf8-103">The Task Parallel Library (TPL) provides dataflow components to help increase the robustness of concurrency-enabled applications.</span></span> <span data-ttu-id="aadf8-104">Questi componenti del flusso di dati vengono definiti collettivamente *libreria del flusso di dati TPL*.</span><span class="sxs-lookup"><span data-stu-id="aadf8-104">These dataflow components are collectively referred to as the *TPL Dataflow Library*.</span></span> <span data-ttu-id="aadf8-105">Con questo modello del flusso di dati viene promossa la programmazione basata su attori fornendo il passaggio di messaggi in-process per attività di pipelining e per un flusso di dati con granularità grossolana.</span><span class="sxs-lookup"><span data-stu-id="aadf8-105">This dataflow model promotes actor-based programming by providing in-process message passing for coarse-grained dataflow and pipelining tasks.</span></span> <span data-ttu-id="aadf8-106">I componenti del flusso di dati sono basati sui tipi e sull'infrastruttura di pianificazione della libreria TPL e si integrano con il supporto dei linguaggi C#, [!INCLUDE[vbprvb](../../../includes/vbprvb-md.md)] e F# per la programmazione asincrona.</span><span class="sxs-lookup"><span data-stu-id="aadf8-106">The dataflow components build on the types and scheduling infrastructure of the TPL and integrate with the C#, [!INCLUDE[vbprvb](../../../includes/vbprvb-md.md)], and F# language support for asynchronous programming.</span></span> <span data-ttu-id="aadf8-107">Questi componenti sono utili qualora siano presenti più operazioni che devono comunicare tra loro in modo asincrono o qualora si desideri elaborare i dati non appena diventano disponibili.</span><span class="sxs-lookup"><span data-stu-id="aadf8-107">These dataflow components are useful when you have multiple operations that must communicate with one another asynchronously or when you want to process data as it becomes available.</span></span> <span data-ttu-id="aadf8-108">Si consideri, ad esempio, un'applicazione tramite cui vengono elaborati i dati immagine di una webcam.</span><span class="sxs-lookup"><span data-stu-id="aadf8-108">For example, consider an application that processes image data from a web camera.</span></span> <span data-ttu-id="aadf8-109">Tramite il modello del flusso di dati, l'applicazione è in grado di elaborare i fotogrammi delle immagini quando diventano disponibili.</span><span class="sxs-lookup"><span data-stu-id="aadf8-109">By using the dataflow model, the application can process image frames as they become available.</span></span> <span data-ttu-id="aadf8-110">Se tramite l'applicazione vengono migliorati i fotogrammi dell'immagine, ad esempio, eseguendo la correzione della luce o la riduzione occhi rossi, è possibile creare una *pipeline* di componenti del flusso di dati.</span><span class="sxs-lookup"><span data-stu-id="aadf8-110">If the application enhances image frames, for example, by performing light correction or red-eye reduction, you can create a *pipeline* of dataflow components.</span></span> <span data-ttu-id="aadf8-111">In ogni fase della pipeline è possibile utilizzare la funzionalità di parallelismo con maggiore granulosità grossolana, ad esempio la funzionalità fornita dalla libreria TPL, per trasformare l'immagine.</span><span class="sxs-lookup"><span data-stu-id="aadf8-111">Each stage of the pipeline might use more coarse-grained parallelism functionality, such as the functionality that is provided by the TPL, to transform the image.</span></span>  
  
 <span data-ttu-id="aadf8-112">In questo documento viene fornita una panoramica della libreria del flusso di dati TPL.</span><span class="sxs-lookup"><span data-stu-id="aadf8-112">This document provides an overview of the TPL Dataflow Library.</span></span> <span data-ttu-id="aadf8-113">Vengono descritti il modello di programmazione e i tipi di blocchi di flussi di dati predefiniti e viene indicato come configurare i blocchi di flussi di dati per soddisfare specifici requisiti delle applicazioni.</span><span class="sxs-lookup"><span data-stu-id="aadf8-113">It describes the programming model, the predefined dataflow block types, and how to configure dataflow blocks to meet the specific requirements of your applications.</span></span>  
  
> [!TIP]
>  <span data-ttu-id="aadf8-114">La libreria del flusso di dati TPL (spazio dei nomi <xref:System.Threading.Tasks.Dataflow?displayProperty=nameWithType>) non viene distribuita con [!INCLUDE[net_v45](../../../includes/net-v45-md.md)].</span><span class="sxs-lookup"><span data-stu-id="aadf8-114">The TPL Dataflow Library (<xref:System.Threading.Tasks.Dataflow?displayProperty=nameWithType> namespace) is not distributed with the [!INCLUDE[net_v45](../../../includes/net-v45-md.md)].</span></span> <span data-ttu-id="aadf8-115">Per installare il <xref:System.Threading.Tasks.Dataflow> dello spazio dei nomi, Apri il progetto in [!INCLUDE[vs_dev11_long](../../../includes/vs-dev11-long-md.md)], scegliere **Gestisci pacchetti NuGet** dal menu progetto e cercare online il `Microsoft.Tpl.Dataflow` pacchetto.</span><span class="sxs-lookup"><span data-stu-id="aadf8-115">To install the <xref:System.Threading.Tasks.Dataflow> namespace, open your project in [!INCLUDE[vs_dev11_long](../../../includes/vs-dev11-long-md.md)], choose **Manage NuGet Packages** from the Project menu, and search online for the `Microsoft.Tpl.Dataflow` package.</span></span>  
  
 <span data-ttu-id="aadf8-116">Questo documento contiene le seguenti sezioni:</span><span class="sxs-lookup"><span data-stu-id="aadf8-116">This document contains the following sections:</span></span>  
  
-   [<span data-ttu-id="aadf8-117">Modello di programmazione</span><span class="sxs-lookup"><span data-stu-id="aadf8-117">Programming Model</span></span>](#model)  
  
-   [<span data-ttu-id="aadf8-118">Tipi di blocchi di flussi di dati predefiniti</span><span class="sxs-lookup"><span data-stu-id="aadf8-118">Predefined Dataflow Block Types</span></span>](#predefined_types)  
  
-   [<span data-ttu-id="aadf8-119">Configurazione del comportamento dei blocchi di flussi di dati</span><span class="sxs-lookup"><span data-stu-id="aadf8-119">Configuring Dataflow Block Behavior</span></span>](#behavior)  
  
-   [<span data-ttu-id="aadf8-120">Blocchi di flussi di dati personalizzati</span><span class="sxs-lookup"><span data-stu-id="aadf8-120">Custom Dataflow Blocks</span></span>](#custom)  
  
<a name="model"></a>   
## <a name="programming-model"></a><span data-ttu-id="aadf8-121">Modello di programmazione</span><span class="sxs-lookup"><span data-stu-id="aadf8-121">Programming Model</span></span>  
 <span data-ttu-id="aadf8-122">La libreria del flusso di dati TPL fornisce una base per il passaggio dei messaggi e per la parallelizzazione delle applicazioni con utilizzo intensivo di I/O e di CPU con velocità effettiva elevata e bassa latenza.</span><span class="sxs-lookup"><span data-stu-id="aadf8-122">The TPL Dataflow Library provides a foundation for message passing and parallelizing CPU-intensive and I/O-intensive applications that have high throughput and low latency.</span></span> <span data-ttu-id="aadf8-123">Offre inoltre un controllo esplicito sul modo in cui i dati vengono memorizzati nel buffer e spostati nel sistema.</span><span class="sxs-lookup"><span data-stu-id="aadf8-123">It also gives you explicit control over how data is buffered and moves around the system.</span></span> <span data-ttu-id="aadf8-124">Per comprendere meglio il modello di programmazione del flusso di dati, si consideri un'applicazione tramite cui vengono caricate in modo asincrono le immagini dal disco e viene creata una composizione di queste immagini.</span><span class="sxs-lookup"><span data-stu-id="aadf8-124">To better understand the dataflow programming model, consider an application that asynchronously loads images from disk and creates a composite of those images.</span></span> <span data-ttu-id="aadf8-125">Per i modelli di programmazione tradizionali viene in genere richiesto l'utilizzo di callback e oggetti di sincronizzazione, ad esempio blocchi, per coordinare le attività e accedere ai dati condivisi.</span><span class="sxs-lookup"><span data-stu-id="aadf8-125">Traditional programming models typically require that you use callbacks and synchronization objects, such as locks, to coordinate tasks and access to shared data.</span></span> <span data-ttu-id="aadf8-126">Tramite il modello di programmazione del flusso di dati è possibile creare oggetti del flusso di dati mediante i quali vengono elaborate le immagini mentre sono lette dal disco.</span><span class="sxs-lookup"><span data-stu-id="aadf8-126">By using the dataflow programming model, you can create dataflow objects that process images as they are read from disk.</span></span> <span data-ttu-id="aadf8-127">Nel modello del flusso di dati è possibile dichiarare la modalità di gestione dei dati quando disponibili, nonché tutte le dipendenze tra i dati.</span><span class="sxs-lookup"><span data-stu-id="aadf8-127">Under the dataflow model, you declare how data is handled when it becomes available, and also any dependencies between data.</span></span> <span data-ttu-id="aadf8-128">Poiché le dipendenze tra i dati sono gestite dal runtime, è spesso possibile evitare la necessità di sincronizzare l'accesso ai dati condivisi.</span><span class="sxs-lookup"><span data-stu-id="aadf8-128">Because the runtime manages dependencies between data, you can often avoid the requirement to synchronize access to shared data.</span></span> <span data-ttu-id="aadf8-129">Inoltre, dal momento che tramite il runtime il lavoro viene pianificato in base all'arrivo asincrono di dati, con il flusso di dati è possibile migliorare la velocità di risposta e la velocità effettiva gestendo i thread sottostanti in modo efficiente.</span><span class="sxs-lookup"><span data-stu-id="aadf8-129">In addition, because the runtime schedules work based on the asynchronous arrival of data, dataflow can improve responsiveness and throughput by efficiently managing the underlying threads.</span></span> <span data-ttu-id="aadf8-130">Per un esempio in cui si usa il modello di programmazione del flusso di dati per implementare l'elaborazione di immagini in un'applicazione Windows Forms, vedere [Procedura dettagliata: uso del flusso di dati in un'applicazione Windows Forms](../../../docs/standard/parallel-programming/walkthrough-using-dataflow-in-a-windows-forms-application.md).</span><span class="sxs-lookup"><span data-stu-id="aadf8-130">For an example that uses the dataflow programming model to implement image processing in a Windows Forms application, see [Walkthrough: Using Dataflow in a Windows Forms Application](../../../docs/standard/parallel-programming/walkthrough-using-dataflow-in-a-windows-forms-application.md).</span></span>  
  
### <a name="sources-and-targets"></a><span data-ttu-id="aadf8-131">Origini e destinazioni</span><span class="sxs-lookup"><span data-stu-id="aadf8-131">Sources and Targets</span></span>  
 <span data-ttu-id="aadf8-132">La libreria del flusso di dati TPL è costituita da *blocchi di flussi di dati*, vale a dire strutture dei dati in cui i dati vengono memorizzati nel buffer ed elaborati.</span><span class="sxs-lookup"><span data-stu-id="aadf8-132">The TPL Dataflow Library consists of *dataflow blocks*, which are data structures that buffer and process data.</span></span> <span data-ttu-id="aadf8-133">Tramite la libreria TPL vengono definiti tre tipi di blocchi di flussi di dati: *blocchi di origine*, *blocchi di destinazione* e *blocchi di propagazione*.</span><span class="sxs-lookup"><span data-stu-id="aadf8-133">The TPL defines three kinds of dataflow blocks: *source blocks*, *target blocks*, and *propagator blocks*.</span></span> <span data-ttu-id="aadf8-134">Un blocco di origine viene utilizzato come origine di dati da cui è possibile leggere.</span><span class="sxs-lookup"><span data-stu-id="aadf8-134">A source block acts as a source of data and can be read from.</span></span> <span data-ttu-id="aadf8-135">Un blocco di destinazione viene utilizzato come destinatario di dati in cui è possibile scrivere.</span><span class="sxs-lookup"><span data-stu-id="aadf8-135">A target block acts as a receiver of data and can be written to.</span></span> <span data-ttu-id="aadf8-136">Un blocco di propagazione viene utilizzato sia come blocco di origine sia come blocco di destinazione, quindi da cui è possibile leggere e in cui è possibile scrivere.</span><span class="sxs-lookup"><span data-stu-id="aadf8-136">A propagator block acts as both a source block and a target block, and can be read from and written to.</span></span> <span data-ttu-id="aadf8-137">Tramite la libreria TPL vengono definite le seguenti interfacce: <xref:System.Threading.Tasks.Dataflow.ISourceBlock%601?displayProperty=nameWithType> per rappresentare le origini, <xref:System.Threading.Tasks.Dataflow.ITargetBlock%601?displayProperty=nameWithType> per rappresentare le destinazioni e <xref:System.Threading.Tasks.Dataflow.IPropagatorBlock%602?displayProperty=nameWithType> per rappresentare le propagazioni.</span><span class="sxs-lookup"><span data-stu-id="aadf8-137">The TPL defines the <xref:System.Threading.Tasks.Dataflow.ISourceBlock%601?displayProperty=nameWithType> interface to represent sources, <xref:System.Threading.Tasks.Dataflow.ITargetBlock%601?displayProperty=nameWithType> to represent targets, and <xref:System.Threading.Tasks.Dataflow.IPropagatorBlock%602?displayProperty=nameWithType> to represent propagators.</span></span> <span data-ttu-id="aadf8-138">L'interfaccia <xref:System.Threading.Tasks.Dataflow.IPropagatorBlock%602> eredita sia da <xref:System.Threading.Tasks.Dataflow.ISourceBlock%601> sia da <xref:System.Threading.Tasks.Dataflow.ITargetBlock%601>.</span><span class="sxs-lookup"><span data-stu-id="aadf8-138"><xref:System.Threading.Tasks.Dataflow.IPropagatorBlock%602> inherits from both <xref:System.Threading.Tasks.Dataflow.ISourceBlock%601>, and <xref:System.Threading.Tasks.Dataflow.ITargetBlock%601>.</span></span>  
  
 <span data-ttu-id="aadf8-139">La libreria del flusso di dati TPL fornisce vari tipi di blocchi di flussi di dati predefiniti tramite cui vengono implementate le interfacce <xref:System.Threading.Tasks.Dataflow.ISourceBlock%601>, <xref:System.Threading.Tasks.Dataflow.ITargetBlock%601> e <xref:System.Threading.Tasks.Dataflow.IPropagatorBlock%602>.</span><span class="sxs-lookup"><span data-stu-id="aadf8-139">The TPL Dataflow Library provides several predefined dataflow block types that implement the <xref:System.Threading.Tasks.Dataflow.ISourceBlock%601>, <xref:System.Threading.Tasks.Dataflow.ITargetBlock%601>, and <xref:System.Threading.Tasks.Dataflow.IPropagatorBlock%602> interfaces.</span></span> <span data-ttu-id="aadf8-140">Questi tipi di blocchi di flussi di dati sono descritti nella sezione [Tipi di blocchi di flussi di dati predefiniti](#predefined_types) di questo documento.</span><span class="sxs-lookup"><span data-stu-id="aadf8-140">These dataflow block types are described in this document in the section [Predefined Dataflow Block Types](#predefined_types).</span></span>  
  
### <a name="connecting-blocks"></a><span data-ttu-id="aadf8-141">Connessione di blocchi</span><span class="sxs-lookup"><span data-stu-id="aadf8-141">Connecting Blocks</span></span>  
 <span data-ttu-id="aadf8-142">È possibile connettere i blocchi di flussi di dati per creare *pipeline*, che sono sequenze lineari di blocchi di flussi di dati, o *reti*, che sono grafici di blocchi di flussi di dati.</span><span class="sxs-lookup"><span data-stu-id="aadf8-142">You can connect dataflow blocks to form *pipelines*, which are linear sequences of dataflow blocks, or *networks*, which are graphs of dataflow blocks.</span></span> <span data-ttu-id="aadf8-143">Una pipeline è un tipo di rete.</span><span class="sxs-lookup"><span data-stu-id="aadf8-143">A pipeline is one form of network.</span></span> <span data-ttu-id="aadf8-144">I dati di origini in una pipeline o in una rete vengono propagati nelle destinazioni in modo asincrono quando i dati in questione diventano disponibili.</span><span class="sxs-lookup"><span data-stu-id="aadf8-144">In a pipeline or network, sources asynchronously propagate data to targets as that data becomes available.</span></span> <span data-ttu-id="aadf8-145">Tramite il metodo <xref:System.Threading.Tasks.Dataflow.ISourceBlock%601.LinkTo%2A?displayProperty=nameWithType> un blocco di flussi di dati di origine viene connesso a un blocco di destinazione.</span><span class="sxs-lookup"><span data-stu-id="aadf8-145">The <xref:System.Threading.Tasks.Dataflow.ISourceBlock%601.LinkTo%2A?displayProperty=nameWithType> method links a source dataflow block to a target block.</span></span> <span data-ttu-id="aadf8-146">Un'origine può essere collegata a zero o più destinazioni, mentre queste ultime possono essere collegate da zero o più origini.</span><span class="sxs-lookup"><span data-stu-id="aadf8-146">A source can be linked to zero or more targets; targets can be linked from zero or more sources.</span></span> <span data-ttu-id="aadf8-147">È possibile aggiungere o rimuovere contemporaneamente blocchi di flussi di dati a o da una pipeline o rete.</span><span class="sxs-lookup"><span data-stu-id="aadf8-147">You can add or remove dataflow blocks to or from a pipeline or network concurrently.</span></span> <span data-ttu-id="aadf8-148">Tramite i tipi di blocchi di flussi di dati predefiniti vengono gestiti tutti gli aspetti di collegamento e scollegamento thread safety.</span><span class="sxs-lookup"><span data-stu-id="aadf8-148">The predefined dataflow block types handle all thread-safety aspects of linking and unlinking.</span></span>  
  
 <span data-ttu-id="aadf8-149">Per un esempio di connessione di blocchi di flussi di dati per formare una pipeline di base, vedere [Procedura dettagliata: creazione di una pipeline del flusso di dati](../../../docs/standard/parallel-programming/walkthrough-creating-a-dataflow-pipeline.md).</span><span class="sxs-lookup"><span data-stu-id="aadf8-149">For an example that connects dataflow blocks to form a basic pipeline, see [Walkthrough: Creating a Dataflow Pipeline](../../../docs/standard/parallel-programming/walkthrough-creating-a-dataflow-pipeline.md).</span></span> <span data-ttu-id="aadf8-150">Per un esempio di connessione di blocchi di flussi di dati per formare una rete più complessa, vedere [Procedura dettagliata: uso del flusso di dati in un'applicazione Windows Forms](../../../docs/standard/parallel-programming/walkthrough-using-dataflow-in-a-windows-forms-application.md).</span><span class="sxs-lookup"><span data-stu-id="aadf8-150">For an example that connects dataflow blocks to form a more complex network, see [Walkthrough: Using Dataflow in a Windows Forms Application](../../../docs/standard/parallel-programming/walkthrough-using-dataflow-in-a-windows-forms-application.md).</span></span> <span data-ttu-id="aadf8-151">Per un esempio di scollegamento di una destinazione da un'origine dopo l'offerta di un messaggio alla destinazione da parte dell'origine, vedere [Procedura: Scollegare i blocchi di flussi di dati](../../../docs/standard/parallel-programming/how-to-unlink-dataflow-blocks.md).</span><span class="sxs-lookup"><span data-stu-id="aadf8-151">For an example that unlinks a target from a source after the source offers the target a message, see [How to: Unlink Dataflow Blocks](../../../docs/standard/parallel-programming/how-to-unlink-dataflow-blocks.md).</span></span>  
  
#### <a name="filtering"></a><span data-ttu-id="aadf8-152">Filtro</span><span class="sxs-lookup"><span data-stu-id="aadf8-152">Filtering</span></span>  
 <span data-ttu-id="aadf8-153">Quando si chiama il metodo <xref:System.Threading.Tasks.Dataflow.ISourceBlock%601.LinkTo%2A?displayProperty=nameWithType> per collegare un'origine a una destinazione, è possibile fornire un delegato tramite cui si stabilisce se da parte del blocco di destinazione viene accettato o rifiutato un messaggio in base al valore del messaggio in questione.</span><span class="sxs-lookup"><span data-stu-id="aadf8-153">When you call the <xref:System.Threading.Tasks.Dataflow.ISourceBlock%601.LinkTo%2A?displayProperty=nameWithType> method to link a source to a target, you can supply a delegate that determines whether the target block accepts or rejects a message based on the value of that message.</span></span> <span data-ttu-id="aadf8-154">Questo meccanismo di filtro è utile per garantire la ricezione solo di determinati valori da parte di un blocco di flussi di dati.</span><span class="sxs-lookup"><span data-stu-id="aadf8-154">This filtering mechanism is a useful way to guarantee that a dataflow block receives only certain values.</span></span> <span data-ttu-id="aadf8-155">Per la maggior parte dei tipi di blocchi di flussi di dati predefiniti, se un blocco di origine è connesso a più blocchi di destinazione, quando da parte di un blocco di destinazione viene rifiutato un messaggio, quest'ultimo tramite l'origine viene offerto alla destinazione successiva.</span><span class="sxs-lookup"><span data-stu-id="aadf8-155">For most of the predefined dataflow block types, if a source block is connected to multiple target blocks, when a target block rejects a message, the source offers that message to the next target.</span></span> <span data-ttu-id="aadf8-156">L'ordine di offerta dei messaggi da parte dell'origine alle destinazioni viene definito dall'origine e può variare a seconda del tipo di origine.</span><span class="sxs-lookup"><span data-stu-id="aadf8-156">The order in which a source offers messages to targets is defined by the source and can vary according to the type of the source.</span></span> <span data-ttu-id="aadf8-157">L'offerta di un messaggio da parte della maggior parte dei tipi di blocco di origine viene arrestata dopo l'accettazione del messaggio in questione da una destinazione.</span><span class="sxs-lookup"><span data-stu-id="aadf8-157">Most source block types stop offering a message after one target accepts that message.</span></span> <span data-ttu-id="aadf8-158">Un'eccezione a questa regola è la classe <xref:System.Threading.Tasks.Dataflow.BroadcastBlock%601> mediante la quale ogni messaggio viene offerto a tutte le destinazioni, anche se viene rifiutato da alcune di queste.</span><span class="sxs-lookup"><span data-stu-id="aadf8-158">One exception to this rule is the <xref:System.Threading.Tasks.Dataflow.BroadcastBlock%601> class, which offers each message to all targets, even if some targets reject the message.</span></span> <span data-ttu-id="aadf8-159">Per un esempio che usa il filtro per elaborare solo determinati messaggi, vedere [Procedura dettagliata: uso del flusso di dati in un'applicazione Windows Forms](../../../docs/standard/parallel-programming/walkthrough-using-dataflow-in-a-windows-forms-application.md).</span><span class="sxs-lookup"><span data-stu-id="aadf8-159">For an example that uses filtering to process only certain messages, see [Walkthrough: Using Dataflow in a Windows Forms Application](../../../docs/standard/parallel-programming/walkthrough-using-dataflow-in-a-windows-forms-application.md).</span></span>  
  
> [!IMPORTANT]
>  <span data-ttu-id="aadf8-160">Poiché ogni tipo di blocco di flussi di dati di origine predefinito garantisce la propagazione all'esterno di questi messaggi nell'ordine in cui vengono ricevuti, ogni messaggio deve essere letto dal blocco di origine prima che da parte di quest'ultimo possa essere elaborato il messaggio successivo.</span><span class="sxs-lookup"><span data-stu-id="aadf8-160">Because each predefined source dataflow block type guarantees that messages are propagated out in the order in which they are received, every message must be read from the source block before the source block can process the next message.</span></span> <span data-ttu-id="aadf8-161">Di conseguenza, quando si utilizzano i filtri per connettere più destinazioni a un'origine, accertarsi che ogni messaggio venga ricevuto da almeno un blocco di destinazione.</span><span class="sxs-lookup"><span data-stu-id="aadf8-161">Therefore, when you use filtering to connect multiple targets to a source, make sure that at least one target block receives each message.</span></span> <span data-ttu-id="aadf8-162">In caso contrario, si potrebbe verificare un deadlock dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="aadf8-162">Otherwise, your application might deadlock.</span></span>  
  
### <a name="message-passing"></a><span data-ttu-id="aadf8-163">Passaggio dei messaggi</span><span class="sxs-lookup"><span data-stu-id="aadf8-163">Message Passing</span></span>  
 <span data-ttu-id="aadf8-164">Il modello di programmazione del flusso di dati è correlato al concetto di *passaggio dei messaggi*, in base al quale i componenti indipendenti di un programma comunicano con un altro programma inviando messaggi.</span><span class="sxs-lookup"><span data-stu-id="aadf8-164">The dataflow programming model is related to the concept of *message passing*, where independent components of a program communicate with one another by sending messages.</span></span> <span data-ttu-id="aadf8-165">Un modo per propagare i messaggi tra i componenti dell'applicazione consiste nel chiamare il <xref:System.Threading.Tasks.Dataflow.DataflowBlock.Post%2A> e <xref:System.Threading.Tasks.Dataflow.DataflowBlock.SendAsync%2A?displayProperty=nameWithType> metodi per inviare messaggi ai post di blocchi di flussi di dati di destinazione (<xref:System.Threading.Tasks.Dataflow.DataflowBlock.Post%2A> funziona in modo sincrono; <xref:System.Threading.Tasks.Dataflow.DataflowBlock.SendAsync%2A> funziona in modo asincrono) e <xref:System.Threading.Tasks.Dataflow.DataflowBlock.Receive%2A>, <xref:System.Threading.Tasks.Dataflow.DataflowBlock.ReceiveAsync%2A>, e <xref:System.Threading.Tasks.Dataflow.DataflowBlock.TryReceive%2A> metodi per ricevere messaggi dai blocchi di origine.</span><span class="sxs-lookup"><span data-stu-id="aadf8-165">One way to propagate messages among application components is to call the <xref:System.Threading.Tasks.Dataflow.DataflowBlock.Post%2A> and <xref:System.Threading.Tasks.Dataflow.DataflowBlock.SendAsync%2A?displayProperty=nameWithType> methods to send messages to target dataflow blocks post (<xref:System.Threading.Tasks.Dataflow.DataflowBlock.Post%2A> acts synchronously; <xref:System.Threading.Tasks.Dataflow.DataflowBlock.SendAsync%2A> acts asynchronously) and the <xref:System.Threading.Tasks.Dataflow.DataflowBlock.Receive%2A>, <xref:System.Threading.Tasks.Dataflow.DataflowBlock.ReceiveAsync%2A>, and <xref:System.Threading.Tasks.Dataflow.DataflowBlock.TryReceive%2A> methods to receive messages from source blocks.</span></span> <span data-ttu-id="aadf8-166">È possibile combinare questi metodi con pipeline o reti del flusso di dati inviando i dati di input al nodo principale (blocco di destinazione) e ricevendo i dati di output dal nodo terminale della pipeline o dai nodi terminali della rete (uno o più blocchi di origine).</span><span class="sxs-lookup"><span data-stu-id="aadf8-166">You can combine these methods with dataflow pipelines or networks by sending input data to the head node (a target block), and receiving output data from the terminal node of the pipeline or the terminal nodes of the network (one or more source blocks).</span></span> <span data-ttu-id="aadf8-167">È inoltre possibile utilizzare il metodo <xref:System.Threading.Tasks.Dataflow.DataflowBlock.Choose%2A> per leggere dalla prima delle origini fornite con dati disponibili ed eseguire azioni sui dati in questione.</span><span class="sxs-lookup"><span data-stu-id="aadf8-167">You can also use the <xref:System.Threading.Tasks.Dataflow.DataflowBlock.Choose%2A> method to read from the first of the provided sources that has data available and perform action on that data.</span></span>  
  
 <span data-ttu-id="aadf8-168">Blocchi di origine offrono dati ai blocchi di destinazione chiamando il <xref:System.Threading.Tasks.Dataflow.ITargetBlock%601.OfferMessage%2A?displayProperty=nameWithType> metodo.</span><span class="sxs-lookup"><span data-stu-id="aadf8-168">Source blocks offer data to target blocks by calling the <xref:System.Threading.Tasks.Dataflow.ITargetBlock%601.OfferMessage%2A?displayProperty=nameWithType> method.</span></span> <span data-ttu-id="aadf8-169">La risposta a un messaggio offerto viene fornita dal blocco di destinazione in tre modalità: il messaggio può essere accettato, rifiutato o posticipato.</span><span class="sxs-lookup"><span data-stu-id="aadf8-169">The target block responds to an offered message in one of three ways: it can accept the message, decline the message, or postpone the message.</span></span> <span data-ttu-id="aadf8-170">Quando il messaggio viene accettato dalla destinazione, il metodo <xref:System.Threading.Tasks.Dataflow.ITargetBlock%601.OfferMessage%2A> restituisce <xref:System.Threading.Tasks.Dataflow.DataflowMessageStatus.Accepted>.</span><span class="sxs-lookup"><span data-stu-id="aadf8-170">When the target accepts the message, the <xref:System.Threading.Tasks.Dataflow.ITargetBlock%601.OfferMessage%2A> method returns <xref:System.Threading.Tasks.Dataflow.DataflowMessageStatus.Accepted>.</span></span> <span data-ttu-id="aadf8-171">Quando il messaggio viene rifiutato dalla destinazione, il metodo <xref:System.Threading.Tasks.Dataflow.ITargetBlock%601.OfferMessage%2A> restituisce <xref:System.Threading.Tasks.Dataflow.DataflowMessageStatus.Declined>.</span><span class="sxs-lookup"><span data-stu-id="aadf8-171">When the target declines the message, the <xref:System.Threading.Tasks.Dataflow.ITargetBlock%601.OfferMessage%2A> method returns <xref:System.Threading.Tasks.Dataflow.DataflowMessageStatus.Declined>.</span></span> <span data-ttu-id="aadf8-172">Quando da parte della destinazione viene richiesto di non ricevere più messaggi dall'origine, il metodo <xref:System.Threading.Tasks.Dataflow.ITargetBlock%601.OfferMessage%2A> restituisce <xref:System.Threading.Tasks.Dataflow.DataflowMessageStatus.DecliningPermanently>.</span><span class="sxs-lookup"><span data-stu-id="aadf8-172">When the target requires that it no longer receives any messages from the source, <xref:System.Threading.Tasks.Dataflow.ITargetBlock%601.OfferMessage%2A> returns <xref:System.Threading.Tasks.Dataflow.DataflowMessageStatus.DecliningPermanently>.</span></span> <span data-ttu-id="aadf8-173">I tipi di blocchi di origine predefiniti non offrono messaggi alle destinazioni collegate dopo la ricezione di un valore restituito di questo tipo e vengono scollegati automaticamente da queste destinazioni.</span><span class="sxs-lookup"><span data-stu-id="aadf8-173">The predefined source block types do not offer messages to linked targets after such a return value is received, and they automatically unlink from such targets.</span></span>  
  
 <span data-ttu-id="aadf8-174">Quando tramite un blocco di destinazione il messaggio viene posticipato per un utilizzo successivo, il metodo <xref:System.Threading.Tasks.Dataflow.ITargetBlock%601.OfferMessage%2A> restituisce <xref:System.Threading.Tasks.Dataflow.DataflowMessageStatus.Postponed>.</span><span class="sxs-lookup"><span data-stu-id="aadf8-174">When a target block postpones the message for later use, the <xref:System.Threading.Tasks.Dataflow.ITargetBlock%601.OfferMessage%2A> method returns <xref:System.Threading.Tasks.Dataflow.DataflowMessageStatus.Postponed>.</span></span> <span data-ttu-id="aadf8-175">Un blocco di destinazione che viene posticipato un messaggio è possibile effettuare chiamate successive il <xref:System.Threading.Tasks.Dataflow.ISourceBlock%601.ReserveMessage%2A?displayProperty=nameWithType> metodo per provare a prenotare il messaggio offerto.</span><span class="sxs-lookup"><span data-stu-id="aadf8-175">A target block that postpones a message can later calls the <xref:System.Threading.Tasks.Dataflow.ISourceBlock%601.ReserveMessage%2A?displayProperty=nameWithType> method to try to reserve the offered message.</span></span> <span data-ttu-id="aadf8-176">A questo punto, il messaggio è ancora disponibile e può essere utilizzato dal blocco di destinazione oppure è stato accettato da un'altra destinazione.</span><span class="sxs-lookup"><span data-stu-id="aadf8-176">At this point, the message is either still available and can be used by the target block, or the message has been taken by another target.</span></span> <span data-ttu-id="aadf8-177">Quando il blocco di destinazione in un secondo momento richiede il messaggio o non è più necessario che il messaggio, chiama il <xref:System.Threading.Tasks.Dataflow.ISourceBlock%601.ConsumeMessage%2A?displayProperty=nameWithType> o <xref:System.Threading.Tasks.Dataflow.ISourceBlock%601.ReleaseReservation%2A> (metodo), rispettivamente.</span><span class="sxs-lookup"><span data-stu-id="aadf8-177">When the target block later requires the message or no longer needs the message, it calls the <xref:System.Threading.Tasks.Dataflow.ISourceBlock%601.ConsumeMessage%2A?displayProperty=nameWithType> or <xref:System.Threading.Tasks.Dataflow.ISourceBlock%601.ReleaseReservation%2A> method, respectively.</span></span> <span data-ttu-id="aadf8-178">La prenotazione dei messaggi viene in genere utilizzata dai tipi di blocchi di flussi di dati che operano in modalità non greedy.</span><span class="sxs-lookup"><span data-stu-id="aadf8-178">Message reservation is typically used by the dataflow block types that operate in non-greedy mode.</span></span> <span data-ttu-id="aadf8-179">La modalità non greedy verrà illustrata più avanti in questo documento.</span><span class="sxs-lookup"><span data-stu-id="aadf8-179">Non-greedy mode is explained later in this document.</span></span> <span data-ttu-id="aadf8-180">Anziché riservare un messaggio posposto, in un blocco di destinazione può inoltre essere utilizzato il metodo <xref:System.Threading.Tasks.Dataflow.ISourceBlock%601.ConsumeMessage%2A?displayProperty=nameWithType> per tentare di utilizzare direttamente il messaggio posposto.</span><span class="sxs-lookup"><span data-stu-id="aadf8-180">Instead of reserving a postponed message, a target block can also use the <xref:System.Threading.Tasks.Dataflow.ISourceBlock%601.ConsumeMessage%2A?displayProperty=nameWithType> method to attempt to directly consume the postponed message.</span></span>  
  
### <a name="dataflow-block-completion"></a><span data-ttu-id="aadf8-181">Completamento dei blocchi di flussi di dati</span><span class="sxs-lookup"><span data-stu-id="aadf8-181">Dataflow Block Completion</span></span>  
 <span data-ttu-id="aadf8-182">I blocchi di flussi di dati supportano inoltre il concetto di *completamento*.</span><span class="sxs-lookup"><span data-stu-id="aadf8-182">Dataflow blocks also support the concept of *completion*.</span></span> <span data-ttu-id="aadf8-183">Non viene eseguito alcun lavoro ulteriore da parte di un blocco di flussi di dati che si trova nello stato completato.</span><span class="sxs-lookup"><span data-stu-id="aadf8-183">A dataflow block that is in the completed state does not perform any further work.</span></span> <span data-ttu-id="aadf8-184">Ogni blocco di flussi di dati è associato un <xref:System.Threading.Tasks.Task?displayProperty=nameWithType> oggetto, noto come un *attività di completamento*, che rappresenta lo stato di completamento del blocco.</span><span class="sxs-lookup"><span data-stu-id="aadf8-184">Each dataflow block has an associated <xref:System.Threading.Tasks.Task?displayProperty=nameWithType> object, known as a *completion task*, that represents the completion status of the block.</span></span> <span data-ttu-id="aadf8-185">Dal momento che è possibile attendere il completamento di un oggetto <xref:System.Threading.Tasks.Task>, tramite le attività di completamento è possibile attendere il completamento di uno o più nodi terminali di una rete del flusso di dati.</span><span class="sxs-lookup"><span data-stu-id="aadf8-185">Because you can wait for a <xref:System.Threading.Tasks.Task> object to finish, by using completion tasks, you can wait for one or more terminal nodes of a dataflow network to finish.</span></span> <span data-ttu-id="aadf8-186">Tramite l'interfaccia <xref:System.Threading.Tasks.Dataflow.IDataflowBlock> vengono definiti il metodo <xref:System.Threading.Tasks.Dataflow.IDataflowBlock.Complete%2A>, mediante il quale il blocco di flussi di dati viene informato del completamento di una relativa richiesta, e la proprietà <xref:System.Threading.Tasks.Dataflow.IDataflowBlock.Completion%2A>, che restituisce l'attività di completamento del blocco di flussi di dati.</span><span class="sxs-lookup"><span data-stu-id="aadf8-186">The <xref:System.Threading.Tasks.Dataflow.IDataflowBlock> interface defines the <xref:System.Threading.Tasks.Dataflow.IDataflowBlock.Complete%2A> method, which informs the dataflow block of a request for it to complete, and the <xref:System.Threading.Tasks.Dataflow.IDataflowBlock.Completion%2A> property, which returns the completion task for the dataflow block.</span></span> <span data-ttu-id="aadf8-187">Sia <xref:System.Threading.Tasks.Dataflow.ISourceBlock%601> sia <xref:System.Threading.Tasks.Dataflow.ITargetBlock%601> ereditano l'interfaccia <xref:System.Threading.Tasks.Dataflow.IDataflowBlock>.</span><span class="sxs-lookup"><span data-stu-id="aadf8-187">Both <xref:System.Threading.Tasks.Dataflow.ISourceBlock%601> and <xref:System.Threading.Tasks.Dataflow.ITargetBlock%601> inherit the <xref:System.Threading.Tasks.Dataflow.IDataflowBlock> interface.</span></span>  
  
 <span data-ttu-id="aadf8-188">Sono disponibili due modalità per determinare se un blocco di flussi di dati viene completato correttamente, se tramite esso vengono rilevati uno o più errori o se è stato annullato.</span><span class="sxs-lookup"><span data-stu-id="aadf8-188">There are two ways to determine whether a dataflow block completed without error, encountered one or more errors, or was canceled.</span></span> <span data-ttu-id="aadf8-189">Il primo modo consiste nel chiamare il <xref:System.Threading.Tasks.Task.Wait%2A?displayProperty=nameWithType> metodo sull'attività di completamento in un `try` - `catch` blocco (`Try` - `Catch` in Visual Basic).</span><span class="sxs-lookup"><span data-stu-id="aadf8-189">The first way is to call the <xref:System.Threading.Tasks.Task.Wait%2A?displayProperty=nameWithType> method on the completion task in a `try`-`catch` block (`Try`-`Catch` in Visual Basic).</span></span> <span data-ttu-id="aadf8-190">Nell'esempio seguente viene creato un oggetto <xref:System.Threading.Tasks.Dataflow.ActionBlock%601> tramite cui viene generato <xref:System.ArgumentOutOfRangeException> se il valore di input è minore di zero.</span><span class="sxs-lookup"><span data-stu-id="aadf8-190">The following example creates an <xref:System.Threading.Tasks.Dataflow.ActionBlock%601> object that throws <xref:System.ArgumentOutOfRangeException> if its input value is less than zero.</span></span> <span data-ttu-id="aadf8-191"><xref:System.AggregateException> viene generato quando in questo esempio viene chiamato il metodo <xref:System.Threading.Tasks.Task.Wait%2A> sull'attività di completamento.</span><span class="sxs-lookup"><span data-stu-id="aadf8-191"><xref:System.AggregateException> is thrown when this example calls <xref:System.Threading.Tasks.Task.Wait%2A> on the completion task.</span></span> <span data-ttu-id="aadf8-192">È possibile accedere a <xref:System.ArgumentOutOfRangeException> tramite la proprietà <xref:System.AggregateException.InnerExceptions%2A> dell'oggetto <xref:System.AggregateException>.</span><span class="sxs-lookup"><span data-stu-id="aadf8-192">The <xref:System.ArgumentOutOfRangeException> is accessed through the <xref:System.AggregateException.InnerExceptions%2A> property of the <xref:System.AggregateException> object.</span></span>  
  
 [!code-csharp[TPLDataflow_Overview#10](../../../samples/snippets/csharp/VS_Snippets_Misc/tpldataflow_overview/cs/program.cs#10)]
 [!code-vb[TPLDataflow_Overview#10](../../../samples/snippets/visualbasic/VS_Snippets_Misc/tpldataflow_overview/vb/program.vb#10)]  
  
 <span data-ttu-id="aadf8-193">In questo esempio viene illustrato il caso in cui un'eccezione non gestita viene inserita nel delegato di un blocco di flussi di dati di esecuzione.</span><span class="sxs-lookup"><span data-stu-id="aadf8-193">This example demonstrates the case in which an exception goes unhandled in the delegate of an execution dataflow block.</span></span> <span data-ttu-id="aadf8-194">Si consiglia di gestire le eccezioni nei corpi di blocchi di questo tipo.</span><span class="sxs-lookup"><span data-stu-id="aadf8-194">We recommend that you handle exceptions in the bodies of such blocks.</span></span> <span data-ttu-id="aadf8-195">In caso contrario, tuttavia, il comportamento del blocco è simile a quello di un annullamento e i messaggi in ingresso non vengono elaborati.</span><span class="sxs-lookup"><span data-stu-id="aadf8-195">However, if you are unable to do so, the block behaves as though it was canceled and does not process incoming messages.</span></span>  
  
 <span data-ttu-id="aadf8-196">Quando un blocco di flussi di dati viene annullato in modo esplicito, nell'oggetto <xref:System.AggregateException> è contenuto <xref:System.OperationCanceledException> nella proprietà <xref:System.AggregateException.InnerExceptions%2A>.</span><span class="sxs-lookup"><span data-stu-id="aadf8-196">When a dataflow block is canceled explicitly, the <xref:System.AggregateException> object contains <xref:System.OperationCanceledException> in the <xref:System.AggregateException.InnerExceptions%2A> property.</span></span> <span data-ttu-id="aadf8-197">Per ulteriori informazioni sull'annullamento del flusso di dati, vedere Abilitazione dell'annullamento più avanti in questo documento.</span><span class="sxs-lookup"><span data-stu-id="aadf8-197">For more information about dataflow cancellation, see Enabling Cancellation later in this document.</span></span>  
  
 <span data-ttu-id="aadf8-198">La seconda modalità per determinare lo stato di completamento di un blocco di flussi di dati è utilizzare una continuazione dell'attività di completamento o le funzionalità asincrone dei linguaggi C# e Visual Basic per attendere in modo asincrono l'attività di completamento.</span><span class="sxs-lookup"><span data-stu-id="aadf8-198">The second way to determine the completion status of a dataflow block is to use a continuation off of the completion task, or to use the asynchronous language features of C# and Visual Basic to asynchronously wait for the completion task.</span></span> <span data-ttu-id="aadf8-199">Il delegato fornito al metodo <xref:System.Threading.Tasks.Task.ContinueWith%2A?displayProperty=nameWithType> accetta un oggetto <xref:System.Threading.Tasks.Task> che rappresenta l'attività precedente.</span><span class="sxs-lookup"><span data-stu-id="aadf8-199">The delegate that you provide to the <xref:System.Threading.Tasks.Task.ContinueWith%2A?displayProperty=nameWithType> method takes a <xref:System.Threading.Tasks.Task> object that represents the antecedent task.</span></span> <span data-ttu-id="aadf8-200">Nel caso della proprietà <xref:System.Threading.Tasks.Dataflow.IDataflowBlock.Completion%2A>, il delegato per la continuazione accetta l'attività di completamento stessa.</span><span class="sxs-lookup"><span data-stu-id="aadf8-200">In the case of the <xref:System.Threading.Tasks.Dataflow.IDataflowBlock.Completion%2A> property, the delegate for the continuation takes the completion task itself.</span></span> <span data-ttu-id="aadf8-201">L'esempio seguente è simile al precedente, tranne per il fatto che viene utilizzato anche il metodo <xref:System.Threading.Tasks.Task.ContinueWith%2A> per creare un'attività di completamento tramite cui viene stampato lo stato dell'operazione globale del flusso di dati.</span><span class="sxs-lookup"><span data-stu-id="aadf8-201">The following example resembles the previous one, except that it also uses the <xref:System.Threading.Tasks.Task.ContinueWith%2A> method to create a completion task that prints the status of the overall dataflow operation.</span></span>  
  
 [!code-csharp[TPLDataflow_Overview#11](../../../samples/snippets/csharp/VS_Snippets_Misc/tpldataflow_overview/cs/program.cs#11)]
 [!code-vb[TPLDataflow_Overview#11](../../../samples/snippets/visualbasic/VS_Snippets_Misc/tpldataflow_overview/vb/program.vb#11)]  
  
 <span data-ttu-id="aadf8-202">È inoltre possibile utilizzare proprietà come <xref:System.Threading.Tasks.Task.IsCanceled%2A> nel corpo dell'attività di continuazione per determinare informazioni aggiuntive sullo stato di completamento di un blocco di flussi di dati.</span><span class="sxs-lookup"><span data-stu-id="aadf8-202">You can also use properties such as <xref:System.Threading.Tasks.Task.IsCanceled%2A> in the body of the continuation task to determine additional information about the completion status of a dataflow block.</span></span> <span data-ttu-id="aadf8-203">Per altre informazioni sulle attività di continuazione e il modo in cui interagiscono con l'annullamento e la gestione degli errori, vedere [Attività di continuazione](../../../docs/standard/parallel-programming/chaining-tasks-by-using-continuation-tasks.md), [Annullamento delle attività](../../../docs/standard/parallel-programming/task-cancellation.md), [Gestione delle eccezioni](../../../docs/standard/parallel-programming/exception-handling-task-parallel-library.md) e [NIB: Procedura: gestire le eccezioni generate dalle attività](http://msdn.microsoft.com/en-us/d6c47ec8-9de9-4880-beb3-ff19ae51565d).</span><span class="sxs-lookup"><span data-stu-id="aadf8-203">For more information about continuation tasks and how they relate to cancellation and error handling, see [Chaining Tasks by Using Continuation Tasks](../../../docs/standard/parallel-programming/chaining-tasks-by-using-continuation-tasks.md), [Task Cancellation](../../../docs/standard/parallel-programming/task-cancellation.md), [Exception Handling](../../../docs/standard/parallel-programming/exception-handling-task-parallel-library.md), and [NIB: How to: Handle Exceptions Thrown by Tasks](http://msdn.microsoft.com/en-us/d6c47ec8-9de9-4880-beb3-ff19ae51565d).</span></span>  
  
 <span data-ttu-id="aadf8-204">[[vai all'inizio](#top)]</span><span class="sxs-lookup"><span data-stu-id="aadf8-204">[[go to top](#top)]</span></span>  
  
<a name="predefined_types"></a>   
## <a name="predefined-dataflow-block-types"></a><span data-ttu-id="aadf8-205">Tipi di blocchi di flussi di dati predefiniti</span><span class="sxs-lookup"><span data-stu-id="aadf8-205">Predefined Dataflow Block Types</span></span>  
 <span data-ttu-id="aadf8-206">La libreria del flusso di dati TPL fornisce vari tipi di blocchi di flussi di dati predefiniti.</span><span class="sxs-lookup"><span data-stu-id="aadf8-206">The TPL Dataflow Library provides several predefined dataflow block types.</span></span> <span data-ttu-id="aadf8-207">Questi tipi sono suddivisi in tre categorie: *blocchi di buffering*, *blocchi di esecuzione* e *blocchi di raggruppamento*.</span><span class="sxs-lookup"><span data-stu-id="aadf8-207">These types are divided into three categories: *buffering blocks*, *execution blocks*, and *grouping blocks*.</span></span> <span data-ttu-id="aadf8-208">Nelle sezioni seguenti vengono descritti i tipi di blocchi che compongono queste categorie.</span><span class="sxs-lookup"><span data-stu-id="aadf8-208">The following sections describe the block types that make up these categories.</span></span>  
  
### <a name="buffering-blocks"></a><span data-ttu-id="aadf8-209">Blocchi di buffering</span><span class="sxs-lookup"><span data-stu-id="aadf8-209">Buffering Blocks</span></span>  
 <span data-ttu-id="aadf8-210">Nei blocchi di buffering sono contenuti i dati utilizzati dai consumer di dati.</span><span class="sxs-lookup"><span data-stu-id="aadf8-210">Buffering blocks hold data for use by data consumers.</span></span> <span data-ttu-id="aadf8-211">La libreria del flusso di dati TPL fornisce tre tipi di blocco di buffering: <xref:System.Threading.Tasks.Dataflow.BufferBlock%601?displayProperty=nameWithType>, <xref:System.Threading.Tasks.Dataflow.BroadcastBlock%601?displayProperty=nameWithType> e <xref:System.Threading.Tasks.Dataflow.WriteOnceBlock%601?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="aadf8-211">The TPL Dataflow Library provides three buffering block types: <xref:System.Threading.Tasks.Dataflow.BufferBlock%601?displayProperty=nameWithType>, <xref:System.Threading.Tasks.Dataflow.BroadcastBlock%601?displayProperty=nameWithType>, and <xref:System.Threading.Tasks.Dataflow.WriteOnceBlock%601?displayProperty=nameWithType>.</span></span>  
  
#### <a name="bufferblockt"></a><span data-ttu-id="aadf8-212">BufferBlock(T)</span><span class="sxs-lookup"><span data-stu-id="aadf8-212">BufferBlock(T)</span></span>  
 <span data-ttu-id="aadf8-213">La classe <xref:System.Threading.Tasks.Dataflow.BufferBlock%601> rappresenta una struttura di messaggistica asincrona di utilizzo generale.</span><span class="sxs-lookup"><span data-stu-id="aadf8-213">The <xref:System.Threading.Tasks.Dataflow.BufferBlock%601> class represents a general-purpose asynchronous messaging structure.</span></span> <span data-ttu-id="aadf8-214">Questa classe archivia una coda di messaggi FIFO (First In, First Out) che possono essere letti da più destinazioni o in cui possono scrivere più origini.</span><span class="sxs-lookup"><span data-stu-id="aadf8-214">This class stores a first in, first out (FIFO) queue of messages that can be written to by multiple sources or read from by multiple targets.</span></span> <span data-ttu-id="aadf8-215">Quando da parte di una destinazione viene ricevuto un messaggio da un oggetto <xref:System.Threading.Tasks.Dataflow.BufferBlock%601>, il messaggio viene rimosso dalla coda di messaggi.</span><span class="sxs-lookup"><span data-stu-id="aadf8-215">When a target receives a message from a <xref:System.Threading.Tasks.Dataflow.BufferBlock%601> object, that message is removed from the message queue.</span></span> <span data-ttu-id="aadf8-216">Pertanto, sebbene a un oggetto <xref:System.Threading.Tasks.Dataflow.BufferBlock%601> possano essere associate più destinazioni, ogni messaggio verrà ricevuto da una sola destinazione.</span><span class="sxs-lookup"><span data-stu-id="aadf8-216">Therefore, although a <xref:System.Threading.Tasks.Dataflow.BufferBlock%601> object can have multiple targets, only one target will receive each message.</span></span> <span data-ttu-id="aadf8-217">La classe <xref:System.Threading.Tasks.Dataflow.BufferBlock%601> è utile quando si vogliono passare più messaggi a un altro componente e tale componente deve ricevere ogni messaggio.</span><span class="sxs-lookup"><span data-stu-id="aadf8-217">The <xref:System.Threading.Tasks.Dataflow.BufferBlock%601> class is useful when you want to pass multiple messages to another component, and that component must receive each message.</span></span>  
  
 <span data-ttu-id="aadf8-218">Nell'esempio di base seguente vengono inseriti alcuni valori <xref:System.Int32> in un oggetto <xref:System.Threading.Tasks.Dataflow.BufferBlock%601> che, successivamente, vengono riletti dall'oggetto in questione.</span><span class="sxs-lookup"><span data-stu-id="aadf8-218">The following basic example posts several <xref:System.Int32> values to a <xref:System.Threading.Tasks.Dataflow.BufferBlock%601> object and then reads those values back from that object.</span></span>  
  
 [!code-csharp[TPLDataflow_Overview#1](../../../samples/snippets/csharp/VS_Snippets_Misc/tpldataflow_overview/cs/program.cs#1)]
 [!code-vb[TPLDataflow_Overview#1](../../../samples/snippets/visualbasic/VS_Snippets_Misc/tpldataflow_overview/vb/program.vb#1)]  
  
 <span data-ttu-id="aadf8-219">Per un esempio completo che illustra come scrivere e leggere messaggi da un <xref:System.Threading.Tasks.Dataflow.BufferBlock%601> , vedere [procedura: scrivere messaggi in e leggere messaggi da un Dataflow Block](../../../docs/standard/parallel-programming/how-to-write-messages-to-and-read-messages-from-a-dataflow-block.md).</span><span class="sxs-lookup"><span data-stu-id="aadf8-219">For a complete example that demonstrates how to write messages to and read messages from a <xref:System.Threading.Tasks.Dataflow.BufferBlock%601> object, see [How to: Write Messages to and Read Messages from a Dataflow Block](../../../docs/standard/parallel-programming/how-to-write-messages-to-and-read-messages-from-a-dataflow-block.md).</span></span>  
  
#### <a name="broadcastblockt"></a><span data-ttu-id="aadf8-220">BroadcastBlock(T)</span><span class="sxs-lookup"><span data-stu-id="aadf8-220">BroadcastBlock(T)</span></span>  
 <span data-ttu-id="aadf8-221">La classe <xref:System.Threading.Tasks.Dataflow.BroadcastBlock%601> è utile quando è necessario passare più messaggi a un altro componente, ma il componente necessita solo del valore più recente.</span><span class="sxs-lookup"><span data-stu-id="aadf8-221">The <xref:System.Threading.Tasks.Dataflow.BroadcastBlock%601> class is useful when you must pass multiple messages to another component, but that component needs only the most recent value.</span></span> <span data-ttu-id="aadf8-222">Questa classe è utile anche quando si vuole trasmettere un messaggio a più componenti.</span><span class="sxs-lookup"><span data-stu-id="aadf8-222">This class is also useful when you want to broadcast a message to multiple components.</span></span>  
  
 <span data-ttu-id="aadf8-223">Nell'esempio di base seguente viene inserito un valore <xref:System.Double> in un oggetto <xref:System.Threading.Tasks.Dataflow.BroadcastBlock%601> che, successivamente, viene riletto più volte dall'oggetto in questione.</span><span class="sxs-lookup"><span data-stu-id="aadf8-223">The following basic example posts a <xref:System.Double> value to a <xref:System.Threading.Tasks.Dataflow.BroadcastBlock%601> object and then reads that value back from that object several times.</span></span> <span data-ttu-id="aadf8-224">Dal momento che, dopo essere stati letti, i valori non vengono rimossi dagli oggetti <xref:System.Threading.Tasks.Dataflow.BroadcastBlock%601>, lo stesso valore è disponibile ogni volta.</span><span class="sxs-lookup"><span data-stu-id="aadf8-224">Because values are not removed from <xref:System.Threading.Tasks.Dataflow.BroadcastBlock%601> objects after they are read, the same value is available every time.</span></span>  
  
 [!code-csharp[TPLDataflow_Overview#2](../../../samples/snippets/csharp/VS_Snippets_Misc/tpldataflow_overview/cs/program.cs#2)]
 [!code-vb[TPLDataflow_Overview#2](../../../samples/snippets/visualbasic/VS_Snippets_Misc/tpldataflow_overview/vb/program.vb#2)]  
  
 <span data-ttu-id="aadf8-225">Per un esempio completo che illustra come usare <xref:System.Threading.Tasks.Dataflow.BroadcastBlock%601> per trasmettere un messaggio a più blocchi di destinazione, vedere [procedura: specificare un'utilità di pianificazione in un Dataflow Block](../../../docs/standard/parallel-programming/how-to-specify-a-task-scheduler-in-a-dataflow-block.md).</span><span class="sxs-lookup"><span data-stu-id="aadf8-225">For a complete example that demonstrates how to use <xref:System.Threading.Tasks.Dataflow.BroadcastBlock%601> to broadcast a message to multiple target blocks, see [How to: Specify a Task Scheduler in a Dataflow Block](../../../docs/standard/parallel-programming/how-to-specify-a-task-scheduler-in-a-dataflow-block.md).</span></span>  
  
#### <a name="writeonceblockt"></a><span data-ttu-id="aadf8-226">WriteOnceBlock(T)</span><span class="sxs-lookup"><span data-stu-id="aadf8-226">WriteOnceBlock(T)</span></span>  
 <span data-ttu-id="aadf8-227">La classe <xref:System.Threading.Tasks.Dataflow.WriteOnceBlock%601> è simile alla classe <xref:System.Threading.Tasks.Dataflow.BroadcastBlock%601>, con la differenza che in un oggetto <xref:System.Threading.Tasks.Dataflow.WriteOnceBlock%601> è possibile scrivere una sola volta.</span><span class="sxs-lookup"><span data-stu-id="aadf8-227">The <xref:System.Threading.Tasks.Dataflow.WriteOnceBlock%601> class resembles the <xref:System.Threading.Tasks.Dataflow.BroadcastBlock%601> class, except that a <xref:System.Threading.Tasks.Dataflow.WriteOnceBlock%601> object can be written to one time only.</span></span> <span data-ttu-id="aadf8-228">È possibile considerare <xref:System.Threading.Tasks.Dataflow.WriteOnceBlock%601> come c# [readonly](~/docs/csharp/language-reference/keywords/readonly.md) ([ReadOnly](~/docs/visual-basic/language-reference/modifiers/readonly.md) in [!INCLUDE[vbprvb](../../../includes/vbprvb-md.md)]) (parola chiave), tranne il fatto che un <xref:System.Threading.Tasks.Dataflow.WriteOnceBlock%601> oggetto diventa non modificabile dopo la ricezione di un valore anziché in fase di costruzione.</span><span class="sxs-lookup"><span data-stu-id="aadf8-228">You can think of <xref:System.Threading.Tasks.Dataflow.WriteOnceBlock%601> as being similar to the C# [readonly](~/docs/csharp/language-reference/keywords/readonly.md) ([ReadOnly](~/docs/visual-basic/language-reference/modifiers/readonly.md) in [!INCLUDE[vbprvb](../../../includes/vbprvb-md.md)]) keyword, except that a <xref:System.Threading.Tasks.Dataflow.WriteOnceBlock%601> object becomes immutable after it receives a value instead of at construction.</span></span> <span data-ttu-id="aadf8-229">Come per la classe <xref:System.Threading.Tasks.Dataflow.BroadcastBlock%601>, quando da una destinazione riceve un messaggio da un oggetto <xref:System.Threading.Tasks.Dataflow.WriteOnceBlock%601>, il messaggio viene rimosso dalla coda di messaggi.</span><span class="sxs-lookup"><span data-stu-id="aadf8-229">Like the <xref:System.Threading.Tasks.Dataflow.BroadcastBlock%601> class, when a target receives a message from a <xref:System.Threading.Tasks.Dataflow.WriteOnceBlock%601> object, that message is not removed from that object.</span></span> <span data-ttu-id="aadf8-230">Pertanto, più destinazioni riceveranno una copia del messaggio.</span><span class="sxs-lookup"><span data-stu-id="aadf8-230">Therefore, multiple targets receive a copy of the message.</span></span> <span data-ttu-id="aadf8-231">La classe <xref:System.Threading.Tasks.Dataflow.WriteOnceBlock%601> è utile quando si desidera propagare solo il primo di più messaggi.</span><span class="sxs-lookup"><span data-stu-id="aadf8-231">The <xref:System.Threading.Tasks.Dataflow.WriteOnceBlock%601> class is useful when you want to propagate only the first of multiple messages.</span></span>  
  
 <span data-ttu-id="aadf8-232">Nell'esempio di base seguente vengono inseriti valori <xref:System.String> in un oggetto <xref:System.Threading.Tasks.Dataflow.WriteOnceBlock%601> che, successivamente, vengono riletti dall'oggetto in questione.</span><span class="sxs-lookup"><span data-stu-id="aadf8-232">The following basic example posts multiple <xref:System.String> values to a <xref:System.Threading.Tasks.Dataflow.WriteOnceBlock%601> object and then reads the value back from that object.</span></span> <span data-ttu-id="aadf8-233">Poiché un oggetto <xref:System.Threading.Tasks.Dataflow.WriteOnceBlock%601> può essere scritto una sola volta, dopo la ricezione di un oggetto <xref:System.Threading.Tasks.Dataflow.WriteOnceBlock%601>, i messaggi successivi vengono rimossi.</span><span class="sxs-lookup"><span data-stu-id="aadf8-233">Because a <xref:System.Threading.Tasks.Dataflow.WriteOnceBlock%601> object can be written to one time only, after a <xref:System.Threading.Tasks.Dataflow.WriteOnceBlock%601> object receives a message, it discards subsequent messages.</span></span>  
  
 [!code-csharp[TPLDataflow_Overview#3](../../../samples/snippets/csharp/VS_Snippets_Misc/tpldataflow_overview/cs/program.cs#3)]
 [!code-vb[TPLDataflow_Overview#3](../../../samples/snippets/visualbasic/VS_Snippets_Misc/tpldataflow_overview/vb/program.vb#3)]  
  
 <span data-ttu-id="aadf8-234">Per un esempio completo che illustra come usare <xref:System.Threading.Tasks.Dataflow.WriteOnceBlock%601> per ricevere il valore della prima operazione che viene completata, vedere [procedura: scollegare i blocchi di flussi di dati](../../../docs/standard/parallel-programming/how-to-unlink-dataflow-blocks.md).</span><span class="sxs-lookup"><span data-stu-id="aadf8-234">For a complete example that demonstrates how to use <xref:System.Threading.Tasks.Dataflow.WriteOnceBlock%601> to receive the value of the first operation that finishes, see [How to: Unlink Dataflow Blocks](../../../docs/standard/parallel-programming/how-to-unlink-dataflow-blocks.md).</span></span>  
  
### <a name="execution-blocks"></a><span data-ttu-id="aadf8-235">Blocchi di esecuzione</span><span class="sxs-lookup"><span data-stu-id="aadf8-235">Execution Blocks</span></span>  
 <span data-ttu-id="aadf8-236">Tramite i blocchi di esecuzione viene chiamato un delegato fornito dall'utente per ogni blocco di dati ricevuti.</span><span class="sxs-lookup"><span data-stu-id="aadf8-236">Execution blocks call a user-provided delegate for each piece of received data.</span></span> <span data-ttu-id="aadf8-237">La libreria del flusso di dati TPL fornisce tre tipi di blocco di esecuzione: <xref:System.Threading.Tasks.Dataflow.ActionBlock%601>, <xref:System.Threading.Tasks.Dataflow.TransformBlock%602?displayProperty=nameWithType> e <xref:System.Threading.Tasks.Dataflow.TransformManyBlock%602?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="aadf8-237">The TPL Dataflow Library provides three execution block types: <xref:System.Threading.Tasks.Dataflow.ActionBlock%601>, <xref:System.Threading.Tasks.Dataflow.TransformBlock%602?displayProperty=nameWithType>, and <xref:System.Threading.Tasks.Dataflow.TransformManyBlock%602?displayProperty=nameWithType>.</span></span>  
  
#### <a name="actionblockt"></a><span data-ttu-id="aadf8-238">ActionBlock(T)</span><span class="sxs-lookup"><span data-stu-id="aadf8-238">ActionBlock(T)</span></span>  
 <span data-ttu-id="aadf8-239">La classe <xref:System.Threading.Tasks.Dataflow.ActionBlock%601> è un blocco di destinazione tramite cui viene chiamato un delegato alla ricezione dei dati.</span><span class="sxs-lookup"><span data-stu-id="aadf8-239">The <xref:System.Threading.Tasks.Dataflow.ActionBlock%601> class is a target block that calls a delegate when it receives data.</span></span> <span data-ttu-id="aadf8-240">Si consideri un oggetto <xref:System.Threading.Tasks.Dataflow.ActionBlock%601> come un delegato eseguito in modo asincrono quando i dati diventano disponibili.</span><span class="sxs-lookup"><span data-stu-id="aadf8-240">Think of a <xref:System.Threading.Tasks.Dataflow.ActionBlock%601> object as a delegate that runs asynchronously when data becomes available.</span></span> <span data-ttu-id="aadf8-241">Il delegato fornito a un oggetto <xref:System.Threading.Tasks.Dataflow.ActionBlock%601> può essere di tipo <xref:System.Action> o di tipo `System.Func\<TInput, Task>`.</span><span class="sxs-lookup"><span data-stu-id="aadf8-241">The delegate that you provide to an <xref:System.Threading.Tasks.Dataflow.ActionBlock%601> object can be of type <xref:System.Action> or type `System.Func\<TInput, Task>`.</span></span> <span data-ttu-id="aadf8-242">Quando si utilizza un oggetto <xref:System.Threading.Tasks.Dataflow.ActionBlock%601> con <xref:System.Action>, l'elaborazione di ogni elemento di input viene considerata completata alla restituzione del delegato.</span><span class="sxs-lookup"><span data-stu-id="aadf8-242">When you use an <xref:System.Threading.Tasks.Dataflow.ActionBlock%601> object with <xref:System.Action>, processing of each input element is considered completed when the delegate returns.</span></span> <span data-ttu-id="aadf8-243">Quando si utilizza un oggetto <xref:System.Threading.Tasks.Dataflow.ActionBlock%601> con `System.Func\<TInput, Task>`, l'elaborazione di ogni elemento di input viene considerata completata solo quando l'oggetto restituito <xref:System.Threading.Tasks.Task> viene completato.</span><span class="sxs-lookup"><span data-stu-id="aadf8-243">When you use an <xref:System.Threading.Tasks.Dataflow.ActionBlock%601> object with `System.Func\<TInput, Task>`, processing of each input element is considered completed only when the returned <xref:System.Threading.Tasks.Task> object is completed.</span></span> <span data-ttu-id="aadf8-244">Tramite questi due meccanismi è possibile utilizzare <xref:System.Threading.Tasks.Dataflow.ActionBlock%601> sia per l'elaborazione sincrona sia per quella asincrona di ogni elemento di input.</span><span class="sxs-lookup"><span data-stu-id="aadf8-244">By using these two mechanisms, you can use <xref:System.Threading.Tasks.Dataflow.ActionBlock%601> for both synchronous and asynchronous processing of each input element.</span></span>  
  
 <span data-ttu-id="aadf8-245">Nell'esempio di base seguente vengono inseriti più valori <xref:System.Int32> in un oggetto <xref:System.Threading.Tasks.Dataflow.ActionBlock%601>.</span><span class="sxs-lookup"><span data-stu-id="aadf8-245">The following basic example posts multiple <xref:System.Int32> values to an <xref:System.Threading.Tasks.Dataflow.ActionBlock%601> object.</span></span> <span data-ttu-id="aadf8-246">Tramite l'oggetto <xref:System.Threading.Tasks.Dataflow.ActionBlock%601> i valori in questione vengono stampati sulla console.</span><span class="sxs-lookup"><span data-stu-id="aadf8-246">The <xref:System.Threading.Tasks.Dataflow.ActionBlock%601> object prints those values to the console.</span></span> <span data-ttu-id="aadf8-247">In questo esempio il blocco viene quindi impostato sullo stato completato e attende il completamento di tutte le attività del flusso di dati.</span><span class="sxs-lookup"><span data-stu-id="aadf8-247">This example then sets the block to the completed state and waits for all dataflow tasks to finish.</span></span>  
  
 [!code-csharp[TPLDataflow_Overview#4](../../../samples/snippets/csharp/VS_Snippets_Misc/tpldataflow_overview/cs/program.cs#4)]
 [!code-vb[TPLDataflow_Overview#4](../../../samples/snippets/visualbasic/VS_Snippets_Misc/tpldataflow_overview/vb/program.vb#4)]  
  
 <span data-ttu-id="aadf8-248">Per esempi completi che illustrano come usare i delegati con la <xref:System.Threading.Tasks.Dataflow.ActionBlock%601> classe, vedere [procedura: eseguire azioni quando un flusso di dati blocco riceve dati](../../../docs/standard/parallel-programming/how-to-perform-action-when-a-dataflow-block-receives-data.md).</span><span class="sxs-lookup"><span data-stu-id="aadf8-248">For complete examples that demonstrate how to use delegates with the <xref:System.Threading.Tasks.Dataflow.ActionBlock%601> class, see [How to: Perform Action When a Dataflow Block Receives Data](../../../docs/standard/parallel-programming/how-to-perform-action-when-a-dataflow-block-receives-data.md).</span></span>  
  
#### <a name="transformblocktinput-toutput"></a><span data-ttu-id="aadf8-249">TransformBlock(TInput, TOutput)</span><span class="sxs-lookup"><span data-stu-id="aadf8-249">TransformBlock(TInput, TOutput)</span></span>  
 <span data-ttu-id="aadf8-250">La classe <xref:System.Threading.Tasks.Dataflow.TransformBlock%602> è simile alla classe <xref:System.Threading.Tasks.Dataflow.ActionBlock%601>, con la differenza che viene utilizzata sia come origine sia come destinazione.</span><span class="sxs-lookup"><span data-stu-id="aadf8-250">The <xref:System.Threading.Tasks.Dataflow.TransformBlock%602> class resembles the <xref:System.Threading.Tasks.Dataflow.ActionBlock%601> class, except that it acts as both a source and as a target.</span></span> <span data-ttu-id="aadf8-251">Il delegato passato a un oggetto <xref:System.Threading.Tasks.Dataflow.TransformBlock%602> restituisce un valore di tipo `TOutput`.</span><span class="sxs-lookup"><span data-stu-id="aadf8-251">The delegate that you pass to a <xref:System.Threading.Tasks.Dataflow.TransformBlock%602> object returns a value of type `TOutput`.</span></span> <span data-ttu-id="aadf8-252">Il delegato fornito a un oggetto <xref:System.Threading.Tasks.Dataflow.TransformBlock%602> può essere di tipo `System.Func<TInput, TOutput>` o di tipo `System.Func<TInput, Task>`.</span><span class="sxs-lookup"><span data-stu-id="aadf8-252">The delegate that you provide to a <xref:System.Threading.Tasks.Dataflow.TransformBlock%602> object can be of type `System.Func<TInput, TOutput>` or type `System.Func<TInput, Task>`.</span></span> <span data-ttu-id="aadf8-253">Quando si utilizza un oggetto <xref:System.Threading.Tasks.Dataflow.TransformBlock%602> con `System.Func\<TInput, TOutput>`, l'elaborazione di ogni elemento di input viene considerata completata alla restituzione del delegato.</span><span class="sxs-lookup"><span data-stu-id="aadf8-253">When you use a <xref:System.Threading.Tasks.Dataflow.TransformBlock%602> object with `System.Func\<TInput, TOutput>`, processing of each input element is considered completed when the delegate returns.</span></span> <span data-ttu-id="aadf8-254">Quando si utilizza un oggetto <xref:System.Threading.Tasks.Dataflow.TransformBlock%602> utilizzato con `System.Func<TInput, Task<TOutput>>`, l'elaborazione di ogni elemento di input viene considerata completata solo quando l'oggetto restituito <xref:System.Threading.Tasks.Task> viene completato.</span><span class="sxs-lookup"><span data-stu-id="aadf8-254">When you use a <xref:System.Threading.Tasks.Dataflow.TransformBlock%602> object used with `System.Func<TInput, Task<TOutput>>`, processing of each input element is considered completed only when the returned <xref:System.Threading.Tasks.Task> object is completed.</span></span> <span data-ttu-id="aadf8-255">Analogamente all'oggetto <xref:System.Threading.Tasks.Dataflow.ActionBlock%601>, tramite questi due meccanismi, è possibile utilizzare <xref:System.Threading.Tasks.Dataflow.TransformBlock%602> sia per l'elaborazione sincrona sia per quella asincrona di ogni elemento di input.</span><span class="sxs-lookup"><span data-stu-id="aadf8-255">As with <xref:System.Threading.Tasks.Dataflow.ActionBlock%601>, by using these two mechanisms, you can use <xref:System.Threading.Tasks.Dataflow.TransformBlock%602> for both synchronous and asynchronous processing of each input element.</span></span>  
  
 <span data-ttu-id="aadf8-256">Nell'esempio di base seguente viene creato un oggetto <xref:System.Threading.Tasks.Dataflow.TransformBlock%602> con cui si calcola la radice quadrata dell'input.</span><span class="sxs-lookup"><span data-stu-id="aadf8-256">The following basic example creates a <xref:System.Threading.Tasks.Dataflow.TransformBlock%602> object that computes the square root of its input.</span></span> <span data-ttu-id="aadf8-257">L'oggetto <xref:System.Threading.Tasks.Dataflow.TransformBlock%602> accetta valori <xref:System.Int32> come input e tramite esso vengono generati valori <xref:System.Double> come output.</span><span class="sxs-lookup"><span data-stu-id="aadf8-257">The <xref:System.Threading.Tasks.Dataflow.TransformBlock%602> object takes <xref:System.Int32> values as input and produces <xref:System.Double> values as output.</span></span>  
  
 [!code-csharp[TPLDataflow_Overview#5](../../../samples/snippets/csharp/VS_Snippets_Misc/tpldataflow_overview/cs/program.cs#5)]
 [!code-vb[TPLDataflow_Overview#5](../../../samples/snippets/visualbasic/VS_Snippets_Misc/tpldataflow_overview/vb/program.vb#5)]  
  
 <span data-ttu-id="aadf8-258">Per esempi completi che utilizza <xref:System.Threading.Tasks.Dataflow.TransformBlock%602> in una rete di blocchi di flussi di dati che esegue l'elaborazione di immagini in un'applicazione Windows Forms, vedere [procedura dettagliata: flussi di dati in un'applicazione Windows Form utilizzando](../../../docs/standard/parallel-programming/walkthrough-using-dataflow-in-a-windows-forms-application.md).</span><span class="sxs-lookup"><span data-stu-id="aadf8-258">For complete examples that uses <xref:System.Threading.Tasks.Dataflow.TransformBlock%602> in a network of dataflow blocks that performs image processing in a Windows Forms application, see [Walkthrough: Using Dataflow in a Windows Forms Application](../../../docs/standard/parallel-programming/walkthrough-using-dataflow-in-a-windows-forms-application.md).</span></span>  
  
#### <a name="transformmanyblocktinput-toutput"></a><span data-ttu-id="aadf8-259">TransformManyBlock(TInput, TOutput)</span><span class="sxs-lookup"><span data-stu-id="aadf8-259">TransformManyBlock(TInput, TOutput)</span></span>  
 <span data-ttu-id="aadf8-260">La classe <xref:System.Threading.Tasks.Dataflow.TransformManyBlock%602> è simile alla classe <xref:System.Threading.Tasks.Dataflow.TransformBlock%602>, ad eccezione del fatto che tramite l'oggetto <xref:System.Threading.Tasks.Dataflow.TransformManyBlock%602> vengono generati zero o più valori di output per ogni valore di input anziché un solo valore di output per ogni valore di input.</span><span class="sxs-lookup"><span data-stu-id="aadf8-260">The <xref:System.Threading.Tasks.Dataflow.TransformManyBlock%602> class resembles the <xref:System.Threading.Tasks.Dataflow.TransformBlock%602> class, except that <xref:System.Threading.Tasks.Dataflow.TransformManyBlock%602> produces zero or more output values for each input value, instead of only one output value for each input value.</span></span> <span data-ttu-id="aadf8-261">Il delegato fornito a un oggetto <xref:System.Threading.Tasks.Dataflow.TransformManyBlock%602> può essere di tipo `System.Func<TInput, IEnumerable<TOutput>>` o di tipo `type System.Func<TInput, Task<IEnumerable<TOutput>>>`.</span><span class="sxs-lookup"><span data-stu-id="aadf8-261">The delegate that you provide to a <xref:System.Threading.Tasks.Dataflow.TransformManyBlock%602> object can be of type `System.Func<TInput, IEnumerable<TOutput>>` or `type System.Func<TInput, Task<IEnumerable<TOutput>>>`.</span></span> <span data-ttu-id="aadf8-262">Quando si utilizza un oggetto <xref:System.Threading.Tasks.Dataflow.TransformManyBlock%602> con `System.Func<TInput, IEnumerable<TOutput>>`, l'elaborazione di ogni elemento di input viene considerata completata alla restituzione del delegato.</span><span class="sxs-lookup"><span data-stu-id="aadf8-262">When you use a <xref:System.Threading.Tasks.Dataflow.TransformManyBlock%602> object with `System.Func<TInput, IEnumerable<TOutput>>`, processing of each input element is considered completed when the delegate returns.</span></span> <span data-ttu-id="aadf8-263">Quando si utilizza un oggetto <xref:System.Threading.Tasks.Dataflow.TransformManyBlock%602> con `System.Func<TInput, Task<IEnumerable<TOutput>>>`, l'elaborazione di ogni elemento di input viene considerata completa solo quando l'oggetto restituito `System.Threading.Tasks.Task<IEnumerable<TOutput>>` viene completato.</span><span class="sxs-lookup"><span data-stu-id="aadf8-263">When you use a <xref:System.Threading.Tasks.Dataflow.TransformManyBlock%602> object with `System.Func<TInput, Task<IEnumerable<TOutput>>>`, processing of each input element is considered complete only when the returned `System.Threading.Tasks.Task<IEnumerable<TOutput>>` object is completed.</span></span>  
  
 <span data-ttu-id="aadf8-264">Nell'esempio di base seguente viene creato un oggetto <xref:System.Threading.Tasks.Dataflow.TransformManyBlock%602> tramite cui le stringhe vengono suddivise in singole sequenze di caratteri.</span><span class="sxs-lookup"><span data-stu-id="aadf8-264">The following basic example creates a <xref:System.Threading.Tasks.Dataflow.TransformManyBlock%602> object that splits strings into their individual character sequences.</span></span> <span data-ttu-id="aadf8-265">L'oggetto <xref:System.Threading.Tasks.Dataflow.TransformManyBlock%602> accetta valori <xref:System.String> come input e tramite esso vengono generati valori <xref:System.Char> come output.</span><span class="sxs-lookup"><span data-stu-id="aadf8-265">The <xref:System.Threading.Tasks.Dataflow.TransformManyBlock%602> object takes <xref:System.String> values as input and produces <xref:System.Char> values as output.</span></span>  
  
 [!code-csharp[TPLDataflow_Overview#6](../../../samples/snippets/csharp/VS_Snippets_Misc/tpldataflow_overview/cs/program.cs#6)]
 [!code-vb[TPLDataflow_Overview#6](../../../samples/snippets/visualbasic/VS_Snippets_Misc/tpldataflow_overview/vb/program.vb#6)]  
  
 <span data-ttu-id="aadf8-266">Per esempi completi che usano <xref:System.Threading.Tasks.Dataflow.TransformManyBlock%602> per generare più output indipendenti per ogni input in una pipeline del flusso di dati, vedere [procedura dettagliata: creazione di una Pipeline del flusso di dati](../../../docs/standard/parallel-programming/walkthrough-creating-a-dataflow-pipeline.md).</span><span class="sxs-lookup"><span data-stu-id="aadf8-266">For complete examples that use <xref:System.Threading.Tasks.Dataflow.TransformManyBlock%602> to produce multiple independent outputs for each input in a dataflow pipeline, see [Walkthrough: Creating a Dataflow Pipeline](../../../docs/standard/parallel-programming/walkthrough-creating-a-dataflow-pipeline.md).</span></span>  
  
#### <a name="degree-of-parallelism"></a><span data-ttu-id="aadf8-267">Grado di parallelismo</span><span class="sxs-lookup"><span data-stu-id="aadf8-267">Degree of Parallelism</span></span>  
 <span data-ttu-id="aadf8-268">Tramite ogni oggetto <xref:System.Threading.Tasks.Dataflow.ActionBlock%601>, <xref:System.Threading.Tasks.Dataflow.TransformBlock%602> e <xref:System.Threading.Tasks.Dataflow.TransformManyBlock%602> i messaggi di input vengono inseriti nel buffer finché il blocco non è pronto per elaborarli.</span><span class="sxs-lookup"><span data-stu-id="aadf8-268">Every <xref:System.Threading.Tasks.Dataflow.ActionBlock%601>, <xref:System.Threading.Tasks.Dataflow.TransformBlock%602>, and <xref:System.Threading.Tasks.Dataflow.TransformManyBlock%602> object buffers input messages until the block is ready to process them.</span></span> <span data-ttu-id="aadf8-269">Per impostazione predefinita, i messaggi vengono elaborati da queste classi nell'ordine in cui vengono ricevuti, un messaggio alla volta.</span><span class="sxs-lookup"><span data-stu-id="aadf8-269">By default, these classes process messages in the order in which they are received, one message at a time.</span></span> <span data-ttu-id="aadf8-270">È inoltre possibile specificare il grado di parallelismo per consentire l'elaborazione simultanea di più messaggi da parte degli oggetti <xref:System.Threading.Tasks.Dataflow.ActionBlock%601>, <xref:System.Threading.Tasks.Dataflow.TransformBlock%602> e <xref:System.Threading.Tasks.Dataflow.TransformManyBlock%602>.</span><span class="sxs-lookup"><span data-stu-id="aadf8-270">You can also specify the degree of parallelism to enable <xref:System.Threading.Tasks.Dataflow.ActionBlock%601>, <xref:System.Threading.Tasks.Dataflow.TransformBlock%602> and <xref:System.Threading.Tasks.Dataflow.TransformManyBlock%602> objects to process multiple messages concurrently.</span></span> <span data-ttu-id="aadf8-271">Per ulteriori informazioni sull'esecuzione simultanea, vedere la sezione Specifica del grado di parallelismo più avanti in questo documento.</span><span class="sxs-lookup"><span data-stu-id="aadf8-271">For more information about concurrent execution, see the section Specifying the Degree of Parallelism later in this document.</span></span> <span data-ttu-id="aadf8-272">Per un esempio in cui viene impostato il grado di parallelismo per consentire l'elaborazione di più di un messaggio alla volta da parte di un blocco di flussi di dati di esecuzione, vedere [Procedura: specificare il grado di parallelismo in un blocco di flussi di dati](../../../docs/standard/parallel-programming/how-to-specify-the-degree-of-parallelism-in-a-dataflow-block.md).</span><span class="sxs-lookup"><span data-stu-id="aadf8-272">For an example that sets the degree of parallelism to enable an execution dataflow block to process more than one message at a time, see [How to: Specify the Degree of Parallelism in a Dataflow Block](../../../docs/standard/parallel-programming/how-to-specify-the-degree-of-parallelism-in-a-dataflow-block.md).</span></span>  
  
#### <a name="summary-of-delegate-types"></a><span data-ttu-id="aadf8-273">Riepilogo dei tipi delegati</span><span class="sxs-lookup"><span data-stu-id="aadf8-273">Summary of Delegate Types</span></span>  
 <span data-ttu-id="aadf8-274">Nella tabella seguente vengono riepilogati i tipi delegati che possono essere forniti agli oggetti <xref:System.Threading.Tasks.Dataflow.ActionBlock%601>, <xref:System.Threading.Tasks.Dataflow.TransformBlock%602> e <xref:System.Threading.Tasks.Dataflow.TransformManyBlock%602>.</span><span class="sxs-lookup"><span data-stu-id="aadf8-274">The following table summarizes the delegate types that you can provide to <xref:System.Threading.Tasks.Dataflow.ActionBlock%601>, <xref:System.Threading.Tasks.Dataflow.TransformBlock%602>, and <xref:System.Threading.Tasks.Dataflow.TransformManyBlock%602> objects.</span></span> <span data-ttu-id="aadf8-275">Viene inoltre specificato se il tipo delegato viene eseguito in modo sincrono o asincrono.</span><span class="sxs-lookup"><span data-stu-id="aadf8-275">This table also specifies whether the delegate type operates synchronously or asynchronously.</span></span>  
  
|<span data-ttu-id="aadf8-276">Tipo</span><span class="sxs-lookup"><span data-stu-id="aadf8-276">Type</span></span>|<span data-ttu-id="aadf8-277">Tipo delegato sincrono</span><span class="sxs-lookup"><span data-stu-id="aadf8-277">Synchronous Delegate Type</span></span>|<span data-ttu-id="aadf8-278">Tipo delegato asincrono</span><span class="sxs-lookup"><span data-stu-id="aadf8-278">Asynchronous Delegate Type</span></span>|  
|----------|-------------------------------|--------------------------------|  
|<xref:System.Threading.Tasks.Dataflow.ActionBlock%601>|`System.Action`|`System.Func\<TInput, Task>`|  
|<xref:System.Threading.Tasks.Dataflow.TransformBlock%602>|<span data-ttu-id="aadf8-279">`System.Func\<TInput, TOutput>`2\`</span><span class="sxs-lookup"><span data-stu-id="aadf8-279">`System.Func\<TInput, TOutput>`2\`</span></span>|`System.Func<TInput, Task<TOutput>>`|  
|<xref:System.Threading.Tasks.Dataflow.TransformManyBlock%602>|`System.Func<TInput, IEnumerable<TOutput>>`|`System.Func<TInput, Task<IEnumerable<TOutput>>>`|  
  
 <span data-ttu-id="aadf8-280">È inoltre possibile utilizzare le espressioni lambda quando si utilizzano tipi di blocchi di esecuzione.</span><span class="sxs-lookup"><span data-stu-id="aadf8-280">You can also use lambda expressions when you work with execution block types.</span></span> <span data-ttu-id="aadf8-281">Per un esempio in cui viene illustrato l'uso di un'espressione lambda con un blocco di esecuzione, vedere [Procedura: eseguire un'azione alla ricezione di dati in un blocco di flussi di dati](../../../docs/standard/parallel-programming/how-to-perform-action-when-a-dataflow-block-receives-data.md).</span><span class="sxs-lookup"><span data-stu-id="aadf8-281">For an example that shows how to use a lambda expression with an execution block, see [How to: Perform Action When a Dataflow Block Receives Data](../../../docs/standard/parallel-programming/how-to-perform-action-when-a-dataflow-block-receives-data.md).</span></span>  
  
### <a name="grouping-blocks"></a><span data-ttu-id="aadf8-282">Blocchi di raggruppamento</span><span class="sxs-lookup"><span data-stu-id="aadf8-282">Grouping Blocks</span></span>  
 <span data-ttu-id="aadf8-283">Con i blocchi di raggruppamento è possibile combinare i dati da una o più origini e con vari vincoli.</span><span class="sxs-lookup"><span data-stu-id="aadf8-283">Grouping blocks combine data from one or more sources and under various constraints.</span></span> <span data-ttu-id="aadf8-284">La libreria del flusso di dati TPL fornisce tre tipi di blocchi join: <xref:System.Threading.Tasks.Dataflow.BatchBlock%601>, <xref:System.Threading.Tasks.Dataflow.JoinBlock%602> e <xref:System.Threading.Tasks.Dataflow.BatchedJoinBlock%602>.</span><span class="sxs-lookup"><span data-stu-id="aadf8-284">The TPL Dataflow Library provides three join block types: <xref:System.Threading.Tasks.Dataflow.BatchBlock%601>, <xref:System.Threading.Tasks.Dataflow.JoinBlock%602>, and <xref:System.Threading.Tasks.Dataflow.BatchedJoinBlock%602>.</span></span>  
  
#### <a name="batchblockt"></a><span data-ttu-id="aadf8-285">BatchBlock(T)</span><span class="sxs-lookup"><span data-stu-id="aadf8-285">BatchBlock(T)</span></span>  
 <span data-ttu-id="aadf8-286">Tramite la classe <xref:System.Threading.Tasks.Dataflow.BatchBlock%601> vengono combinati set di dati di input, noti come batch, in matrici di dati di output.</span><span class="sxs-lookup"><span data-stu-id="aadf8-286">The <xref:System.Threading.Tasks.Dataflow.BatchBlock%601> class combines sets of input data, which are known as batches, into arrays of output data.</span></span> <span data-ttu-id="aadf8-287">È possibile specificare le dimensioni di ciascun batch quando si crea un oggetto <xref:System.Threading.Tasks.Dataflow.BatchBlock%601>.</span><span class="sxs-lookup"><span data-stu-id="aadf8-287">You specify the size of each batch when you create a <xref:System.Threading.Tasks.Dataflow.BatchBlock%601> object.</span></span> <span data-ttu-id="aadf8-288">Quando tramite l'oggetto <xref:System.Threading.Tasks.Dataflow.BatchBlock%601> si riceve il numero specificato di elementi di input, viene propagata all'esterno in modo asincrono una matrice contenente gli elementi in questione.</span><span class="sxs-lookup"><span data-stu-id="aadf8-288">When the <xref:System.Threading.Tasks.Dataflow.BatchBlock%601> object receives the specified count of input elements, it asynchronously propagates out an array that contains those elements.</span></span> <span data-ttu-id="aadf8-289">Se un oggetto <xref:System.Threading.Tasks.Dataflow.BatchBlock%601> è impostato sullo stato completato ma in esso non sono contenuti elementi sufficienti per formare un batch, viene propagata all'esterno una matrice finale contenente gli elementi di input rimanenti.</span><span class="sxs-lookup"><span data-stu-id="aadf8-289">If a <xref:System.Threading.Tasks.Dataflow.BatchBlock%601> object is set to the completed state but does not contain enough elements to form a batch, it propagates out a final array that contains the remaining input elements.</span></span>  
  
 <span data-ttu-id="aadf8-290">Il <xref:System.Threading.Tasks.Dataflow.BatchBlock%601> classe viene eseguita in modalità *greedy* o *non-greedy* modalità.</span><span class="sxs-lookup"><span data-stu-id="aadf8-290">The <xref:System.Threading.Tasks.Dataflow.BatchBlock%601> class operates in either *greedy* or *non-greedy* mode.</span></span> <span data-ttu-id="aadf8-291">In modalità greedy, vale a dire l'impostazione predefinita, un oggetto <xref:System.Threading.Tasks.Dataflow.BatchBlock%601> accetta ogni messaggio che viene offerto e propaga all'esterno una matrice dopo la ricezione del numero specificato di elementi.</span><span class="sxs-lookup"><span data-stu-id="aadf8-291">In greedy mode, which is the default, a <xref:System.Threading.Tasks.Dataflow.BatchBlock%601> object accepts every message that it is offered and propagates out an array after it receives the specified count of elements.</span></span> <span data-ttu-id="aadf8-292">In modalità non greedy, tramite un oggetto <xref:System.Threading.Tasks.Dataflow.BatchBlock%601> vengono posticipati tutti i messaggi in ingresso finché da parte di un numero sufficiente di origini non vengono offerti messaggi al blocco per formare un batch.</span><span class="sxs-lookup"><span data-stu-id="aadf8-292">In non-greedy mode, a <xref:System.Threading.Tasks.Dataflow.BatchBlock%601> object postpones all incoming messages until enough sources have offered messages to the block to form a batch.</span></span> <span data-ttu-id="aadf8-293">L'esecuzione in modalità greedy è in genere migliore rispetto a quella non greedy dal momento che necessita di un sovraccarico inferiore di elaborazione.</span><span class="sxs-lookup"><span data-stu-id="aadf8-293">Greedy mode typically performs better than non-greedy mode because it requires less processing overhead.</span></span> <span data-ttu-id="aadf8-294">Tuttavia, è possibile utilizzare la modalità non greedy quando è necessario coordinare l'utilizzo da più origini in modo atomico.</span><span class="sxs-lookup"><span data-stu-id="aadf8-294">However, you can use non-greedy mode when you must coordinate consumption from multiple sources in an atomic fashion.</span></span> <span data-ttu-id="aadf8-295">Specificare la modalità non greedy impostando la proprietà <xref:System.Threading.Tasks.Dataflow.GroupingDataflowBlockOptions.Greedy%2A> su `False` nel parametro `dataflowBlockOptions` nel costruttore <xref:System.Threading.Tasks.Dataflow.BatchBlock%601.%23ctor%2A>.</span><span class="sxs-lookup"><span data-stu-id="aadf8-295">Specify non-greedy mode by setting <xref:System.Threading.Tasks.Dataflow.GroupingDataflowBlockOptions.Greedy%2A> to `False` in the `dataflowBlockOptions` parameter in the <xref:System.Threading.Tasks.Dataflow.BatchBlock%601.%23ctor%2A> constructor.</span></span>  
  
 <span data-ttu-id="aadf8-296">Nell'esempio di base seguente vengono inseriti alcuni valori <xref:System.Int32> in un oggetto <xref:System.Threading.Tasks.Dataflow.BatchBlock%601> contenente dieci elementi in un batch.</span><span class="sxs-lookup"><span data-stu-id="aadf8-296">The following basic example posts several <xref:System.Int32> values to a <xref:System.Threading.Tasks.Dataflow.BatchBlock%601> object that holds ten elements in a batch.</span></span> <span data-ttu-id="aadf8-297">Per garantire che tutti i valori vengano propagati all'esterno dell'oggetto <xref:System.Threading.Tasks.Dataflow.BatchBlock%601>, in questo esempio viene chiamato il metodo <xref:System.Threading.Tasks.Dataflow.IDataflowBlock.Complete%2A>.</span><span class="sxs-lookup"><span data-stu-id="aadf8-297">To guarantee that all values propagate out of the <xref:System.Threading.Tasks.Dataflow.BatchBlock%601>, this example calls the <xref:System.Threading.Tasks.Dataflow.IDataflowBlock.Complete%2A> method.</span></span> <span data-ttu-id="aadf8-298">Tramite il metodo <xref:System.Threading.Tasks.Dataflow.IDataflowBlock.Complete%2A> viene impostato l'oggetto <xref:System.Threading.Tasks.Dataflow.BatchBlock%601> sullo stato completato e, pertanto, tramite l'oggetto <xref:System.Threading.Tasks.Dataflow.BatchBlock%601> vengono propagati all'esterno tutti gli elementi rimanenti come batch finale.</span><span class="sxs-lookup"><span data-stu-id="aadf8-298">The <xref:System.Threading.Tasks.Dataflow.IDataflowBlock.Complete%2A> method sets the <xref:System.Threading.Tasks.Dataflow.BatchBlock%601> object to the completed state, and therefore, the <xref:System.Threading.Tasks.Dataflow.BatchBlock%601> object propagates out any remaining elements as a final batch.</span></span>  
  
 [!code-csharp[TPLDataflow_Overview#7](../../../samples/snippets/csharp/VS_Snippets_Misc/tpldataflow_overview/cs/program.cs#7)]
 [!code-vb[TPLDataflow_Overview#7](../../../samples/snippets/visualbasic/VS_Snippets_Misc/tpldataflow_overview/vb/program.vb#7)]  
  
 <span data-ttu-id="aadf8-299">Per un esempio completo che usa <xref:System.Threading.Tasks.Dataflow.BatchBlock%601> per migliorare l'efficienza delle operazioni di inserimento del database, vedere [procedura dettagliata: uso di BatchBlock e BatchedJoinBlock per migliorare l'efficienza](../../../docs/standard/parallel-programming/walkthrough-using-batchblock-and-batchedjoinblock-to-improve-efficiency.md).</span><span class="sxs-lookup"><span data-stu-id="aadf8-299">For a complete example that uses <xref:System.Threading.Tasks.Dataflow.BatchBlock%601> to improve the efficiency of database insert operations, see [Walkthrough: Using BatchBlock and BatchedJoinBlock to Improve Efficiency](../../../docs/standard/parallel-programming/walkthrough-using-batchblock-and-batchedjoinblock-to-improve-efficiency.md).</span></span>  
  
#### <a name="joinblockt1-t2-"></a><span data-ttu-id="aadf8-300">JoinBlock(T1, T2, ...)</span><span class="sxs-lookup"><span data-stu-id="aadf8-300">JoinBlock(T1, T2, ...)</span></span>  
 <span data-ttu-id="aadf8-301">Tramite le classi <xref:System.Threading.Tasks.Dataflow.JoinBlock%602> e <xref:System.Threading.Tasks.Dataflow.JoinBlock%603> vengono raccolti elementi di input e propagati all'esterno oggetti <xref:System.Tuple%602?displayProperty=nameWithType> o <xref:System.Tuple%603?displayProperty=nameWithType> contenenti gli elementi in questione.</span><span class="sxs-lookup"><span data-stu-id="aadf8-301">The <xref:System.Threading.Tasks.Dataflow.JoinBlock%602> and <xref:System.Threading.Tasks.Dataflow.JoinBlock%603> classes collect input elements and propagate out <xref:System.Tuple%602?displayProperty=nameWithType> or <xref:System.Tuple%603?displayProperty=nameWithType> objects that contain those elements.</span></span> <span data-ttu-id="aadf8-302">Le classi <xref:System.Threading.Tasks.Dataflow.JoinBlock%602> e <xref:System.Threading.Tasks.Dataflow.JoinBlock%603> non ereditano da <xref:System.Threading.Tasks.Dataflow.ITargetBlock%601>.</span><span class="sxs-lookup"><span data-stu-id="aadf8-302">The <xref:System.Threading.Tasks.Dataflow.JoinBlock%602> and <xref:System.Threading.Tasks.Dataflow.JoinBlock%603> classes do not inherit from <xref:System.Threading.Tasks.Dataflow.ITargetBlock%601>.</span></span> <span data-ttu-id="aadf8-303">Forniscono invece proprietà, <xref:System.Threading.Tasks.Dataflow.JoinBlock%602.Target1%2A>, <xref:System.Threading.Tasks.Dataflow.JoinBlock%602.Target2%2A> e <xref:System.Threading.Tasks.Dataflow.JoinBlock%603.Target3%2A>, tramite cui viene implementato l'oggetto <xref:System.Threading.Tasks.Dataflow.ITargetBlock%601>.</span><span class="sxs-lookup"><span data-stu-id="aadf8-303">Instead, they provide properties, <xref:System.Threading.Tasks.Dataflow.JoinBlock%602.Target1%2A>, <xref:System.Threading.Tasks.Dataflow.JoinBlock%602.Target2%2A>, and <xref:System.Threading.Tasks.Dataflow.JoinBlock%603.Target3%2A>, that implement <xref:System.Threading.Tasks.Dataflow.ITargetBlock%601>.</span></span>  
  
 <span data-ttu-id="aadf8-304">Come <xref:System.Threading.Tasks.Dataflow.BatchBlock%601>, <xref:System.Threading.Tasks.Dataflow.JoinBlock%602> e <xref:System.Threading.Tasks.Dataflow.JoinBlock%603> operano in modalità greedy o non greedy.</span><span class="sxs-lookup"><span data-stu-id="aadf8-304">Like <xref:System.Threading.Tasks.Dataflow.BatchBlock%601>, <xref:System.Threading.Tasks.Dataflow.JoinBlock%602> and <xref:System.Threading.Tasks.Dataflow.JoinBlock%603> operate in either greedy or non-greedy mode.</span></span> <span data-ttu-id="aadf8-305">In modalità greedy, vale a dire l'impostazione predefinita, un oggetto <xref:System.Threading.Tasks.Dataflow.JoinBlock%602> o <xref:System.Threading.Tasks.Dataflow.JoinBlock%603> accetta ogni messaggio che viene offerto e tramite esso viene propagata all'esterno una tupla dopo che da ciascuna delle relative destinazioni viene ricevuto almeno un messaggio.</span><span class="sxs-lookup"><span data-stu-id="aadf8-305">In greedy mode, which is the default, a <xref:System.Threading.Tasks.Dataflow.JoinBlock%602> or <xref:System.Threading.Tasks.Dataflow.JoinBlock%603> object accepts every message that it is offered and propagates out a tuple after each of its targets receives at least one message.</span></span> <span data-ttu-id="aadf8-306">In modalità non greedy, tramite un oggetto <xref:System.Threading.Tasks.Dataflow.JoinBlock%602> o <xref:System.Threading.Tasks.Dataflow.JoinBlock%603> vengono posticipati tutti i messaggi in ingresso finché a tutte le destinazioni non sono stati offerti i dati richiesti per creare una tupla.</span><span class="sxs-lookup"><span data-stu-id="aadf8-306">In non-greedy mode, a <xref:System.Threading.Tasks.Dataflow.JoinBlock%602> or <xref:System.Threading.Tasks.Dataflow.JoinBlock%603> object postpones all incoming messages until all targets have been offered the data that is required to create a tuple.</span></span> <span data-ttu-id="aadf8-307">A questo punto, nel blocco viene utilizzato un protocollo di commit a due fasi per recuperare atomicamente tutti gli elementi richiesti dalle origini.</span><span class="sxs-lookup"><span data-stu-id="aadf8-307">At this point, the block engages in a two-phase commit protocol to atomically retrieve all required items from the sources.</span></span> <span data-ttu-id="aadf8-308">Questo rinvio consente a un'altra entità di utilizzare i dati nel frattempo per permettere al sistema complessivo di avanzare.</span><span class="sxs-lookup"><span data-stu-id="aadf8-308">This postponement makes it possible for another entity to consume the data in the meantime, to allow the overall system to make forward progress.</span></span>  
  
 <span data-ttu-id="aadf8-309">Nell'esempio di base seguente viene illustrato un caso in cui per un oggetto <xref:System.Threading.Tasks.Dataflow.JoinBlock%603> sono richiesti più dati per il calcolo di un valore.</span><span class="sxs-lookup"><span data-stu-id="aadf8-309">The following basic example demonstrates a case in which a <xref:System.Threading.Tasks.Dataflow.JoinBlock%603> object requires multiple data to compute a value.</span></span> <span data-ttu-id="aadf8-310">In questo esempio viene creato un oggetto <xref:System.Threading.Tasks.Dataflow.JoinBlock%603> per cui sono richiesti due valori <xref:System.Int32> e un valore <xref:System.Char> per eseguire un'operazione aritmetica.</span><span class="sxs-lookup"><span data-stu-id="aadf8-310">This example creates a <xref:System.Threading.Tasks.Dataflow.JoinBlock%603> object that requires two <xref:System.Int32> values and a <xref:System.Char> value to perform an arithmetic operation.</span></span>  
  
 [!code-csharp[TPLDataflow_Overview#8](../../../samples/snippets/csharp/VS_Snippets_Misc/tpldataflow_overview/cs/program.cs#8)]
 [!code-vb[TPLDataflow_Overview#8](../../../samples/snippets/visualbasic/VS_Snippets_Misc/tpldataflow_overview/vb/program.vb#8)]  
  
 <span data-ttu-id="aadf8-311">Per un esempio completo che usa <xref:System.Threading.Tasks.Dataflow.JoinBlock%602> degli oggetti in modalità non greedy per condividere in modo cooperativo una risorsa, vedere [procedura: usare JoinBlock per leggere dati da più origini](../../../docs/standard/parallel-programming/how-to-use-joinblock-to-read-data-from-multiple-sources.md).</span><span class="sxs-lookup"><span data-stu-id="aadf8-311">For a complete example that uses <xref:System.Threading.Tasks.Dataflow.JoinBlock%602> objects in non-greedy mode to cooperatively share a resource, see [How to: Use JoinBlock to Read Data From Multiple Sources](../../../docs/standard/parallel-programming/how-to-use-joinblock-to-read-data-from-multiple-sources.md).</span></span>  
  
#### <a name="batchedjoinblockt1-t2-"></a><span data-ttu-id="aadf8-312">BatchedJoinBlock(T1, T2, ...)</span><span class="sxs-lookup"><span data-stu-id="aadf8-312">BatchedJoinBlock(T1, T2, ...)</span></span>  
 <span data-ttu-id="aadf8-313">Tramite le classi <xref:System.Threading.Tasks.Dataflow.BatchedJoinBlock%602> e <xref:System.Threading.Tasks.Dataflow.BatchedJoinBlock%603> vengono raccolti batch di elementi di input e vengono propagati all'esterno oggetti `System.Tuple(IList(T1), IList(T2))` o `System.Tuple(IList(T1), IList(T2), IList(T3))` contenenti gli elementi in questione.</span><span class="sxs-lookup"><span data-stu-id="aadf8-313">The <xref:System.Threading.Tasks.Dataflow.BatchedJoinBlock%602> and <xref:System.Threading.Tasks.Dataflow.BatchedJoinBlock%603> classes collect batches of input elements and propagate out `System.Tuple(IList(T1), IList(T2))` or `System.Tuple(IList(T1), IList(T2), IList(T3))` objects that contain those elements.</span></span> <span data-ttu-id="aadf8-314">Si consideri <xref:System.Threading.Tasks.Dataflow.BatchedJoinBlock%602> come una combinazione di <xref:System.Threading.Tasks.Dataflow.BatchBlock%601> e <xref:System.Threading.Tasks.Dataflow.JoinBlock%602>.</span><span class="sxs-lookup"><span data-stu-id="aadf8-314">Think of <xref:System.Threading.Tasks.Dataflow.BatchedJoinBlock%602> as a combination of <xref:System.Threading.Tasks.Dataflow.BatchBlock%601> and <xref:System.Threading.Tasks.Dataflow.JoinBlock%602>.</span></span> <span data-ttu-id="aadf8-315">Specificare le dimensioni di ciascun batch quando si crea un oggetto <xref:System.Threading.Tasks.Dataflow.BatchedJoinBlock%602>.</span><span class="sxs-lookup"><span data-stu-id="aadf8-315">Specify the size of each batch when you create a <xref:System.Threading.Tasks.Dataflow.BatchedJoinBlock%602> object.</span></span> <span data-ttu-id="aadf8-316"><xref:System.Threading.Tasks.Dataflow.BatchedJoinBlock%602> fornisce inoltre le proprietà, <xref:System.Threading.Tasks.Dataflow.BatchedJoinBlock%602.Target1%2A> e <xref:System.Threading.Tasks.Dataflow.BatchedJoinBlock%602.Target2%2A>, tramite cui viene implementato <xref:System.Threading.Tasks.Dataflow.ITargetBlock%601>.</span><span class="sxs-lookup"><span data-stu-id="aadf8-316"><xref:System.Threading.Tasks.Dataflow.BatchedJoinBlock%602> also provides properties, <xref:System.Threading.Tasks.Dataflow.BatchedJoinBlock%602.Target1%2A> and <xref:System.Threading.Tasks.Dataflow.BatchedJoinBlock%602.Target2%2A>, that implement <xref:System.Threading.Tasks.Dataflow.ITargetBlock%601>.</span></span> <span data-ttu-id="aadf8-317">Quando il numero specificato di elementi di input viene ricevuto attraverso tutte le destinazioni, tramite l'oggetto <xref:System.Threading.Tasks.Dataflow.BatchedJoinBlock%602> viene propagato all'esterno in modo asincrono un oggetto `System.Tuple(IList(T1), IList(T2))` contenente gli elementi in questione.</span><span class="sxs-lookup"><span data-stu-id="aadf8-317">When the specified count of input elements are received from across all targets, the <xref:System.Threading.Tasks.Dataflow.BatchedJoinBlock%602> object asynchronously propagates out a `System.Tuple(IList(T1), IList(T2))` object that contains those elements.</span></span>  
  
 <span data-ttu-id="aadf8-318">Nell'esempio di base seguente viene creato un oggetto <xref:System.Threading.Tasks.Dataflow.BatchedJoinBlock%602> contenente i risultati, i valori <xref:System.Int32> e gli errori che sono oggetti <xref:System.Exception>.</span><span class="sxs-lookup"><span data-stu-id="aadf8-318">The following basic example creates a <xref:System.Threading.Tasks.Dataflow.BatchedJoinBlock%602> object that holds results, <xref:System.Int32> values, and errors that are <xref:System.Exception> objects.</span></span> <span data-ttu-id="aadf8-319">In questo esempio vengono eseguite più operazioni e vengono scritti i risultati nella proprietà <xref:System.Threading.Tasks.Dataflow.BatchedJoinBlock%602.Target1%2A> e gli errori nella proprietà <xref:System.Threading.Tasks.Dataflow.BatchedJoinBlock%602.Target2%2A> dell'oggetto <xref:System.Threading.Tasks.Dataflow.BatchedJoinBlock%602>.</span><span class="sxs-lookup"><span data-stu-id="aadf8-319">This example performs multiple operations and writes results to the <xref:System.Threading.Tasks.Dataflow.BatchedJoinBlock%602.Target1%2A> property, and errors to the <xref:System.Threading.Tasks.Dataflow.BatchedJoinBlock%602.Target2%2A> property, of the <xref:System.Threading.Tasks.Dataflow.BatchedJoinBlock%602> object.</span></span> <span data-ttu-id="aadf8-320">Poiché il conteggio delle operazioni riuscite e non riuscite non è noto in anticipo, gli oggetti <xref:System.Collections.Generic.IList%601> consentono a ogni destinazione di ricevere zero o più valori.</span><span class="sxs-lookup"><span data-stu-id="aadf8-320">Because the count of successful and failed operations is unknown in advance, the <xref:System.Collections.Generic.IList%601> objects enable each target to receive zero or more values.</span></span>  
  
 [!code-csharp[TPLDataflow_Overview#9](../../../samples/snippets/csharp/VS_Snippets_Misc/tpldataflow_overview/cs/program.cs#9)]
 [!code-vb[TPLDataflow_Overview#9](../../../samples/snippets/visualbasic/VS_Snippets_Misc/tpldataflow_overview/vb/program.vb#9)]  
  
 <span data-ttu-id="aadf8-321">Per un esempio completo che usa <xref:System.Threading.Tasks.Dataflow.BatchedJoinBlock%602> per acquisire i risultati e tutte le eccezioni che si verificano durante il programma legge da un database, vedere [procedura dettagliata: uso di BatchBlock e BatchedJoinBlock per migliorare l'efficienza](../../../docs/standard/parallel-programming/walkthrough-using-batchblock-and-batchedjoinblock-to-improve-efficiency.md).</span><span class="sxs-lookup"><span data-stu-id="aadf8-321">For a complete example that uses <xref:System.Threading.Tasks.Dataflow.BatchedJoinBlock%602> to capture both the results and any exceptions that occur while the program reads from a database, see [Walkthrough: Using BatchBlock and BatchedJoinBlock to Improve Efficiency](../../../docs/standard/parallel-programming/walkthrough-using-batchblock-and-batchedjoinblock-to-improve-efficiency.md).</span></span>  
  
 <span data-ttu-id="aadf8-322">[[vai all'inizio](#top)]</span><span class="sxs-lookup"><span data-stu-id="aadf8-322">[[go to top](#top)]</span></span>  
  
<a name="behavior"></a>   
## <a name="configuring-dataflow--block-behavior"></a><span data-ttu-id="aadf8-323">Configurazione del comportamento dei blocchi di flussi di dati</span><span class="sxs-lookup"><span data-stu-id="aadf8-323">Configuring Dataflow  Block Behavior</span></span>  
 <span data-ttu-id="aadf8-324">È possibile abilitare opzioni aggiuntive fornendo un oggetto <xref:System.Threading.Tasks.Dataflow.DataflowBlockOptions?displayProperty=nameWithType> al costruttore dei tipi di blocchi di flussi di dati.</span><span class="sxs-lookup"><span data-stu-id="aadf8-324">You can enable additional options by providing a <xref:System.Threading.Tasks.Dataflow.DataflowBlockOptions?displayProperty=nameWithType> object to the constructor of dataflow block types.</span></span> <span data-ttu-id="aadf8-325">Tramite queste opzioni viene controllato il comportamento dell'utilità di pianificazione mediante la quale vengono gestiti l'attività sottostante e il grado di parallelismo.</span><span class="sxs-lookup"><span data-stu-id="aadf8-325">These options control behavior such the scheduler that manages the underlying task and the degree of parallelism.</span></span> <span data-ttu-id="aadf8-326">L'oggetto <xref:System.Threading.Tasks.Dataflow.DataflowBlockOptions> dispone inoltre di tipi derivati tramite cui viene fornito il comportamento specifico di determinati tipi di blocchi di flussi di dati.</span><span class="sxs-lookup"><span data-stu-id="aadf8-326">The <xref:System.Threading.Tasks.Dataflow.DataflowBlockOptions> also has derived types that specify behavior that is specific to certain dataflow block types.</span></span> <span data-ttu-id="aadf8-327">Nella tabella seguente viene riepilogato il tipo di opzioni associato a ogni tipo di blocco di flussi di dati.</span><span class="sxs-lookup"><span data-stu-id="aadf8-327">The following table summarizes which options type is associated with each dataflow block type.</span></span>  
  
|<span data-ttu-id="aadf8-328">Tipo di blocco di flussi di dati</span><span class="sxs-lookup"><span data-stu-id="aadf8-328">Dataflow Block Type</span></span>|<span data-ttu-id="aadf8-329">Tipo <xref:System.Threading.Tasks.Dataflow.DataflowBlockOptions></span><span class="sxs-lookup"><span data-stu-id="aadf8-329"><xref:System.Threading.Tasks.Dataflow.DataflowBlockOptions> type</span></span>|  
|-------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------|  
|<xref:System.Threading.Tasks.Dataflow.BufferBlock%601>|<xref:System.Threading.Tasks.Dataflow.DataflowBlockOptions>|  
|<xref:System.Threading.Tasks.Dataflow.BroadcastBlock%601>|<xref:System.Threading.Tasks.Dataflow.DataflowBlockOptions>|  
|<xref:System.Threading.Tasks.Dataflow.WriteOnceBlock%601>|<xref:System.Threading.Tasks.Dataflow.DataflowBlockOptions>|  
|<xref:System.Threading.Tasks.Dataflow.ActionBlock%601>|<xref:System.Threading.Tasks.Dataflow.ExecutionDataflowBlockOptions>|  
|<xref:System.Threading.Tasks.Dataflow.TransformBlock%602>|<xref:System.Threading.Tasks.Dataflow.ExecutionDataflowBlockOptions>|  
|<xref:System.Threading.Tasks.Dataflow.TransformManyBlock%602>|<xref:System.Threading.Tasks.Dataflow.ExecutionDataflowBlockOptions>|  
|<xref:System.Threading.Tasks.Dataflow.BatchBlock%601>|<xref:System.Threading.Tasks.Dataflow.GroupingDataflowBlockOptions>|  
|<xref:System.Threading.Tasks.Dataflow.JoinBlock%602>|<xref:System.Threading.Tasks.Dataflow.GroupingDataflowBlockOptions>|  
|<xref:System.Threading.Tasks.Dataflow.BatchedJoinBlock%602>|<xref:System.Threading.Tasks.Dataflow.GroupingDataflowBlockOptions>|  
  
 <span data-ttu-id="aadf8-330">Nelle sezioni seguenti vengono fornite informazioni aggiuntive sui principali tipi di opzioni dei blocchi di flussi di dati disponibili nelle classi <xref:System.Threading.Tasks.Dataflow.DataflowBlockOptions?displayProperty=nameWithType>, <xref:System.Threading.Tasks.Dataflow.ExecutionDataflowBlockOptions?displayProperty=nameWithType> e <xref:System.Threading.Tasks.Dataflow.GroupingDataflowBlockOptions?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="aadf8-330">The following sections provide additional information about the important kinds of dataflow block options that are available through the <xref:System.Threading.Tasks.Dataflow.DataflowBlockOptions?displayProperty=nameWithType>, <xref:System.Threading.Tasks.Dataflow.ExecutionDataflowBlockOptions?displayProperty=nameWithType>, and <xref:System.Threading.Tasks.Dataflow.GroupingDataflowBlockOptions?displayProperty=nameWithType> classes.</span></span>  
  
### <a name="specifying-the-task-scheduler"></a><span data-ttu-id="aadf8-331">Specifica dell'Utilità di pianificazione</span><span class="sxs-lookup"><span data-stu-id="aadf8-331">Specifying the Task Scheduler</span></span>  
 <span data-ttu-id="aadf8-332">In ogni blocco di flussi di dati predefinito viene utilizzato il meccanismo di pianificazione delle attività TPL per eseguire attività quali la propagazione dei dati in una destinazione, la ricezione dei dati da un'origine e l'esecuzione di delegati definiti dall'utente quando i dati diventano disponibili.</span><span class="sxs-lookup"><span data-stu-id="aadf8-332">Every predefined dataflow block uses the TPL task scheduling mechanism to perform activities such as propagating data to a target, receiving data from a source, and running user-defined delegates when data becomes available.</span></span> <span data-ttu-id="aadf8-333"><xref:System.Threading.Tasks.TaskScheduler> è una classe astratta che rappresenta un'Utilità di pianificazione mediante la quale vengono inserite in coda le attività nei thread.</span><span class="sxs-lookup"><span data-stu-id="aadf8-333"><xref:System.Threading.Tasks.TaskScheduler> is an abstract class that represents a task scheduler that queues tasks onto threads.</span></span> <span data-ttu-id="aadf8-334">Tramite l'Utilità di pianificazione predefinita, <xref:System.Threading.Tasks.TaskScheduler.Default%2A>, viene utilizzata la classe <xref:System.Threading.ThreadPool> per l'inserimento in coda e l'esecuzione del lavoro.</span><span class="sxs-lookup"><span data-stu-id="aadf8-334">The default task scheduler, <xref:System.Threading.Tasks.TaskScheduler.Default%2A>, uses the <xref:System.Threading.ThreadPool> class to queue and execute work.</span></span> <span data-ttu-id="aadf8-335">È possibile eseguire l'override dell'Utilità di pianificazione predefinita impostando la proprietà <xref:System.Threading.Tasks.Dataflow.DataflowBlockOptions.TaskScheduler%2A> quando si costruisce un oggetto del blocco di flussi di dati.</span><span class="sxs-lookup"><span data-stu-id="aadf8-335">You can override the default task scheduler by setting the <xref:System.Threading.Tasks.Dataflow.DataflowBlockOptions.TaskScheduler%2A> property when you construct a dataflow block object.</span></span>  
  
 <span data-ttu-id="aadf8-336">Quando tramite la stessa Utilità di pianificazione vengono gestiti più blocchi di flussi di dati, è possibile applicarvi dei criteri.</span><span class="sxs-lookup"><span data-stu-id="aadf8-336">When the same task scheduler manages multiple dataflow blocks, it can enforce policies across them.</span></span> <span data-ttu-id="aadf8-337">Ad esempio, se più blocchi di flussi di dati sono configurati ognuno per utilizzare l'utilità di pianificazione in esclusiva dello stesso oggetto <xref:System.Threading.Tasks.ConcurrentExclusiveSchedulerPair>, tutto il lavoro eseguito tramite questi blocchi viene serializzato.</span><span class="sxs-lookup"><span data-stu-id="aadf8-337">For example, if multiple dataflow blocks are each configured to target the exclusive scheduler of the same <xref:System.Threading.Tasks.ConcurrentExclusiveSchedulerPair> object, all work that runs across these blocks is serialized.</span></span> <span data-ttu-id="aadf8-338">Analogamente, se questi blocchi sono configurati per utilizzare l'utilità di pianificazione in concorrenza dello stesso oggetto <xref:System.Threading.Tasks.ConcurrentExclusiveSchedulerPair> e l'utilità in questione è configurata per disporre di un livello massimo di concorrenza, tutto il lavoro di questi blocchi è limitato a quel numero di operazioni simultanee.</span><span class="sxs-lookup"><span data-stu-id="aadf8-338">Similarly, if these blocks are configured to target the concurrent scheduler of the same <xref:System.Threading.Tasks.ConcurrentExclusiveSchedulerPair> object, and that scheduler is configured to have a maximum concurrency level, all work from these blocks is limited to that number of concurrent operations.</span></span> <span data-ttu-id="aadf8-339">Per un esempio che utilizza il <xref:System.Threading.Tasks.ConcurrentExclusiveSchedulerPair> classe per consentire operazioni di lettura eseguite in parallelo, ma vengono eseguite separatamente da tutte le altre operazioni, vedere le operazioni di scrittura [procedura: specificare un'utilità di pianificazione in un Dataflow Block](../../../docs/standard/parallel-programming/how-to-specify-a-task-scheduler-in-a-dataflow-block.md).</span><span class="sxs-lookup"><span data-stu-id="aadf8-339">For an example that uses the <xref:System.Threading.Tasks.ConcurrentExclusiveSchedulerPair> class to enable read operations to occur in parallel, but write operations to occur exclusively of all other operations, see [How to: Specify a Task Scheduler in a Dataflow Block](../../../docs/standard/parallel-programming/how-to-specify-a-task-scheduler-in-a-dataflow-block.md).</span></span> <span data-ttu-id="aadf8-340">Per altre informazioni sulle utilità di pianificazione delle attività in TPL, vedere l'argomento della classe <xref:System.Threading.Tasks.TaskScheduler>.</span><span class="sxs-lookup"><span data-stu-id="aadf8-340">For more information about task schedulers in the TPL, see the <xref:System.Threading.Tasks.TaskScheduler> class topic.</span></span>  
  
### <a name="specifying-the-degree-of-parallelism"></a><span data-ttu-id="aadf8-341">Specifica del grado di parallelismo</span><span class="sxs-lookup"><span data-stu-id="aadf8-341">Specifying the Degree of Parallelism</span></span>  
 <span data-ttu-id="aadf8-342">Per impostazione predefinita, tramite i tre tipi di blocchi di esecuzione forniti dalla libreria del flusso di dati TPL, <xref:System.Threading.Tasks.Dataflow.ActionBlock%601>, <xref:System.Threading.Tasks.Dataflow.TransformBlock%602> e <xref:System.Threading.Tasks.Dataflow.TransformManyBlock%602>, viene elaborato un messaggio alla volta.</span><span class="sxs-lookup"><span data-stu-id="aadf8-342">By default, the three execution block types that the TPL Dataflow Library provides, <xref:System.Threading.Tasks.Dataflow.ActionBlock%601>, <xref:System.Threading.Tasks.Dataflow.TransformBlock%602>, and <xref:System.Threading.Tasks.Dataflow.TransformManyBlock%602>, process one message at a time.</span></span> <span data-ttu-id="aadf8-343">Tramite questi tipi di blocchi di flussi di dati i messaggi vengono inoltre elaborati nell'ordine in cui vengono ricevuti.</span><span class="sxs-lookup"><span data-stu-id="aadf8-343">These dataflow block types also process messages in the order in which they are received.</span></span> <span data-ttu-id="aadf8-344">Per consentire a questi blocchi di flussi di dati di elaborare i messaggi contemporaneamente, impostare la proprietà <xref:System.Threading.Tasks.Dataflow.ExecutionDataflowBlockOptions.MaxDegreeOfParallelism%2A?displayProperty=nameWithType> quando si crea l'oggetto del blocco di flussi di dati.</span><span class="sxs-lookup"><span data-stu-id="aadf8-344">To enable these dataflow blocks to process messages concurrently, set the <xref:System.Threading.Tasks.Dataflow.ExecutionDataflowBlockOptions.MaxDegreeOfParallelism%2A?displayProperty=nameWithType> property when you construct the dataflow block object.</span></span>  
  
 <span data-ttu-id="aadf8-345">Il valore predefinito di <xref:System.Threading.Tasks.Dataflow.ExecutionDataflowBlockOptions.MaxDegreeOfParallelism%2A> è 1, che garantisce l'elaborazione di un solo messaggio per volta da parte del blocco di flussi di dati.</span><span class="sxs-lookup"><span data-stu-id="aadf8-345">The default value of <xref:System.Threading.Tasks.Dataflow.ExecutionDataflowBlockOptions.MaxDegreeOfParallelism%2A> is 1, which guarantees that the dataflow block processes one message at a time.</span></span> <span data-ttu-id="aadf8-346">Impostando questa proprietà su un valore maggiore di 1 possono essere elaborati più messaggi contemporaneamente da parte del blocco di flussi di dati.</span><span class="sxs-lookup"><span data-stu-id="aadf8-346">Setting this property to a value that is larger than 1 enables the dataflow block to process multiple messages concurrently.</span></span> <span data-ttu-id="aadf8-347">Impostando questa proprietà su <xref:System.Threading.Tasks.Dataflow.DataflowBlockOptions.Unbounded?displayProperty=nameWithType> è possibile la gestione del livello massimo di concorrenza da parte dell'Utilità di pianificazione sottostante.</span><span class="sxs-lookup"><span data-stu-id="aadf8-347">Setting this property to <xref:System.Threading.Tasks.Dataflow.DataflowBlockOptions.Unbounded?displayProperty=nameWithType> enables the underlying task scheduler to manage the maximum degree of concurrency.</span></span>  
  
> [!IMPORTANT]
>  <span data-ttu-id="aadf8-348">Quando si specifica un grado massimo di parallelismo maggiore di 1, vengono elaborati contemporaneamente più messaggi, pertanto questi ultimi potrebbero non essere elaborati nell'ordine in cui vengono ricevuti.</span><span class="sxs-lookup"><span data-stu-id="aadf8-348">When you specify a maximum degree of parallelism that is larger than 1, multiple messages are processed simultaneously, and therefore, messages might not be processed in the order in which they are received.</span></span> <span data-ttu-id="aadf8-349">L'ordine in cui i messaggi vengono restituiti dal blocco sarà, tuttavia, correttamente ordinato.</span><span class="sxs-lookup"><span data-stu-id="aadf8-349">The order in which the messages are output from the block will, however, be correctly ordered.</span></span>  
  
 <span data-ttu-id="aadf8-350">Poiché la proprietà <xref:System.Threading.Tasks.Dataflow.ExecutionDataflowBlockOptions.MaxDegreeOfParallelism%2A> rappresenta il grado massimo di parallelismo, il blocco di flussi di dati può essere eseguito con un grado di parallelismo minore rispetto a quello specificato.</span><span class="sxs-lookup"><span data-stu-id="aadf8-350">Because the <xref:System.Threading.Tasks.Dataflow.ExecutionDataflowBlockOptions.MaxDegreeOfParallelism%2A> property represents the maximum degree of parallelism, the dataflow block might execute with a lesser degree of parallelism than you specify.</span></span> <span data-ttu-id="aadf8-351">È possibile che nel blocco di flussi di dati venga utilizzato un grado di parallelismo minore per soddisfare i requisiti funzionali o perché vi è una mancanza di risorse di sistema disponibili.</span><span class="sxs-lookup"><span data-stu-id="aadf8-351">The dataflow block might use a lesser degree of parallelism to meet its functional requirements or because there is a lack of available system resources.</span></span> <span data-ttu-id="aadf8-352">Da parte di un blocco di flussi di dati non viene mai scelto un parallelismo maggiore di quello specificato.</span><span class="sxs-lookup"><span data-stu-id="aadf8-352">A dataflow block never chooses more parallelism than you specify.</span></span>  
  
 <span data-ttu-id="aadf8-353">Il valore della proprietà <xref:System.Threading.Tasks.Dataflow.ExecutionDataflowBlockOptions.MaxDegreeOfParallelism%2A> è esclusivo per ogni oggetto del blocco di flussi di dati.</span><span class="sxs-lookup"><span data-stu-id="aadf8-353">The value of the <xref:System.Threading.Tasks.Dataflow.ExecutionDataflowBlockOptions.MaxDegreeOfParallelism%2A> property is exclusive to each dataflow block object.</span></span> <span data-ttu-id="aadf8-354">Ad esempio, se da ognuno dei quattro oggetti del blocco di flussi di dati viene specificato 1 come massimo grado di parallelismo, tutti e quattro gli oggetti del blocco di flussi di dati possono essere potenzialmente eseguiti in parallelo.</span><span class="sxs-lookup"><span data-stu-id="aadf8-354">For example, if four dataflow block objects each specify 1 for the maximum degree of parallelism, all four dataflow block objects can potentially run in parallel.</span></span>  
  
 <span data-ttu-id="aadf8-355">Per un esempio in cui si imposta il grado massimo di parallelismo per consentire l'esecuzione in parallelo di operazioni lunghe, vedere [Procedura: specificare il grado di parallelismo in un blocco di flussi di dati](../../../docs/standard/parallel-programming/how-to-specify-the-degree-of-parallelism-in-a-dataflow-block.md).</span><span class="sxs-lookup"><span data-stu-id="aadf8-355">For an example that sets the maximum degree of parallelism to enable lengthy operations to occur in parallel, see [How to: Specify the Degree of Parallelism in a Dataflow Block](../../../docs/standard/parallel-programming/how-to-specify-the-degree-of-parallelism-in-a-dataflow-block.md).</span></span>  
  
### <a name="specifying-the-number-of-messages-per-task"></a><span data-ttu-id="aadf8-356">Specifica del numero di messaggi per attività</span><span class="sxs-lookup"><span data-stu-id="aadf8-356">Specifying the Number of Messages per Task</span></span>  
 <span data-ttu-id="aadf8-357">Nei tipi di blocchi di flussi di dati predefiniti vengono utilizzate attività per elaborare più elementi di input.</span><span class="sxs-lookup"><span data-stu-id="aadf8-357">The predefined dataflow block types use tasks to process multiple input elements.</span></span> <span data-ttu-id="aadf8-358">In questo modo è possibile ridurre il numero di oggetti di attività necessari per elaborare i dati, consentendo alle applicazioni un'esecuzione più efficiente.</span><span class="sxs-lookup"><span data-stu-id="aadf8-358">This helps minimize the number of task objects that are required to process data, which enables applications to run more efficiently.</span></span> <span data-ttu-id="aadf8-359">Tuttavia, quando tramite le attività di un set di blocchi di flussi di dati vengono elaborati i dati, è possibile che le attività di altri blocchi di flussi di dati debbano attendere il tempo di elaborazione inserendo in coda i messaggi.</span><span class="sxs-lookup"><span data-stu-id="aadf8-359">However, when the tasks from one set of dataflow blocks are processing data, the tasks from other dataflow blocks might need to wait for processing time by queuing messages.</span></span> <span data-ttu-id="aadf8-360">Per abilitare la migliore equità tra attività del flusso di dati, impostare la proprietà <xref:System.Threading.Tasks.Dataflow.DataflowBlockOptions.MaxMessagesPerTask%2A>.</span><span class="sxs-lookup"><span data-stu-id="aadf8-360">To enable better fairness among dataflow tasks, set the <xref:System.Threading.Tasks.Dataflow.DataflowBlockOptions.MaxMessagesPerTask%2A> property.</span></span> <span data-ttu-id="aadf8-361">Quando la proprietà <xref:System.Threading.Tasks.Dataflow.DataflowBlockOptions.MaxMessagesPerTask%2A> è impostata su <xref:System.Threading.Tasks.Dataflow.DataflowBlockOptions.Unbounded?displayProperty=nameWithType>, vale a dire l'impostazione predefinita, tramite l'attività utilizzata da un blocco di flussi di dati vengono elaborati tutti i messaggi che sono disponibili.</span><span class="sxs-lookup"><span data-stu-id="aadf8-361">When <xref:System.Threading.Tasks.Dataflow.DataflowBlockOptions.MaxMessagesPerTask%2A> is set to <xref:System.Threading.Tasks.Dataflow.DataflowBlockOptions.Unbounded?displayProperty=nameWithType>, which is the default, the task used by a dataflow block processes as many messages as are available.</span></span> <span data-ttu-id="aadf8-362">Quando la proprietà <xref:System.Threading.Tasks.Dataflow.DataflowBlockOptions.MaxMessagesPerTask%2A> è impostata su un valore diverso da <xref:System.Threading.Tasks.Dataflow.DataflowBlockOptions.Unbounded>, tramite il blocco di flusso di dati viene elaborato al massimo questo numero di messaggi per l'oggetto <xref:System.Threading.Tasks.Task>.</span><span class="sxs-lookup"><span data-stu-id="aadf8-362">When <xref:System.Threading.Tasks.Dataflow.DataflowBlockOptions.MaxMessagesPerTask%2A> is set to a value other than <xref:System.Threading.Tasks.Dataflow.DataflowBlockOptions.Unbounded>, the dataflow block processes at most this number of messages per <xref:System.Threading.Tasks.Task> object.</span></span> <span data-ttu-id="aadf8-363">Sebbene l'impostazione della proprietà <xref:System.Threading.Tasks.Dataflow.DataflowBlockOptions.MaxMessagesPerTask%2A> possa aumentare l'equità tra le attività, può causare la generazione di più attività rispetto al necessario, che possono ridurre le prestazioni.</span><span class="sxs-lookup"><span data-stu-id="aadf8-363">Although setting the <xref:System.Threading.Tasks.Dataflow.DataflowBlockOptions.MaxMessagesPerTask%2A> property can increase fairness among tasks, it can cause the system to create more tasks than are necessary, which can decrease performance.</span></span>  
  
### <a name="enabling-cancellation"></a><span data-ttu-id="aadf8-364">Abilitazione dell'annullamento</span><span class="sxs-lookup"><span data-stu-id="aadf8-364">Enabling Cancellation</span></span>  
 <span data-ttu-id="aadf8-365">TPL fornisce un meccanismo che consente alle attività di coordinare l'annullamento in modo cooperativo.</span><span class="sxs-lookup"><span data-stu-id="aadf8-365">The TPL provides a mechanism that enables tasks to coordinate cancellation in a cooperative manner.</span></span> <span data-ttu-id="aadf8-366">Per consentire ai blocchi di flussi di dati di far parte di questo meccanismo di annullamento, impostare la proprietà <xref:System.Threading.Tasks.Dataflow.DataflowBlockOptions.CancellationToken%2A>.</span><span class="sxs-lookup"><span data-stu-id="aadf8-366">To enable dataflow blocks to participate in this cancellation mechanism, set the <xref:System.Threading.Tasks.Dataflow.DataflowBlockOptions.CancellationToken%2A> property.</span></span> <span data-ttu-id="aadf8-367">Quando l'oggetto <xref:System.Threading.CancellationToken> è impostato sullo stato di annullamento, da parte di tutti i blocchi di flussi di dati che controllano questo token viene terminata l'esecuzione dell'elemento corrente ma non viene avviata l'elaborazione degli elementi successivi.</span><span class="sxs-lookup"><span data-stu-id="aadf8-367">When this <xref:System.Threading.CancellationToken> object is set to the canceled state, all dataflow blocks that monitor this token finish execution of their current item but do not start processing subsequent items.</span></span> <span data-ttu-id="aadf8-368">Tramite questi blocchi di flussi di dati vengono inoltre cancellati tutti i messaggi memorizzati nel buffer, vengono rilasciate le connessioni a tutti i blocchi di origine e di destinazione e viene eseguita la transizione allo stato di annullamento.</span><span class="sxs-lookup"><span data-stu-id="aadf8-368">These dataflow blocks also clear any buffered messages, release connections to any source and target blocks, and transition to the canceled state.</span></span> <span data-ttu-id="aadf8-369">Con la transizione allo stato di annullamento, alla proprietà <xref:System.Threading.Tasks.Dataflow.IDataflowBlock.Completion%2A> è associata la proprietà <xref:System.Threading.Tasks.Task.Status%2A> impostata su <xref:System.Threading.Tasks.TaskStatus.Canceled>, a meno che non venga generata un'eccezione durante l'elaborazione.</span><span class="sxs-lookup"><span data-stu-id="aadf8-369">By transitioning to the canceled state, the <xref:System.Threading.Tasks.Dataflow.IDataflowBlock.Completion%2A> property has the <xref:System.Threading.Tasks.Task.Status%2A> property set to <xref:System.Threading.Tasks.TaskStatus.Canceled>, unless an exception occurred during processing.</span></span> <span data-ttu-id="aadf8-370">In questo caso, la proprietà <xref:System.Threading.Tasks.Task.Status%2A> è impostata su <xref:System.Threading.Tasks.TaskStatus.Faulted>.</span><span class="sxs-lookup"><span data-stu-id="aadf8-370">In that case, <xref:System.Threading.Tasks.Task.Status%2A> is set to <xref:System.Threading.Tasks.TaskStatus.Faulted>.</span></span>  
  
 <span data-ttu-id="aadf8-371">Per un esempio che illustri l'uso dell'annullamento in un'applicazione Windows Forms, vedere [Procedura: annullare un blocco di flussi di dati](../../../docs/standard/parallel-programming/how-to-cancel-a-dataflow-block.md).</span><span class="sxs-lookup"><span data-stu-id="aadf8-371">For an example that demonstrates how to use cancellation in a Windows Forms application, see [How to: Cancel a Dataflow Block](../../../docs/standard/parallel-programming/how-to-cancel-a-dataflow-block.md).</span></span> <span data-ttu-id="aadf8-372">Per altre informazioni sull'annullamento in TPL, vedere [Annullamento delle attività](../../../docs/standard/parallel-programming/task-cancellation.md).</span><span class="sxs-lookup"><span data-stu-id="aadf8-372">For more information about cancellation in the TPL, see [Task Cancellation](../../../docs/standard/parallel-programming/task-cancellation.md).</span></span>  
  
### <a name="specifying-greedy-versus-non-greedy-behavior"></a><span data-ttu-id="aadf8-373">Specifica del comportamento greedy e non greedy a confronto</span><span class="sxs-lookup"><span data-stu-id="aadf8-373">Specifying Greedy Versus Non-Greedy Behavior</span></span>  
 <span data-ttu-id="aadf8-374">Diversi tipi di blocchi di flussi di dati di raggruppamento possono essere eseguiti in modalità *greedy* o *non-greedy*.</span><span class="sxs-lookup"><span data-stu-id="aadf8-374">Several grouping dataflow block types can operate in either *greedy* or *non-greedy* mode.</span></span> <span data-ttu-id="aadf8-375">Per impostazione predefinita, i tipi di blocchi di flussi di dati predefiniti vengono eseguiti in modalità greedy.</span><span class="sxs-lookup"><span data-stu-id="aadf8-375">By default, the predefined dataflow block types operate in greedy mode.</span></span>  
  
 <span data-ttu-id="aadf8-376">Per i tipi di blocchi join come <xref:System.Threading.Tasks.Dataflow.JoinBlock%602>, la modalità greedy indica che il blocco accetta immediatamente i dati anche se quelli corrispondenti con cui è stato creato un join non sono ancora disponibili.</span><span class="sxs-lookup"><span data-stu-id="aadf8-376">For join block types such as <xref:System.Threading.Tasks.Dataflow.JoinBlock%602>, greedy mode means that the block immediately accepts data even if the corresponding data with which to join is not yet available.</span></span> <span data-ttu-id="aadf8-377">La modalità non greedy indica che nel blocco vengono posticipati tutti i messaggi in ingresso finché non ne è disponibile uno per ciascuna delle relative destinazioni per completare il join.</span><span class="sxs-lookup"><span data-stu-id="aadf8-377">Non-greedy mode means that the block postpones all incoming messages until one is available on each of its targets to complete the join.</span></span> <span data-ttu-id="aadf8-378">Se uno dei messaggi posposti non è più disponibile, tramite il blocco join vengono rilasciati tutti i messaggi posposti e viene riavviato il processo.</span><span class="sxs-lookup"><span data-stu-id="aadf8-378">If any of the postponed messages are no longer available, the join block releases all postponed messages and restarts the process.</span></span> <span data-ttu-id="aadf8-379">Per la classe <xref:System.Threading.Tasks.Dataflow.BatchBlock%601>, il comportamento greedy e non greedy è simile, ad eccezione del fatto che nella modalità non greedy, tramite un oggetto <xref:System.Threading.Tasks.Dataflow.BatchBlock%601> vengono posticipati tutti i messaggi in ingresso finché non è disponibile un numero sufficiente da origini diverse per completare un batch.</span><span class="sxs-lookup"><span data-stu-id="aadf8-379">For the <xref:System.Threading.Tasks.Dataflow.BatchBlock%601> class, greedy and non-greedy behavior is similar, except that under non-greedy mode, a <xref:System.Threading.Tasks.Dataflow.BatchBlock%601> object postpones all incoming messages until enough are available from distinct sources to complete a batch.</span></span>  
  
 <span data-ttu-id="aadf8-380">Per specificare la modalità non greedy per un blocco di flussi di dati, impostare la proprietà <xref:System.Threading.Tasks.Dataflow.GroupingDataflowBlockOptions.Greedy%2A> su `False`.</span><span class="sxs-lookup"><span data-stu-id="aadf8-380">To specify non-greedy mode for a dataflow block, set <xref:System.Threading.Tasks.Dataflow.GroupingDataflowBlockOptions.Greedy%2A> to `False`.</span></span> <span data-ttu-id="aadf8-381">Per un esempio in cui viene illustrato l'uso della modalità non-greedy per consentire la condivisione di un'origine dati in modo più efficiente da parte di più blocchi join, vedere [Procedura: usare JoinBlock per leggere dati da più origini](../../../docs/standard/parallel-programming/how-to-use-joinblock-to-read-data-from-multiple-sources.md).</span><span class="sxs-lookup"><span data-stu-id="aadf8-381">For an example that demonstrates how to use non-greedy mode to enable multiple join blocks to share a data source more efficiently, see [How to: Use JoinBlock to Read Data From Multiple Sources](../../../docs/standard/parallel-programming/how-to-use-joinblock-to-read-data-from-multiple-sources.md).</span></span>  
  
 <span data-ttu-id="aadf8-382">[[vai all'inizio](#top)]</span><span class="sxs-lookup"><span data-stu-id="aadf8-382">[[go to top](#top)]</span></span>  
  
<a name="custom"></a>   
## <a name="custom-dataflow-blocks"></a><span data-ttu-id="aadf8-383">Blocchi di flussi di dati personalizzati</span><span class="sxs-lookup"><span data-stu-id="aadf8-383">Custom Dataflow Blocks</span></span>  
 <span data-ttu-id="aadf8-384">Anche se la libreria del flusso di dati TPL fornisce molti tipi di blocchi predefiniti, è possibile crearne degli altri tramite cui eseguire comportamenti personalizzati.</span><span class="sxs-lookup"><span data-stu-id="aadf8-384">Although the TPL Dataflow Library provides many predefined block types, you can create additional block types that perform custom behavior.</span></span> <span data-ttu-id="aadf8-385">Implementare le interfacce <xref:System.Threading.Tasks.Dataflow.ISourceBlock%601> o <xref:System.Threading.Tasks.Dataflow.ITargetBlock%601> direttamente o utilizzare il metodo <xref:System.Threading.Tasks.Dataflow.DataflowBlock.Encapsulate%2A> per compilare un blocco complesso in cui viene incapsulato il comportamento di tipi di blocchi esistenti.</span><span class="sxs-lookup"><span data-stu-id="aadf8-385">Implement the <xref:System.Threading.Tasks.Dataflow.ISourceBlock%601> or <xref:System.Threading.Tasks.Dataflow.ITargetBlock%601> interfaces directly or use the  <xref:System.Threading.Tasks.Dataflow.DataflowBlock.Encapsulate%2A> method to build a complex block that encapsulates the behavior of existing block types.</span></span> <span data-ttu-id="aadf8-386">Per esempi in cui viene illustrata l'implementazione delle funzionalità personalizzate dei blocchi di flussi di dati, vedere [Procedura dettagliata: creazione di un tipo di blocco di flussi di dati personalizzato](../../../docs/standard/parallel-programming/walkthrough-creating-a-custom-dataflow-block-type.md).</span><span class="sxs-lookup"><span data-stu-id="aadf8-386">For examples that show how to implement custom dataflow block functionality, see [Walkthrough: Creating a Custom Dataflow Block Type](../../../docs/standard/parallel-programming/walkthrough-creating-a-custom-dataflow-block-type.md).</span></span>  
  
 <span data-ttu-id="aadf8-387">[[vai all'inizio](#top)]</span><span class="sxs-lookup"><span data-stu-id="aadf8-387">[[go to top](#top)]</span></span>  
  
## <a name="related-topics"></a><span data-ttu-id="aadf8-388">Argomenti correlati</span><span class="sxs-lookup"><span data-stu-id="aadf8-388">Related Topics</span></span>  
  
|<span data-ttu-id="aadf8-389">Titolo</span><span class="sxs-lookup"><span data-stu-id="aadf8-389">Title</span></span>|<span data-ttu-id="aadf8-390">Descrizione</span><span class="sxs-lookup"><span data-stu-id="aadf8-390">Description</span></span>|  
|-----------|-----------------|  
|[<span data-ttu-id="aadf8-391">Procedura: scrivere messaggi in un blocco di flussi di dati e leggere messaggi da un blocco di flussi di dati</span><span class="sxs-lookup"><span data-stu-id="aadf8-391">How to: Write Messages to and Read Messages from a Dataflow Block</span></span>](../../../docs/standard/parallel-programming/how-to-write-messages-to-and-read-messages-from-a-dataflow-block.md)|<span data-ttu-id="aadf8-392">Viene illustrato come scrivere messaggi in un oggetto <xref:System.Threading.Tasks.Dataflow.BufferBlock%601> e come leggerli da quest'ultimo.</span><span class="sxs-lookup"><span data-stu-id="aadf8-392">Demonstrates how to write messages to and read messages from a <xref:System.Threading.Tasks.Dataflow.BufferBlock%601> object.</span></span>|  
|[<span data-ttu-id="aadf8-393">Procedura: implementare un modello di flusso di dati Producer-Consumer</span><span class="sxs-lookup"><span data-stu-id="aadf8-393">How to: Implement a Producer-Consumer Dataflow Pattern</span></span>](../../../docs/standard/parallel-programming/how-to-implement-a-producer-consumer-dataflow-pattern.md)|<span data-ttu-id="aadf8-394">Viene descritto come utilizzare il modello di flusso di dati per implementare uno schema producer-consumer, in cui il producer invia messaggi a un blocco di flussi di dati e il consumer legge i messaggi dal blocco in questione.</span><span class="sxs-lookup"><span data-stu-id="aadf8-394">Describes how to use the dataflow model to implement a producer-consumer pattern, where the producer sends messages to a dataflow block, and the consumer reads messages from that block.</span></span>|  
|[<span data-ttu-id="aadf8-395">Procedura: eseguire un'azione alla ricezione di dati in un blocco di flussi di dati</span><span class="sxs-lookup"><span data-stu-id="aadf8-395">How to: Perform Action When a Dataflow Block Receives Data</span></span>](../../../docs/standard/parallel-programming/how-to-perform-action-when-a-dataflow-block-receives-data.md)|<span data-ttu-id="aadf8-396">Viene descritto come fornire delegati ai tipi di blocchi di flussi di dati di esecuzione, <xref:System.Threading.Tasks.Dataflow.ActionBlock%601>, <xref:System.Threading.Tasks.Dataflow.TransformBlock%602> e <xref:System.Threading.Tasks.Dataflow.TransformManyBlock%602>.</span><span class="sxs-lookup"><span data-stu-id="aadf8-396">Describes how to provide delegates to the execution dataflow block types, <xref:System.Threading.Tasks.Dataflow.ActionBlock%601>, <xref:System.Threading.Tasks.Dataflow.TransformBlock%602>, and <xref:System.Threading.Tasks.Dataflow.TransformManyBlock%602>.</span></span>|  
|[<span data-ttu-id="aadf8-397">Procedura dettagliata: creazione di una pipeline del flusso di dati</span><span class="sxs-lookup"><span data-stu-id="aadf8-397">Walkthrough: Creating a Dataflow Pipeline</span></span>](../../../docs/standard/parallel-programming/walkthrough-creating-a-dataflow-pipeline.md)|<span data-ttu-id="aadf8-398">Viene descritto come creare una pipeline di flusso di dati tramite cui viene scaricato un testo dal Web e vengono eseguite operazioni su questo testo.</span><span class="sxs-lookup"><span data-stu-id="aadf8-398">Describes how to create a dataflow pipeline that downloads text from the web and performs operations on that text.</span></span>|  
|[<span data-ttu-id="aadf8-399">Procedura: scollegare i blocchi di flussi di dati</span><span class="sxs-lookup"><span data-stu-id="aadf8-399">How to: Unlink Dataflow Blocks</span></span>](../../../docs/standard/parallel-programming/how-to-unlink-dataflow-blocks.md)|<span data-ttu-id="aadf8-400">Viene illustrato come utilizzare il <xref:System.Threading.Tasks.Dataflow.ISourceBlock%601.LinkTo%2A> metodo per scollegare un blocco di destinazione dalla relativa origine dopo che l'offerta di un messaggio alla destinazione.</span><span class="sxs-lookup"><span data-stu-id="aadf8-400">Demonstrates how to use the <xref:System.Threading.Tasks.Dataflow.ISourceBlock%601.LinkTo%2A> method to unlink a target block from its source after the source offers a message to the target.</span></span>|  
|[<span data-ttu-id="aadf8-401">Procedura dettagliata: uso del flusso di dati in un'applicazione Windows Forms</span><span class="sxs-lookup"><span data-stu-id="aadf8-401">Walkthrough: Using Dataflow in a Windows Forms Application</span></span>](../../../docs/standard/parallel-programming/walkthrough-using-dataflow-in-a-windows-forms-application.md)|<span data-ttu-id="aadf8-402">Viene illustrato come creare una rete di blocchi di flussi di dati tramite cui viene eseguita l'elaborazione di immagini in un'applicazione Windows Form.</span><span class="sxs-lookup"><span data-stu-id="aadf8-402">Demonstrates how to create a network of dataflow blocks that perform image processing in a Windows Forms application.</span></span>|  
|[<span data-ttu-id="aadf8-403">Procedura: annullare un blocco di flussi di dati</span><span class="sxs-lookup"><span data-stu-id="aadf8-403">How to: Cancel a Dataflow Block</span></span>](../../../docs/standard/parallel-programming/how-to-cancel-a-dataflow-block.md)|<span data-ttu-id="aadf8-404">Viene illustrato come utilizzare l'annullamento in un'applicazione Windows Form.</span><span class="sxs-lookup"><span data-stu-id="aadf8-404">Demonstrates how to use cancellation in a Windows Forms application.</span></span>|  
|[<span data-ttu-id="aadf8-405">Procedura: usare JoinBlock per leggere dati da più origini</span><span class="sxs-lookup"><span data-stu-id="aadf8-405">How to: Use JoinBlock to Read Data From Multiple Sources</span></span>](../../../docs/standard/parallel-programming/how-to-use-joinblock-to-read-data-from-multiple-sources.md)|<span data-ttu-id="aadf8-406">Viene illustrato come utilizzare la classe <xref:System.Threading.Tasks.Dataflow.JoinBlock%602> per eseguire un'operazione quando i dati sono disponibili da più origini e come utilizzare la modalità non greedy per consentire a più blocchi join di condividere in modo più efficiente un'origine dati.</span><span class="sxs-lookup"><span data-stu-id="aadf8-406">Explains how to use the <xref:System.Threading.Tasks.Dataflow.JoinBlock%602> class to perform an operation when data is available from multiple sources, and how to use non-greedy mode to enable multiple join blocks to share a data source more efficiently.</span></span>|  
|[<span data-ttu-id="aadf8-407">Procedura: specificare il grado di parallelismo in un blocco di flussi di dati</span><span class="sxs-lookup"><span data-stu-id="aadf8-407">How to: Specify the Degree of Parallelism in a Dataflow Block</span></span>](../../../docs/standard/parallel-programming/how-to-specify-the-degree-of-parallelism-in-a-dataflow-block.md)|<span data-ttu-id="aadf8-408">Viene illustrato come impostare la proprietà <xref:System.Threading.Tasks.Dataflow.ExecutionDataflowBlockOptions.MaxDegreeOfParallelism%2A> per consentire a un blocco di flussi di dati di esecuzione di elaborare più messaggi alla volta.</span><span class="sxs-lookup"><span data-stu-id="aadf8-408">Describes how to set the <xref:System.Threading.Tasks.Dataflow.ExecutionDataflowBlockOptions.MaxDegreeOfParallelism%2A> property to enable an execution dataflow block to process more than one message at a time.</span></span>|  
|[<span data-ttu-id="aadf8-409">Procedura: specificare un'utilità di pianificazione in un blocco di flussi di dati</span><span class="sxs-lookup"><span data-stu-id="aadf8-409">How to: Specify a Task Scheduler in a Dataflow Block</span></span>](../../../docs/standard/parallel-programming/how-to-specify-a-task-scheduler-in-a-dataflow-block.md)|<span data-ttu-id="aadf8-410">Viene illustrato come associare una specifica Utilità di pianificazione quando si utilizza il flusso di dati nell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="aadf8-410">Demonstrates how to associate a specific task scheduler when you use dataflow in your application.</span></span>|  
|[<span data-ttu-id="aadf8-411">Procedura dettagliata: uso di BatchBlock e BatchedJoinBlock per migliorare l'efficienza</span><span class="sxs-lookup"><span data-stu-id="aadf8-411">Walkthrough: Using BatchBlock and BatchedJoinBlock to Improve Efficiency</span></span>](../../../docs/standard/parallel-programming/walkthrough-using-batchblock-and-batchedjoinblock-to-improve-efficiency.md)|<span data-ttu-id="aadf8-412">Viene descritto come utilizzare la classe <xref:System.Threading.Tasks.Dataflow.BatchBlock%601> per migliorare l'efficienza delle operazioni di inserimento nel database e come utilizzare la classe <xref:System.Threading.Tasks.Dataflow.BatchedJoinBlock%602> per acquisire i risultati e tutte le eccezioni che si verificano durante la lettura da un database da parte del programma.</span><span class="sxs-lookup"><span data-stu-id="aadf8-412">Describes how to use the <xref:System.Threading.Tasks.Dataflow.BatchBlock%601> class to improve the efficiency of database insert operations, and how to use the <xref:System.Threading.Tasks.Dataflow.BatchedJoinBlock%602> class to capture both the results and any exceptions that occur while the program reads from a database.</span></span>|  
|[<span data-ttu-id="aadf8-413">Procedura dettagliata: creazione di un tipo di blocco di flussi di dati personalizzato</span><span class="sxs-lookup"><span data-stu-id="aadf8-413">Walkthrough: Creating a Custom Dataflow Block Type</span></span>](../../../docs/standard/parallel-programming/walkthrough-creating-a-custom-dataflow-block-type.md)|<span data-ttu-id="aadf8-414">Vengono illustrati due modi per creare un tipo di blocco di flussi di dati tramite cui viene implementato il comportamento personalizzato.</span><span class="sxs-lookup"><span data-stu-id="aadf8-414">Demonstrates two ways to create a dataflow block type that implements custom behavior.</span></span>|  
|[<span data-ttu-id="aadf8-415">Task Parallel Library (TPL)</span><span class="sxs-lookup"><span data-stu-id="aadf8-415">Task Parallel Library (TPL)</span></span>](../../../docs/standard/parallel-programming/task-parallel-library-tpl.md)|<span data-ttu-id="aadf8-416">Viene introdotta TPL, una libreria tramite cui viene semplificata la programmazione parallela e concorrente nelle applicazioni [!INCLUDE[dnprdnshort](../../../includes/dnprdnshort-md.md)].</span><span class="sxs-lookup"><span data-stu-id="aadf8-416">Introduces the TPL, a library that simplifies parallel and concurrent programming in [!INCLUDE[dnprdnshort](../../../includes/dnprdnshort-md.md)] applications.</span></span>|
