---
title: Strutture di dati per la programmazione in parallelo
ms.custom: 
ms.date: 03/30/2017
ms.prod: .net
ms.reviewer: 
ms.suite: 
ms.technology: dotnet-standard
ms.tgt_pltfrm: 
ms.topic: article
helpviewer_keywords: data structures, multi-threading
ms.assetid: bdc82f2f-4754-45a1-a81e-fe2e9c30cef9
caps.latest.revision: "15"
author: rpetrusha
ms.author: ronpet
manager: wpickett
ms.openlocfilehash: f35c5382455021f0a001604367e59204ce4ad93c
ms.sourcegitcommit: 4f3fef493080a43e70e951223894768d36ce430a
ms.translationtype: HT
ms.contentlocale: it-IT
ms.lasthandoff: 11/21/2017
---
# <a name="data-structures-for-parallel-programming"></a><span data-ttu-id="ff979-102">Strutture di dati per la programmazione in parallelo</span><span class="sxs-lookup"><span data-stu-id="ff979-102">Data Structures for Parallel Programming</span></span>
<span data-ttu-id="ff979-103">.NET Framework versione 4 introduce numerosi nuovi tipi che consentono la programmazione in parallelo, tra cui un set di classi collection simultanee, le primitive di sincronizzazione leggera e tipi per l'inizializzazione differita.</span><span class="sxs-lookup"><span data-stu-id="ff979-103">The .NET Framework version 4 introduces several new types that are useful in parallel programming, including a set of concurrent collection classes, lightweight synchronization primitives, and types for lazy initialization.</span></span> <span data-ttu-id="ff979-104">È possibile utilizzare questi tipi con qualsiasi codice di applicazione multithreading, inclusa la libreria Task Parallel Library e PLINQ.</span><span class="sxs-lookup"><span data-stu-id="ff979-104">You can use these types with any multithreaded application code, including the Task Parallel Library and PLINQ.</span></span>  
  
## <a name="concurrent-collection-classes"></a><span data-ttu-id="ff979-105">Classi Collection simultanei</span><span class="sxs-lookup"><span data-stu-id="ff979-105">Concurrent Collection Classes</span></span>  
 <span data-ttu-id="ff979-106">Le classi di raccolte di <xref:System.Collections.Concurrent?displayProperty=nameWithType> dello spazio dei nomi forniscono thread-safe aggiunta e rimozione di operazioni che, se possibile, evitare blocchi e utilizza il blocco con granularità fine in cui i blocchi sono necessari.</span><span class="sxs-lookup"><span data-stu-id="ff979-106">The collection classes in the <xref:System.Collections.Concurrent?displayProperty=nameWithType> namespace provide thread-safe add and remove operations that avoid locks wherever possible and use fine-grained locking where locks are necessary.</span></span> <span data-ttu-id="ff979-107">A differenza delle raccolte che sono state introdotte in .NET Framework versioni 1.0 e 2.0, una classe collection simultanee non richiede il codice utente per l'acquisizione di blocchi quando accede agli elementi.</span><span class="sxs-lookup"><span data-stu-id="ff979-107">Unlike collections that were introduced in the .NET Framework versions 1.0 and 2.0, a concurrent collection class does not require user code to take any locks when it accesses items.</span></span> <span data-ttu-id="ff979-108">Le classi di raccolta simultanea possono migliorare significativamente le prestazioni dei tipi, ad esempio <xref:System.Collections.ArrayList?displayProperty=nameWithType> e <xref:System.Collections.Generic.List%601?displayProperty=nameWithType> (con blocco implementato dall'utente) in scenari in cui più thread aggiungere e rimuovere elementi da una raccolta.</span><span class="sxs-lookup"><span data-stu-id="ff979-108">The concurrent collection classes can significantly improve performance over types such as <xref:System.Collections.ArrayList?displayProperty=nameWithType> and <xref:System.Collections.Generic.List%601?displayProperty=nameWithType> (with user-implemented locking) in scenarios where multiple threads add and remove items from a collection.</span></span>  
  
 <span data-ttu-id="ff979-109">Nella tabella seguente sono elencate le nuove classi di raccolte simultanee:</span><span class="sxs-lookup"><span data-stu-id="ff979-109">The following table lists the new concurrent collection classes:</span></span>  
  
|<span data-ttu-id="ff979-110">Tipo</span><span class="sxs-lookup"><span data-stu-id="ff979-110">Type</span></span>|<span data-ttu-id="ff979-111">Descrizione</span><span class="sxs-lookup"><span data-stu-id="ff979-111">Description</span></span>|  
|----------|-----------------|  
|<xref:System.Collections.Concurrent.BlockingCollection%601?displayProperty=nameWithType>|<span data-ttu-id="ff979-112">Fornisce funzionalità di blocco e limitazione per le raccolte thread-safe che implementano <xref:System.Collections.Concurrent.IProducerConsumerCollection%601?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="ff979-112">Provides blocking and bounding capabilities for thread-safe collections that implement <xref:System.Collections.Concurrent.IProducerConsumerCollection%601?displayProperty=nameWithType>.</span></span> <span data-ttu-id="ff979-113">Thread producer si bloccano se non sono disponibili slot o se la raccolta è di tipo completa.</span><span class="sxs-lookup"><span data-stu-id="ff979-113">Producer threads block if no slots are available or if the collection is full.</span></span> <span data-ttu-id="ff979-114">I thread consumer si bloccano se la raccolta è vuota.</span><span class="sxs-lookup"><span data-stu-id="ff979-114">Consumer threads block if the collection is empty.</span></span> <span data-ttu-id="ff979-115">Questo tipo supporta inoltre l'accesso non bloccante dal producer e consumer.</span><span class="sxs-lookup"><span data-stu-id="ff979-115">This type also supports non-blocking access by consumers and producers.</span></span> <span data-ttu-id="ff979-116"><xref:System.Collections.Concurrent.BlockingCollection%601>può essere utilizzato come classe base o l'archivio di backup per fornire il blocco e limitazione per qualsiasi classe di raccolta che supporta <xref:System.Collections.Generic.IEnumerable%601>.</span><span class="sxs-lookup"><span data-stu-id="ff979-116"><xref:System.Collections.Concurrent.BlockingCollection%601> can be used as a base class or backing store to provide blocking and bounding for any collection class that supports <xref:System.Collections.Generic.IEnumerable%601>.</span></span>|  
|<xref:System.Collections.Concurrent.ConcurrentBag%601?displayProperty=nameWithType>|<span data-ttu-id="ff979-117">Un'implementazione del contenitore thread-safe che fornisce scalabili e aggiungere le operazioni.</span><span class="sxs-lookup"><span data-stu-id="ff979-117">A thread-safe bag implementation that provides scalable add and get operations.</span></span>|  
|<xref:System.Collections.Concurrent.ConcurrentDictionary%602?displayProperty=nameWithType>|<span data-ttu-id="ff979-118">Un tipo di dizionario simultaneo e scalabile.</span><span class="sxs-lookup"><span data-stu-id="ff979-118">A concurrent and scalable dictionary type.</span></span>|  
|<xref:System.Collections.Concurrent.ConcurrentQueue%601?displayProperty=nameWithType>|<span data-ttu-id="ff979-119">Una coda FIFO simultanea e scalabile.</span><span class="sxs-lookup"><span data-stu-id="ff979-119">A concurrent and scalable FIFO queue.</span></span>|  
|<xref:System.Collections.Concurrent.ConcurrentStack%601?displayProperty=nameWithType>|<span data-ttu-id="ff979-120">Stack LIFO simultaneo e scalabile.</span><span class="sxs-lookup"><span data-stu-id="ff979-120">A concurrent and scalable LIFO stack.</span></span>|  
  
 <span data-ttu-id="ff979-121">Per altre informazioni, vedere [Raccolte thread-safe](../../../docs/standard/collections/thread-safe/index.md).</span><span class="sxs-lookup"><span data-stu-id="ff979-121">For more information, see [Thread-Safe Collections](../../../docs/standard/collections/thread-safe/index.md).</span></span>  
  
## <a name="synchronization-primitives"></a><span data-ttu-id="ff979-122">Primitive di sincronizzazione</span><span class="sxs-lookup"><span data-stu-id="ff979-122">Synchronization Primitives</span></span>  
 <span data-ttu-id="ff979-123">Le primitive di sincronizzazione di nuovo nel <xref:System.Threading?displayProperty=nameWithType> dello spazio dei nomi consentono di concorrenza con granularità fine e migliorare le prestazioni evitando dispendiosi meccanismi di blocco rilevati nel codice multithreading legacy.</span><span class="sxs-lookup"><span data-stu-id="ff979-123">The new synchronization primitives in the <xref:System.Threading?displayProperty=nameWithType> namespace enable fine-grained concurrency and faster performance by avoiding expensive locking mechanisms found in legacy multithreading code.</span></span> <span data-ttu-id="ff979-124">Alcuni dei nuovi tipi, ad esempio <xref:System.Threading.Barrier?displayProperty=nameWithType> e <xref:System.Threading.CountdownEvent?displayProperty=nameWithType> non esiste alcuna controparte nelle versioni precedenti di .NET Framework.</span><span class="sxs-lookup"><span data-stu-id="ff979-124">Some of the new types, such as <xref:System.Threading.Barrier?displayProperty=nameWithType> and <xref:System.Threading.CountdownEvent?displayProperty=nameWithType> have no counterparts in earlier releases of the .NET Framework.</span></span>  
  
 <span data-ttu-id="ff979-125">Nella tabella seguente sono elencati i nuovi tipi di sincronizzazione:</span><span class="sxs-lookup"><span data-stu-id="ff979-125">The following table lists the new synchronization types:</span></span>  
  
|<span data-ttu-id="ff979-126">Tipo</span><span class="sxs-lookup"><span data-stu-id="ff979-126">Type</span></span>|<span data-ttu-id="ff979-127">Descrizione</span><span class="sxs-lookup"><span data-stu-id="ff979-127">Description</span></span>|  
|----------|-----------------|  
|<xref:System.Threading.Barrier?displayProperty=nameWithType>|<span data-ttu-id="ff979-128">Consente di utilizzare un algoritmo in parallelo, fornendo un punto in cui ogni attività possono segnalare l'arrivo e quindi si bloccano fino a quando non sono arrivato alcune o tutte le attività di più thread.</span><span class="sxs-lookup"><span data-stu-id="ff979-128">Enables multiple threads to work on an algorithm in parallel by providing a point at which each task can signal its arrival and then block until some or all tasks have arrived.</span></span> <span data-ttu-id="ff979-129">Per altre informazioni, vedere [Barriera](../../../docs/standard/threading/barrier.md).</span><span class="sxs-lookup"><span data-stu-id="ff979-129">For more information, see [Barrier](../../../docs/standard/threading/barrier.md).</span></span>|  
|<xref:System.Threading.CountdownEvent?displayProperty=nameWithType>|<span data-ttu-id="ff979-130">Semplifica gli scenari di fork e join fornendo un meccanismo semplice rendezvous.</span><span class="sxs-lookup"><span data-stu-id="ff979-130">Simplifies fork and join scenarios by providing an easy rendezvous mechanism.</span></span> <span data-ttu-id="ff979-131">Per ulteriori informazioni, vedere [CountdownEvent](../../../docs/standard/threading/countdownevent.md).</span><span class="sxs-lookup"><span data-stu-id="ff979-131">For more information, see [CountdownEvent](../../../docs/standard/threading/countdownevent.md).</span></span>|  
|<xref:System.Threading.ManualResetEventSlim?displayProperty=nameWithType>|<span data-ttu-id="ff979-132">Primitiva di sincronizzazione simile a <xref:System.Threading.ManualResetEvent?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="ff979-132">A synchronization primitive similar to <xref:System.Threading.ManualResetEvent?displayProperty=nameWithType>.</span></span> <span data-ttu-id="ff979-133"><xref:System.Threading.ManualResetEventSlim>è più semplice, ma può essere utilizzato solo per comunicazioni interne del processo.</span><span class="sxs-lookup"><span data-stu-id="ff979-133"><xref:System.Threading.ManualResetEventSlim> is lighter-weight but can only be used for intra-process communication.</span></span> <span data-ttu-id="ff979-134">Per ulteriori informazioni, vedere [ManualResetEvent e ManualResetEventSlim](../../../docs/standard/threading/manualresetevent-and-manualreseteventslim.md).</span><span class="sxs-lookup"><span data-stu-id="ff979-134">For more information, see [ManualResetEvent and ManualResetEventSlim](../../../docs/standard/threading/manualresetevent-and-manualreseteventslim.md).</span></span>|  
|<xref:System.Threading.SemaphoreSlim?displayProperty=nameWithType>|<span data-ttu-id="ff979-135">Primitiva di sincronizzazione che limita il numero di thread che possono accedere simultaneamente a una risorsa o a un pool di risorse.</span><span class="sxs-lookup"><span data-stu-id="ff979-135">A synchronization primitive that limits the number of threads that can concurrently access a resource or a pool of resources.</span></span> <span data-ttu-id="ff979-136">Per ulteriori informazioni, vedere [Semaphore e SemaphoreSlim](../../../docs/standard/threading/semaphore-and-semaphoreslim.md).</span><span class="sxs-lookup"><span data-stu-id="ff979-136">For more information, see [Semaphore and SemaphoreSlim](../../../docs/standard/threading/semaphore-and-semaphoreslim.md).</span></span>|  
|<xref:System.Threading.SpinLock?displayProperty=nameWithType>|<span data-ttu-id="ff979-137">Una primitiva di blocco a esclusione reciproca che determina che il thread che sta tentando di acquisire il blocco di attesa in un ciclo, o *selezione*, per un periodo di tempo prima di restituire il quantum.</span><span class="sxs-lookup"><span data-stu-id="ff979-137">A mutual exclusion lock primitive that causes the thread that is trying to acquire the lock to wait in a loop, or *spin*, for a period of time before yielding its quantum.</span></span> <span data-ttu-id="ff979-138">Negli scenari in cui l'attesa del blocco deve essere breve, <xref:System.Threading.SpinLock> offre migliori prestazioni rispetto alle altre forme di blocco.</span><span class="sxs-lookup"><span data-stu-id="ff979-138">In scenarios where the wait for the lock is expected to be short, <xref:System.Threading.SpinLock> offers better performance than other forms of locking.</span></span> <span data-ttu-id="ff979-139">Per ulteriori informazioni, vedere [SpinLock](../../../docs/standard/threading/spinlock.md).</span><span class="sxs-lookup"><span data-stu-id="ff979-139">For more information, see [SpinLock](../../../docs/standard/threading/spinlock.md).</span></span>|  
|<xref:System.Threading.SpinWait?displayProperty=nameWithType>|<span data-ttu-id="ff979-140">Un tipo di piccolo e leggero che eseguirà spin per un determinato periodo e infine inserito il thread in uno stato di attesa, se viene superato il numero di selezione.</span><span class="sxs-lookup"><span data-stu-id="ff979-140">A small, lightweight type that will spin for a specified time and eventually put the thread into a wait state if the spin count is exceeded.</span></span>  <span data-ttu-id="ff979-141">Per ulteriori informazioni, vedere [SpinWait](../../../docs/standard/threading/spinwait.md).</span><span class="sxs-lookup"><span data-stu-id="ff979-141">For more information, see [SpinWait](../../../docs/standard/threading/spinwait.md).</span></span>|  
  
 <span data-ttu-id="ff979-142">Per altre informazioni, vedere:</span><span class="sxs-lookup"><span data-stu-id="ff979-142">For more information, see:</span></span>  
  
-   [<span data-ttu-id="ff979-143">Procedura: Usare SpinLock per la sincronizzazione di basso livello</span><span class="sxs-lookup"><span data-stu-id="ff979-143">How to: Use SpinLock for Low-Level Synchronization</span></span>](../../../docs/standard/threading/how-to-use-spinlock-for-low-level-synchronization.md)  
  
-   <span data-ttu-id="ff979-144">[Procedura: sincronizzare operazioni simultanee con una barriera](../../../docs/standard/threading/how-to-synchronize-concurrent-operations-with-a-barrier.md).</span><span class="sxs-lookup"><span data-stu-id="ff979-144">[How to: Synchronize Concurrent Operations with a Barrier](../../../docs/standard/threading/how-to-synchronize-concurrent-operations-with-a-barrier.md).</span></span>  
  
## <a name="lazy-initialization-classes"></a><span data-ttu-id="ff979-145">Classi di inizializzazione differita</span><span class="sxs-lookup"><span data-stu-id="ff979-145">Lazy Initialization Classes</span></span>  
 <span data-ttu-id="ff979-146">Con inizializzazione differita, la memoria per un oggetto non è allocata fino a quando non è necessaria.</span><span class="sxs-lookup"><span data-stu-id="ff979-146">With lazy initialization, the memory for an object is not allocated until it is needed.</span></span> <span data-ttu-id="ff979-147">L'inizializzazione differita può migliorare le prestazioni suddividendo le allocazioni di oggetti in modo uniforme per tutta la durata di un programma.</span><span class="sxs-lookup"><span data-stu-id="ff979-147">Lazy initialization can improve performance by spreading object allocations evenly across the lifetime of a program.</span></span> <span data-ttu-id="ff979-148">È possibile abilitare l'inizializzazione differita per qualsiasi tipo personalizzato eseguendo il wrapping del tipo <xref:System.Lazy%601>.</span><span class="sxs-lookup"><span data-stu-id="ff979-148">You can enable lazy initialization for any custom type by wrapping the type <xref:System.Lazy%601>.</span></span>  
  
 <span data-ttu-id="ff979-149">Nella tabella seguente sono elencati i tipi di inizializzazione differita:</span><span class="sxs-lookup"><span data-stu-id="ff979-149">The following table lists the lazy initialization types:</span></span>  
  
|<span data-ttu-id="ff979-150">Tipo</span><span class="sxs-lookup"><span data-stu-id="ff979-150">Type</span></span>|<span data-ttu-id="ff979-151">Descrizione</span><span class="sxs-lookup"><span data-stu-id="ff979-151">Description</span></span>|  
|----------|-----------------|  
|<xref:System.Lazy%601?displayProperty=nameWithType>|<span data-ttu-id="ff979-152">Fornisce leggero, thread-safe con inizializzazione differita.</span><span class="sxs-lookup"><span data-stu-id="ff979-152">Provides lightweight, thread-safe lazy-initialization.</span></span>|  
|<xref:System.Threading.ThreadLocal%601?displayProperty=nameWithType>|<span data-ttu-id="ff979-153">Fornisce un valore di inizializzazione differita in base al thread, con ogni thread in modo differito-richiamando la funzione di inizializzazione.</span><span class="sxs-lookup"><span data-stu-id="ff979-153">Provides a lazily-initialized value on a per-thread basis, with each thread lazily-invoking the initialization function.</span></span>|  
|<xref:System.Threading.LazyInitializer?displayProperty=nameWithType>|<span data-ttu-id="ff979-154">Fornisce metodi statici che evitare la necessità di allocare un'istanza dedicata con inizializzazione differita.</span><span class="sxs-lookup"><span data-stu-id="ff979-154">Provides static methods that avoid the need to allocate a dedicated, lazy-initialization instance.</span></span> <span data-ttu-id="ff979-155">Al contrario, usano i riferimenti per verificare le destinazioni sono state inizializzate al momento dell'accesso.</span><span class="sxs-lookup"><span data-stu-id="ff979-155">Instead, they use references to ensure targets have been initialized as they are accessed.</span></span>|  
  
 <span data-ttu-id="ff979-156">Per altre informazioni, vedere [Inizializzazione differita](../../../docs/framework/performance/lazy-initialization.md).</span><span class="sxs-lookup"><span data-stu-id="ff979-156">For more information, see [Lazy Initialization](../../../docs/framework/performance/lazy-initialization.md).</span></span>  
  
## <a name="aggregate-exceptions"></a><span data-ttu-id="ff979-157">Eccezioni di aggregazione</span><span class="sxs-lookup"><span data-stu-id="ff979-157">Aggregate Exceptions</span></span>  
 <span data-ttu-id="ff979-158">Il <xref:System.AggregateException?displayProperty=nameWithType> tipo può essere usato per acquisire più eccezioni generate contemporaneamente su un thread separato e restituiscono al thread di unione come singola eccezione.</span><span class="sxs-lookup"><span data-stu-id="ff979-158">The <xref:System.AggregateException?displayProperty=nameWithType> type can be used to capture multiple exceptions that are thrown concurrently on separate threads, and return them to the joining thread as a single exception.</span></span> <span data-ttu-id="ff979-159">Il <xref:System.Threading.Tasks.Task?displayProperty=nameWithType> e <xref:System.Threading.Tasks.Parallel?displayProperty=nameWithType> tipi e PLINQ utilizzano <xref:System.AggregateException> ampiamente a questo scopo.</span><span class="sxs-lookup"><span data-stu-id="ff979-159">The <xref:System.Threading.Tasks.Task?displayProperty=nameWithType> and <xref:System.Threading.Tasks.Parallel?displayProperty=nameWithType> types and PLINQ use <xref:System.AggregateException> extensively for this purpose.</span></span> <span data-ttu-id="ff979-160">Per ulteriori informazioni, vedere [NIB: procedura: gestire le eccezioni generate dalle attività](http://msdn.microsoft.com/en-us/d6c47ec8-9de9-4880-beb3-ff19ae51565d) e [come: gestire le eccezioni in una Query PLINQ](../../../docs/standard/parallel-programming/how-to-handle-exceptions-in-a-plinq-query.md).</span><span class="sxs-lookup"><span data-stu-id="ff979-160">For more information, see [NIB: How to: Handle Exceptions Thrown by Tasks](http://msdn.microsoft.com/en-us/d6c47ec8-9de9-4880-beb3-ff19ae51565d) and [How to: Handle Exceptions in a PLINQ Query](../../../docs/standard/parallel-programming/how-to-handle-exceptions-in-a-plinq-query.md).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="ff979-161">Vedere anche</span><span class="sxs-lookup"><span data-stu-id="ff979-161">See Also</span></span>  
 <xref:System.Collections.Concurrent?displayProperty=nameWithType>  
 <xref:System.Threading?displayProperty=nameWithType>  
 [<span data-ttu-id="ff979-162">Programmazione parallela</span><span class="sxs-lookup"><span data-stu-id="ff979-162">Parallel Programming</span></span>](../../../docs/standard/parallel-programming/index.md)
