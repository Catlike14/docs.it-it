---
title: Migrazione da DNX all'interfaccia della riga di comando .NET Core
description: Eseguire la migrazione dagli strumenti DNX agli strumenti dell'interfaccia della riga di comando di .NET Core.
keywords: .NET, .NET Core
author: blackdwarf
ms.author: mairaw
ms.date: 06/20/2016
ms.topic: article
ms.prod: .net-core
ms.devlang: dotnet
ms.assetid: c0d70120-78c8-4d26-bb3c-801f42fc2366
ms.openlocfilehash: 1e2ab018fc690b31b59a04bf8c0c0990225c293b
ms.sourcegitcommit: bd1ef61f4bb794b25383d3d72e71041a5ced172e
ms.translationtype: HT
ms.contentlocale: it-IT
ms.lasthandoff: 10/18/2017
---
# <a name="migrating-from-dnx-to-net-core-cli-projectjson"></a><span data-ttu-id="07c49-104">Migrazione da DNX all'interfaccia della riga di comando di .NET Core (project.json)</span><span class="sxs-lookup"><span data-stu-id="07c49-104">Migrating from DNX to .NET Core CLI (project.json)</span></span>

## <a name="overview"></a><span data-ttu-id="07c49-105">Panoramica</span><span class="sxs-lookup"><span data-stu-id="07c49-105">Overview</span></span>
<span data-ttu-id="07c49-106">La versione RC1 di .NET Core e ASP.NET Core 1.0 Microsoft hanno presentato gli strumenti DNX.</span><span class="sxs-lookup"><span data-stu-id="07c49-106">The RC1 release of .NET Core and ASP.NET Core 1.0 introduced DNX tooling.</span></span> <span data-ttu-id="07c49-107">La versione RC2 di .NET Core e ASP.NET Core 1.0 hanno eseguito il passaggio da DNX all'interfaccia della riga di comando di .NET Core.</span><span class="sxs-lookup"><span data-stu-id="07c49-107">The RC2 release of .NET Core and ASP.NET Core 1.0 moved from DNX to the .NET Core CLI.</span></span>

<span data-ttu-id="07c49-108">Di seguito è riportato un breve riepilogo delle caratteristiche di DNX.</span><span class="sxs-lookup"><span data-stu-id="07c49-108">As a slight refresher, let's recap what DNX was about.</span></span> <span data-ttu-id="07c49-109">DNX è un runtime e un set di strumenti usati per creare applicazioni .NET Core e, più specificamente, ASP.NET Core 1.0.</span><span class="sxs-lookup"><span data-stu-id="07c49-109">DNX was a runtime and a toolset used to build .NET Core and, more specifically, ASP.NET Core 1.0 applications.</span></span> <span data-ttu-id="07c49-110">È costituito da tre componenti principali:</span><span class="sxs-lookup"><span data-stu-id="07c49-110">It consisted of 3 main pieces:</span></span>

1. <span data-ttu-id="07c49-111">DNVM: uno script di installazione per l'acquisizione di DNX</span><span class="sxs-lookup"><span data-stu-id="07c49-111">DNVM - an install script for obtaining DNX</span></span>
2. <span data-ttu-id="07c49-112">DNX (Dotnet Execution Runtime): il runtime che esegue il codice</span><span class="sxs-lookup"><span data-stu-id="07c49-112">DNX (Dotnet Execution Runtime) - the runtime that executes your code</span></span>
3. <span data-ttu-id="07c49-113">DNU (Dotnet Developer Utility): strumenti per la gestione delle dipendenze e per la creazione e la pubblicazione di applicazioni</span><span class="sxs-lookup"><span data-stu-id="07c49-113">DNU (Dotnet Developer Utility) - tooling for managing dependencies, building and publishing your applications</span></span>

<span data-ttu-id="07c49-114">Con l'introduzione dell'interfaccia della riga di comando, tutti gli elementi sopra elencati sono parte di un unico set di strumenti.</span><span class="sxs-lookup"><span data-stu-id="07c49-114">With the introduction of the CLI, all of the above are now part of a single toolset.</span></span> <span data-ttu-id="07c49-115">Tuttavia, poiché DNX era disponibile durante il periodo di commercializzazione della versione RC1, è possibile che gli utenti dispongano di progetti creati con DNX di cui vogliono eseguire la migrazione ai nuovi strumenti dell'interfaccia della riga di comando.</span><span class="sxs-lookup"><span data-stu-id="07c49-115">However, since DNX was available in RC1 timeframe, you might have projects that were built using it that you would want to move off to the new CLI tooling.</span></span> 

<span data-ttu-id="07c49-116">Questa guida fornisce le istruzioni di base per la migrazione dei progetti da DNX all'interfaccia della riga di comando di .NET Core.</span><span class="sxs-lookup"><span data-stu-id="07c49-116">This migration guide will cover the essentials on how to migrate projects off of DNX and onto .NET Core CLI.</span></span> <span data-ttu-id="07c49-117">Se si sta iniziando un progetto direttamente in .NET Core, è possibile ignorare questo documento.</span><span class="sxs-lookup"><span data-stu-id="07c49-117">If you are just starting a project on .NET Core from scratch, you can freely skip this document.</span></span> 

## <a name="main-changes-in-the-tooling"></a><span data-ttu-id="07c49-118">Principali modifiche apportate agli strumenti</span><span class="sxs-lookup"><span data-stu-id="07c49-118">Main changes in the tooling</span></span>
<span data-ttu-id="07c49-119">Riguardo agli strumenti sono state apportate alcune modifiche di carattere generale che devono essere descritte per prime.</span><span class="sxs-lookup"><span data-stu-id="07c49-119">There are some general changes in the tooling that should be outlined first.</span></span> 

### <a name="no-more-dnvm"></a><span data-ttu-id="07c49-120">DNVM non più disponibile</span><span class="sxs-lookup"><span data-stu-id="07c49-120">No more DNVM</span></span>
<span data-ttu-id="07c49-121">DNVM, acronimo di *DotNet Version Manager*, era uno script bash/PowerShell usato per installare un'istanza di DNX nel computer in uso.</span><span class="sxs-lookup"><span data-stu-id="07c49-121">DNVM, short for *DotNet Version Manager* was a bash/PowerShell script used to install a DNX on your machine.</span></span> <span data-ttu-id="07c49-122">DNVM consentiva agli utenti di ottenere il DNX necessario dal feed specificato o dai feed predefiniti. Permetteva inoltre di contrassegnare un determinato DNX come "attivo", inserendolo in $PATH per la sessione in oggetto.</span><span class="sxs-lookup"><span data-stu-id="07c49-122">It helped users get the DNX they need from the feed they specified (or default ones) as well as mark a certain DNX "active", which would put it on the $PATH for the given session.</span></span> <span data-ttu-id="07c49-123">Questo consentiva di usare i diversi strumenti.</span><span class="sxs-lookup"><span data-stu-id="07c49-123">This would allow you to use the various tools.</span></span>

<span data-ttu-id="07c49-124">DNVM è stato messo fuori produzione perché il relativo set di funzionalità è ormai ridondante a causa delle modifiche apportate agli strumenti dell'interfaccia della riga di comando di .NET Core.</span><span class="sxs-lookup"><span data-stu-id="07c49-124">DNVM was discontinued because its feature set was made redundant by changes coming in the .NET Core CLI tools.</span></span>

<span data-ttu-id="07c49-125">Gli strumenti dell'interfaccia della riga di comando vengono distribuiti in pacchetti in due modi principali:</span><span class="sxs-lookup"><span data-stu-id="07c49-125">The CLI tools come packaged in two main ways:</span></span>

1. <span data-ttu-id="07c49-126">Programmi di installazione nativi per una determinata piattaforma</span><span class="sxs-lookup"><span data-stu-id="07c49-126">Native installers for a given platform</span></span>
2. <span data-ttu-id="07c49-127">Script di installazione per altre situazioni, ad esempio server CI</span><span class="sxs-lookup"><span data-stu-id="07c49-127">Install script for other situations (like CI servers)</span></span>

<span data-ttu-id="07c49-128">Tenendo conto di quanto affermato sopra, le funzionalità di installazione DNVM non sono necessarie.</span><span class="sxs-lookup"><span data-stu-id="07c49-128">Given this, the DNVM install features are not needed.</span></span> <span data-ttu-id="07c49-129">Qual è tuttavia la situazione per le funzionalità di selezione del runtime?</span><span class="sxs-lookup"><span data-stu-id="07c49-129">But what about the runtime selection features?</span></span> 

<span data-ttu-id="07c49-130">Si fa riferimento a un runtime in `project.json` aggiungendo alle dipendenze un pacchetto di una determinata versione.</span><span class="sxs-lookup"><span data-stu-id="07c49-130">You reference a runtime in your `project.json` by adding a package of a certain version to your dependencies.</span></span> <span data-ttu-id="07c49-131">Con questa modifica, l'applicazione sarà in grado di usare i nuovi componenti di runtime.</span><span class="sxs-lookup"><span data-stu-id="07c49-131">With this change, your application will be able to use the new runtime bits.</span></span> <span data-ttu-id="07c49-132">L'installazione di questi componenti nel computer in uso è analoga all'installazione con l'interfaccia della riga di comando: è possibile installare il runtime tramite uno dei programmi di installazione nativi oppure tramite lo script di installazione.</span><span class="sxs-lookup"><span data-stu-id="07c49-132">Getting these bits to your machine is the same as with the CLI: you install the runtime via one of the native installers it supports or via its install script.</span></span> 

### <a name="different-commands"></a><span data-ttu-id="07c49-133">Comandi differenti</span><span class="sxs-lookup"><span data-stu-id="07c49-133">Different commands</span></span>
<span data-ttu-id="07c49-134">Se si usa DNX, sono disponibili i comandi di uno dei tre componenti (DNX, DNU o DNVM).</span><span class="sxs-lookup"><span data-stu-id="07c49-134">If you were using DNX, you used some commands from one of its three parts (DNX, DNU or DNVM).</span></span> <span data-ttu-id="07c49-135">Con l'interfaccia della riga di comando, alcuni di questi comandi risultano diversi, alcuni non sono disponibili e altri infine sono uguali ma con una semantica leggermente differente.</span><span class="sxs-lookup"><span data-stu-id="07c49-135">With the CLI, some of these commands change, some are not available and some are the same but have slightly different semantics.</span></span> 

<span data-ttu-id="07c49-136">La tabella seguente mostra il mapping tra i comandi DNX/DNU e i corrispondenti comandi dell'interfaccia della riga di comando.</span><span class="sxs-lookup"><span data-stu-id="07c49-136">The table below shows the mapping between the DNX/DNU commands and their CLI counterparts.</span></span>


| <span data-ttu-id="07c49-137">Comando DNX</span><span class="sxs-lookup"><span data-stu-id="07c49-137">DNX command</span></span>                       | <span data-ttu-id="07c49-138">Comando dell'interfaccia della riga di comando</span><span class="sxs-lookup"><span data-stu-id="07c49-138">CLI command</span></span>       | <span data-ttu-id="07c49-139">Descrizione</span><span class="sxs-lookup"><span data-stu-id="07c49-139">Description</span></span>                                                                                                       |
|--------------------------------   |----------------   |-----------------------------------------------------------------------------------------------------------------  |
| <span data-ttu-id="07c49-140">dnx run</span><span class="sxs-lookup"><span data-stu-id="07c49-140">dnx run</span></span>                           | <span data-ttu-id="07c49-141">dotnet run</span><span class="sxs-lookup"><span data-stu-id="07c49-141">dotnet run</span></span>        | <span data-ttu-id="07c49-142">Esegue il codice dall'origine.</span><span class="sxs-lookup"><span data-stu-id="07c49-142">Run code from source.</span></span>                                                                                             |
| <span data-ttu-id="07c49-143">dnu build</span><span class="sxs-lookup"><span data-stu-id="07c49-143">dnu build</span></span>                         | <span data-ttu-id="07c49-144">dotnet build</span><span class="sxs-lookup"><span data-stu-id="07c49-144">dotnet build</span></span>      | <span data-ttu-id="07c49-145">Crea un file binario IL (Intermediate Language) del codice.</span><span class="sxs-lookup"><span data-stu-id="07c49-145">Build an IL binary of your code.</span></span>                                                                                  |
| <span data-ttu-id="07c49-146">dnu pack</span><span class="sxs-lookup"><span data-stu-id="07c49-146">dnu pack</span></span>                          | <span data-ttu-id="07c49-147">dotnet pack</span><span class="sxs-lookup"><span data-stu-id="07c49-147">dotnet pack</span></span>       | <span data-ttu-id="07c49-148">Crea un pacchetto NuGet del codice.</span><span class="sxs-lookup"><span data-stu-id="07c49-148">Package up a NuGet package of your code.</span></span>                                                                          |
| <span data-ttu-id="07c49-149">dnx \[command] (ad esempio, "dnx web")</span><span class="sxs-lookup"><span data-stu-id="07c49-149">dnx \[command] (for example, "dnx web")</span></span>   | <span data-ttu-id="07c49-150">N/D\*</span><span class="sxs-lookup"><span data-stu-id="07c49-150">N/A\*</span></span>             | <span data-ttu-id="07c49-151">In DNX esegue un comando in base a quanto definito nel file project.json.</span><span class="sxs-lookup"><span data-stu-id="07c49-151">In DNX world, run a command as defined in the project.json.</span></span>                                                       |
| <span data-ttu-id="07c49-152">dnu install</span><span class="sxs-lookup"><span data-stu-id="07c49-152">dnu install</span></span>                       | <span data-ttu-id="07c49-153">N/D\*</span><span class="sxs-lookup"><span data-stu-id="07c49-153">N/A\*</span></span>             | <span data-ttu-id="07c49-154">In DNX installa un pacchetto come dipendenza.</span><span class="sxs-lookup"><span data-stu-id="07c49-154">In the DNX world, install a package as a dependency.</span></span>                                                              |
| <span data-ttu-id="07c49-155">dnu restore</span><span class="sxs-lookup"><span data-stu-id="07c49-155">dnu restore</span></span>                       | <span data-ttu-id="07c49-156">dotnet restore</span><span class="sxs-lookup"><span data-stu-id="07c49-156">dotnet restore</span></span>    | <span data-ttu-id="07c49-157">Ripristina le dipendenze specificate nel file project.json.</span><span class="sxs-lookup"><span data-stu-id="07c49-157">Restore dependencies specified in your project.json.</span></span> <span data-ttu-id="07c49-158">([vedere la nota](#dotnet-restore-note))</span><span class="sxs-lookup"><span data-stu-id="07c49-158">([see note](#dotnet-restore-note))</span></span>                                                               |
| <span data-ttu-id="07c49-159">dnu publish</span><span class="sxs-lookup"><span data-stu-id="07c49-159">dnu publish</span></span>                       | <span data-ttu-id="07c49-160">dotnet publish</span><span class="sxs-lookup"><span data-stu-id="07c49-160">dotnet publish</span></span>    | <span data-ttu-id="07c49-161">Pubblica l'applicazione per la distribuzione in una delle tre forme possibili: portabile, portabile con nativo e autonoma.</span><span class="sxs-lookup"><span data-stu-id="07c49-161">Publish your application for deployment in one of the three forms (portable, portable with native and standalone).</span></span>    |
| <span data-ttu-id="07c49-162">dnu wrap</span><span class="sxs-lookup"><span data-stu-id="07c49-162">dnu wrap</span></span>                          | <span data-ttu-id="07c49-163">N/D\*</span><span class="sxs-lookup"><span data-stu-id="07c49-163">N/A\*</span></span>             | <span data-ttu-id="07c49-164">In DNX esegue il wrapping di un file project.json in csproj.</span><span class="sxs-lookup"><span data-stu-id="07c49-164">In DNX world, wrap a project.json in csproj.</span></span>                                                                      |
| <span data-ttu-id="07c49-165">dnu commands</span><span class="sxs-lookup"><span data-stu-id="07c49-165">dnu commands</span></span>                      | <span data-ttu-id="07c49-166">N/D\*</span><span class="sxs-lookup"><span data-stu-id="07c49-166">N/A\*</span></span>             | <span data-ttu-id="07c49-167">In DNX gestisce i comandi installati a livello globale.</span><span class="sxs-lookup"><span data-stu-id="07c49-167">In DNX world, manage the globally installed commands.</span></span>                                                             |

<span data-ttu-id="07c49-168">(\*) Queste funzionalità non sono supportate nell'interfaccia della riga di comando in base alla progettazione.</span><span class="sxs-lookup"><span data-stu-id="07c49-168">(\*) - these features are not supported in the CLI by design.</span></span> 

## <a name="dnx-features-that-are-not-supported"></a><span data-ttu-id="07c49-169">Funzionalità DNX non supportate</span><span class="sxs-lookup"><span data-stu-id="07c49-169">DNX features that are not supported</span></span>
<span data-ttu-id="07c49-170">Come mostrato dalla tabella sopra riportata, esistono alcune funzionalità di DNX che, almeno per il momento, si è deciso di non supportare nell'interfaccia della riga di comando.</span><span class="sxs-lookup"><span data-stu-id="07c49-170">As the table above shows, there are features from the DNX world that we decided not to support in the CLI, at least for the time being.</span></span> <span data-ttu-id="07c49-171">Questa sezione indica le più importanti di queste funzionalità e descrive i motivi per cui non sono supportate. Illustra inoltre le soluzioni alternative da adottare nel caso in cui sia comunque necessario usare queste funzionalità.</span><span class="sxs-lookup"><span data-stu-id="07c49-171">This section will go through the most important ones and outline the rationale behind not supporting them as well as workarounds if you do need them.</span></span>

### <a name="global-commands"></a><span data-ttu-id="07c49-172">Comandi globali</span><span class="sxs-lookup"><span data-stu-id="07c49-172">Global commands</span></span>
<span data-ttu-id="07c49-173">DNU integrava un concetto denominato "comandi globali".</span><span class="sxs-lookup"><span data-stu-id="07c49-173">DNU came with a concept called "global commands".</span></span> <span data-ttu-id="07c49-174">Si trattava essenzialmente di applicazioni console create come pacchetti NuGet con uno script della shell che richiamava il DNX specificato per l'esecuzione dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="07c49-174">These were, essentially, console applications packaged up as NuGet packages with a shell script that would invoke the DNX you specified to run the application.</span></span> 

<span data-ttu-id="07c49-175">L'interfaccia della riga di comando non supporta questo concetto.</span><span class="sxs-lookup"><span data-stu-id="07c49-175">The CLI does not support this concept.</span></span> <span data-ttu-id="07c49-176">Supporta tuttavia l'aggiunta di comandi per progetto che è possibile richiamare usando la comune sintassi `dotnet <command>`.</span><span class="sxs-lookup"><span data-stu-id="07c49-176">It does, however, support the concept of adding per-project commands that can be invoked using the familiar `dotnet <command>` syntax.</span></span>

### <a name="installing-dependencies"></a><span data-ttu-id="07c49-177">Installazione delle dipendenze</span><span class="sxs-lookup"><span data-stu-id="07c49-177">Installing dependencies</span></span>
<span data-ttu-id="07c49-178">A partire dalla versione 1, gli strumenti dell'interfaccia della riga di comando di .NET Core non dispongono di un comando `install` per l'installazione delle dipendenze.</span><span class="sxs-lookup"><span data-stu-id="07c49-178">As of v1, the .NET Core CLI tools don't have an `install` command for installing dependencies.</span></span> <span data-ttu-id="07c49-179">Per installare un pacchetto NuGet, è necessario aggiungerlo come dipendenza per il `project.json` file e quindi eseguire `dotnet restore` ([vedere la nota](#dotnet-restore-note)).</span><span class="sxs-lookup"><span data-stu-id="07c49-179">In order to install a package from NuGet, you would need to add it as a dependency to your `project.json` file and then run `dotnet restore` ([see note](#dotnet-restore-note)).</span></span> 

### <a name="running-your-code"></a><span data-ttu-id="07c49-180">Esecuzione del codice</span><span class="sxs-lookup"><span data-stu-id="07c49-180">Running your code</span></span>
<span data-ttu-id="07c49-181">È possibile eseguire il codice in due modi:</span><span class="sxs-lookup"><span data-stu-id="07c49-181">There are two main ways to run your code.</span></span> <span data-ttu-id="07c49-182">Dal sorgente, con `dotnet run`.</span><span class="sxs-lookup"><span data-stu-id="07c49-182">One is from source, with `dotnet run`.</span></span> <span data-ttu-id="07c49-183">A differenza di `dnx run`, questo comando non esegue alcuna compilazione in memoria,</span><span class="sxs-lookup"><span data-stu-id="07c49-183">Unlike `dnx run`, this will not do any in-memory compilation.</span></span> <span data-ttu-id="07c49-184">ma richiama `dotnet build` per compilare il codice e quindi eseguire il file binario compilato.</span><span class="sxs-lookup"><span data-stu-id="07c49-184">It will actually invoke `dotnet build` to build your code and then run the built binary.</span></span> 

<span data-ttu-id="07c49-185">Un altro modo consiste nell'usare `dotnet` per eseguire il codice.</span><span class="sxs-lookup"><span data-stu-id="07c49-185">Another way is using the `dotnet` itself to run your code.</span></span> <span data-ttu-id="07c49-186">A tale scopo, fornire un percorso all'assembly: `dotnet path/to/an/assembly.dll`.</span><span class="sxs-lookup"><span data-stu-id="07c49-186">This is done by providing a path to your assembly: `dotnet path/to/an/assembly.dll`.</span></span> 

## <a name="migrating-your-dnx-project-to-net-core-cli"></a><span data-ttu-id="07c49-187">Migrazione di un progetto DNX all'interfaccia della riga di comando di .NET Core</span><span class="sxs-lookup"><span data-stu-id="07c49-187">Migrating your DNX project to .NET Core CLI</span></span>
<span data-ttu-id="07c49-188">Oltre all'uso di nuovi comandi per la gestione del codice, la migrazione da DNX consente anche le tre operazioni seguenti:</span><span class="sxs-lookup"><span data-stu-id="07c49-188">In addition to using new commands when working with your code, there are three major things left in migrating from DNX:</span></span>

1. <span data-ttu-id="07c49-189">Migrazione del file `global.json` se tale file è in grado di usare l'interfaccia della riga di comando.</span><span class="sxs-lookup"><span data-stu-id="07c49-189">Migrate the `global.json` file if you have it to be able to use CLI.</span></span>
2. <span data-ttu-id="07c49-190">Migrazione del file di progetto stesso (`project.json`) agli strumenti dell'interfaccia della riga di comando.</span><span class="sxs-lookup"><span data-stu-id="07c49-190">Migrating the project file (`project.json`) itself to the CLI tooling.</span></span>
3. <span data-ttu-id="07c49-191">Migrazione di qualsiasi API DNX alla corrispondente controparte BCL.</span><span class="sxs-lookup"><span data-stu-id="07c49-191">Migrating off of any DNX APIs to their BCL counterparts.</span></span> 

### <a name="changing-the-globaljson-file"></a><span data-ttu-id="07c49-192">Modifica del file global.json</span><span class="sxs-lookup"><span data-stu-id="07c49-192">Changing the global.json file</span></span>
<span data-ttu-id="07c49-193">Il file `global.json` funge da file di soluzione sia per progetti RC1 che per progetti RC2 (o versioni successive).</span><span class="sxs-lookup"><span data-stu-id="07c49-193">The `global.json` file acts like a solution file for both the RC1 and RC2 (or later) projects.</span></span> <span data-ttu-id="07c49-194">Per consentire agli strumenti dell'interfaccia della riga di comando (oltre che a Visual Studio) di distinguere tra RC1 e le versioni successive, viene usata la proprietà `"sdk": { "version" }`. Tale proprietà consente di stabilire se un progetto è stato creato con RC1 o una versione successiva.</span><span class="sxs-lookup"><span data-stu-id="07c49-194">In order for the CLI tools (as well as Visual Studio) to differentiate between RC1 and later versions, they use the `"sdk": { "version" }` property to make the distinction which project is RC1 or later.</span></span> <span data-ttu-id="07c49-195">Se il file `global.json` non dispone affatto di questo nodo, presuppone che si tratti della versione più recente.</span><span class="sxs-lookup"><span data-stu-id="07c49-195">If `global.json` doesn't have this node at all, it is assumed to be the latest.</span></span> 

<span data-ttu-id="07c49-196">Per aggiornare il file `global.json`, rimuovere la proprietà o impostarla sulla versione esatta degli strumenti che si intende usare, in questo caso **1.0.0-preview2-003121**:</span><span class="sxs-lookup"><span data-stu-id="07c49-196">In order to update the `global.json` file, either remove the property or set it to the exact version of the tools that you wish to use, in this case **1.0.0-preview2-003121**:</span></span>

```json
{
    "sdk": {
        "version": "1.0.0-preview2-003121"
    }
}
```

### <a name="migrating-the-project-file"></a><span data-ttu-id="07c49-197">Migrazione del file di progetto</span><span class="sxs-lookup"><span data-stu-id="07c49-197">Migrating the project file</span></span>
<span data-ttu-id="07c49-198">L'interfaccia della riga di comando e DNX usano entrambi lo stesso sistema di progetto basato sul file `project.json`.</span><span class="sxs-lookup"><span data-stu-id="07c49-198">The CLI and DNX both use the same basic project system based on `project.json` file.</span></span> <span data-ttu-id="07c49-199">La sintassi e la semantica del file di progetto sono molto simili, a parte alcune differenze dipendenti dallo scenario.</span><span class="sxs-lookup"><span data-stu-id="07c49-199">The syntax and the semantics of the project file are pretty much the same, with small differences based on the scenarios.</span></span> <span data-ttu-id="07c49-200">Sono presenti anche alcune modifiche dello schema, visibili nel [file di schema](http://json.schemastore.org/project).</span><span class="sxs-lookup"><span data-stu-id="07c49-200">There are also some changes to the schema which you can see in the [schema file](http://json.schemastore.org/project).</span></span>

<span data-ttu-id="07c49-201">Se si sta creando un'applicazione console, è necessario aggiungere al file di progetto il frammento seguente:</span><span class="sxs-lookup"><span data-stu-id="07c49-201">If you are building a console application, you need to add the following snippet to your project file:</span></span>

```json
"buildOptions": {
    "emitEntryPoint": true
}
```

<span data-ttu-id="07c49-202">Questo frammento indica a `dotnet build` di creare un punto di ingresso per l'applicazione, consentendo così l'esecuzione del codice.</span><span class="sxs-lookup"><span data-stu-id="07c49-202">This instructs `dotnet build` to emit an entry point for your application, effectively making your code runnable.</span></span> <span data-ttu-id="07c49-203">Se si sta creando una libreria di classi, ignorare semplicemente questa sezione.</span><span class="sxs-lookup"><span data-stu-id="07c49-203">If you are building a class library, simply omit the above section.</span></span> <span data-ttu-id="07c49-204">Naturalmente, dopo aver aggiunto al file `project.json` il frammento sopra riportato, è necessario aggiungere un punto di ingresso statico.</span><span class="sxs-lookup"><span data-stu-id="07c49-204">Of course, once you add the above snippet to your `project.json` file, you need to add a static entry point.</span></span> <span data-ttu-id="07c49-205">Con la sospensione di DNX, i servizi DI forniti da quest'ultimo non sono più disponibili e il punto di ingresso statico deve essere un punto di ingresso .NET di base: `static void Main()`.</span><span class="sxs-lookup"><span data-stu-id="07c49-205">With the move off DNX, the DI services it provided are no longer available and thus this needs to be a basic .NET entry point: `static void Main()`.</span></span>

<span data-ttu-id="07c49-206">Se nel file `project.json` è presente una sezione "commands", è possibile rimuoverla.</span><span class="sxs-lookup"><span data-stu-id="07c49-206">If you have a "commands" section in your `project.json`, you can remove it.</span></span> <span data-ttu-id="07c49-207">Alcuni comandi usati per rappresentare comandi DNU, ad esempio comandi dell'interfaccia della riga di comando di Entity Framework, vengono trasferiti nell'interfaccia della riga di comando come estensioni per progetto.</span><span class="sxs-lookup"><span data-stu-id="07c49-207">Some of the commands that used to exist as DNU commands, such as Entity Framework CLI commands, are being ported to be per-project extensions to the CLI.</span></span> <span data-ttu-id="07c49-208">Se sono stati creati comandi personalizzati che vengono usati nei progetti, è necessario sostituirli con estensioni dell'interfaccia della riga di comando.</span><span class="sxs-lookup"><span data-stu-id="07c49-208">If you built your own commands that you are using in your projects, you need to replace them with CLI extensions.</span></span> <span data-ttu-id="07c49-209">In questo caso, il nodo `commands` di `project.json` deve essere sostituito dal nodo `tools` e deve elencare le dipendenze degli strumenti.</span><span class="sxs-lookup"><span data-stu-id="07c49-209">In this case, the `commands` node in `project.json` needs to be replaced by the `tools` node and it needs to list the tools dependencies.</span></span> 

<span data-ttu-id="07c49-210">Al termine di queste operazioni, è necessario decidere il tipo di portabilità per l'app.</span><span class="sxs-lookup"><span data-stu-id="07c49-210">After these things are done, you need to decide which type of portability you wish for you app.</span></span> <span data-ttu-id="07c49-211">Con .NET Core, Microsoft ha reso disponibile un'ampia gamma di opzioni di portabilità.</span><span class="sxs-lookup"><span data-stu-id="07c49-211">With .NET Core, we have invested into providing a spectrum of portability options that you can choose from.</span></span> <span data-ttu-id="07c49-212">È possibile, ad esempio, creare un'applicazione completamente *portabile* o un'applicazione *autonoma*.</span><span class="sxs-lookup"><span data-stu-id="07c49-212">For instance, you may want to have a fully *portable* application or you may want to have a *self-contained* application.</span></span> <span data-ttu-id="07c49-213">Il funzionamento di un'applicazione portabile è simile a quello delle applicazioni .NET Framework: è necessario un componente condiviso (.NET Core) da eseguire nel computer di destinazione.</span><span class="sxs-lookup"><span data-stu-id="07c49-213">The portable application option is more like .NET Framework applications work: it needs a shared component to execute it on the target machine (.NET Core).</span></span> <span data-ttu-id="07c49-214">L'applicazione autonoma non richiede l'installazione di .NET Core nel computer di destinazione, ma è necessario creare un'applicazione per ogni sistema operativo che si vuole supportare.</span><span class="sxs-lookup"><span data-stu-id="07c49-214">The self-contained application doesn't require .NET Core to be installed on the target, but you have to produce one application for each OS you wish to support.</span></span> <span data-ttu-id="07c49-215">Questi e altri tipi di portabilità sono discussi nel documento [Application portability type](../deploying/index.md) (Tipo di portabilità delle applicazioni).</span><span class="sxs-lookup"><span data-stu-id="07c49-215">These portability types and more are discussed in the [application portability type](../deploying/index.md) document.</span></span> 

<span data-ttu-id="07c49-216">Una volta deciso il tipo di portabilità, è necessario modificare i framework di destinazione.</span><span class="sxs-lookup"><span data-stu-id="07c49-216">Once you make a call on what type of portability you want, you need to change your targeted framework(s).</span></span> <span data-ttu-id="07c49-217">Se si stanno creando applicazioni per .NET Core, è probabile che come framework di destinazione venga usato `dnxcore50`.</span><span class="sxs-lookup"><span data-stu-id="07c49-217">If you were writing applications for .NET Core, you were most likely using `dnxcore50` as  your targeted framework.</span></span> <span data-ttu-id="07c49-218">Con l'interfaccia della riga di comando e le modifiche apportate dal nuovo [.NET Standard](../../standard/net-standard.md), è necessario che il framework sia uno dei seguenti:</span><span class="sxs-lookup"><span data-stu-id="07c49-218">With the CLI and the changes that the new [.NET Standard](../../standard/net-standard.md) brought, the framework needs to be one of the following:</span></span>

1. <span data-ttu-id="07c49-219">`netcoreapp1.0`: se si stanno creando applicazioni in .NET Core (incluse applicazioni ASP.NET Core)</span><span class="sxs-lookup"><span data-stu-id="07c49-219">`netcoreapp1.0` - if you are writing applications on .NET Core (including ASP.NET Core applications)</span></span>
2. <span data-ttu-id="07c49-220">`netstandard1.6`: se si stanno creando librerie di classi per .NET Core</span><span class="sxs-lookup"><span data-stu-id="07c49-220">`netstandard1.6` - if you are writing class libraries for .NET Core</span></span>

<span data-ttu-id="07c49-221">Se si usano altre destinazioni `dnx`, ad esempio `dnx451`, sarà necessario modificare anche tali destinazioni.</span><span class="sxs-lookup"><span data-stu-id="07c49-221">If you are using other `dnx` targets, like `dnx451` you will need to change those as well.</span></span> <span data-ttu-id="07c49-222">`dnx451` deve essere modificato in `net451`.</span><span class="sxs-lookup"><span data-stu-id="07c49-222">`dnx451` should be changed to `net451`.</span></span> <span data-ttu-id="07c49-223">Per altre informazioni, vedere l'argomento [.NET Standard](../../standard/net-standard.md).</span><span class="sxs-lookup"><span data-stu-id="07c49-223">Please refer to the [.NET Standard](../../standard/net-standard.md) topic for more information.</span></span> 

<span data-ttu-id="07c49-224">Il file `project.json` è ora praticamente pronto.</span><span class="sxs-lookup"><span data-stu-id="07c49-224">Your `project.json` is now mostly ready.</span></span> <span data-ttu-id="07c49-225">È necessario scorrere l'elenco delle dipendenze e aggiornarle alle versioni più recenti, in particolare se si usano dipendenze ASP.NET Core.</span><span class="sxs-lookup"><span data-stu-id="07c49-225">You need to go through your dependencies list and update the dependencies to their newer versions, especially if you are using ASP.NET Core dependencies.</span></span> <span data-ttu-id="07c49-226">Se si usano pacchetti separati per le API BCL, è possibile usare il pacchetto di runtime, come spiegato nel documento [Application portability type](../deploying/index.md) (Tipo di portabilità delle applicazioni).</span><span class="sxs-lookup"><span data-stu-id="07c49-226">If you were using separate packages for BCL APIs, you can use the runtime package as explained in the [application portability type](../deploying/index.md) document.</span></span> 

<span data-ttu-id="07c49-227">Quando si è pronti, è possibile tentare il ripristino con `dotnet restore` ([vedere la nota](#dotnet-restore-note)).</span><span class="sxs-lookup"><span data-stu-id="07c49-227">Once you are ready, you can try restoring with `dotnet restore` ([see note](#dotnet-restore-note)).</span></span> <span data-ttu-id="07c49-228">A seconda della versione delle dipendenze, si potrebbero verificare errori se NuGet non è in grado di risolvere le dipendenze stesse per uno dei framework di destinazione sopra indicati.</span><span class="sxs-lookup"><span data-stu-id="07c49-228">Depending on the version of your dependencies, you may encounter errors if NuGet cannot resolve the dependencies for one of the targeted frameworks above.</span></span> <span data-ttu-id="07c49-229">Si tratta di un problema momentaneo: con il passare del tempo saranno sempre di più i pacchetti che includono il supporto per questi framework.</span><span class="sxs-lookup"><span data-stu-id="07c49-229">This is a "point-in-time" problem; as time progresses, more and more packages will include support for these frameworks.</span></span> <span data-ttu-id="07c49-230">Per ora, se si verifica questo problema, è possibile usare l'istruzione `imports` all'interno del nodo `framework` per indicare a NuGet che può ripristinare i pacchetti che hanno come destinazione il framework indicato nell'istruzione "imports".</span><span class="sxs-lookup"><span data-stu-id="07c49-230">For now, if you run into this, you can use the `imports` statement within the `framework` node to specify to NuGet that it can restore the packages targeting the framework within the "imports" statement.</span></span> <span data-ttu-id="07c49-231">I messaggi di errore di ripristino visualizzati in questo caso dovrebbero fornire informazioni sufficienti per stabilire quali framework è necessario importare.</span><span class="sxs-lookup"><span data-stu-id="07c49-231">The restoring errors you get in this case should provide enough information to tell you which frameworks you need to import.</span></span> <span data-ttu-id="07c49-232">In caso di dubbi o se si esegue questa operazione per la prima volta, come indicazione generale specificare `dnxcore50` e `portable-net45+win8` nell'istruzione `imports`.</span><span class="sxs-lookup"><span data-stu-id="07c49-232">If you are slightly lost or new to this, in general, specifying `dnxcore50` and `portable-net45+win8` in the `imports` statement should do the trick.</span></span> <span data-ttu-id="07c49-233">Il frammento JSON seguente mostra un esempio di questo scenario:</span><span class="sxs-lookup"><span data-stu-id="07c49-233">The JSON snippet below shows how this looks like:</span></span>

```json
    "frameworks": {
        "netcoreapp1.0": { 
            "imports": ["dnxcore50", "portable-net45+win8"]
        }
    }
```

<span data-ttu-id="07c49-234">L'esecuzione di `dotnet build` mostrerà eventuali errori di compilazione, che tuttavia non dovrebbero essere numerosi.</span><span class="sxs-lookup"><span data-stu-id="07c49-234">Running `dotnet build` will show any eventual build errors, though there shouldn't be too many of them.</span></span> <span data-ttu-id="07c49-235">Dopo aver compilato ed eseguito correttamente il codice, è possibile testarlo con Test Runner.</span><span class="sxs-lookup"><span data-stu-id="07c49-235">After your code is building and running properly, you can test it out with the runner.</span></span> <span data-ttu-id="07c49-236">Eseguire `dotnet <path-to-your-assembly>` e osservare l'esecuzione.</span><span class="sxs-lookup"><span data-stu-id="07c49-236">Execute `dotnet <path-to-your-assembly>` and see it run.</span></span>

<a name="dotnet-restore-note"></a>
[!INCLUDE[DotNet Restore Note](~/includes/dotnet-restore-note.md)]