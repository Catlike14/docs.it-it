---
title: Nozioni fondamentali sulle espressioni di query
description: Vengono introdotti concetti relativi alle espressioni di query
keywords: .NET, .NET Core, C#
author: BillWagner
manager: wpickett
ms.author: wiwagn
ms.date: 11/30/2016
ms.topic: article
ms.prod: .net-core
ms.technology: .net-core-technologies
ms.devlang: dotnet
ms.assetid: 027db1f8-346f-44d2-a16e-043fcea3a4e0
ms.translationtype: HT
ms.sourcegitcommit: 306c608dc7f97594ef6f72ae0f5aaba596c936e1
ms.openlocfilehash: be8e2374f89366c6a98df900674a957bd2f531cc
ms.contentlocale: it-it
ms.lasthandoff: 07/28/2017

---
# <a name="query-expression-basics"></a><span data-ttu-id="af0d3-104">Nozioni fondamentali sulle espressioni di query</span><span class="sxs-lookup"><span data-stu-id="af0d3-104">Query expression basics</span></span>

## <a name="what-is-a-query-and-what-does-it-do"></a><span data-ttu-id="af0d3-105">Che cos'è una query e cosa fa?</span><span class="sxs-lookup"><span data-stu-id="af0d3-105">What is a query and what does it do?</span></span> 

 <span data-ttu-id="af0d3-106">Una *query* è un set di istruzioni che descrive i dati da recuperare da una determinata origine (o più origini) dati e indica quale forma e organizzazione devono avere i dati restituiti.</span><span class="sxs-lookup"><span data-stu-id="af0d3-106">A *query* is a set of instructions that describes what data to retrieve from a given data source (or sources) and what shape and organization the returned data should have.</span></span> <span data-ttu-id="af0d3-107">Una query è distinta dai risultati che produce.</span><span class="sxs-lookup"><span data-stu-id="af0d3-107">A query is distinct from the results that it produces.</span></span>  
  
 <span data-ttu-id="af0d3-108">In genere, i dati di origine vengono organizzati logicamente come una sequenza di elementi dello stesso tipo.</span><span class="sxs-lookup"><span data-stu-id="af0d3-108">Generally, the source data is organized logically as a sequence of elements of the same kind.</span></span> <span data-ttu-id="af0d3-109">Ad esempio, una tabella di database SQL contiene una sequenza di righe.</span><span class="sxs-lookup"><span data-stu-id="af0d3-109">For example, a SQL database table contains a sequence of rows.</span></span> <span data-ttu-id="af0d3-110">In un file XML è presente una "sequenza" di elementi XML, anche se questi sono organizzati gerarchicamente in una struttura ad albero.</span><span class="sxs-lookup"><span data-stu-id="af0d3-110">In an XML file, there is a "sequence" of XML elements (although these are organized hierarchically in a tree structure).</span></span> <span data-ttu-id="af0d3-111">Una raccolta in memoria contiene una sequenza di oggetti.</span><span class="sxs-lookup"><span data-stu-id="af0d3-111">An in-memory collection contains a sequence of objects.</span></span> 
  
 <span data-ttu-id="af0d3-112">Dal punto di vista di un'applicazione, il tipo e la struttura specifici dei dati di origine non è importante.</span><span class="sxs-lookup"><span data-stu-id="af0d3-112">From an application's viewpoint, the specific type and structure of the original source data is not important.</span></span> <span data-ttu-id="af0d3-113">L'applicazione considera sempre i dati di origine come raccolta <xref:System.Collections.Generic.IEnumerable%601> o <xref:System.Linq.IQueryable%601>.</span><span class="sxs-lookup"><span data-stu-id="af0d3-113">The application always sees the source data as an <xref:System.Collections.Generic.IEnumerable%601> or <xref:System.Linq.IQueryable%601> collection.</span></span> <span data-ttu-id="af0d3-114">In LINQ to XML, ad esempio, i dati di origine sono resi visibili come oggetto `IEnumerable`\<<xref:System.Xml.Linq.XElement>>.</span><span class="sxs-lookup"><span data-stu-id="af0d3-114">For example, in LINQ to XML, the source data is made visible as an `IEnumerable`\<<xref:System.Xml.Linq.XElement>>.</span></span>  
  
 <span data-ttu-id="af0d3-115">Data questa sequenza di origine, una query può eseguire una delle tre operazioni seguenti:</span><span class="sxs-lookup"><span data-stu-id="af0d3-115">Given this source sequence, a query may do one of three things:</span></span>  
  
-   <span data-ttu-id="af0d3-116">Recuperare un subset di elementi per produrre una nuova sequenza senza modificare i singoli elementi.</span><span class="sxs-lookup"><span data-stu-id="af0d3-116">Retrieve a subset of the elements to produce a new sequence without modifying the individual elements.</span></span> <span data-ttu-id="af0d3-117">La query può quindi ordinare o raggruppare la sequenza restituita in vari modi, come illustrato nell'esempio seguente (si presuppone che `scores` sia un elemento `int[]`):</span><span class="sxs-lookup"><span data-stu-id="af0d3-117">The query may then sort or group the returned sequence in various ways, as shown in the following example (assume `scores` is an `int[]`):</span></span>  
  
     <span data-ttu-id="af0d3-118">[!code-cs[csrefQueryExpBasics#45](../../../samples/snippets/csharp/concepts/linq/query-expression-basics_1.cs)]</span><span class="sxs-lookup"><span data-stu-id="af0d3-118">[!code-cs[csrefQueryExpBasics#45](../../../samples/snippets/csharp/concepts/linq/query-expression-basics_1.cs)]</span></span>  
  
-   <span data-ttu-id="af0d3-119">Recuperare una sequenza di elementi come nell'esempio precedente, ma trasformandoli in un nuovo tipo di oggetto.</span><span class="sxs-lookup"><span data-stu-id="af0d3-119">Retrieve a sequence of elements as in the previous example but transform them to a new type of object.</span></span> <span data-ttu-id="af0d3-120">Ad esempio, una query può recuperare solo i cognomi da determinati record cliente in un'origine dati.</span><span class="sxs-lookup"><span data-stu-id="af0d3-120">For example, a query may retrieve only the last names from certain customer records in a data source.</span></span> <span data-ttu-id="af0d3-121">Oppure può recuperare il record completo e quindi usarlo per creare un altro tipo di oggetto in memoria o anche dati XML prima di generare la sequenza di risultati finale.</span><span class="sxs-lookup"><span data-stu-id="af0d3-121">Or it may retrieve the complete record and then use it to construct another in-memory object type or even XML data before generating the final result sequence.</span></span> <span data-ttu-id="af0d3-122">L'esempio seguente illustra una proiezione da `int` a `string`.</span><span class="sxs-lookup"><span data-stu-id="af0d3-122">The following example shows a projection from an `int` to a `string`.</span></span> <span data-ttu-id="af0d3-123">Si noti il nuovo tipo di `highScoresQuery`.</span><span class="sxs-lookup"><span data-stu-id="af0d3-123">Note the new type of `highScoresQuery`.</span></span>  
  
     <span data-ttu-id="af0d3-124">[!code-cs[csrefQueryExpBasics#46](../../../samples/snippets/csharp/concepts/linq/query-expression-basics_2.cs)]</span><span class="sxs-lookup"><span data-stu-id="af0d3-124">[!code-cs[csrefQueryExpBasics#46](../../../samples/snippets/csharp/concepts/linq/query-expression-basics_2.cs)]</span></span>  
  
-   <span data-ttu-id="af0d3-125">Recuperare un valore singleton sui dati di origine, ad esempio:</span><span class="sxs-lookup"><span data-stu-id="af0d3-125">Retrieve a singleton value about the source data, such as:</span></span>  
  
    -   <span data-ttu-id="af0d3-126">Il numero di elementi che corrispondono a una determinata condizione.</span><span class="sxs-lookup"><span data-stu-id="af0d3-126">The number of elements that match a certain condition.</span></span>  
  
    -   <span data-ttu-id="af0d3-127">L'elemento con il valore massimo o minimo.</span><span class="sxs-lookup"><span data-stu-id="af0d3-127">The element that has the greatest or least value.</span></span>  
  
    -   <span data-ttu-id="af0d3-128">Il primo elemento che corrisponde a una condizione o la somma di particolari valori in un set specificato di elementi.</span><span class="sxs-lookup"><span data-stu-id="af0d3-128">The first element that matches a condition, or the sum of particular values in a specified set of elements.</span></span> <span data-ttu-id="af0d3-129">Ad esempio, la query seguente restituisce il numero di punteggi superiori a 80 dalla matrice di interi `scores`:</span><span class="sxs-lookup"><span data-stu-id="af0d3-129">For example, the following query returns the number of scores greater than 80 from the `scores` integer array:</span></span>  
  
     <span data-ttu-id="af0d3-130">[!code-cs[csrefQueryExpBasics#47](../../../samples/snippets/csharp/concepts/linq/query-expression-basics_3.cs)]</span><span class="sxs-lookup"><span data-stu-id="af0d3-130">[!code-cs[csrefQueryExpBasics#47](../../../samples/snippets/csharp/concepts/linq/query-expression-basics_3.cs)]</span></span>  
  
     <span data-ttu-id="af0d3-131">Nell'esempio precedente si noti l'uso delle parentesi attorno all'espressione di query prima della chiamata al metodo `Count`.</span><span class="sxs-lookup"><span data-stu-id="af0d3-131">In the previous example, note the use of parentheses around the query expression before the call to the `Count` method.</span></span> <span data-ttu-id="af0d3-132">Un'espressione analoga è usare una nuova variabile per archiviare il risultato concreto.</span><span class="sxs-lookup"><span data-stu-id="af0d3-132">You can also express this by using a new variable to store the concrete result.</span></span> <span data-ttu-id="af0d3-133">Questa tecnica è più leggibile perché mantiene la variabile che contiene la query separata dalla query che archivia un risultato.</span><span class="sxs-lookup"><span data-stu-id="af0d3-133">This technique is more readable because it keeps the variable that stores the query separate from the query that stores a result.</span></span>  
  
     <span data-ttu-id="af0d3-134">[!code-cs[csrefQueryExpBasics#48](../../../samples/snippets/csharp/concepts/linq/query-expression-basics_4.cs)]</span><span class="sxs-lookup"><span data-stu-id="af0d3-134">[!code-cs[csrefQueryExpBasics#48](../../../samples/snippets/csharp/concepts/linq/query-expression-basics_4.cs)]</span></span>  
  
 <span data-ttu-id="af0d3-135">Nell'esempio precedente la query viene eseguita nella chiamata a `Count`, poiché `Count` deve eseguire l'iterazione dei risultati per determinare il numero di elementi restituiti da `highScoresQuery`.</span><span class="sxs-lookup"><span data-stu-id="af0d3-135">In the previous example, the query is executed in the call to `Count`, because `Count` must iterate over the results in order to determine the number of elements returned by `highScoresQuery`.</span></span>  
  
## <a name="what-is-a-query-expression"></a><span data-ttu-id="af0d3-136">Che cos'è un'espressione di query?</span><span class="sxs-lookup"><span data-stu-id="af0d3-136">What is a query expression?</span></span>  

 <span data-ttu-id="af0d3-137">Un'*espressione di query* è una query espressa nella sintassi delle query.</span><span class="sxs-lookup"><span data-stu-id="af0d3-137">A *query expression* is a query expressed in query syntax.</span></span> <span data-ttu-id="af0d3-138">È un costrutto di linguaggio di prima classe.</span><span class="sxs-lookup"><span data-stu-id="af0d3-138">A query expression is a first-class language construct.</span></span> <span data-ttu-id="af0d3-139">È esattamente come qualsiasi altra espressione e può essere usata in qualsiasi contesto in cui un'espressione C# è valida.</span><span class="sxs-lookup"><span data-stu-id="af0d3-139">It is just like any other expression and can be used in any context in which a C# expression is valid.</span></span> <span data-ttu-id="af0d3-140">Un'espressione di query consiste in un set di clausole scritte in una sintassi dichiarativa simile a SQL o XQuery.</span><span class="sxs-lookup"><span data-stu-id="af0d3-140">A query expression consists of a set of clauses written in a declarative syntax similar to SQL or XQuery.</span></span> <span data-ttu-id="af0d3-141">Ogni clausola contiene a sua volta una o più espressioni C# e queste espressioni possono essere espressioni di query o contenere un'espressione di query.</span><span class="sxs-lookup"><span data-stu-id="af0d3-141">Each clause in turn contains one or more C# expressions, and these expressions may themselves be either a query expression or contain a query expression.</span></span>  
  
 <span data-ttu-id="af0d3-142">Un'espressione di query deve iniziare con una clausola [from](../language-reference/keywords/from-clause.md) e terminare con una clausola [select](../language-reference/keywords/select-clause.md) o [group](../language-reference/keywords/group-clause.md).</span><span class="sxs-lookup"><span data-stu-id="af0d3-142">A query expression must begin with a [from](../language-reference/keywords/from-clause.md) clause and must end with a [select](../language-reference/keywords/select-clause.md) or [group](../language-reference/keywords/group-clause.md) clause.</span></span> <span data-ttu-id="af0d3-143">Tra la prima clausola `from` e l'ultima clausola `select` o `group` può contenere una o più delle seguenti clausole facoltative: [where](../language-reference/keywords/where-clause.md), [orderby](../language-reference/keywords/orderby-clause.md), [join](../language-reference/keywords/join-clause.md), [let](../language-reference/keywords/let-clause.md) e anche clausole [from](../language-reference/keywords/from-clause.md) aggiuntive.</span><span class="sxs-lookup"><span data-stu-id="af0d3-143">Between the first `from` clause and the last `select` or `group` clause, it can contain one or more of these optional clauses: [where](../language-reference/keywords/where-clause.md), [orderby](../language-reference/keywords/orderby-clause.md), [join](../language-reference/keywords/join-clause.md), [let](../language-reference/keywords/let-clause.md) and even additional [from](../language-reference/keywords/from-clause.md) clauses.</span></span> <span data-ttu-id="af0d3-144">È anche possibile usare la parola chiave [into](../language-reference/keywords/into.md) per consentire al risultato di una clausola `join` o `group` di funzionare come origine per le clausole di query aggiuntive nella stessa espressione di query.</span><span class="sxs-lookup"><span data-stu-id="af0d3-144">You can also use the [into](../language-reference/keywords/into.md) keyword to enable the result of a `join` or `group` clause to serve as the source for additional query clauses in the same query expression.</span></span>  
  
### <a name="query-variable"></a><span data-ttu-id="af0d3-145">Variabile di query</span><span class="sxs-lookup"><span data-stu-id="af0d3-145">Query variable</span></span>  
 
 <span data-ttu-id="af0d3-146">In LINQ una variabile di query è qualsiasi variabile che archivia una *query* anziché i *risultati* di una query.</span><span class="sxs-lookup"><span data-stu-id="af0d3-146">In LINQ, a query variable is any variable that stores a *query* instead of the *results* of a query.</span></span> <span data-ttu-id="af0d3-147">In particolare, una variabile di query è sempre un tipo enumerabile che genera una sequenza di elementi quando viene iterato in un'istruzione `foreach` o una chiamata diretta al relativo metodo `IEnumerator.MoveNext`.</span><span class="sxs-lookup"><span data-stu-id="af0d3-147">More specifically, a query variable is always an enumerable type that will produce a sequence of elements when it is iterated over in a `foreach` statement or a direct call to its `IEnumerator.MoveNext` method.</span></span>  
  
 <span data-ttu-id="af0d3-148">L'esempio di codice seguente illustra un'espressione di query semplice con un'origine dati, una clausola di filtro, una clausola di ordinamento e nessuna trasformazione degli elementi di origine.</span><span class="sxs-lookup"><span data-stu-id="af0d3-148">The following code example shows a simple query expression with one data source, one filtering clause, one ordering clause, and no transformation of the source elements.</span></span> <span data-ttu-id="af0d3-149">La clausola `select` termina la query.</span><span class="sxs-lookup"><span data-stu-id="af0d3-149">The `select` clause ends the query.</span></span>  
  
 <span data-ttu-id="af0d3-150">[!code-cs[csrefQueryExpBasics#49](../../../samples/snippets/csharp/concepts/linq/query-expression-basics_5.cs)]</span><span class="sxs-lookup"><span data-stu-id="af0d3-150">[!code-cs[csrefQueryExpBasics#49](../../../samples/snippets/csharp/concepts/linq/query-expression-basics_5.cs)]</span></span>  
  
 <span data-ttu-id="af0d3-151">Nell'esempio precedente `scoreQuery` è una *variabile di query,* che a volte viene definita semplicemente *query*.</span><span class="sxs-lookup"><span data-stu-id="af0d3-151">In the previous example, `scoreQuery` is a *query variable,* which is sometimes referred to as just a *query*.</span></span> <span data-ttu-id="af0d3-152">La variabile di query non archivia dati sul risultato effettivo, che vengono generati nel ciclo `foreach`.</span><span class="sxs-lookup"><span data-stu-id="af0d3-152">The query variable stores no actual result data, which is produced in the `foreach` loop.</span></span> <span data-ttu-id="af0d3-153">E quando viene eseguita l'istruzione `foreach` i risultati della query non vengono restituiti attraverso la variabile di query `scoreQuery`.</span><span class="sxs-lookup"><span data-stu-id="af0d3-153">And when the `foreach` statement executes, the query results are not returned through the query variable `scoreQuery`.</span></span> <span data-ttu-id="af0d3-154">Vengono piuttosto restituiti attraverso la variabile di iterazione `testScore`.</span><span class="sxs-lookup"><span data-stu-id="af0d3-154">Rather, they are returned through the iteration variable `testScore`.</span></span> <span data-ttu-id="af0d3-155">La variabile `scoreQuery` può essere iterata in un secondo ciclo `foreach`.</span><span class="sxs-lookup"><span data-stu-id="af0d3-155">The `scoreQuery` variable can be iterated in a second `foreach` loop.</span></span> <span data-ttu-id="af0d3-156">Verranno generati gli stessi risultati purché non siano state modificate né la variabile né l'origine dati.</span><span class="sxs-lookup"><span data-stu-id="af0d3-156">It will produce the same results as long as neither it nor the data source has been modified.</span></span>  
  
 <span data-ttu-id="af0d3-157">Una variabile di query può archiviare una query espressa nella sintassi di query, nella sintassi di metodo o in una combinazione delle due.</span><span class="sxs-lookup"><span data-stu-id="af0d3-157">A query variable may store a query that is expressed in query syntax or method syntax, or a combination of the two.</span></span> <span data-ttu-id="af0d3-158">Negli esempi seguenti sia `queryMajorCities` che `queryMajorCities2` sono variabili di query:</span><span class="sxs-lookup"><span data-stu-id="af0d3-158">In the following examples, both `queryMajorCities` and `queryMajorCities2` are query variables:</span></span>  
  
 <span data-ttu-id="af0d3-159">[!code-cs[csrefQueryExpBasics#50](../../../samples/snippets/csharp/concepts/linq/query-expression-basics_6.cs)]</span><span class="sxs-lookup"><span data-stu-id="af0d3-159">[!code-cs[csrefQueryExpBasics#50](../../../samples/snippets/csharp/concepts/linq/query-expression-basics_6.cs)]</span></span>  
  
 <span data-ttu-id="af0d3-160">I due esempi seguenti illustrano invece le variabili che non sono variabili di query anche se ognuna viene inizializzata con una query.</span><span class="sxs-lookup"><span data-stu-id="af0d3-160">On the other hand, the following two examples show variables that are not query variables even through each is initialized with a query.</span></span> <span data-ttu-id="af0d3-161">Non sono variabili di query perché archiviano i risultati:</span><span class="sxs-lookup"><span data-stu-id="af0d3-161">They are not query variables because they store results:</span></span>  
  
 <span data-ttu-id="af0d3-162">[!code-cs[csrefQueryExpBasics#51](../../../samples/snippets/csharp/concepts/linq/query-expression-basics_7.cs)]</span><span class="sxs-lookup"><span data-stu-id="af0d3-162">[!code-cs[csrefQueryExpBasics#51](../../../samples/snippets/csharp/concepts/linq/query-expression-basics_7.cs)]</span></span>  
  
 <span data-ttu-id="af0d3-163">Per altre informazioni sui diversi modi di esprimere le query, vedere [Sintassi di query e sintassi di metodi in LINQ](../programming-guide/concepts/linq/query-syntax-and-method-syntax-in-linq.md).</span><span class="sxs-lookup"><span data-stu-id="af0d3-163">For more information about the different ways to express queries, see [Query syntax and method syntax in LINQ](../programming-guide/concepts/linq/query-syntax-and-method-syntax-in-linq.md).</span></span>  
  
#### <a name="explicit-and-implicit-typing-of-query-variables"></a><span data-ttu-id="af0d3-164">Tipizzazione esplicita e implicita delle variabili di query</span><span class="sxs-lookup"><span data-stu-id="af0d3-164">Explicit and implicit typing of query variables</span></span>  
 
 <span data-ttu-id="af0d3-165">In questa documentazione viene usato in genere il tipo esplicito della variabile di query allo scopo di evidenziare la relazione di tipo tra la variabile di query e la [clausola select](../language-reference/keywords/select-clause.md).</span><span class="sxs-lookup"><span data-stu-id="af0d3-165">This documentation usually provides the explicit type of the query variable in order to show the type relationship between the query variable and the [select clause](../language-reference/keywords/select-clause.md).</span></span> <span data-ttu-id="af0d3-166">Tuttavia, è possibile usare anche la parola chiave [var](../language-reference/keywords/var.md) per indicare al compilatore di dedurre il tipo di una variabile di query, o qualsiasi altra variabile locale, in fase di compilazione.</span><span class="sxs-lookup"><span data-stu-id="af0d3-166">However, you can also use the [var](../language-reference/keywords/var.md) keyword to instruct the compiler to infer the type of a query variable (or any other local variable) at compile time.</span></span> <span data-ttu-id="af0d3-167">L'esempio di query illustrato in precedenza in questo argomento può essere espresso anche usando la tipizzazione implicita:</span><span class="sxs-lookup"><span data-stu-id="af0d3-167">For example, the query example that was shown previously in this topic can also be expressed by using implicit typing:</span></span>  
  
 <span data-ttu-id="af0d3-168">[!code-cs[csrefQueryExpBasics#52](../../../samples/snippets/csharp/concepts/linq/query-expression-basics_8.cs)]</span><span class="sxs-lookup"><span data-stu-id="af0d3-168">[!code-cs[csrefQueryExpBasics#52](../../../samples/snippets/csharp/concepts/linq/query-expression-basics_8.cs)]</span></span>  
  
 <span data-ttu-id="af0d3-169">Per altre informazioni, vedere [Variabili locali tipizzate in modo implicito](../programming-guide/classes-and-structs/implicitly-typed-local-variables.md) e [Relazioni tra i tipi nelle operazioni di query LINQ](../programming-guide/concepts/linq/type-relationships-in-linq-query-operations.md).</span><span class="sxs-lookup"><span data-stu-id="af0d3-169">For more information, see [Implicitly typed local variables](../programming-guide/classes-and-structs/implicitly-typed-local-variables.md) and [Type relationships in LINQ query operations](../programming-guide/concepts/linq/type-relationships-in-linq-query-operations.md).</span></span>  
  
### <a name="starting-a-query-expression"></a><span data-ttu-id="af0d3-170">Avviare un'espressione di query</span><span class="sxs-lookup"><span data-stu-id="af0d3-170">Starting a query expression</span></span>  
 
 <span data-ttu-id="af0d3-171">Un'espressione di query deve iniziare con una clausola `from`.</span><span class="sxs-lookup"><span data-stu-id="af0d3-171">A query expression must begin with a `from` clause.</span></span> <span data-ttu-id="af0d3-172">Specifica un'origine dati insieme a una variabile di intervallo.</span><span class="sxs-lookup"><span data-stu-id="af0d3-172">It specifies a data source together with a range variable.</span></span> <span data-ttu-id="af0d3-173">La variabile di intervallo rappresenta ogni elemento successivo nella sequenza di origine man mano che si attraversa la sequenza di origine.</span><span class="sxs-lookup"><span data-stu-id="af0d3-173">The range variable represents each successive element in the source sequence as the source sequence is being traversed.</span></span> <span data-ttu-id="af0d3-174">La variabile di intervallo è fortemente tipizzata in base al tipo di elementi nell'origine dati.</span><span class="sxs-lookup"><span data-stu-id="af0d3-174">The range variable is strongly typed based on the type of elements in the data source.</span></span> <span data-ttu-id="af0d3-175">Nell'esempio seguente, poiché `countries` è una matrice di oggetti `Country`, anche la variabile di intervallo è tipizzata come `Country`.</span><span class="sxs-lookup"><span data-stu-id="af0d3-175">In the following example, because `countries` is an array of `Country` objects, the range variable is also typed as `Country`.</span></span> <span data-ttu-id="af0d3-176">Poiché la variabile di intervallo è fortemente tipizzata, è possibile usare l'operatore punto per accedere ai membri disponibili del tipo.</span><span class="sxs-lookup"><span data-stu-id="af0d3-176">Because the range variable is strongly typed, you can use the dot operator to access any available members of the type.</span></span>  
  
 <span data-ttu-id="af0d3-177">[!code-cs[csrefQueryExpBasics#53](../../../samples/snippets/csharp/concepts/linq/query-expression-basics_9.cs)]</span><span class="sxs-lookup"><span data-stu-id="af0d3-177">[!code-cs[csrefQueryExpBasics#53](../../../samples/snippets/csharp/concepts/linq/query-expression-basics_9.cs)]</span></span>  
  
 <span data-ttu-id="af0d3-178">La variabile di intervallo è nell'ambito finché la query viene terminata con un punto e virgola o con una clausola *continuation*.</span><span class="sxs-lookup"><span data-stu-id="af0d3-178">The range variable is in scope until the query is exited either with a semicolon or with a *continuation* clause.</span></span>  
  
 <span data-ttu-id="af0d3-179">Un'espressione di query può contenere più clausole `from`.</span><span class="sxs-lookup"><span data-stu-id="af0d3-179">A query expression may contain multiple `from` clauses.</span></span> <span data-ttu-id="af0d3-180">Usare clausole `from` aggiuntive quando ogni elemento nella sequenza di origine è a sua volta una raccolta o contiene una raccolta.</span><span class="sxs-lookup"><span data-stu-id="af0d3-180">Use additional `from` clauses when each element in the source sequence is itself a collection or contains a collection.</span></span> <span data-ttu-id="af0d3-181">Ad esempio, si supponga di avere una raccolta di oggetti `Country`, ognuna delle quali contiene una raccolta di oggetti `City` denominata `Cities`.</span><span class="sxs-lookup"><span data-stu-id="af0d3-181">For example, assume that you have a collection of `Country` objects, each of which contains a collection of `City` objects named `Cities`.</span></span> <span data-ttu-id="af0d3-182">Per eseguire query sugli oggetti `City` in ogni `Country`, usare due clausole `from` come illustrato di seguito:</span><span class="sxs-lookup"><span data-stu-id="af0d3-182">To query the `City` objects in each `Country`, use two `from` clauses as shown here:</span></span>  
  
 <span data-ttu-id="af0d3-183">[!code-cs[csrefQueryExpBasics#54](../../../samples/snippets/csharp/concepts/linq/query-expression-basics_10.cs)]</span><span class="sxs-lookup"><span data-stu-id="af0d3-183">[!code-cs[csrefQueryExpBasics#54](../../../samples/snippets/csharp/concepts/linq/query-expression-basics_10.cs)]</span></span>  
  
 <span data-ttu-id="af0d3-184">Per altre informazioni, vedere [Clausola from](../language-reference/keywords/from-clause.md).</span><span class="sxs-lookup"><span data-stu-id="af0d3-184">For more information, see [from clause](../language-reference/keywords/from-clause.md).</span></span>  
  
### <a name="ending-a-query-expression"></a><span data-ttu-id="af0d3-185">Terminare un'espressione di query</span><span class="sxs-lookup"><span data-stu-id="af0d3-185">Ending a query expression</span></span>  
 
 <span data-ttu-id="af0d3-186">Un'espressione di query deve terminare con una clausola `group` o una clausola `select`.</span><span class="sxs-lookup"><span data-stu-id="af0d3-186">A query expression must end with either a `group` clause or a `select` clause.</span></span>  
  
#### <a name="group-clause"></a><span data-ttu-id="af0d3-187">Clausola group</span><span class="sxs-lookup"><span data-stu-id="af0d3-187">group clause</span></span>  
 
 <span data-ttu-id="af0d3-188">Usare la clausola `group` per produrre una sequenza di gruppi organizzata in base a una chiave specificata.</span><span class="sxs-lookup"><span data-stu-id="af0d3-188">Use the `group` clause to produce a sequence of groups organized by a key that you specify.</span></span> <span data-ttu-id="af0d3-189">La chiave può essere qualsiasi tipo di dati.</span><span class="sxs-lookup"><span data-stu-id="af0d3-189">The key can be any data type.</span></span> <span data-ttu-id="af0d3-190">Ad esempio, la query seguente crea una sequenza di gruppi che contiene uno o più oggetti `Country` e la cui chiave è un valore `char`.</span><span class="sxs-lookup"><span data-stu-id="af0d3-190">For example, the following query creates a sequence of groups that contains one or more `Country` objects and whose key is a `char` value.</span></span>  
  
 <span data-ttu-id="af0d3-191">[!code-cs[csrefQueryExpBasics#55](../../../samples/snippets/csharp/concepts/linq/query-expression-basics_11.cs)]</span><span class="sxs-lookup"><span data-stu-id="af0d3-191">[!code-cs[csrefQueryExpBasics#55](../../../samples/snippets/csharp/concepts/linq/query-expression-basics_11.cs)]</span></span>  
  
 <span data-ttu-id="af0d3-192">Per altre informazioni sul raggruppamento, vedere [Clausola group](../language-reference/keywords/group-clause.md).</span><span class="sxs-lookup"><span data-stu-id="af0d3-192">For more information about grouping, see [group clause](../language-reference/keywords/group-clause.md).</span></span>  
  
#### <a name="select-clause"></a><span data-ttu-id="af0d3-193">Clausola select</span><span class="sxs-lookup"><span data-stu-id="af0d3-193">select clause</span></span>  
 <span data-ttu-id="af0d3-194">Usare la clausola `select` per creare tutti gli altri tipi di sequenze.</span><span class="sxs-lookup"><span data-stu-id="af0d3-194">Use the `select` clause to produce all other types of sequences.</span></span> <span data-ttu-id="af0d3-195">Una clausola `select` semplice produce una sequenza usando lo stesso tipo di oggetti dell'origine dati.</span><span class="sxs-lookup"><span data-stu-id="af0d3-195">A simple `select` clause just produces a sequence of the same type of objects as the objects that are contained in the data source.</span></span> <span data-ttu-id="af0d3-196">In questo esempio l'origine dati contiene oggetti `Country`.</span><span class="sxs-lookup"><span data-stu-id="af0d3-196">In this example, the data source contains `Country` objects.</span></span> <span data-ttu-id="af0d3-197">La clausola `orderby` si limita a ordinare gli elementi in base a un nuovo ordine e la clausola `select` produce una sequenza degli oggetti `Country` riordinati.</span><span class="sxs-lookup"><span data-stu-id="af0d3-197">The `orderby` clause just sorts the elements into a new order and the `select` clause produces a sequence of the reordered `Country` objects.</span></span>  
  
 <span data-ttu-id="af0d3-198">[!code-cs[csrefQueryExpBasics#56](../../../samples/snippets/csharp/concepts/linq/query-expression-basics_12.cs)]</span><span class="sxs-lookup"><span data-stu-id="af0d3-198">[!code-cs[csrefQueryExpBasics#56](../../../samples/snippets/csharp/concepts/linq/query-expression-basics_12.cs)]</span></span>  
  
 <span data-ttu-id="af0d3-199">La clausola `select` può essere usata per trasformare i dati di origine in sequenze di nuovi tipi.</span><span class="sxs-lookup"><span data-stu-id="af0d3-199">The `select` clause can be used to transform source data into sequences of new types.</span></span> <span data-ttu-id="af0d3-200">Questa trasformazione è detta anche *proiezione*.</span><span class="sxs-lookup"><span data-stu-id="af0d3-200">This transformation is also named a *projection*.</span></span> <span data-ttu-id="af0d3-201">Nell'esempio seguente la clausola `select` *proietta* una sequenza di tipi anonimi che contiene solo un subset dei campi dell'elemento originale.</span><span class="sxs-lookup"><span data-stu-id="af0d3-201">In the following example, the `select` clause *projects* a sequence of anonymous types which contains only a subset of the fields in the original element.</span></span> <span data-ttu-id="af0d3-202">Si noti che i nuovi oggetti vengono inizializzati usando un inizializzatore di oggetto.</span><span class="sxs-lookup"><span data-stu-id="af0d3-202">Note that the new objects are initialized by using an object initializer.</span></span>  
  
 <span data-ttu-id="af0d3-203">[!code-cs[csrefQueryExpBasics#57](../../../samples/snippets/csharp/concepts/linq/query-expression-basics_13.cs)]</span><span class="sxs-lookup"><span data-stu-id="af0d3-203">[!code-cs[csrefQueryExpBasics#57](../../../samples/snippets/csharp/concepts/linq/query-expression-basics_13.cs)]</span></span>  
  
 <span data-ttu-id="af0d3-204">Per altre informazioni su tutti i modi in cui una clausola `select` può essere usata per trasformare i dati di origine, vedere [Clausola select](../language-reference/keywords/select-clause.md).</span><span class="sxs-lookup"><span data-stu-id="af0d3-204">For more information about all the ways that a `select` clause can be used to transform source data, see [select clause](../language-reference/keywords/select-clause.md).</span></span>  
  
#### <a name="continuations-with-into"></a><span data-ttu-id="af0d3-205">Continuazioni con "into"</span><span class="sxs-lookup"><span data-stu-id="af0d3-205">Continuations with "into"</span></span>  
 
 <span data-ttu-id="af0d3-206">È possibile usare la parola chiave `into` in una clausola `select` o `group` per creare un identificatore temporaneo che archivia una query.</span><span class="sxs-lookup"><span data-stu-id="af0d3-206">You can use the `into` keyword in a `select` or `group` clause to create a temporary identifier that stores a query.</span></span> <span data-ttu-id="af0d3-207">Eseguire questa operazione quando è necessario eseguire altre operazioni di query per una query dopo un'operazione di raggruppamento o selezione.</span><span class="sxs-lookup"><span data-stu-id="af0d3-207">Do this when you must perform additional query operations on a query after a grouping or select operation.</span></span> <span data-ttu-id="af0d3-208">Nell'esempio seguente `countries` indica i paesi raggruppati in base alla popolazione in intervalli di 10 milioni.</span><span class="sxs-lookup"><span data-stu-id="af0d3-208">In the following example `countries` are grouped according to population in ranges of 10 million.</span></span> <span data-ttu-id="af0d3-209">Dopo avere creato questi gruppi, le clausole aggiuntive escludono alcuni gruppi, quindi ordinano i gruppi in ordine crescente.</span><span class="sxs-lookup"><span data-stu-id="af0d3-209">After these groups are created, additional clauses filter out some groups, and then to sort the groups in ascending order.</span></span> <span data-ttu-id="af0d3-210">Per eseguire le operazioni aggiuntive, è richiesta la continuazione rappresentata da `countryGroup`.</span><span class="sxs-lookup"><span data-stu-id="af0d3-210">To perform those additional operations, the continuation represented by `countryGroup` is required.</span></span>  
  
 <span data-ttu-id="af0d3-211">[!code-cs[csrefQueryExpBasics#58](../../../samples/snippets/csharp/concepts/linq/query-expression-basics_14.cs)]</span><span class="sxs-lookup"><span data-stu-id="af0d3-211">[!code-cs[csrefQueryExpBasics#58](../../../samples/snippets/csharp/concepts/linq/query-expression-basics_14.cs)]</span></span>  
  
 <span data-ttu-id="af0d3-212">Per altre informazioni, vedere [into](../language-reference/keywords/into.md).</span><span class="sxs-lookup"><span data-stu-id="af0d3-212">For more information, see [into](../language-reference/keywords/into.md).</span></span>  
  
### <a name="filtering-ordering-and-joining"></a><span data-ttu-id="af0d3-213">Filtro, ordinamento e join</span><span class="sxs-lookup"><span data-stu-id="af0d3-213">Filtering, ordering, and joining</span></span>

 <span data-ttu-id="af0d3-214">Tra la clausola iniziale `from` e la clausola finale `select` o `group`, tutte le altre clausole (`where`, `join`, `orderby`, `from`, `let`) sono facoltative.</span><span class="sxs-lookup"><span data-stu-id="af0d3-214">Between the starting `from` clause, and the ending `select` or `group` clause, all other clauses (`where`, `join`, `orderby`, `from`, `let`) are optional.</span></span> <span data-ttu-id="af0d3-215">Qualsiasi clausola facoltativa può essere usata zero o più volte nel corpo di una query.</span><span class="sxs-lookup"><span data-stu-id="af0d3-215">Any of the optional clauses may be used zero times or multiple times in a query body.</span></span>  
  
#### <a name="where-clause"></a><span data-ttu-id="af0d3-216">Clausola where</span><span class="sxs-lookup"><span data-stu-id="af0d3-216">where clause</span></span>  

 <span data-ttu-id="af0d3-217">Usare la clausola `where` per escludere gli elementi dai dati di origine in base a una o più espressioni del predicato.</span><span class="sxs-lookup"><span data-stu-id="af0d3-217">Use the `where` clause to filter out elements from the source data based on one or more predicate expressions.</span></span> <span data-ttu-id="af0d3-218">La clausola `where` nell'esempio seguente include un predicato con due condizioni.</span><span class="sxs-lookup"><span data-stu-id="af0d3-218">The `where` clause in the following example has one predicate with two conditions.</span></span>  
  
 <span data-ttu-id="af0d3-219">[!code-cs[csrefQueryExpBasics#59](../../../samples/snippets/csharp/concepts/linq/query-expression-basics_15.cs)]</span><span class="sxs-lookup"><span data-stu-id="af0d3-219">[!code-cs[csrefQueryExpBasics#59](../../../samples/snippets/csharp/concepts/linq/query-expression-basics_15.cs)]</span></span>  
  
 <span data-ttu-id="af0d3-220">Per altre informazioni, vedere [Clausola where](../language-reference/keywords/where-clause.md).</span><span class="sxs-lookup"><span data-stu-id="af0d3-220">For more information, see [where clause](../language-reference/keywords/where-clause.md).</span></span>  
  
#### <a name="orderby-clause"></a><span data-ttu-id="af0d3-221">Clausola orderby</span><span class="sxs-lookup"><span data-stu-id="af0d3-221">orderby clause</span></span>

 <span data-ttu-id="af0d3-222">Usare la clausola `orderby` per ordinare i risultati in ordine crescente o decrescente.</span><span class="sxs-lookup"><span data-stu-id="af0d3-222">Use the `orderby` clause to sort the results in either ascending or descending order.</span></span> <span data-ttu-id="af0d3-223">È anche possibile specificare gli ordinamenti secondari.</span><span class="sxs-lookup"><span data-stu-id="af0d3-223">You can also specify secondary sort orders.</span></span> <span data-ttu-id="af0d3-224">Nell'esempio seguente viene eseguito un ordinamento primario per gli oggetti `country` usando la proprietà `Area`.</span><span class="sxs-lookup"><span data-stu-id="af0d3-224">The following example performs a primary sort on the `country` objects by using the `Area` property.</span></span> <span data-ttu-id="af0d3-225">Viene quindi eseguito un ordinamento secondario usando la proprietà `Population`.</span><span class="sxs-lookup"><span data-stu-id="af0d3-225">It then performs a secondary sort by using the `Population` property.</span></span>  
  
 <span data-ttu-id="af0d3-226">[!code-cs[csrefQueryExpBasics#60](../../../samples/snippets/csharp/concepts/linq/query-expression-basics_16.cs)]</span><span class="sxs-lookup"><span data-stu-id="af0d3-226">[!code-cs[csrefQueryExpBasics#60](../../../samples/snippets/csharp/concepts/linq/query-expression-basics_16.cs)]</span></span>  
  
 <span data-ttu-id="af0d3-227">La parola chiave `ascending` è facoltativa, ma consente l'ordinamento predefinito se non viene specificato alcun ordine.</span><span class="sxs-lookup"><span data-stu-id="af0d3-227">The `ascending` keyword is optional; it is the default sort order if no order is specified.</span></span> <span data-ttu-id="af0d3-228">Per altre informazioni, vedere [Clausola orderby](../language-reference/keywords/orderby-clause.md).</span><span class="sxs-lookup"><span data-stu-id="af0d3-228">For more information, see [orderby clause](../language-reference/keywords/orderby-clause.md).</span></span>  
  
#### <a name="join-clause"></a><span data-ttu-id="af0d3-229">Clausola join</span><span class="sxs-lookup"><span data-stu-id="af0d3-229">join clause</span></span>

 <span data-ttu-id="af0d3-230">Usare la clausola `join` per associare e/o combinare gli elementi di un'origine dati con gli elementi di un'altra origine dati in base a un confronto di uguaglianza tra le chiavi specificate in ogni elemento.</span><span class="sxs-lookup"><span data-stu-id="af0d3-230">Use the `join` clause to associate and/or combine elements from one data source with elements from another data source based on an equality comparison between specified keys in each element.</span></span> <span data-ttu-id="af0d3-231">In LINQ le operazioni di join vengono eseguite su sequenze di oggetti i cui elementi sono tipi diversi.</span><span class="sxs-lookup"><span data-stu-id="af0d3-231">In LINQ, join operations are performed on sequences of objects whose elements are different types.</span></span> <span data-ttu-id="af0d3-232">Dopo avere unito due sequenze, è necessario usare un'istruzione `select` o `group` per specificare l'elemento da archiviare nella sequenza di output.</span><span class="sxs-lookup"><span data-stu-id="af0d3-232">After you have joined two sequences, you must use a `select` or `group` statement to specify which element to store in the output sequence.</span></span> <span data-ttu-id="af0d3-233">È anche possibile usare un tipo anonimo per combinare le proprietà da ogni set di elementi associati in un nuovo tipo per la sequenza di output.</span><span class="sxs-lookup"><span data-stu-id="af0d3-233">You can also use an anonymous type to combine properties from each set of associated elements into a new type for the output sequence.</span></span> <span data-ttu-id="af0d3-234">L'esempio seguente associa oggetti `prod` la cui proprietà `Category` corrisponde a una delle categorie nella matrice di stringhe `categories`.</span><span class="sxs-lookup"><span data-stu-id="af0d3-234">The following example associates `prod` objects whose `Category` property matches one of the categories in the `categories` string array.</span></span> <span data-ttu-id="af0d3-235">I prodotti il cui valore `Category` non corrisponde a una delle stringhe in `categories` vengono esclusi.</span><span class="sxs-lookup"><span data-stu-id="af0d3-235">Products whose `Category` does not match any string in `categories` are filtered out.</span></span> <span data-ttu-id="af0d3-236">L'istruzione `select` proietta un nuovo tipo le cui proprietà sono accettate sia da `cat` che da `prod`.</span><span class="sxs-lookup"><span data-stu-id="af0d3-236">The `select` statement projects a new type whose properties are taken from both `cat` and `prod`.</span></span>  
  
 <span data-ttu-id="af0d3-237">[!code-cs[csrefQueryExpBasics#61](../../../samples/snippets/csharp/concepts/linq/query-expression-basics_17.cs)]</span><span class="sxs-lookup"><span data-stu-id="af0d3-237">[!code-cs[csrefQueryExpBasics#61](../../../samples/snippets/csharp/concepts/linq/query-expression-basics_17.cs)]</span></span>  
  
 <span data-ttu-id="af0d3-238">È anche possibile creare un join di gruppo archiviando i risultati dell'operazione `join` in una variabile temporanea usando la parola chiave [into](../language-reference/keywords/into.md).</span><span class="sxs-lookup"><span data-stu-id="af0d3-238">You can also perform a group join by storing the results of the `join` operation into a temporary variable by using the [into](../language-reference/keywords/into.md) keyword.</span></span> <span data-ttu-id="af0d3-239">Per altre informazioni, vedere [Clausola join](../language-reference/keywords/join-clause.md).</span><span class="sxs-lookup"><span data-stu-id="af0d3-239">For more information, see [join clause](../language-reference/keywords/join-clause.md).</span></span>  
  
#### <a name="let-clause"></a><span data-ttu-id="af0d3-240">Clausola let</span><span class="sxs-lookup"><span data-stu-id="af0d3-240">let clause</span></span> 

 <span data-ttu-id="af0d3-241">Usare la clausola `let` per archiviare il risultato di un'espressione, ad esempio una chiamata al metodo, in una nuova variabile di intervallo.</span><span class="sxs-lookup"><span data-stu-id="af0d3-241">Use the `let` clause to store the result of an expression, such as a method call, in a new range variable.</span></span> <span data-ttu-id="af0d3-242">Nell'esempio seguente la variabile di intervallo `firstName` archivia il primo elemento della matrice di stringhe restituita da `Split`.</span><span class="sxs-lookup"><span data-stu-id="af0d3-242">In the following example, the range variable `firstName` stores the first element of the array of strings that is returned by `Split`.</span></span>  
  
 <span data-ttu-id="af0d3-243">[!code-cs[csrefQueryExpBasics#62](../../../samples/snippets/csharp/concepts/linq/query-expression-basics_18.cs)]</span><span class="sxs-lookup"><span data-stu-id="af0d3-243">[!code-cs[csrefQueryExpBasics#62](../../../samples/snippets/csharp/concepts/linq/query-expression-basics_18.cs)]</span></span>  
  
 <span data-ttu-id="af0d3-244">Per altre informazioni, vedere [Clausola let](../language-reference/keywords/let-clause.md).</span><span class="sxs-lookup"><span data-stu-id="af0d3-244">For more information, see [let clause](../language-reference/keywords/let-clause.md).</span></span>  
  
### <a name="subqueries-in-a-query-expression"></a><span data-ttu-id="af0d3-245">Sottoquery in un'espressione di query</span><span class="sxs-lookup"><span data-stu-id="af0d3-245">Subqueries in a query expression</span></span>  

 <span data-ttu-id="af0d3-246">Una clausola di query può contenere un'espressione di query, a volte detta *sottoquery*.</span><span class="sxs-lookup"><span data-stu-id="af0d3-246">A query clause may itself contain a query expression, which is sometimes referred to as a *subquery*.</span></span> <span data-ttu-id="af0d3-247">Ogni sottoquery inizia con la propria clausola `from` che non fa necessariamente riferimento alla stessa origine dati nella prima clausola `from`.</span><span class="sxs-lookup"><span data-stu-id="af0d3-247">Each subquery starts with its own `from` clause that does not necessarily point to the same data source in the first `from` clause.</span></span> <span data-ttu-id="af0d3-248">Ad esempio, la query seguente rappresenta un'espressione di query usate nell'istruzione select per recuperare i risultati di un'operazione di raggruppamento.</span><span class="sxs-lookup"><span data-stu-id="af0d3-248">For example, the following query shows a query expression that is used in the select statement to retrieve the results of a grouping operation.</span></span>  
  
 <span data-ttu-id="af0d3-249">[!code-cs[csrefQueryExpBasics#63](../../../samples/snippets/csharp/concepts/linq/query-expression-basics_19.cs)]</span><span class="sxs-lookup"><span data-stu-id="af0d3-249">[!code-cs[csrefQueryExpBasics#63](../../../samples/snippets/csharp/concepts/linq/query-expression-basics_19.cs)]</span></span>  
  
 <span data-ttu-id="af0d3-250">Per altre informazioni, vedere [Procedura: Eseguire una sottoquery su un'operazione di raggruppamento](perform-a-subquery-on-a-grouping-operation.md).</span><span class="sxs-lookup"><span data-stu-id="af0d3-250">For more information, see [How to: perform a subquery on a grouping operation](perform-a-subquery-on-a-grouping-operation.md).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="af0d3-251">Vedere anche</span><span class="sxs-lookup"><span data-stu-id="af0d3-251">See Also</span></span>  
 <span data-ttu-id="af0d3-252">[Guida per programmatori C#](../programming-guide/index.md) </span><span class="sxs-lookup"><span data-stu-id="af0d3-252">[C# programming guide](../programming-guide/index.md) </span></span>  
 <span data-ttu-id="af0d3-253">[Espressioni di query LINQ](index.md) </span><span class="sxs-lookup"><span data-stu-id="af0d3-253">[LINQ query expressions](index.md) </span></span>  
 <span data-ttu-id="af0d3-254">[Parole chiave di query (LINQ)](../language-reference/keywords/query-keywords.md) </span><span class="sxs-lookup"><span data-stu-id="af0d3-254">[Query keywords (LINQ)](../language-reference/keywords/query-keywords.md) </span></span>  
 <span data-ttu-id="af0d3-255">[Standard query operators overview](../programming-guide/concepts/linq/standard-query-operators-overview.md) (Panoramica degli operatori di query standard)</span><span class="sxs-lookup"><span data-stu-id="af0d3-255">[Standard query operators overview](../programming-guide/concepts/linq/standard-query-operators-overview.md)</span></span>

