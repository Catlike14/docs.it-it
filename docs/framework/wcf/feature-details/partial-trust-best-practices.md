---
title: Procedure consigliate in ambienti parzialmente attendibili
ms.custom: 
ms.date: 03/30/2017
ms.prod: .net-framework
ms.reviewer: 
ms.suite: 
ms.technology: dotnet-clr
ms.tgt_pltfrm: 
ms.topic: article
ms.assetid: 0d052bc0-5b98-4c50-8bb5-270cc8a8b145
caps.latest.revision: "17"
author: dotnet-bot
ms.author: dotnetcontent
manager: wpickett
ms.workload: dotnet
ms.openlocfilehash: 817f7aeeb7adece1c375bb8b0cc455a17fb54185
ms.sourcegitcommit: 16186c34a957fdd52e5db7294f291f7530ac9d24
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 12/22/2017
---
# <a name="partial-trust-best-practices"></a><span data-ttu-id="4de18-102">Procedure consigliate in ambienti parzialmente attendibili</span><span class="sxs-lookup"><span data-stu-id="4de18-102">Partial Trust Best Practices</span></span>
<span data-ttu-id="4de18-103">In questo argomento vengono illustrate le procedure consigliate durante l'esecuzione di [!INCLUDE[indigo1](../../../../includes/indigo1-md.md)] in un ambiente parzialmente attendibile.</span><span class="sxs-lookup"><span data-stu-id="4de18-103">This topic describes best practices when running [!INCLUDE[indigo1](../../../../includes/indigo1-md.md)] in a partial trust environment.</span></span>  
  
## <a name="serialization"></a><span data-ttu-id="4de18-104">Serializzazione</span><span class="sxs-lookup"><span data-stu-id="4de18-104">Serialization</span></span>  
 <span data-ttu-id="4de18-105">Applicare le procedure seguenti quando si utilizza <xref:System.Runtime.Serialization.DataContractSerializer> in un'applicazione parzialmente attendibile.</span><span class="sxs-lookup"><span data-stu-id="4de18-105">Apply the following practices when using the <xref:System.Runtime.Serialization.DataContractSerializer> in a partially-trusted application.</span></span>  
  
-   <span data-ttu-id="4de18-106">Tutti i tipi serializzabili devono essere contrassegnati in modo esplicito con l'attributo `[DataContract]`.</span><span class="sxs-lookup"><span data-stu-id="4de18-106">All serializable types must be explicitly marked with the `[DataContract]` attribute.</span></span> <span data-ttu-id="4de18-107">Le tecniche seguenti non sono supportate in un ambiente parzialmente attendibile:</span><span class="sxs-lookup"><span data-stu-id="4de18-107">The following techniques are not supported in a partial trust environment:</span></span>  
  
-   <span data-ttu-id="4de18-108">Contrassegno delle classi da serializzare con <xref:System.SerializableAttribute>.</span><span class="sxs-lookup"><span data-stu-id="4de18-108">Marking classes to be serialized with the <xref:System.SerializableAttribute>.</span></span>  
  
-   <span data-ttu-id="4de18-109">Implementazione dell'interfaccia <xref:System.Runtime.Serialization.ISerializable> per consentire a una classe di controllare il suo processo di serializzazione.</span><span class="sxs-lookup"><span data-stu-id="4de18-109">Implementing the <xref:System.Runtime.Serialization.ISerializable> interface to allow a class to control its serialization process.</span></span>  
  
### <a name="using-datacontractserializer"></a><span data-ttu-id="4de18-110">Utilizzo di DataContractSerializer</span><span class="sxs-lookup"><span data-stu-id="4de18-110">Using DataContractSerializer</span></span>  
  
-   <span data-ttu-id="4de18-111">Tutti i tipi contrassegnati con l'attributo `[DataContract]` devono essere pubblici.</span><span class="sxs-lookup"><span data-stu-id="4de18-111">All types marked with the `[DataContract]` attribute must be public.</span></span> <span data-ttu-id="4de18-112">Impossibile serializzare tipi non pubblici in un ambiente parzialmente attendibile.</span><span class="sxs-lookup"><span data-stu-id="4de18-112">Non-public types cannot be serialized in a partial trust environment.</span></span>  
  
-   <span data-ttu-id="4de18-113">I membri `[DataContract]` in un tipo `[DataContract]` serializzabile devono essere pubblici.</span><span class="sxs-lookup"><span data-stu-id="4de18-113">All `[DataContract]` members in a serializable `[DataContract]` type must be public.</span></span> <span data-ttu-id="4de18-114">Un tipo con un `[DataMember]` non pubblico non può essere serializzato in un ambiente parzialmente attendibile.</span><span class="sxs-lookup"><span data-stu-id="4de18-114">A type with a non-public `[DataMember]` cannot be serialized in a partial trust environment.</span></span>  
  
-   <span data-ttu-id="4de18-115">I metodi che gestiscono eventi di serializzazione (ad esempio `OnSerializing`, `OnSerialized`, `OnDeserializing` e `OnDeserialized`) devono essere dichiarati pubblici.</span><span class="sxs-lookup"><span data-stu-id="4de18-115">Methods that handle serialization events (such as `OnSerializing`, `OnSerialized`, `OnDeserializing`, and `OnDeserialized`) must be declared as public.</span></span> <span data-ttu-id="4de18-116">Sono tuttavia supportate le implementazioni sia esplicite che implicite di <xref:System.Runtime.Serialization.IDeserializationCallback.OnDeserialization%28System.Object%29>.</span><span class="sxs-lookup"><span data-stu-id="4de18-116">However, both explicit and implicit implementations of <xref:System.Runtime.Serialization.IDeserializationCallback.OnDeserialization%28System.Object%29> are supported.</span></span>  
  
-   <span data-ttu-id="4de18-117">I tipi `[DataContract]` implementati in assembly contrassegnati con <xref:System.Security.AllowPartiallyTrustedCallersAttribute> non devono eseguire azioni correlate alla protezione nel costruttore del tipo, poiché <xref:System.Runtime.Serialization.DataContractSerializer> non chiama il costruttore dell'oggetto di cui è appena stata creata un'istanza durante la deserializzazione.</span><span class="sxs-lookup"><span data-stu-id="4de18-117">`[DataContract]` types implemented in assemblies marked with the <xref:System.Security.AllowPartiallyTrustedCallersAttribute> must not perform security-related actions in the type constructor, as the <xref:System.Runtime.Serialization.DataContractSerializer> does not call the constructor of the newly-instantiated object during deserialization.</span></span> <span data-ttu-id="4de18-118">In particolare, è necessario evitare le tecniche di sicurezza comuni seguenti per i tipi `[DataContract]`:</span><span class="sxs-lookup"><span data-stu-id="4de18-118">Specifically, the following common security techniques must be avoided for `[DataContract]` types:</span></span>  
  
-   <span data-ttu-id="4de18-119">Tentare di limitare l'accesso parzialmente attendibile rendendo interno o privato il costruttore del tipo.</span><span class="sxs-lookup"><span data-stu-id="4de18-119">Attempting to restrict partial trust access by making the type's constructor internal or private.</span></span>  
  
-   <span data-ttu-id="4de18-120">Limitare l'accesso al tipo aggiungendo un `[LinkDemand]` al costruttore del tipo.</span><span class="sxs-lookup"><span data-stu-id="4de18-120">Restricting access to the type by adding a `[LinkDemand]` to the type's constructor.</span></span>  
  
-   <span data-ttu-id="4de18-121">Dare per scontato che, dato che l'istanza dell'oggetto è stata creata correttamente, qualsiasi controllo di convalida applicato dal costruttore abbia avuto esito positivo.</span><span class="sxs-lookup"><span data-stu-id="4de18-121">Assuming that because the object has been successfully instantiated, any validation checks enforced by the constructor have passed successfully.</span></span>  
  
### <a name="using-ixmlserializable"></a><span data-ttu-id="4de18-122">Utilizzo di IXmlSerializable</span><span class="sxs-lookup"><span data-stu-id="4de18-122">Using IXmlSerializable</span></span>  
 <span data-ttu-id="4de18-123">Le procedure consigliate seguenti si applicano ai tipi che implementano <xref:System.Xml.Serialization.IXmlSerializable> e che vengono serializzati tramite <xref:System.Runtime.Serialization.DataContractSerializer>:</span><span class="sxs-lookup"><span data-stu-id="4de18-123">The following best practices apply for types that implement <xref:System.Xml.Serialization.IXmlSerializable> and are serialized using the <xref:System.Runtime.Serialization.DataContractSerializer>:</span></span>  
  
-   <span data-ttu-id="4de18-124">Le implementazioni del metodo statico <xref:System.Xml.Serialization.IXmlSerializable.GetSchema%2A> devono essere `public`.</span><span class="sxs-lookup"><span data-stu-id="4de18-124">The <xref:System.Xml.Serialization.IXmlSerializable.GetSchema%2A> static method implementations must be `public`.</span></span>  
  
-   <span data-ttu-id="4de18-125">I metodi di istanza che implementano l'interfaccia <xref:System.Xml.Serialization.IXmlSerializable> devono essere `public`.</span><span class="sxs-lookup"><span data-stu-id="4de18-125">The instance methods that implement the <xref:System.Xml.Serialization.IXmlSerializable> interface must be `public`.</span></span>  
  
## <a name="using-wcf-from-fully-trusted-platform-code-that-allows-calls-from-partially-trusted-callers"></a><span data-ttu-id="4de18-126">Utilizzo di WCF da codice della piattaforma completamente attendibile che consente chiamate da chiamanti parzialmente attendibili</span><span class="sxs-lookup"><span data-stu-id="4de18-126">Using WCF from Fully-Trusted Platform Code that Allows Calls from Partially Trusted Callers</span></span>  
 <span data-ttu-id="4de18-127">Nel modello di sicurezza parzialmente attendibile di [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] si presuppone che qualsiasi chiamante di una proprietà o un metodo pubblico di [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] sia in esecuzione nel contesto di sicurezza dall'accesso di codice (CAS, Code Access Security) dell'applicazione host.</span><span class="sxs-lookup"><span data-stu-id="4de18-127">The [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] partial trust security model assumes that any caller of a [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] public method or property is running in the code access security (CAS) context of the hosting application.</span></span> <span data-ttu-id="4de18-128">In [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] si presuppone inoltre che esista un solo contesto di sicurezza dell'applicazione per ogni <xref:System.AppDomain> e che questo contesto sia stabilito al momento della creazione di <xref:System.AppDomain> da un host attendibile (ad esempio, da una chiamata a <xref:System.AppDomain.CreateDomain%2A> o da Gestione applicazioni ASP.NET).</span><span class="sxs-lookup"><span data-stu-id="4de18-128">[!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] also assumes that only one application security context exists for each <xref:System.AppDomain>, and that this context is established at <xref:System.AppDomain> creation time by a trusted host (for example, by a call to <xref:System.AppDomain.CreateDomain%2A> or by the ASP.NET Application Manager).</span></span>  
  
 <span data-ttu-id="4de18-129">Questo modello di sicurezza si applica alle applicazioni scritte dall'utente che non possono richiedere autorizzazioni CAS aggiuntive, ad esempio codice utente in esecuzione in un'applicazione ASP.NET con un livello di attendibilità medio.</span><span class="sxs-lookup"><span data-stu-id="4de18-129">This security model applies to user-written applications that cannot assert additional CAS permissions, such as user code running in a Medium Trust ASP.NET application.</span></span> <span data-ttu-id="4de18-130">Tuttavia, per il codice della piattaforma completamente attendibile, ad esempio un assembly di terze parti installato nella Global Assembly Cache che accetta chiamate da codice parzialmente attendibile, occorre fare esplicitamente attenzione in caso di chiamata a [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] per conto di un'applicazione parzialmente attendibile al fine di evitare eventuali vulnerabilità della sicurezza a livello di applicazione.</span><span class="sxs-lookup"><span data-stu-id="4de18-130">However, fully-trusted platform code (for example, a third-party assembly that is installed in the global assembly cache and accepts calls from partially-trusted code) must take explicit care when calling into [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] on behalf of a partially-trusted application to avoid introducing application-level security vulnerabilities.</span></span>  
  
 <span data-ttu-id="4de18-131">Il codice di attendibilità totale deve evitare di modificare l'autorizzazione CAS impostata del thread corrente (chiamando <xref:System.Security.PermissionSet.Assert%2A>, <xref:System.Security.PermissionSet.PermitOnly%2A> o <xref:System.Security.PermissionSet.Deny%2A>) prima di chiamare API [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] per conto di codice parzialmente attendibile.</span><span class="sxs-lookup"><span data-stu-id="4de18-131">Full-trust code should avoid altering the CAS permission set of the current thread (by calling <xref:System.Security.PermissionSet.Assert%2A>, <xref:System.Security.PermissionSet.PermitOnly%2A>, or <xref:System.Security.PermissionSet.Deny%2A>) prior to calling [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] APIs on behalf of partially-trusted code.</span></span> <span data-ttu-id="4de18-132">L'asserzione, la negazione o la creazione di un contesto di autorizzazione specifico del thread che è indipendente dal contesto di sicurezza a livello di applicazione possono dare luogo a un comportamento imprevisto.</span><span class="sxs-lookup"><span data-stu-id="4de18-132">Asserting, denying, or otherwise creating a thread-specific permission context that is independent of the application-level security context can result in unexpected behavior.</span></span> <span data-ttu-id="4de18-133">A seconda dell'applicazione, questo comportamento può comportare vulnerabilità di sicurezza a livello di applicazione.</span><span class="sxs-lookup"><span data-stu-id="4de18-133">Depending on the application, this behavior may result in application-level security vulnerabilities.</span></span>  
  
 <span data-ttu-id="4de18-134">Il codice che effettua chiamate a [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] utilizzando un contesto di autorizzazione specifico del thread deve essere preparato a gestire le situazioni seguenti che possono presentarsi:</span><span class="sxs-lookup"><span data-stu-id="4de18-134">Code that calls into [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] using a thread-specific permission context must be prepared to handle the following situations that may arise:</span></span>  
  
-   <span data-ttu-id="4de18-135">Il contesto di sicurezza specifico del thread potrebbe non essere mantenuto per la durata dell'operazione, il che comporta potenziali eccezioni di sicurezza.</span><span class="sxs-lookup"><span data-stu-id="4de18-135">The thread-specific security context may not be maintained for the duration of the operation, which results in potential security exceptions.</span></span>  
  
-   <span data-ttu-id="4de18-136">Il codice interno di [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] così come qualsiasi callback fornito dall'utente potrebbero venire eseguiti in un contesto di sicurezza diverso da quello in cui è iniziata originariamente la chiamata.</span><span class="sxs-lookup"><span data-stu-id="4de18-136">Internal [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] code as well as any user-provided callbacks may run in a different security context than the one under which the call was originally initiated.</span></span> <span data-ttu-id="4de18-137">Questi contesti includono:</span><span class="sxs-lookup"><span data-stu-id="4de18-137">These contexts include:</span></span>  
  
    -   <span data-ttu-id="4de18-138">Il contesto di autorizzazione dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="4de18-138">The application permission context.</span></span>  
  
    -   <span data-ttu-id="4de18-139">Qualsiasi contesto di autorizzazione specifico del thread creato in precedenza da altri thread dell'utente utilizzato per eseguire chiamate a [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] nel corso della durata di <xref:System.AppDomain> attualmente in esecuzione.</span><span class="sxs-lookup"><span data-stu-id="4de18-139">Any thread-specific permission context previously created by other user threads used to call into [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] during the lifetime of the currently running <xref:System.AppDomain>.</span></span>  
  
 [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)]<span data-ttu-id="4de18-140"> garantisce che il codice parzialmente attendibile non possa ottenere autorizzazioni di attendibilità totale a meno che tali autorizzazioni non vengano asserite da un componente completamente attendibile prima di chiamare le API pubbliche di [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)].</span><span class="sxs-lookup"><span data-stu-id="4de18-140"> guarantees that partially-trusted code cannot obtain full-trust permissions unless such permissions are asserted by a fully-trusted component prior to calling into [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] public APIs.</span></span> <span data-ttu-id="4de18-141">Non garantisce, tuttavia, che gli effetti dell'asserzione di attendibilità totale siano isolati in un thread, operazione o azione dell'utente specifico.</span><span class="sxs-lookup"><span data-stu-id="4de18-141">However, it does not guarantee that the effects of asserting full trust is isolated to a particular thread, operation, or user action.</span></span>  
  
 <span data-ttu-id="4de18-142">Come procedura consigliata, evitare di creare un contesto di autorizzazione specifico del thread chiamando <xref:System.Security.PermissionSet.Assert%2A>, <xref:System.Security.PermissionSet.PermitOnly%2A> o <xref:System.Security.PermissionSet.Deny%2A>.</span><span class="sxs-lookup"><span data-stu-id="4de18-142">As a best practice, avoid creating thread-specific permission context by calling <xref:System.Security.PermissionSet.Assert%2A>, <xref:System.Security.PermissionSet.PermitOnly%2A>, or <xref:System.Security.PermissionSet.Deny%2A>.</span></span> <span data-ttu-id="4de18-143">In alternativa, concedere o negare il privilegio all'applicazione stessa, così che non sia necessario <xref:System.Security.PermissionSet.Assert%2A>, <xref:System.Security.PermissionSet.Deny%2A> o <xref:System.Security.PermissionSet.PermitOnly%2A>.</span><span class="sxs-lookup"><span data-stu-id="4de18-143">Instead, grant or deny the privilege to the application itself, so that no <xref:System.Security.PermissionSet.Assert%2A>, <xref:System.Security.PermissionSet.Deny%2A>, or <xref:System.Security.PermissionSet.PermitOnly%2A> is required.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="4de18-144">Vedere anche</span><span class="sxs-lookup"><span data-stu-id="4de18-144">See Also</span></span>  
 <xref:System.Runtime.Serialization.DataContractSerializer>  
 <xref:System.Xml.Serialization.IXmlSerializable>
