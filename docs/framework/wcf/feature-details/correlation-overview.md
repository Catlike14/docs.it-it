---
title: Panoramica della correlazione
ms.date: 03/30/2017
ms.assetid: edcc0315-5d26-44d6-a36d-ea554c418e9f
ms.openlocfilehash: bea561cdaecce028011803f2f4392d788dbe0002
ms.sourcegitcommit: 3d5d33f384eeba41b2dff79d096f47ccc8d8f03d
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 05/04/2018
ms.locfileid: "33493195"
---
# <a name="correlation-overview"></a><span data-ttu-id="469c3-102">Panoramica della correlazione</span><span class="sxs-lookup"><span data-stu-id="469c3-102">Correlation Overview</span></span>
<span data-ttu-id="469c3-103">La correlazione è il meccanismo che consente di correlare i messaggi del servizio flusso di lavoro l'uno all'altro o allo stato dell'istanza dell'applicazione, ad esempio una risposta a una richiesta iniziale o un particolare ID dell'ordine allo stato persistente di un flusso di lavoro di elaborazione di un ordine.</span><span class="sxs-lookup"><span data-stu-id="469c3-103">Correlation is the mechanism for relating workflow service messages to each other or to the application instance state, such as a reply to an initial request, or a particular order ID to the persisted state of an order-processing workflow.</span></span> <span data-ttu-id="469c3-104">In questo argomento vengono forniti cenni preliminari sulla correlazione.</span><span class="sxs-lookup"><span data-stu-id="469c3-104">This topic provides an overview of correlation.</span></span> <span data-ttu-id="469c3-105">Gli altri argomenti in questa sezione forniscono informazioni aggiuntive per ogni tipo di correlazione.</span><span class="sxs-lookup"><span data-stu-id="469c3-105">The other topics in this section provide additional information for each type of correlation.</span></span>  
  
## <a name="types-of-correlation"></a><span data-ttu-id="469c3-106">Tipi di correlazione</span><span class="sxs-lookup"><span data-stu-id="469c3-106">Types of Correlation</span></span>  
 <span data-ttu-id="469c3-107">La correlazione può essere basata sul protocollo o sul contenuto.</span><span class="sxs-lookup"><span data-stu-id="469c3-107">Correlation can be protocol-based or content-based.</span></span> <span data-ttu-id="469c3-108">Le correlazioni basate sul protocollo usano dati forniti dall'infrastruttura di recapito dei messaggi per fornire il mapping tra messaggi.</span><span class="sxs-lookup"><span data-stu-id="469c3-108">Protocol-based correlations use data provided by the message delivery infrastructure to provide the mapping between messages.</span></span> <span data-ttu-id="469c3-109">I messaggi correlati mediante la correlazione basata sul protocollo vengono correlati l'uno all'altro mediante un oggetto in memoria, ad esempio <xref:System.ServiceModel.Channels.RequestContext>, o per mezzo di un token fornito dal protocollo di trasporto.</span><span class="sxs-lookup"><span data-stu-id="469c3-109">Messages that are correlated using protocol-based correlation are related to each other using an object in memory, such as a <xref:System.ServiceModel.Channels.RequestContext>, or by a token provided by the transport protocol.</span></span> <span data-ttu-id="469c3-110">Le correlazioni basate sul contenuto correlano messaggi l'uno all'altro usando dati specificati dall'applicazione.</span><span class="sxs-lookup"><span data-stu-id="469c3-110">Content-based correlations relate messages to each other using application-specified data.</span></span> <span data-ttu-id="469c3-111">I messaggi correlati usando la correlazione basata sul contenuto vengono correlati l'uno all'altro per mezzo di alcuni dati definiti dall'applicazione nel messaggio, ad esempio un numero cliente.</span><span class="sxs-lookup"><span data-stu-id="469c3-111">Messages that are correlated using content-based correlation are related to each other by some application-defined data in the message, such as a customer number.</span></span>  
  
 <span data-ttu-id="469c3-112">Le attività che partecipano alla correlazione usano un elemento <xref:System.ServiceModel.Activities.CorrelationHandle> per associare le attività di messaggistica.</span><span class="sxs-lookup"><span data-stu-id="469c3-112">Activities that participate in correlation use a <xref:System.ServiceModel.Activities.CorrelationHandle> to tie the messaging activities together.</span></span> <span data-ttu-id="469c3-113">Un elemento <xref:System.ServiceModel.Activities.Send> usato per chiamare un servizio e un elemento <xref:System.ServiceModel.Activities.Receive> successivo usato per ricevere un callback dal servizio condividono ad esempio lo stesso elemento <xref:System.ServiceModel.Activities.CorrelationHandle>.</span><span class="sxs-lookup"><span data-stu-id="469c3-113">For example, a <xref:System.ServiceModel.Activities.Send> that is used to call a service and a subsequent <xref:System.ServiceModel.Activities.Receive> that is used to receive a callback from the service, share the same <xref:System.ServiceModel.Activities.CorrelationHandle>.</span></span> <span data-ttu-id="469c3-114">Questo modello di base viene usato se la correlazione è basata sul contenuto o sul protocollo.</span><span class="sxs-lookup"><span data-stu-id="469c3-114">This basic pattern is used whether the correlation is content based or protocol based.</span></span> <span data-ttu-id="469c3-115">È possibile impostare l'handle di correlazione in modo esplicito in ogni attività oppure le attività possono essere contenute in un'attività <xref:System.ServiceModel.Activities.CorrelationScope>.</span><span class="sxs-lookup"><span data-stu-id="469c3-115">The correlation handle can be explicitly set on each activity or the activities can be contained in a <xref:System.ServiceModel.Activities.CorrelationScope> activity.</span></span> <span data-ttu-id="469c3-116">Nelle attività contenute in un elemento <xref:System.ServiceModel.Activities.CorrelationScope> gli handle di correlazione vengono gestiti da <xref:System.ServiceModel.Activities.CorrelationScope> e non richiedono l'impostazione esplicita di <xref:System.ServiceModel.Activities.CorrelationHandle>.</span><span class="sxs-lookup"><span data-stu-id="469c3-116">Activities contained in a <xref:System.ServiceModel.Activities.CorrelationScope> have their correlation handles managed by the <xref:System.ServiceModel.Activities.CorrelationScope> and do not require the <xref:System.ServiceModel.Activities.CorrelationHandle> to be explicitly set.</span></span> <span data-ttu-id="469c3-117">Un ambito <xref:System.ServiceModel.Activities.CorrelationScope> fornisce la gestione di <xref:System.ServiceModel.Activities.CorrelationHandle> per una correlazione request/reply e un tipo di correlazione aggiuntivo.</span><span class="sxs-lookup"><span data-stu-id="469c3-117">A <xref:System.ServiceModel.Activities.CorrelationScope> scope provides <xref:System.ServiceModel.Activities.CorrelationHandle> management for a request-reply correlation and one additional correlation type.</span></span> <span data-ttu-id="469c3-118">I servizi flusso di lavoro ospitati mediante <xref:System.ServiceModel.Activities.WorkflowServiceHost> dispongono della stessa gestione di correlazione predefinita dell'attività <xref:System.ServiceModel.Activities.CorrelationScope>.</span><span class="sxs-lookup"><span data-stu-id="469c3-118">Workflow services hosted using <xref:System.ServiceModel.Activities.WorkflowServiceHost> have the same default correlation management as the <xref:System.ServiceModel.Activities.CorrelationScope> activity.</span></span> <span data-ttu-id="469c3-119">In genere con questa gestione di correlazione predefinita molti scenari, attività di messaggistica in un <xref:System.ServiceModel.Activities.CorrelationScope> o un servizio flusso di lavoro non richiedono l'impostazione del rispettivo elemento <xref:System.ServiceModel.Activities.CorrelationHandle>, a meno che più attività di messaggistica siano in parallelo o si sovrappongano, ad esempio due attività <xref:System.ServiceModel.Activities.Receive> in parallelo o due attività <xref:System.ServiceModel.Activities.Send> seguite da due attività <xref:System.ServiceModel.Activities.Receive>.</span><span class="sxs-lookup"><span data-stu-id="469c3-119">This default correlation management generally means that in many scenarios, messaging activities in a <xref:System.ServiceModel.Activities.CorrelationScope> or a workflow service do not require their <xref:System.ServiceModel.Activities.CorrelationHandle> set unless multiple messaging activities are in parallel or overlap, such as two <xref:System.ServiceModel.Activities.Receive> activities in parallel, or two <xref:System.ServiceModel.Activities.Send> activities followed by two <xref:System.ServiceModel.Activities.Receive> activities.</span></span> <span data-ttu-id="469c3-120">Negli argomenti di questa sezione che analizzano ogni tipo specifico di correlazione vengono fornite altre informazioni sulla correlazione predefinita.</span><span class="sxs-lookup"><span data-stu-id="469c3-120">More information about default correlation is provided in the topics in this section that cover each specific type of correlation.</span></span> <span data-ttu-id="469c3-121">Per ulteriori informazioni sulle attività di messaggistica vedere [attività di messaggistica](../../../../docs/framework/wcf/feature-details/messaging-activities.md) e [procedura: creare un servizio flusso di lavoro con attività di messaggistica](../../../../docs/framework/wcf/feature-details/how-to-create-a-workflow-service-with-messaging-activities.md).</span><span class="sxs-lookup"><span data-stu-id="469c3-121">For more information about messaging activities see [Messaging Activities](../../../../docs/framework/wcf/feature-details/messaging-activities.md) and [How to: Create a Workflow Service with Messaging Activities](../../../../docs/framework/wcf/feature-details/how-to-create-a-workflow-service-with-messaging-activities.md).</span></span>  
  
## <a name="protocol-based-correlation"></a><span data-ttu-id="469c3-122">Correlazione basata sul protocollo</span><span class="sxs-lookup"><span data-stu-id="469c3-122">Protocol-Based Correlation</span></span>  
 <span data-ttu-id="469c3-123">La correlazione basata sul protocollo usa il meccanismo di trasporto per correlare messaggi l'uno all'altro e all'istanza appropriata.</span><span class="sxs-lookup"><span data-stu-id="469c3-123">Protocol-based correlation uses the transport mechanism to relate messages to each other and the appropriate instance.</span></span> <span data-ttu-id="469c3-124">Alcune correlazioni basate sul protocollo fornite dal sistema includono la correlazione request/reply e la correlazione basata sul contesto.</span><span class="sxs-lookup"><span data-stu-id="469c3-124">Some system-provided protocol correlations include request-reply correlation and context-based correlation.</span></span> <span data-ttu-id="469c3-125">Una correlazione request/reply viene usata per correlare una singola coppia di attività di messaggistica per formare un'operazione bidirezionale, ad esempio un elemento <xref:System.ServiceModel.Activities.Send> accoppiato a un elemento <xref:System.ServiceModel.Activities.ReceiveReply> o un elemento <xref:System.ServiceModel.Activities.Receive> accoppiato a un elemento <xref:System.ServiceModel.Activities.SendReply>.</span><span class="sxs-lookup"><span data-stu-id="469c3-125">A request-reply correlation is used to correlate a single pair of messaging activities to form a two-way operation, such as a <xref:System.ServiceModel.Activities.Send> paired with a <xref:System.ServiceModel.Activities.ReceiveReply>, or a <xref:System.ServiceModel.Activities.Receive> paired with a <xref:System.ServiceModel.Activities.SendReply>.</span></span> <span data-ttu-id="469c3-126">Progettazione flussi di lavoro di [!INCLUDE[vs_current_long](../../../../includes/vs-current-long-md.md)] fornisce inoltre un set di modelli di attività per implementare in modo rapido questo modello.</span><span class="sxs-lookup"><span data-stu-id="469c3-126">The [!INCLUDE[vs_current_long](../../../../includes/vs-current-long-md.md)] Workflow Designer also provides a set of activity templates to quickly implement this pattern.</span></span> <span data-ttu-id="469c3-127">Una correlazione basata sul contesto dipende dal meccanismo di scambio di contesto nel [specifica del protocollo .NET contesto Exchange](http://go.microsoft.com/fwlink/?LinkID=166059).</span><span class="sxs-lookup"><span data-stu-id="469c3-127">A context-based correlation is based on the context exchange mechanism described in the [.NET Context Exchange Protocol Specification](http://go.microsoft.com/fwlink/?LinkID=166059).</span></span> <span data-ttu-id="469c3-128">Per usare la correlazione basata su contesto, è necessario usare un'associazione basata sul contesto, ad esempio <xref:System.ServiceModel.BasicHttpContextBinding>, <xref:System.ServiceModel.WSHttpContextBinding> o <xref:System.ServiceModel.NetTcpContextBinding> sull'endpoint.</span><span class="sxs-lookup"><span data-stu-id="469c3-128">To use context-based correlation, a context-based binding such as <xref:System.ServiceModel.BasicHttpContextBinding>, <xref:System.ServiceModel.WSHttpContextBinding> or <xref:System.ServiceModel.NetTcpContextBinding> must be used on the endpoint.</span></span>  
  
 <span data-ttu-id="469c3-129">Per ulteriori informazioni sulla correlazione del protocollo, vedere [lo scambio del contesto](../../../../docs/framework/wcf/feature-details/context-exchange-correlation.md), [Duplex durevole](../../../../docs/framework/wcf/feature-details/durable-duplex-correlation.md), e [Request/Reply](../../../../docs/framework/wcf/feature-details/request-reply-correlation.md).</span><span class="sxs-lookup"><span data-stu-id="469c3-129">For more information about protocol correlation, see [Context Exchange](../../../../docs/framework/wcf/feature-details/context-exchange-correlation.md), [Durable Duplex](../../../../docs/framework/wcf/feature-details/durable-duplex-correlation.md), and [Request-Reply](../../../../docs/framework/wcf/feature-details/request-reply-correlation.md).</span></span> <span data-ttu-id="469c3-130">Per ulteriori informazioni sull'utilizzo di [!INCLUDE[vs_current_long](../../../../includes/vs-current-long-md.md)] modelli di attività di progettazione flussi di lavoro, vedere [attività di messaggistica](../../../../docs/framework/wcf/feature-details/messaging-activities.md).</span><span class="sxs-lookup"><span data-stu-id="469c3-130">For more information about using the [!INCLUDE[vs_current_long](../../../../includes/vs-current-long-md.md)] Workflow Designer activity templates, see [Messaging Activities](../../../../docs/framework/wcf/feature-details/messaging-activities.md).</span></span> <span data-ttu-id="469c3-131">Per esempio di codice, vedere la [Duplex durevole &#91;esempi WF&#93; ](../../../../docs/framework/windows-workflow-foundation/samples/durable-duplex.md) e [NetContextExchangeCorrelation](http://msdn.microsoft.com/library/93c74a1a-b9e2-46c6-95c0-c9b0e9472caf) esempi.</span><span class="sxs-lookup"><span data-stu-id="469c3-131">For sample code, see the [Durable Duplex &#91;WF Samples&#93;](../../../../docs/framework/windows-workflow-foundation/samples/durable-duplex.md) and [NetContextExchangeCorrelation](http://msdn.microsoft.com/library/93c74a1a-b9e2-46c6-95c0-c9b0e9472caf) samples.</span></span>  
  
## <a name="content-based-correlation"></a><span data-ttu-id="469c3-132">Correlazione basata sul contenuto</span><span class="sxs-lookup"><span data-stu-id="469c3-132">Content-Based Correlation</span></span>  
 <span data-ttu-id="469c3-133">La correlazione basata sul contenuto usa alcune informazioni nel messaggio per associarlo a una particolare istanza.</span><span class="sxs-lookup"><span data-stu-id="469c3-133">Content-based correlation uses some piece of information in the message to associate it to a particular instance.</span></span> <span data-ttu-id="469c3-134">A differenza della correlazione basata sul protocollo, per la correlazione basata sul contenuto l'autore dell'applicazione deve dichiarare in modo esplicito il percorso in cui si trovano questi dati in ogni messaggio correlato.</span><span class="sxs-lookup"><span data-stu-id="469c3-134">Unlike protocol-based correlation, content-based correlation requires the application author to explicitly state where this data can be found in each related message.</span></span> <span data-ttu-id="469c3-135">Le attività che usano la correlazione basata sul contenuto specificano questi dati del messaggio tramite un elemento <xref:System.ServiceModel.MessageQuerySet>.</span><span class="sxs-lookup"><span data-stu-id="469c3-135">Activities that use content-based correlation specify this message data by using a <xref:System.ServiceModel.MessageQuerySet>.</span></span> <span data-ttu-id="469c3-136">La correlazione basata sul contenuto risulta utile in fase di comunicazione con i servizi che non usano una delle associazioni di contesto, ad esempio <xref:System.ServiceModel.BasicHttpContextBinding>.</span><span class="sxs-lookup"><span data-stu-id="469c3-136">Content-based correlation is useful when communicating with services that do not use one of the context bindings such as <xref:System.ServiceModel.BasicHttpContextBinding>.</span></span> <span data-ttu-id="469c3-137">Per ulteriori informazioni sulla correlazione basata sul contenuto, vedere [in base al contenuto](../../../../docs/framework/wcf/feature-details/content-based-correlation.md).</span><span class="sxs-lookup"><span data-stu-id="469c3-137">For more information about content-based correlation, see [Content Based](../../../../docs/framework/wcf/feature-details/content-based-correlation.md).</span></span> <span data-ttu-id="469c3-138">Per esempio di codice, vedere il [correlazione basata sul contenuto](../../../../docs/framework/windows-workflow-foundation/samples/content-based-correlation.md) e [calcolatrice correlata](../../../../docs/framework/windows-workflow-foundation/samples/correlated-calculator.md) esempi.</span><span class="sxs-lookup"><span data-stu-id="469c3-138">For sample code, see the [Content-Based Correlation](../../../../docs/framework/windows-workflow-foundation/samples/content-based-correlation.md) and [Correlated Calculator](../../../../docs/framework/windows-workflow-foundation/samples/correlated-calculator.md) samples.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="469c3-139">Vedere anche</span><span class="sxs-lookup"><span data-stu-id="469c3-139">See Also</span></span>  
 [<span data-ttu-id="469c3-140">Correlazione basata sul contenuto</span><span class="sxs-lookup"><span data-stu-id="469c3-140">Content-Based Correlation</span></span>](../../../../docs/framework/windows-workflow-foundation/samples/content-based-correlation.md)  
 [<span data-ttu-id="469c3-141">Calcolatrice correlata</span><span class="sxs-lookup"><span data-stu-id="469c3-141">Correlated Calculator</span></span>](../../../../docs/framework/windows-workflow-foundation/samples/correlated-calculator.md)  
 [<span data-ttu-id="469c3-142">Duplex durevole &#91;esempi WF&#93;</span><span class="sxs-lookup"><span data-stu-id="469c3-142">Durable Duplex &#91;WF Samples&#93;</span></span>](../../../../docs/framework/windows-workflow-foundation/samples/durable-duplex.md)  
 [<span data-ttu-id="469c3-143">NetContextExchangeCorrelation</span><span class="sxs-lookup"><span data-stu-id="469c3-143">NetContextExchangeCorrelation</span></span>](http://msdn.microsoft.com/library/93c74a1a-b9e2-46c6-95c0-c9b0e9472caf)
