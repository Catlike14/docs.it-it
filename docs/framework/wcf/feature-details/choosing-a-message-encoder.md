---
title: Scelta di un codificatore di messaggi
ms.custom: 
ms.date: 03/30/2017
ms.prod: .net-framework
ms.reviewer: 
ms.suite: 
ms.technology: dotnet-clr
ms.tgt_pltfrm: 
ms.topic: article
ms.assetid: 2204d82d-d962-4922-a79e-c9a231604f19
caps.latest.revision: "19"
author: Erikre
ms.author: erikre
manager: erikre
ms.openlocfilehash: 1d19a4e925fef7fa904b6f866719d593b93db6fa
ms.sourcegitcommit: bd1ef61f4bb794b25383d3d72e71041a5ced172e
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 10/18/2017
---
# <a name="choosing-a-message-encoder"></a><span data-ttu-id="53452-102">Scelta di un codificatore di messaggi</span><span class="sxs-lookup"><span data-stu-id="53452-102">Choosing a Message Encoder</span></span>
<span data-ttu-id="53452-103">In questo argomento vengono illustrati criteri per scegliere tra i codificatori di messaggi inclusi in [!INCLUDE[indigo1](../../../../includes/indigo1-md.md)]: binario, testo e MTOM (Message Transmission Optimization Mechanism).</span><span class="sxs-lookup"><span data-stu-id="53452-103">This topic discusses criteria for choosing among the message encoders that are included in [!INCLUDE[indigo1](../../../../includes/indigo1-md.md)]: binary, text, and Message Transmission Optimization Mechanism (MTOM).</span></span>  
  
 <span data-ttu-id="53452-104">In [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)], è possibile specificare come trasferire i dati attraverso una rete tra endpoint per mezzo di un *associazione*, che è costituito da una sequenza di *gli elementi di associazione*.</span><span class="sxs-lookup"><span data-stu-id="53452-104">In [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)], you specify how to transfer data across a network between endpoints by means of a *binding*, which is made up of a sequence of *binding elements*.</span></span> <span data-ttu-id="53452-105">Un codificatore di messaggi è rappresentato da un elemento di associazione di codifica dei messaggi nello stack dell'associazione.</span><span class="sxs-lookup"><span data-stu-id="53452-105">A message encoder is represented by a message encoding binding element in the binding stack.</span></span> <span data-ttu-id="53452-106">Un'associazione include elementi facoltativi binding del protocollo, ad esempio un elemento di associazione di sicurezza o un elemento di associazione di messaggistica affidabile, un elemento di associazione di codifica dei messaggi obbligatorio e un elemento di associazione di trasporto obbligatorio.</span><span class="sxs-lookup"><span data-stu-id="53452-106">A binding includes optional protocol binding elements, such as a security binding element or reliable messaging binding element, a required message encoding binding element, and a required transport binding element.</span></span>  
  
 <span data-ttu-id="53452-107">L'elemento di associazione di codifica dei messaggi si trova sotto gli elementi facoltativi binding del protocollo e sopra l'elemento associazione del trasporto obbligatorio.</span><span class="sxs-lookup"><span data-stu-id="53452-107">The message encoding binding element sits below the optional protocol binding elements and above the required transport binding element.</span></span> <span data-ttu-id="53452-108">Sul lato in uscita, un codificatore di messaggi serializza <xref:System.ServiceModel.Channels.Message> in uscita e lo passa al trasporto.</span><span class="sxs-lookup"><span data-stu-id="53452-108">On the outgoing side, a message encoder serializes the outgoing <xref:System.ServiceModel.Channels.Message> and passes it to the transport.</span></span> <span data-ttu-id="53452-109">Sul lato in ingresso, un codificatore di messaggi riceve il formato serializzato di un <xref:System.ServiceModel.Channels.Message> dal trasporto e lo passa al livello di protocollo superiore, se presente. In caso contrario, lo passa all'applicazione.</span><span class="sxs-lookup"><span data-stu-id="53452-109">On the incoming side, a message encoder receives the serialized form of a <xref:System.ServiceModel.Channels.Message> from the transport and passes it to the higher protocol layer, if present, or to the application, if not.</span></span>  
  
 <span data-ttu-id="53452-110">In caso di connessione a un client o a un server preesistente, potrebbe non essere possibile scegliere una particolare codifica dei messaggi dato che questi devono essere codificati come previsto dall'altro lato.</span><span class="sxs-lookup"><span data-stu-id="53452-110">When connecting to a pre-existing client or server, you may not have a choice about using a particular message encoding since you need to encode your messages in a way that the other side is expecting.</span></span> <span data-ttu-id="53452-111">Se, tuttavia, si sta scrivendo un servizio [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)], è possibile esporlo tramite più endpoint, ognuno dei quali utilizza una diversa codifica dei messaggi.</span><span class="sxs-lookup"><span data-stu-id="53452-111">However, if you are writing an [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] service, you can expose your service through multiple endpoints, each using a different message encoding.</span></span> <span data-ttu-id="53452-112">In tal modo i client possono scegliere la migliore codifica per conversare con il servizio sull'endpoint, e possono avere la flessibilità di scegliere la migliore codifica per se stessi.</span><span class="sxs-lookup"><span data-stu-id="53452-112">This allows clients to choose the best encoding for talking to your service over the endpoint that is best for them, as well as giving your clients the flexibility to choose the encoding that is best for them.</span></span> <span data-ttu-id="53452-113">L'utilizzo di più endpoint consente anche di combinare i vantaggi di codifiche del messaggio diverse con altri elementi di associazione.</span><span class="sxs-lookup"><span data-stu-id="53452-113">Using multiple endpoints also allows you to combine the advantages of different message encodings with other binding elements.</span></span>  
  
## <a name="system-provided-encoders"></a><span data-ttu-id="53452-114">Codificatori forniti dal sistema</span><span class="sxs-lookup"><span data-stu-id="53452-114">System-Provided Encoders</span></span>  
 [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)]<span data-ttu-id="53452-115"> include tre codificatori di messaggi, rappresentati dalle tre classi seguenti:</span><span class="sxs-lookup"><span data-stu-id="53452-115"> includes three message encoders, which are represented by the following three classes:</span></span>  
  
-   <span data-ttu-id="53452-116"><xref:System.ServiceModel.Channels.TextMessageEncodingBindingElement>, il codificatore dei messaggi di testo, supporta codifica XML semplice e codifica SOAP.</span><span class="sxs-lookup"><span data-stu-id="53452-116"><xref:System.ServiceModel.Channels.TextMessageEncodingBindingElement>, the text message encoder, supports both plain XML encoding and SOAP encoding.</span></span> <span data-ttu-id="53452-117">La modalità di codifica XML semplice del codificatore dei messaggi di testo è chiamata POX (Plain Old XML) per distinguerla dalla codifica SOAP basata su testo.</span><span class="sxs-lookup"><span data-stu-id="53452-117">The plain XML encoding mode of the text message encoder is called "plain old XML" (POX) to distinguish it from text-based SOAP encoding.</span></span> <span data-ttu-id="53452-118">Per abilitare POX, impostare la proprietà <xref:System.ServiceModel.Channels.TextMessageEncodingBindingElement.MessageVersion%2A> su <xref:System.ServiceModel.Channels.MessageVersion.None%2A>.</span><span class="sxs-lookup"><span data-stu-id="53452-118">To enable POX, set the <xref:System.ServiceModel.Channels.TextMessageEncodingBindingElement.MessageVersion%2A> property to <xref:System.ServiceModel.Channels.MessageVersion.None%2A>.</span></span> <span data-ttu-id="53452-119">Utilizzare il codificatore dei messaggi di testo per interoperare con endpoint non [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)].</span><span class="sxs-lookup"><span data-stu-id="53452-119">Use the text message encoder to interoperate with non-[!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] endpoints.</span></span>  
  
-   <span data-ttu-id="53452-120"><xref:System.ServiceModel.Channels.BinaryMessageEncodingBindingElement>, il codificatore di messaggi binario, utilizza un formato binario compresso ed è ottimizzato per le comunicazioni tra [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] e [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)], pertanto non è interoperativo.</span><span class="sxs-lookup"><span data-stu-id="53452-120"><xref:System.ServiceModel.Channels.BinaryMessageEncodingBindingElement>, the binary message encoder, uses a compact binary format and is optimized for [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] to [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] communication, and hence is not interoperable.</span></span> <span data-ttu-id="53452-121">Questo è anche il codificatore più efficiente tra tutti quelli forniti da [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)].</span><span class="sxs-lookup"><span data-stu-id="53452-121">This is also the most performant encoder of all the encoders [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] provides.</span></span>  
  
-   <span data-ttu-id="53452-122"><<!--zz xref:System.ServiceModel.Channels.MTOMMessageEncodingBindingElement -->`System.ServiceModel.Channels.MTOMMessageEncodingBindingElement`>, l'elemento di associazione, specifica la codifica dei caratteri e versione dei messaggi per i messaggi con codifica MTOM.</span><span class="sxs-lookup"><span data-stu-id="53452-122"><<!--zz xref:System.ServiceModel.Channels.MTOMMessageEncodingBindingElement --> `System.ServiceModel.Channels.MTOMMessageEncodingBindingElement`>, the binding element, specifies the character encoding and message versioning for messages using MTOM encoding.</span></span> <span data-ttu-id="53452-123">MTOM è una tecnologia efficiente per trasmettere dati binari nei messaggi [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)].</span><span class="sxs-lookup"><span data-stu-id="53452-123">MTOM is an efficient technology for transmitting binary data in [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] messages.</span></span> <span data-ttu-id="53452-124">Il codificatore MTOM cerca di creare un equilibrio tra efficienza e interoperabilità.</span><span class="sxs-lookup"><span data-stu-id="53452-124">The MTOM encoder attempts to create a balance between efficiency and interoperability.</span></span> <span data-ttu-id="53452-125">La codifica MTOM trasmette la maggior parte del codice XML in formato testo, ma ottimizza grandi blocchi di dati binari trasmettendoli senza introdurre modifiche e senza convertirli in formato testo.</span><span class="sxs-lookup"><span data-stu-id="53452-125">The MTOM encoding transmits most XML in textual form, but optimizes large blocks of binary data by transmitting them as-is, without conversion to text.</span></span> <span data-ttu-id="53452-126">In termini di efficienza, tra i codificatori forniti da [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)], MTOM si situa tra quello di testo (il più lento) e quello binario (il più veloce).</span><span class="sxs-lookup"><span data-stu-id="53452-126">In terms of efficiency, among the encoders [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] provides, MTOM is in-between text (the slowest) and binary (the fastest).</span></span>  
  
## <a name="how-to-choose-a-message-encoder"></a><span data-ttu-id="53452-127">Come scegliere un codificatore di messaggi</span><span class="sxs-lookup"><span data-stu-id="53452-127">How to Choose a Message Encoder</span></span>  
 <span data-ttu-id="53452-128">Nella tabella seguente vengono descritti i fattori comuni utilizzati per scegliere un codificatore di messaggi.</span><span class="sxs-lookup"><span data-stu-id="53452-128">The following table describes common factors used to choose a message encoder.</span></span> <span data-ttu-id="53452-129">Dare la priorità ai fattori che sono importanti per l'applicazione, quindi scegliere i codificatori più efficienti per tali fattori.</span><span class="sxs-lookup"><span data-stu-id="53452-129">Prioritize the factors that are important for your application, and then choose the message encoders that work best with these factors.</span></span> <span data-ttu-id="53452-130">Tenere anche conto di eventuali fattori aggiuntivi non elencati in questa tabella e qualsiasi codificatore di messaggi personalizzato che può essere richiesto nell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="53452-130">Be sure to consider any additional factors not listed in this table and any custom message encoders that may be required in your application.</span></span>  
  
|<span data-ttu-id="53452-131">Fattore</span><span class="sxs-lookup"><span data-stu-id="53452-131">Factor</span></span>|<span data-ttu-id="53452-132">Descrizione</span><span class="sxs-lookup"><span data-stu-id="53452-132">Description</span></span>|<span data-ttu-id="53452-133">Codificatori che supportano questo fattore</span><span class="sxs-lookup"><span data-stu-id="53452-133">Encoders that support this factor</span></span>|  
|------------|-----------------|---------------------------------------|  
|<span data-ttu-id="53452-134">Set di caratteri supportati</span><span class="sxs-lookup"><span data-stu-id="53452-134">Supported Character Sets</span></span>|<span data-ttu-id="53452-135"><xref:System.ServiceModel.Channels.TextMessageEncodingBindingElement>e <<!--zz xref:System.ServiceModel.Channels.MTOMMessageEncodingBindingElement --> `System.ServiceModel.Channels.MTOMMessageEncodingBindingElement`> supporta solo il Unicode UTF8 e UTF16 (*big-endian* e *little-endian*) codifiche.</span><span class="sxs-lookup"><span data-stu-id="53452-135"><xref:System.ServiceModel.Channels.TextMessageEncodingBindingElement> and <<!--zz xref:System.ServiceModel.Channels.MTOMMessageEncodingBindingElement --> `System.ServiceModel.Channels.MTOMMessageEncodingBindingElement`> support only the UTF8 and UTF16 Unicode (*big-endian* and *little-endian*) encodings.</span></span> <span data-ttu-id="53452-136">Se sono richieste altre codifiche, ad esempio UTF7 o ASCII, deve essere utilizzato un codificatore personalizzato.</span><span class="sxs-lookup"><span data-stu-id="53452-136">If other encodings are required, such as UTF7 or ASCII, a custom encoder must be used.</span></span> <span data-ttu-id="53452-137">Per un codificatore personalizzato di esempio, vedere [codificatore di messaggi personalizzato](http://go.microsoft.com/fwlink/?LinkId=119857).</span><span class="sxs-lookup"><span data-stu-id="53452-137">For a sample custom encoder, see [Custom Message Encoder](http://go.microsoft.com/fwlink/?LinkId=119857).</span></span>|<span data-ttu-id="53452-138">Testo</span><span class="sxs-lookup"><span data-stu-id="53452-138">Text</span></span>|  
|<span data-ttu-id="53452-139">Ispezione</span><span class="sxs-lookup"><span data-stu-id="53452-139">Inspection</span></span>|<span data-ttu-id="53452-140">L'ispezione è la capacità di esaminare i messaggi durante la trasmissione.</span><span class="sxs-lookup"><span data-stu-id="53452-140">Inspection is the ability to examine messages during transmission.</span></span> <span data-ttu-id="53452-141">Le codifiche di testo, con o senza l'utilizzo di SOAP, consentono a numerose applicazioni di ispezionare e analizzare i messaggi senza utilizzare strumenti specializzati.</span><span class="sxs-lookup"><span data-stu-id="53452-141">Text encodings, either with or without the use of SOAP, allow messages to be inspected and analyzed by many applications without the use of specialized tools.</span></span> <span data-ttu-id="53452-142">Si noti che l'utilizzo della sicurezza del trasferimento, a livello di messaggio o di trasporto, influisce sulla capacità di ispezionare i messaggi.</span><span class="sxs-lookup"><span data-stu-id="53452-142">Note that the use of transfer security, at either the message or transport level, affects your ability to inspect messages.</span></span> <span data-ttu-id="53452-143">La riservatezza evita che un messaggio venga esaminato, mentre l'integrità lo protegge dalle modifiche.</span><span class="sxs-lookup"><span data-stu-id="53452-143">Confidentiality protects a message from being examined and integrity protects a message from being modified.</span></span>|<span data-ttu-id="53452-144">Testo</span><span class="sxs-lookup"><span data-stu-id="53452-144">Text</span></span>|  
|<span data-ttu-id="53452-145">Affidabilità</span><span class="sxs-lookup"><span data-stu-id="53452-145">Reliability</span></span>|<span data-ttu-id="53452-146">L'affidabilità è la flessibilità di un codificatore nei confronti degli errori di trasmissione.</span><span class="sxs-lookup"><span data-stu-id="53452-146">Reliability is the resiliency of an encoder to transmission errors.</span></span> <span data-ttu-id="53452-147">L'affidabilità può essere fornita anche a livello di messaggio, trasporto o applicazione.</span><span class="sxs-lookup"><span data-stu-id="53452-147">Reliability can also be provided at the message, transport, or application layer.</span></span> <span data-ttu-id="53452-148">Tutti i codificatori [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] standard presumono che un altro livello stia fornendo l'affidabilità.</span><span class="sxs-lookup"><span data-stu-id="53452-148">All of the standard [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] encoders assume that another layer is providing reliability.</span></span> <span data-ttu-id="53452-149">Il codificatore non ha grandi capacità di recupero da un errore di trasmissione.</span><span class="sxs-lookup"><span data-stu-id="53452-149">The encoder has little ability to recover from a transmission error.</span></span>|<span data-ttu-id="53452-150">None</span><span class="sxs-lookup"><span data-stu-id="53452-150">None</span></span>|  
|<span data-ttu-id="53452-151">Semplicità</span><span class="sxs-lookup"><span data-stu-id="53452-151">Simplicity</span></span>|<span data-ttu-id="53452-152">La semplicità rappresenta la facilità con cui è possibile creare codificatori e decodificatori per una specifica di codifica.</span><span class="sxs-lookup"><span data-stu-id="53452-152">Simplicity represents the ease with which you can create encoders and decoders for an encoding specification.</span></span> <span data-ttu-id="53452-153">Le codifiche di testo sono particolarmente vantaggiose per la semplicità. La codifica di testo POX, inoltre, ha anche il vantaggio che non richiede supporto per l'elaborazione di SOAP.</span><span class="sxs-lookup"><span data-stu-id="53452-153">Text encodings are particularly advantageous for simplicity, and the POX text encoding has the additional advantage of not requiring support for processing SOAP.</span></span>|<span data-ttu-id="53452-154">Testo (POX)</span><span class="sxs-lookup"><span data-stu-id="53452-154">Text (POX)</span></span>|  
|<span data-ttu-id="53452-155">Dimensioni</span><span class="sxs-lookup"><span data-stu-id="53452-155">Size</span></span>|<span data-ttu-id="53452-156">La codifica determina la quantità di sovraccarico imposto sul contenuto.</span><span class="sxs-lookup"><span data-stu-id="53452-156">The encoding determines the amount of overhead imposed on content.</span></span> <span data-ttu-id="53452-157">La dimensione dei messaggi codificati è direttamente correlata alla velocità effettiva massima delle operazioni del servizio.</span><span class="sxs-lookup"><span data-stu-id="53452-157">The size of encoded messages is directly related to the maximum throughput of service operations.</span></span> <span data-ttu-id="53452-158">Le codifiche binarie in genere sono più compatte di quelle di testo.</span><span class="sxs-lookup"><span data-stu-id="53452-158">Binary encodings are generally more compact than text encodings.</span></span> <span data-ttu-id="53452-159">Quando la dimensione del messaggio è importante, prendere in considerazione anche la compressione del contenuto del messaggio durante la codifica.</span><span class="sxs-lookup"><span data-stu-id="53452-159">When message size is at a premium, consider also compressing the message contents during encoding.</span></span> <span data-ttu-id="53452-160">La compressione aumenta tuttavia gli oneri di elaborazione sia per il mittente che per il destinatario del messaggio.</span><span class="sxs-lookup"><span data-stu-id="53452-160">However, compression adds processing costs for both the message sender and receiver.</span></span>|<span data-ttu-id="53452-161">Binario</span><span class="sxs-lookup"><span data-stu-id="53452-161">Binary</span></span>|  
|<span data-ttu-id="53452-162">Flusso</span><span class="sxs-lookup"><span data-stu-id="53452-162">Streaming</span></span>|<span data-ttu-id="53452-163">Il flusso consente alle applicazioni di iniziare a elaborare un messaggio prima che sia arrivato tutto.</span><span class="sxs-lookup"><span data-stu-id="53452-163">Streaming allows applications to begin processing a message before the entire message has arrived.</span></span> <span data-ttu-id="53452-164">Per utilizzare in modo efficiente un flusso, è necessario che i dati importanti di un messaggio siano disponibili all'inizio del messaggio, affinché l'applicazione ricevente non debba attenderne l'arrivo.</span><span class="sxs-lookup"><span data-stu-id="53452-164">Effectively using streaming requires that the important data for a message be available at the beginning of the message so that the receiving application is not required to wait for it to arrive.</span></span> <span data-ttu-id="53452-165">Le applicazioni che utilizzano il trasferimento tramite flussi, inoltre, devono organizzare i dati nel messaggio in modo incrementale affinché il contenuto non abbia dipendenze in avanti.</span><span class="sxs-lookup"><span data-stu-id="53452-165">Moreover, applications that use streamed transfer must organize data in the message incrementally so that the content does not have forward dependencies.</span></span> <span data-ttu-id="53452-166">In molti casi, è necessario trovare un compromesso tra l'utilizzo di un flusso e la riduzione massima delle dimensioni di trasferimento di quel contenuto.</span><span class="sxs-lookup"><span data-stu-id="53452-166">In many cases, you must compromise between streaming content and having the smallest possible transfer size for that content.</span></span>|<span data-ttu-id="53452-167">None</span><span class="sxs-lookup"><span data-stu-id="53452-167">None</span></span>|  
|<span data-ttu-id="53452-168">Supporto di strumenti di terze parti</span><span class="sxs-lookup"><span data-stu-id="53452-168">3rd Party Tool Support</span></span>|<span data-ttu-id="53452-169">Le aree di supporto per una codifica comprendono sviluppo e diagnosi.</span><span class="sxs-lookup"><span data-stu-id="53452-169">Support areas for an encoding include development and diagnosis.</span></span> <span data-ttu-id="53452-170">Gli sviluppatori di terze parti hanno investito massicciamente in librerie e toolkit per la gestione dei messaggi codificati nel formato POX.</span><span class="sxs-lookup"><span data-stu-id="53452-170">Third-party developers have made a large investment in libraries and toolkits for handling messages encoded in the POX format.</span></span>|<span data-ttu-id="53452-171">Testo (POX)</span><span class="sxs-lookup"><span data-stu-id="53452-171">Text (POX)</span></span>|  
|<span data-ttu-id="53452-172">Interoperabilità</span><span class="sxs-lookup"><span data-stu-id="53452-172">Interoperability</span></span>|<span data-ttu-id="53452-173">Questo fattore si riferisce alla capacità di un codificatore [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] di interoperare con servizi non [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)].</span><span class="sxs-lookup"><span data-stu-id="53452-173">This factor refers to the ability of a [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] encoder to interoperate with non-[!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] services.</span></span>|<span data-ttu-id="53452-174">Testo</span><span class="sxs-lookup"><span data-stu-id="53452-174">Text</span></span><br /><br /> <span data-ttu-id="53452-175">MTOM (parziale)</span><span class="sxs-lookup"><span data-stu-id="53452-175">MTOM (partial)</span></span>|  
  
<span data-ttu-id="53452-176">Nota: quando si utilizza il codificatore binario, l'utilizzo dell'impostazione IgnoreWhitespace durante la creazione di un elemento XMLReader non avrà effetto.</span><span class="sxs-lookup"><span data-stu-id="53452-176">Note: When using the Binary Encoder, using the IgnoreWhitespace setting when creating a XMLReader will have no effect.</span></span>  <span data-ttu-id="53452-177">Ad esempio, se si effettua quanto riportato di seguito in un'operazione del servizio:</span><span class="sxs-lookup"><span data-stu-id="53452-177">For example, if you do the following inside a service operation:</span></span>  

```csharp
public void OperationContract(XElement input)
{
    Console.WriteLine("{0}", input.Value);
    int counter = 0;
    var xreader = input.CreateReader();
    var reader = XmlReader.Create(xreader, new XmlReaderSettings() { IgnoreWhitespace = true });
    while (reader.Read())
    {
        counter++;
    }

    Console.WriteLine("Read {0} lines with reader", counter);
}
```  
  
<span data-ttu-id="53452-178">L'impostazione IgnoreWhitespace viene ignorata.</span><span class="sxs-lookup"><span data-stu-id="53452-178">The IgnoreWhitespace setting is ignored.</span></span>  
  
## <a name="compression-and-the-binary-encoder"></a><span data-ttu-id="53452-179">Compressione e codificatore binario</span><span class="sxs-lookup"><span data-stu-id="53452-179">Compression and the Binary Encoder</span></span>

<span data-ttu-id="53452-180">A partire da WCF 4.5, il codificatore binario WCF aggiunge il supporto per la compressione.</span><span class="sxs-lookup"><span data-stu-id="53452-180">Beginning with WCF 4.5 the WCF binary encoder adds support for compression.</span></span> <span data-ttu-id="53452-181">Questo consente di utilizzare l'algoritmo gzip/deflate per inviare messaggi compressi da un client WCF, nonché rispondere con messaggi compressi da un servizio WCF self-hosted.</span><span class="sxs-lookup"><span data-stu-id="53452-181">This enables you to use the gzip/deflate algorithm for sending compressed messages from a WCF client and also respond with compressed messages from a self-hosted WCF service.</span></span> <span data-ttu-id="53452-182">Questa funzionalità consente la compressione sui trasporti TCP e HTTP.</span><span class="sxs-lookup"><span data-stu-id="53452-182">This feature enables compression on both the HTTP and TCP transports.</span></span> <span data-ttu-id="53452-183">Un servizio WCF ospitato da IIS può sempre essere abilitato per l'invio di risposte compresse configurando il server host di IIS.</span><span class="sxs-lookup"><span data-stu-id="53452-183">An IIS hosted WCF service can always be enabled for sending compressed responses by configuring the IIS host server.</span></span> <span data-ttu-id="53452-184">Il tipo di compressione è configurato con la proprietà <xref:System.ServiceModel.Channels.BinaryMessageEncodingBindingElement.CompressionFormat%2A?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="53452-184">The type of compression is configured with the <xref:System.ServiceModel.Channels.BinaryMessageEncodingBindingElement.CompressionFormat%2A?displayProperty=nameWithType> property.</span></span> <span data-ttu-id="53452-185">Questa proprietà è impostata su uno dei valori dell'enumerazione <xref:System.ServiceModel.Channels.CompressionFormat?displayProperty=nameWithType>:</span><span class="sxs-lookup"><span data-stu-id="53452-185">This property is set to one of the <xref:System.ServiceModel.Channels.CompressionFormat?displayProperty=nameWithType> enum values:</span></span>

* `CompressionFormat.Deflate`
* `CompressionFormat.GZip`
* `CompressionFormat.None`
  
<span data-ttu-id="53452-186">Poiché questa proprietà viene esposta solo su binaryMessageEncodingBindingElement, sarà necessario creare un'associazione personalizzata simile al seguente per utilizzare questa funzionalità:</span><span class="sxs-lookup"><span data-stu-id="53452-186">Since this property is only exposed on the binaryMessageEncodingBindingElement, you will need to create a custom binding like the following to use this feature:</span></span>

 ```xml
 <customBinding>
   <binding name="BinaryCompressionBinding">
     <binaryMessageEncoding compressionFormat ="GZip" />
     <httpTransport />
  </binding>
</customBinding>
 ```

<span data-ttu-id="53452-187">Sia il client e il servizio è necessario accettare per inviare e ricevere messaggi compressi e pertanto la proprietà compressionFormat deve essere configurata sull'elemento binaryMessageEncoding sul client e servizio.</span><span class="sxs-lookup"><span data-stu-id="53452-187">Both the client and the service need to agree to send and receive compressed messages and therefore the compressionFormat property must be configured on the binaryMessageEncoding element on both client and service.</span></span> <span data-ttu-id="53452-188">Viene generata un'eccezione ProtocolException se per la compressione è configurato un solo lato, vale a dire o il servizio o il client. Pertanto, è necessario considerare con attenzione l'abilitazione della compressione.</span><span class="sxs-lookup"><span data-stu-id="53452-188">A ProtocolException is thrown if either the service or client is not configured for compression but the other side is.Enabling compression should be carefully considered.</span></span> <span data-ttu-id="53452-189">La compressione è particolarmente utile se la larghezza di banda della rete costituisce un collo di bottiglia.</span><span class="sxs-lookup"><span data-stu-id="53452-189">Compression is mostly useful if network bandwidth is a bottleneck.</span></span> <span data-ttu-id="53452-190">Nel caso in cui la CPU sia un collo di bottiglia, la compressione diminuirà la velocità effettiva.</span><span class="sxs-lookup"><span data-stu-id="53452-190">In the case where the CPU is the bottleneck, compression will decrease throughput.</span></span> <span data-ttu-id="53452-191">È necessario effettuare prove appropriate in un ambiente simulato per verificare eventuali vantaggi per l'applicazione</span><span class="sxs-lookup"><span data-stu-id="53452-191">Appropriate testing must be done in a simulated environment to find out if this benefits the application</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="53452-192">Vedere anche</span><span class="sxs-lookup"><span data-stu-id="53452-192">See Also</span></span>

[<span data-ttu-id="53452-193">Associazioni</span><span class="sxs-lookup"><span data-stu-id="53452-193">Bindings</span></span>](../../../../docs/framework/wcf/feature-details/bindings.md)
