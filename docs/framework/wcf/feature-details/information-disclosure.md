---
title: Diffusione di informazioni
ms.custom: ''
ms.date: 03/30/2017
ms.prod: .net-framework
ms.reviewer: ''
ms.suite: ''
ms.technology:
- dotnet-clr
ms.tgt_pltfrm: ''
ms.topic: article
ms.assetid: 4064c89f-afa6-444a-aa7e-807ef072131c
caps.latest.revision: 11
author: dotnet-bot
ms.author: dotnetcontent
manager: wpickett
ms.workload:
- dotnet
ms.openlocfilehash: c603032e175fd8390abea2db625321d3e3558c1a
ms.sourcegitcommit: 03ee570f6f528a7d23a4221dcb26a9498edbdf8c
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 04/28/2018
---
# <a name="information-disclosure"></a><span data-ttu-id="4f61a-102">Diffusione di informazioni</span><span class="sxs-lookup"><span data-stu-id="4f61a-102">Information Disclosure</span></span>
<span data-ttu-id="4f61a-103">La diffusione di informazioni consente all'autore di un attacco di acquisire informazioni importanti su un sistema.</span><span class="sxs-lookup"><span data-stu-id="4f61a-103">Information disclosure enables an attacker to gain valuable information about a system.</span></span> <span data-ttu-id="4f61a-104">Considerare sempre, pertanto, quali informazioni vengono rivelate e se possono essere utilizzate da un utente malintenzionato.</span><span class="sxs-lookup"><span data-stu-id="4f61a-104">Therefore, always consider what information you are revealing and whether it can be used by a malicious user.</span></span> <span data-ttu-id="4f61a-105">Di seguito vengono elencati i possibili attacchi dovuti alla diffusione di informazioni e per ognuno di essi vengono fornite mitigazioni.</span><span class="sxs-lookup"><span data-stu-id="4f61a-105">The following lists possible information disclosure attacks and provides mitigations for each.</span></span>  
  
## <a name="message-security-and-http"></a><span data-ttu-id="4f61a-106">Protezione dei messaggi e HTTP</span><span class="sxs-lookup"><span data-stu-id="4f61a-106">Message Security and HTTP</span></span>  
 <span data-ttu-id="4f61a-107">Se si sta utilizzando la protezione a livello di messaggio su un livello di trasporto HTTP, è necessario sapere che questo tipo di sicurezza non protegge le intestazioni HTTP.</span><span class="sxs-lookup"><span data-stu-id="4f61a-107">If you are using message-level security over an HTTP transport layer, be aware that message-level security does not protect HTTP headers.</span></span> <span data-ttu-id="4f61a-108">L'unico modo per proteggerle è utilizzare il trasporto HTTPS anziché HTTP.</span><span class="sxs-lookup"><span data-stu-id="4f61a-108">The only way to protect HTTP headers is to use HTTPS transport instead of HTTP.</span></span> <span data-ttu-id="4f61a-109">L'utilizzo del trasporto HTTPS comporta la crittografia dell'intero messaggio, incluse le intestazioni HTTP, tramite il protocollo Secure Sockets Layer (SSL).</span><span class="sxs-lookup"><span data-stu-id="4f61a-109">HTTPS transport causes the entire message, including the HTTP headers, to be encrypted using the Secure Sockets Layer (SSL) protocol.</span></span>  
  
## <a name="policy-information"></a><span data-ttu-id="4f61a-110">Informazioni sul criterio</span><span class="sxs-lookup"><span data-stu-id="4f61a-110">Policy Information</span></span>  
 <span data-ttu-id="4f61a-111">La protezione del criterio è importante, specialmente negli scenari di federazioni dove i requisiti di riservatezza dei token emessi o le informazioni sugli emittenti dei token vengono esposti nel criterio.</span><span class="sxs-lookup"><span data-stu-id="4f61a-111">Keeping policy secure is important, especially in federation scenarios where sensitive issued-token requirements or token-issuer information is exposed in policy.</span></span> <span data-ttu-id="4f61a-112">In questi casi, si consiglia di proteggere l'endpoint del criterio del servizio federato per impedire agli autori di attacchi di ottenere informazioni sul servizio, ad esempio il tipo di attestazioni da inserire nel token emesso, o di reindirizzare client a emittenti di token dannosi.</span><span class="sxs-lookup"><span data-stu-id="4f61a-112">In these cases, the recommendation is to secure the federated service's policy endpoint to prevent attackers from obtaining information about the service, such as the type of claims to put in the issued token, or redirecting clients to malicious token issuers.</span></span> <span data-ttu-id="4f61a-113">L'autore di un attacco, ad esempio, potrebbe individuare coppie di nome utente/password riconfigurando la catena di trust federata in modo tale che termini in un emittente che esegua un attacco di tipo man-in-the-middle.</span><span class="sxs-lookup"><span data-stu-id="4f61a-113">For example, an attacker could discover user name/password pairs by reconfiguring the federated trust chain to terminate in an issuer that executed a man-in-the-middle attack.</span></span> <span data-ttu-id="4f61a-114">È inoltre consigliabile che i client federati che ottengono le proprie associazioni tramite recupero dei criteri verifichino l'attendibilità degli emittenti nella catena di certificati federata ottenuta.</span><span class="sxs-lookup"><span data-stu-id="4f61a-114">It is also recommended that federated clients who obtain their bindings through policy retrieval verify that they trust the issuers in the obtained federated trust chain.</span></span> [!INCLUDE[crabout](../../../../includes/crabout-md.md)]<span data-ttu-id="4f61a-115"> scenari della federazione, vedere [federazione](../../../../docs/framework/wcf/feature-details/federation.md).</span><span class="sxs-lookup"><span data-stu-id="4f61a-115"> federation scenarios, see [Federation](../../../../docs/framework/wcf/feature-details/federation.md).</span></span>  
  
## <a name="memory-dumps-can-reveal-claim-information"></a><span data-ttu-id="4f61a-116">Le immagini della memoria possono rivelare informazioni sulle attestazioni</span><span class="sxs-lookup"><span data-stu-id="4f61a-116">Memory Dumps Can Reveal Claim Information</span></span>  
 <span data-ttu-id="4f61a-117">Quando un'applicazione smette di funzionare, i file di log, ad esempio quelli prodotti da Dr. Watson, possono contenere le informazioni sull'attestazione.</span><span class="sxs-lookup"><span data-stu-id="4f61a-117">When an application fails, log files, such as those produced by Dr. Watson, can contain the claim information.</span></span> <span data-ttu-id="4f61a-118">Tali informazioni non devono essere esportate ad altre entità, ad esempio team di supporto. In caso contrario, vengono esportate anche le informazioni sulle attestazioni che contengono dati privati.</span><span class="sxs-lookup"><span data-stu-id="4f61a-118">This information should not be exported to other entities, such as support teams; otherwise, the claim information that contains private data is also exported.</span></span> <span data-ttu-id="4f61a-119">È possibile ridurre questo problema non inviando i file di log a entità sconosciute.</span><span class="sxs-lookup"><span data-stu-id="4f61a-119">You can mitigate this by not sending the log files to unknown entities.</span></span> <span data-ttu-id="4f61a-120">Per altre informazioni, vedere [Windows Server 2003](http://go.microsoft.com/fwlink/?LinkId=89160).</span><span class="sxs-lookup"><span data-stu-id="4f61a-120">For more information, see [Windows Server 2003](http://go.microsoft.com/fwlink/?LinkId=89160).</span></span>  
  
## <a name="endpoint-addresses"></a><span data-ttu-id="4f61a-121">Indirizzi endpoint</span><span class="sxs-lookup"><span data-stu-id="4f61a-121">Endpoint Addresses</span></span>  
 <span data-ttu-id="4f61a-122">Un indirizzo endpoint contiene le informazioni necessarie per comunicare con un endpoint.</span><span class="sxs-lookup"><span data-stu-id="4f61a-122">An endpoint address contains the information needed to communicate with an endpoint.</span></span> <span data-ttu-id="4f61a-123">La protezione SOAP deve includere l'indirizzo completo nei messaggi di negoziazione della protezione scambiati al fine di negoziare una chiave simmetrica tra un client e un server.</span><span class="sxs-lookup"><span data-stu-id="4f61a-123">SOAP security must include the address in full in the security negotiation messages that are exchanged in order to negotiate a symmetric key between a client and a server.</span></span> <span data-ttu-id="4f61a-124">Poiché la negoziazione di sicurezza è un processo bootstrap, le intestazioni degli indirizzi non possono essere crittografate durante tale processo.</span><span class="sxs-lookup"><span data-stu-id="4f61a-124">Because security negotiation is a bootstrap process, the address headers cannot be encrypted during this process.</span></span> <span data-ttu-id="4f61a-125">L'indirizzo, pertanto, non deve contenere dati riservati. In caso contrario, può portare ad attacchi di diffusione di informazioni.</span><span class="sxs-lookup"><span data-stu-id="4f61a-125">Therefore, the address should not contain any confidential data; otherwise, it leads to information disclosure attacks.</span></span>  
  
## <a name="certificates-transferred-unencrypted"></a><span data-ttu-id="4f61a-126">Certificati trasferiti non crittografati</span><span class="sxs-lookup"><span data-stu-id="4f61a-126">Certificates Transferred Unencrypted</span></span>  
 <span data-ttu-id="4f61a-127">Quando si utilizza un certificato X.509 per autenticare un client, il certificato viene trasferito in forma non crittografata, nell'intestazione SOAP.</span><span class="sxs-lookup"><span data-stu-id="4f61a-127">When you use an X.509 certificate to authenticate a client, the certificate is transferred in the clear, inside the SOAP header.</span></span> <span data-ttu-id="4f61a-128">Questa situazione può comportare una potenziale diffusione di informazioni personali (PII).</span><span class="sxs-lookup"><span data-stu-id="4f61a-128">Be aware of this as a potential personally identifiable information (PII) disclosure.</span></span> <span data-ttu-id="4f61a-129">Non è un problema per la modalità `TransportWithMessageCredential` in cui l'intero messaggio viene crittografato con la protezione a livello di trasporto.</span><span class="sxs-lookup"><span data-stu-id="4f61a-129">This is not an issue for `TransportWithMessageCredential` mode, where the entire message is encrypted with transport-level security.</span></span>  
  
## <a name="service-references"></a><span data-ttu-id="4f61a-130">Riferimenti al servizio</span><span class="sxs-lookup"><span data-stu-id="4f61a-130">Service References</span></span>  
 <span data-ttu-id="4f61a-131">Un riferimento al servizio è un riferimento a un altro servizio.</span><span class="sxs-lookup"><span data-stu-id="4f61a-131">A service reference is a reference to another service.</span></span> <span data-ttu-id="4f61a-132">Un servizio, ad esempio, può passare a un client un riferimento al servizio nel corso di un'operazione.</span><span class="sxs-lookup"><span data-stu-id="4f61a-132">For example, a service may pass a service reference to a client in the course of an operation.</span></span> <span data-ttu-id="4f61a-133">Il riferimento al servizio viene inoltre utilizzato con un *verificatore di identità di trust*, un componente interno che verifica l'identità dell'entità di destinazione prima della diffusione di informazioni quali dati dell'applicazione o le credenziali per la destinazione.</span><span class="sxs-lookup"><span data-stu-id="4f61a-133">The service reference is also used with a *trust identity verifier*, an internal component that ensures the identity of the target principal before disclosing information such as application data or credentials to the target.</span></span> <span data-ttu-id="4f61a-134">Se l'identità di trust remota non può essere verificata o non è corretta, il mittente deve verificare che non sia stato diffuso nessun dato che possa compromettere se stesso, l'applicazione o l'utente.</span><span class="sxs-lookup"><span data-stu-id="4f61a-134">If the remote trust identity cannot be verified or is incorrect, the sender should ensure that no data was disclosed that could compromise itself, the application, or the user.</span></span>  
  
 <span data-ttu-id="4f61a-135">Le possibili soluzioni sono le seguenti:</span><span class="sxs-lookup"><span data-stu-id="4f61a-135">Mitigations include the following:</span></span>  
  
-   <span data-ttu-id="4f61a-136">I riferimenti a servizi sono normalmente considerati attendibili.</span><span class="sxs-lookup"><span data-stu-id="4f61a-136">Service references are assumed to be trustworthy.</span></span> <span data-ttu-id="4f61a-137">Assicurarsi, ogni qualvolta si trasferiscono istanze del riferimento al servizio, che non siano stati alterati.</span><span class="sxs-lookup"><span data-stu-id="4f61a-137">Take care whenever transferring service reference instances to ensure that they have not been tampered with.</span></span>  
  
-   <span data-ttu-id="4f61a-138">Alcune applicazioni possono presentare un'esperienza utente che consente di stabilire in modo interattivo l'affidabilità in base ai dati nel riferimento al servizio e ai dati di attendibilità verificati dall'host remoto.</span><span class="sxs-lookup"><span data-stu-id="4f61a-138">Some applications can present a user experience that allows interactive establishment of trust based on data in the service reference and trust data proven by the remote host.</span></span> [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)]<span data-ttu-id="4f61a-139"> fornisce punti di estendibilità per tale funzionalità che devono tuttavia essere implementati dall'utente.</span><span class="sxs-lookup"><span data-stu-id="4f61a-139"> provides extensibility points for such a facility, but the user must implemented them.</span></span>  
  
## <a name="ntlm"></a><span data-ttu-id="4f61a-140">NTLM</span><span class="sxs-lookup"><span data-stu-id="4f61a-140">NTLM</span></span>  
 <span data-ttu-id="4f61a-141">Nell'ambiente di dominio Windows, l'autenticazione di Windows utilizza per impostazione predefinita il protocollo Kerberos per autenticare e autorizzare utenti.</span><span class="sxs-lookup"><span data-stu-id="4f61a-141">By default, in the Windows domain environment, Windows authentication uses the Kerberos protocol to authenticate and authorize users.</span></span> <span data-ttu-id="4f61a-142">Se, per qualche ragione, il protocollo Kerberos non può essere utilizzato, come fallback viene utilizzato NT LAN Manager (NTLM).</span><span class="sxs-lookup"><span data-stu-id="4f61a-142">If the Kerberos protocol cannot be used for some reason, NT LAN Manager (NTLM) is used as a fallback.</span></span> <span data-ttu-id="4f61a-143">Per disattivare questo comportamento, impostare la proprietà <xref:System.ServiceModel.Security.WindowsClientCredential.AllowNtlm%2A> su `false`.</span><span class="sxs-lookup"><span data-stu-id="4f61a-143">You can disable this behavior by setting the <xref:System.ServiceModel.Security.WindowsClientCredential.AllowNtlm%2A> property to `false`.</span></span> <span data-ttu-id="4f61a-144">Quando si utilizza NTLM è consigliabile prendere in considerazione i problemi seguenti:</span><span class="sxs-lookup"><span data-stu-id="4f61a-144">Issues to be aware of when allowing NTLM include:</span></span>  
  
-   <span data-ttu-id="4f61a-145">Il nome utente client viene esposto in NTLM.</span><span class="sxs-lookup"><span data-stu-id="4f61a-145">NTLM exposes the client user name.</span></span> <span data-ttu-id="4f61a-146">Se il nome utente deve essere mantenuto riservato, impostare la proprietà `AllowNTLM` nell'associazione su `false`.</span><span class="sxs-lookup"><span data-stu-id="4f61a-146">If the user name needs to be kept confidential, then set the `AllowNTLM` property on the binding to `false`.</span></span>  
  
-   <span data-ttu-id="4f61a-147">L'autenticazione server non viene fornita in NTLM.</span><span class="sxs-lookup"><span data-stu-id="4f61a-147">NTLM does not provide server authentication.</span></span> <span data-ttu-id="4f61a-148">Il client, pertanto, non è in grado di verificare se la comunicazione sia stata stabilita con il servizio corretto, quando si utilizza NTLM come protocollo di autenticazione.</span><span class="sxs-lookup"><span data-stu-id="4f61a-148">Therefore, the client cannot ensure that it is communicating with the right service when you use NTLM as an authentication protocol.</span></span>  
  
### <a name="specifying-client-credentials-or-invalid-identity-forces-ntlm-usage"></a><span data-ttu-id="4f61a-149">Specifica di credenziali client o di identità non valide che impongono l'utilizzo di NTLM</span><span class="sxs-lookup"><span data-stu-id="4f61a-149">Specifying Client Credentials or Invalid Identity Forces NTLM Usage</span></span>  
 <span data-ttu-id="4f61a-150">Quando si crea un client, la specifica di credenziali client senza un nome di dominio o la specifica di un'identità server non valida, provoca l'utilizzo di NTLM al posto del protocollo Kerberos (se la proprietà `AlllowNtlm` è impostata su `true`).</span><span class="sxs-lookup"><span data-stu-id="4f61a-150">When creating a client, specifying client credentials without a domain name, or specifying an invalid server identity, causes NTLM to be used instead of the Kerberos protocol (if the `AlllowNtlm` property is set to `true`).</span></span> <span data-ttu-id="4f61a-151">Poiché l'autenticazione server non viene eseguita in NTLM, è possibile che le informazioni vengano diffuse.</span><span class="sxs-lookup"><span data-stu-id="4f61a-151">Because  NTLM does not do server authentication, information can potentially be disclosed.</span></span>  
  
 <span data-ttu-id="4f61a-152">Ad esempio, è possibile specificare le credenziali client di Windows senza un nome di dominio, come illustrato nel codice Visual c# seguente.</span><span class="sxs-lookup"><span data-stu-id="4f61a-152">For example, it is possible to specify Windows client credentials without a domain name, as shown in the following Visual C# code.</span></span>  
  
```  
MyChannelFactory.Credentials.Windows.ClientCredential = new System.Net.NetworkCredential("username", "password");  
```  
  
 <span data-ttu-id="4f61a-153">Il codice non specifica un nome di dominio e pertanto verrà utilizzato NTLM.</span><span class="sxs-lookup"><span data-stu-id="4f61a-153">The code does not specify a domain name, and therefore NTLM will be used.</span></span>  
  
 <span data-ttu-id="4f61a-154">NTLM viene utilizzato se viene specificato il dominio, ma viene specificato un nome dell'entità servizio non valido tramite la funzionalità di identità endpoint.</span><span class="sxs-lookup"><span data-stu-id="4f61a-154">If the domain is specified, but an invalid service principal name is specified using the endpoint identity feature, then NTLM is used.</span></span> [!INCLUDE[crabout](../../../../includes/crabout-md.md)]<span data-ttu-id="4f61a-155"> come identità dell'endpoint viene specificato, vedere [identità del servizio e l'autenticazione](../../../../docs/framework/wcf/feature-details/service-identity-and-authentication.md).</span><span class="sxs-lookup"><span data-stu-id="4f61a-155"> how endpoint identity is specified, see [Service Identity and Authentication](../../../../docs/framework/wcf/feature-details/service-identity-and-authentication.md).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="4f61a-156">Vedere anche</span><span class="sxs-lookup"><span data-stu-id="4f61a-156">See Also</span></span>  
 [<span data-ttu-id="4f61a-157">Considerazioni sulla sicurezza</span><span class="sxs-lookup"><span data-stu-id="4f61a-157">Security Considerations</span></span>](../../../../docs/framework/wcf/feature-details/security-considerations-in-wcf.md)  
 [<span data-ttu-id="4f61a-158">Elevazione dei privilegi</span><span class="sxs-lookup"><span data-stu-id="4f61a-158">Elevation of Privilege</span></span>](../../../../docs/framework/wcf/feature-details/elevation-of-privilege.md)  
 [<span data-ttu-id="4f61a-159">Negazione del servizio</span><span class="sxs-lookup"><span data-stu-id="4f61a-159">Denial of Service</span></span>](../../../../docs/framework/wcf/feature-details/denial-of-service.md)  
 [<span data-ttu-id="4f61a-160">Manomissioni</span><span class="sxs-lookup"><span data-stu-id="4f61a-160">Tampering</span></span>](../../../../docs/framework/wcf/feature-details/tampering.md)  
 [<span data-ttu-id="4f61a-161">Scenari non supportati</span><span class="sxs-lookup"><span data-stu-id="4f61a-161">Unsupported Scenarios</span></span>](../../../../docs/framework/wcf/feature-details/unsupported-scenarios.md)  
 [<span data-ttu-id="4f61a-162">Attacchi di tipo replay</span><span class="sxs-lookup"><span data-stu-id="4f61a-162">Replay Attacks</span></span>](../../../../docs/framework/wcf/feature-details/replay-attacks.md)
