---
title: Hosting in un'applicazione di servizio Windows
ms.custom: 
ms.date: 03/30/2017
ms.prod: .net-framework
ms.reviewer: 
ms.suite: 
ms.technology: dotnet-clr
ms.tgt_pltfrm: 
ms.topic: article
ms.assetid: f4199998-27f3-4dd9-aee4-0a4addfa9f24
caps.latest.revision: "12"
author: dotnet-bot
ms.author: dotnetcontent
manager: wpickett
ms.openlocfilehash: 1f411e0280a1f663e5e001e471eb836208083160
ms.sourcegitcommit: ce279f2d7fe2220e6ea0a25a8a7a5370ddf8d9f0
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 12/02/2017
---
# <a name="hosting-in-a-windows-service-application"></a><span data-ttu-id="1a3d5-102">Hosting in un'applicazione di servizio Windows</span><span class="sxs-lookup"><span data-stu-id="1a3d5-102">Hosting in a Windows Service Application</span></span>
<span data-ttu-id="1a3d5-103">I servizi Windows, precedentemente noti come servizi Windows NT, offrono un modello di processo particolarmente adatto ad applicazioni che devono risiedere in un eseguibile a esecuzione prolungata e che non visualizzano alcuna forma di interfaccia utente.</span><span class="sxs-lookup"><span data-stu-id="1a3d5-103">Windows services (formerly known as Windows NT services) provide a process model particularly suited to applications that must live in a long-running executable and do not display any form of user interface.</span></span> <span data-ttu-id="1a3d5-104">La durata del processo di un'applicazione di servizio Windows viene gestita da Gestione controllo servizi (SCM), che consente di avviare, interrompere e sospendere le applicazioni di servizio Windows.</span><span class="sxs-lookup"><span data-stu-id="1a3d5-104">The process lifetime of a Windows service application is managed by the service control manager (SCM), which allows you to start, stop, and pause Windows service applications.</span></span> <span data-ttu-id="1a3d5-105">È possibile configurare un processo del servizio Windows per l'avvio automatico all'avvio del computer, rendendolo un ambiente host adatto per le applicazioni "always on".</span><span class="sxs-lookup"><span data-stu-id="1a3d5-105">You can configure a Windows service process to start automatically when the computer starts, making it a suitable hosting environment for "always on" applications.</span></span> [!INCLUDE[crabout](../../../../includes/crabout-md.md)]<span data-ttu-id="1a3d5-106">Applicazioni di servizio Windows, vedere [applicazioni di servizio Windows](http://go.microsoft.com/fwlink/?LinkId=89450).</span><span class="sxs-lookup"><span data-stu-id="1a3d5-106"> Windows service applications, see [Windows Service Applications](http://go.microsoft.com/fwlink/?LinkId=89450).</span></span>  
  
 <span data-ttu-id="1a3d5-107">Le applicazioni che ospitano servizi [!INCLUDE[indigo1](../../../../includes/indigo1-md.md)] a esecuzione prolungata condividono molte caratteristiche dei servizi Windows.</span><span class="sxs-lookup"><span data-stu-id="1a3d5-107">Applications that host long-running [!INCLUDE[indigo1](../../../../includes/indigo1-md.md)] services share many characteristics with Windows services.</span></span> <span data-ttu-id="1a3d5-108">In particolare, i servizi [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] sono eseguibili server a esecuzione prolungata che non interagiscono direttamente con l'utente e non implementano quindi alcuna forma di interfaccia utente.</span><span class="sxs-lookup"><span data-stu-id="1a3d5-108">In particular, [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] services are long-running server executables that do not interact directly with the user and therefore do not implement any form of user interface.</span></span> <span data-ttu-id="1a3d5-109">Pertanto, l'hosting di servizi [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] all'interno di un'applicazione di servizio Windows è una delle opzioni per la creazione di efficaci applicazioni [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] a esecuzione prolungata.</span><span class="sxs-lookup"><span data-stu-id="1a3d5-109">As such, hosting [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] services inside of a Windows service application is one option for building robust, long-running, [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] applications.</span></span>  
  
 <span data-ttu-id="1a3d5-110">Gli sviluppatori [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] devono spesso decidere se ospitare le proprie applicazioni [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] in un'applicazione di servizio Windows o nell'ambiente host IIS (Internet Information Services) o del servizio di attivazione dei processi di Windows (WAS).</span><span class="sxs-lookup"><span data-stu-id="1a3d5-110">Often, [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] developers must decide whether to host their [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] application inside of a Windows service application or inside of the Internet Information Services (IIS) or Windows Process Activation Service (WAS) hosting environment.</span></span> <span data-ttu-id="1a3d5-111">È consigliabile considerare l'uso di applicazioni di servizio Windows alle condizioni seguenti:</span><span class="sxs-lookup"><span data-stu-id="1a3d5-111">You should consider using Windows service applications under the following conditions:</span></span>  
  
-   <span data-ttu-id="1a3d5-112">L'applicazione richiede l'attivazione esplicita.</span><span class="sxs-lookup"><span data-stu-id="1a3d5-112">Your application requires explicit activation.</span></span> <span data-ttu-id="1a3d5-113">È, ad esempio, consigliabile usare servizi Windows quando l'applicazione deve essere avviata automaticamente all'avvio del server, invece di essere avviata dinamicamente in risposta al primo messaggio in ingresso.</span><span class="sxs-lookup"><span data-stu-id="1a3d5-113">For example, you should use Windows services when your application must start automatically when the server starts instead of being dynamically started in response to the first incoming message.</span></span>  
  
-   <span data-ttu-id="1a3d5-114">Il processo che ospita l'applicazione deve restare in esecuzione una volta avviato.</span><span class="sxs-lookup"><span data-stu-id="1a3d5-114">The process that hosts your application must remain running once started.</span></span> <span data-ttu-id="1a3d5-115">Una volta avviato, un processo di servizio Windows resta in esecuzione, a meno che non venga esplicitamente interrotto da un amministratore del server tramite Gestione controllo servizi.</span><span class="sxs-lookup"><span data-stu-id="1a3d5-115">Once started, a Windows service process remains running unless explicitly shut down by a server administrator using the service control manager.</span></span> <span data-ttu-id="1a3d5-116">Le applicazioni ospitate in IIS o WAS possono essere avviate e interrotte dinamicamente, per usare le risorse di sistema in modo ottimale.</span><span class="sxs-lookup"><span data-stu-id="1a3d5-116">Applications hosted in IIS or WAS may be started and stopped dynamically to make optimal use of system resources.</span></span> <span data-ttu-id="1a3d5-117">Le applicazioni che richiedono il controllo esplicito sulla durata del processo host dovrebbero usare servizi Windows invece di IIS o WAS.</span><span class="sxs-lookup"><span data-stu-id="1a3d5-117">Applications that require explicit control over the lifetime of their hosting process should use Windows services instead of IIS or WAS.</span></span>  
  
-   <span data-ttu-id="1a3d5-118">È necessario eseguire il servizio [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] su Windows Server 2003 e usare trasporti diversi da HTTP.</span><span class="sxs-lookup"><span data-stu-id="1a3d5-118">Your [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] service must run on Windows Server 2003 and use transports other than HTTP.</span></span> <span data-ttu-id="1a3d5-119">Su Windows Server 2003, l'ambiente host [!INCLUDE[iis601](../../../../includes/iis601-md.md)] è limitato alla sola comunicazione HTTP.</span><span class="sxs-lookup"><span data-stu-id="1a3d5-119">On Windows Server 2003, the [!INCLUDE[iis601](../../../../includes/iis601-md.md)] hosting environment is restricted to HTTP communication only.</span></span> <span data-ttu-id="1a3d5-120">Le applicazioni di servizio Windows non sono soggette a questa restrizione e possono usare qualsiasi trasporto supportato da [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)], inclusi net.tcp, net.pipe e net.msmq.</span><span class="sxs-lookup"><span data-stu-id="1a3d5-120">Windows service applications are not subject to this restriction and can use any transport [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] supports, including net.tcp, net.pipe, and net.msmq.</span></span>  
  
### <a name="to-host-wcf-inside-of-a-windows-service-application"></a><span data-ttu-id="1a3d5-121">Per ospitare WCF in un'applicazione di servizio Windows</span><span class="sxs-lookup"><span data-stu-id="1a3d5-121">To host WCF inside of a Windows service application</span></span>  
  
1.  <span data-ttu-id="1a3d5-122">Creare un'applicazione di servizio Windows.</span><span class="sxs-lookup"><span data-stu-id="1a3d5-122">Create a Windows service application.</span></span> <span data-ttu-id="1a3d5-123">È possibile scrivere applicazioni di servizio Windows in codice gestito usando le classi nello spazio dei nomi <xref:System.ServiceProcess>.</span><span class="sxs-lookup"><span data-stu-id="1a3d5-123">You can write Windows service applications in managed code using the classes in the <xref:System.ServiceProcess> namespace.</span></span> <span data-ttu-id="1a3d5-124">Questa applicazione deve includere una classe che eredita da <xref:System.ServiceProcess.ServiceBase>.</span><span class="sxs-lookup"><span data-stu-id="1a3d5-124">This application must include one class that inherits from <xref:System.ServiceProcess.ServiceBase>.</span></span>  
  
2.  <span data-ttu-id="1a3d5-125">Collegare la durata dei servizi [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] alla durata dell'applicazione di servizio Windows.</span><span class="sxs-lookup"><span data-stu-id="1a3d5-125">Link the lifetime of the [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] services to the lifetime of the Windows service application.</span></span> <span data-ttu-id="1a3d5-126">In genere, si desidera che i servizi [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] ospitati in un'applicazione di servizio Windows divengano attivi quando viene avviato il servizio di hosting, interrompano l'ascolto dei messaggi quando viene arrestato il servizio di hosting e interrompano il processo di hosting quando il servizio [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] rileva un errore.</span><span class="sxs-lookup"><span data-stu-id="1a3d5-126">Typically, you want [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] services hosted in a Windows service application to become active when the hosting service starts, stop listening for messages when the hosting service is stopped, and shut down the hosting process when the [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] service encounters an error.</span></span> <span data-ttu-id="1a3d5-127">Per ottenere questo risultato, è possibile procedere come segue:</span><span class="sxs-lookup"><span data-stu-id="1a3d5-127">This can be accomplished as follows:</span></span>  
  
    -   <span data-ttu-id="1a3d5-128">Eseguire l'override di <xref:System.ServiceProcess.ServiceBase.OnStart%28System.String%5B%5D%29> per aprire una o più istanze di <xref:System.ServiceModel.ServiceHost>.</span><span class="sxs-lookup"><span data-stu-id="1a3d5-128">Override <xref:System.ServiceProcess.ServiceBase.OnStart%28System.String%5B%5D%29> to open one or more instances of <xref:System.ServiceModel.ServiceHost>.</span></span> <span data-ttu-id="1a3d5-129">Una sola applicazione di servizio Windows può ospitare più servizi [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)], che vengono avviati e interrotti come gruppo.</span><span class="sxs-lookup"><span data-stu-id="1a3d5-129">A single Windows service application can host multiple [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] services that start and stop as a group.</span></span>  
  
    -   <span data-ttu-id="1a3d5-130">Eseguire l'override di <xref:System.ServiceProcess.ServiceBase.OnStop%2A> per chiamare <xref:System.ServiceModel.Channels.CommunicationObject.Closed> su <xref:System.ServiceModel.ServiceHost> per tutti i servizi [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] in esecuzione avviati durante <xref:System.ServiceProcess.ServiceBase.OnStart%28System.String%5B%5D%29>.</span><span class="sxs-lookup"><span data-stu-id="1a3d5-130">Override <xref:System.ServiceProcess.ServiceBase.OnStop%2A> to call <xref:System.ServiceModel.Channels.CommunicationObject.Closed> on the <xref:System.ServiceModel.ServiceHost> any running [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] services that were started during <xref:System.ServiceProcess.ServiceBase.OnStart%28System.String%5B%5D%29>.</span></span>  
  
    -   <span data-ttu-id="1a3d5-131">Eseguire la sottoscrizione all'evento <xref:System.ServiceModel.Channels.CommunicationObject.Faulted> di <xref:System.ServiceModel.ServiceHost> e usare la classe <xref:System.ServiceProcess.ServiceController> per arrestare l'applicazione di servizio Windows in caso di errore.</span><span class="sxs-lookup"><span data-stu-id="1a3d5-131">Subscribe to the <xref:System.ServiceModel.Channels.CommunicationObject.Faulted> event of <xref:System.ServiceModel.ServiceHost> and use the <xref:System.ServiceProcess.ServiceController> class to shut down the Windows service application in case of error.</span></span>  
  
     <span data-ttu-id="1a3d5-132">Le applicazioni di servizio Windows che ospitano servizi [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] vengono distribuite e gestite nello stesso modo delle applicazioni di servizio Windows che non usano [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)].</span><span class="sxs-lookup"><span data-stu-id="1a3d5-132">Windows service applications that host [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] services are deployed and managed in the same way as Windows service applications that do not make use of [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)].</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="1a3d5-133">Vedere anche</span><span class="sxs-lookup"><span data-stu-id="1a3d5-133">See Also</span></span>  
 <xref:System.ServiceProcess>  
 [<span data-ttu-id="1a3d5-134">Procedura dettagliata: Creazione di un'applicazione di servizio Windows in Progettazione componenti</span><span class="sxs-lookup"><span data-stu-id="1a3d5-134">Walkthrough: Creating a Windows Service Application in the Component Designer</span></span>](http://go.microsoft.com/fwlink/?LinkId=94875)  
 [<span data-ttu-id="1a3d5-135">Procedura: ospitare un servizio WCF in un servizio Windows gestito</span><span class="sxs-lookup"><span data-stu-id="1a3d5-135">How to: Host a WCF Service in a Managed Windows Service</span></span>](../../../../docs/framework/wcf/feature-details/how-to-host-a-wcf-service-in-a-managed-windows-service.md)  
 [<span data-ttu-id="1a3d5-136">Host del servizio Windows</span><span class="sxs-lookup"><span data-stu-id="1a3d5-136">Windows Service Host</span></span>](../../../../docs/framework/wcf/samples/windows-service-host.md)  
 [<span data-ttu-id="1a3d5-137">Architettura di programmazione dell'applicazione di servizio</span><span class="sxs-lookup"><span data-stu-id="1a3d5-137">Service Application Programming Architecture</span></span>](http://go.microsoft.com/fwlink/?LinkId=94876)  
 [<span data-ttu-id="1a3d5-138">Windows Server AppFabric con funzionalità di Hosting</span><span class="sxs-lookup"><span data-stu-id="1a3d5-138">Windows Server App Fabric Hosting Features</span></span>](http://go.microsoft.com/fwlink/?LinkId=201276)
