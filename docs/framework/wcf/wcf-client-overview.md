---
title: Panoramica dei client WCF
ms.custom: 
ms.date: 03/30/2017
ms.prod: .net-framework
ms.reviewer: 
ms.suite: 
ms.technology: dotnet-clr
ms.tgt_pltfrm: 
ms.topic: article
dev_langs:
- csharp
- vb
helpviewer_keywords: clients [WCF], architecture
ms.assetid: f60d9bc5-8ade-4471-8ecf-5a07a936c82d
caps.latest.revision: "17"
author: dotnet-bot
ms.author: dotnetcontent
manager: wpickett
ms.openlocfilehash: 6333db92d010eab7765cfc62a9f64601d5b82d55
ms.sourcegitcommit: ce279f2d7fe2220e6ea0a25a8a7a5370ddf8d9f0
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 12/02/2017
---
# <a name="wcf-client-overview"></a><span data-ttu-id="821b9-102">Panoramica dei client WCF</span><span class="sxs-lookup"><span data-stu-id="821b9-102">WCF Client Overview</span></span>
<span data-ttu-id="821b9-103">Contenuto della sezione vengono descritte le operazioni svolte delle applicazioni client e vengono fornite istruzioni su come configurare, creare e usare un client [!INCLUDE[indigo1](../../../includes/indigo1-md.md)], nonché su come proteggere le applicazioni client.</span><span class="sxs-lookup"><span data-stu-id="821b9-103">This section describes what client applications do, how to configure, create, and use a [!INCLUDE[indigo1](../../../includes/indigo1-md.md)] client, and how to secure client applications.</span></span>  
  
## <a name="using-wcf-client-objects"></a><span data-ttu-id="821b9-104">Uso di oggetti client WCF</span><span class="sxs-lookup"><span data-stu-id="821b9-104">Using WCF Client Objects</span></span>  
 <span data-ttu-id="821b9-105">Un'applicazione client è un'applicazione gestita che usa un client [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] per comunicare con un'altra applicazione.</span><span class="sxs-lookup"><span data-stu-id="821b9-105">A client application is a managed application that uses a [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] client to communicate with another application.</span></span> <span data-ttu-id="821b9-106">Per creare un'applicazione client per un servizio [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] è necessario eseguire i passaggi seguenti:</span><span class="sxs-lookup"><span data-stu-id="821b9-106">To create a client application for a [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] service requires the following steps:</span></span>  
  
1.  <span data-ttu-id="821b9-107">Ottenere le informazioni relative al contratto di servizio, alle associazioni e all'indirizzo per un endpoint di servizio.</span><span class="sxs-lookup"><span data-stu-id="821b9-107">Obtain the service contract, bindings, and address information for a service endpoint.</span></span>  
  
2.  <span data-ttu-id="821b9-108">Creare un client [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] usando queste informazioni.</span><span class="sxs-lookup"><span data-stu-id="821b9-108">Create a [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] client using that information.</span></span>  
  
3.  <span data-ttu-id="821b9-109">Chiamare le operazioni.</span><span class="sxs-lookup"><span data-stu-id="821b9-109">Call operations.</span></span>  
  
4.  <span data-ttu-id="821b9-110">Chiudere l'oggetto client [!INCLUDE[indigo2](../../../includes/indigo2-md.md)].</span><span class="sxs-lookup"><span data-stu-id="821b9-110">Close the [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] client object.</span></span>  
  
 <span data-ttu-id="821b9-111">Nelle sezioni seguenti vengono illustrate queste procedure e vengono fornite informazioni introduttive sugli argomenti seguenti:</span><span class="sxs-lookup"><span data-stu-id="821b9-111">The following sections discuss these steps and provide brief introductions to the following issues:</span></span>  
  
-   <span data-ttu-id="821b9-112">Gestione degli errori.</span><span class="sxs-lookup"><span data-stu-id="821b9-112">Handling errors.</span></span>  
  
-   <span data-ttu-id="821b9-113">Configurazione e protezione dei client.</span><span class="sxs-lookup"><span data-stu-id="821b9-113">Configuring and securing clients.</span></span>  
  
-   <span data-ttu-id="821b9-114">Creazione di oggetti di callback per i servizi duplex.</span><span class="sxs-lookup"><span data-stu-id="821b9-114">Creating callback objects for duplex services.</span></span>  
  
-   <span data-ttu-id="821b9-115">Chiamate ai servizi in modo asincrono.</span><span class="sxs-lookup"><span data-stu-id="821b9-115">Calling services asynchronously.</span></span>  
  
-   <span data-ttu-id="821b9-116">Chiamate ai servizi mediante canali client.</span><span class="sxs-lookup"><span data-stu-id="821b9-116">Calling services using client channels.</span></span>  
  
## <a name="obtain-the-service-contract-bindings-and-addresses"></a><span data-ttu-id="821b9-117">Ottenere informazioni sul contratto di servizio, sulle associazioni e sugli indirizzi</span><span class="sxs-lookup"><span data-stu-id="821b9-117">Obtain the Service Contract, Bindings, and Addresses</span></span>  
 <span data-ttu-id="821b9-118">In [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] servizi e client modellano i contratti usando attributi, interfacce e metodi gestiti.</span><span class="sxs-lookup"><span data-stu-id="821b9-118">In [!INCLUDE[indigo2](../../../includes/indigo2-md.md)], services and clients model contracts using managed attributes, interfaces, and methods.</span></span> <span data-ttu-id="821b9-119">Per eseguire la connessione a un servizio in un'applicazione client è necessario ottenere le informazioni sul tipo per il contratto di servizio.</span><span class="sxs-lookup"><span data-stu-id="821b9-119">To connect to a service in a client application, you need to obtain the type information for the service contract.</span></span> <span data-ttu-id="821b9-120">In genere, si farlo tramite il [strumento ServiceModel Metadata Utility Tool (Svcutil.exe)](../../../docs/framework/wcf/servicemodel-metadata-utility-tool-svcutil-exe.md), che consente di scaricare i metadati dal servizio, viene convertito in un file di codice sorgente gestito nel linguaggio di propria scelta e crea un client file di configurazione dell'applicazione che è possibile utilizzare per configurare il [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] oggetto client.</span><span class="sxs-lookup"><span data-stu-id="821b9-120">Typically, you do this by using the [ServiceModel Metadata Utility Tool (Svcutil.exe)](../../../docs/framework/wcf/servicemodel-metadata-utility-tool-svcutil-exe.md), which downloads metadata from the service, converts it to a managed source code file in the language of your choice, and creates a client application configuration file that you can use to configure your [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] client object.</span></span> <span data-ttu-id="821b9-121">Ad esempio, se si intende creare un oggetto client [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] per richiamare un servizio `MyCalculatorService` e i metadati per questo servizio sono pubblicati in `http://computerName/MyCalculatorService/Service.svc?wsdl`, l'esempio di codice seguente mostra come usare Svcutil.exe per ottenere un file `ClientCode.vb` che contenga il contratto di servizio nel codice gestito.</span><span class="sxs-lookup"><span data-stu-id="821b9-121">For example, if you are going to create an [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] client object to invoke a `MyCalculatorService`, and you know that the metadata for that service is published at `http://computerName/MyCalculatorService/Service.svc?wsdl`, then the following code example shows how to use Svcutil.exe to obtain a `ClientCode.vb` file that contains the service contract in managed code.</span></span>  
  
```  
svcutil /language:vb /out:ClientCode.vb /config:app.config http://computerName/MyCalculatorService/Service.svc?wsdl  
```  
  
 <span data-ttu-id="821b9-122">È possibile compilare questo codice di contratto nell'applicazione client o in un altro assembly che l'applicazione client potrà successivamente usare per creare un oggetto client [!INCLUDE[indigo2](../../../includes/indigo2-md.md)].</span><span class="sxs-lookup"><span data-stu-id="821b9-122">You can either compile this contract code into the client application or into another assembly that the client application can then use to create an [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] client object.</span></span> <span data-ttu-id="821b9-123">Per configurare l'oggetto client per eseguire la connessione al servizio in modo appropriato, è possibile usare il file di configurazione.</span><span class="sxs-lookup"><span data-stu-id="821b9-123">You can use the configuration file to configure the client object to properly connect to the service .</span></span>  
  
 <span data-ttu-id="821b9-124">Per un esempio di questo processo, vedere [procedura: creare un Client](../../../docs/framework/wcf/how-to-create-a-wcf-client.md).</span><span class="sxs-lookup"><span data-stu-id="821b9-124">For an example of this process, see [How to: Create a Client](../../../docs/framework/wcf/how-to-create-a-wcf-client.md).</span></span> <span data-ttu-id="821b9-125">Per ulteriori informazioni sui contratti, vedere [contratti](../../../docs/framework/wcf/feature-details/contracts.md).</span><span class="sxs-lookup"><span data-stu-id="821b9-125">For more complete information about contracts, see [Contracts](../../../docs/framework/wcf/feature-details/contracts.md).</span></span>  
  
## <a name="create-a-wcf-client-object"></a><span data-ttu-id="821b9-126">Creare un oggetto client WCF</span><span class="sxs-lookup"><span data-stu-id="821b9-126">Create a WCF Client Object</span></span>  
 <span data-ttu-id="821b9-127">Un client [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] è un oggetto locale che rappresenta un servizio di [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] in una forma che il client può usare per comunicare con il servizio remoto.</span><span class="sxs-lookup"><span data-stu-id="821b9-127">A [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] client is a local object that represents a [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] service in a form that the client can use to communicate with the remote service.</span></span> <span data-ttu-id="821b9-128">I tipi di client [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] implementano il contratto di servizio di destinazione, pertanto quando se ne crea e configura uno, è possibile usare direttamente l'oggetto client per richiamare le operazioni del servizio.</span><span class="sxs-lookup"><span data-stu-id="821b9-128">[!INCLUDE[indigo2](../../../includes/indigo2-md.md)] client types implement the target service contract, so when you create one and configure it, you can then use the client object directly to invoke service operations.</span></span> <span data-ttu-id="821b9-129">Il [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] converte ora il metodo chiama in messaggi, li invia al servizio, resta in attesa di replica e restituisce questi valori per eseguire il [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] oggetto client come valori restituiti o `out` o `ref` parametri.</span><span class="sxs-lookup"><span data-stu-id="821b9-129">The [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] run time converts the method calls into messages, sends them to the service, listens for the reply, and returns those values to the [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] client object as return values or `out` or `ref` parameters.</span></span>  
  
 <span data-ttu-id="821b9-130">Per eseguire la connessione ai servizi e usarli è anche possibile usare oggetti del canale client [!INCLUDE[indigo2](../../../includes/indigo2-md.md)].</span><span class="sxs-lookup"><span data-stu-id="821b9-130">You can also use [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] client channel objects to connect with and use services.</span></span> <span data-ttu-id="821b9-131">Per informazioni dettagliate, vedere [architettura Client WCF](../../../docs/framework/wcf/feature-details/client-architecture.md).</span><span class="sxs-lookup"><span data-stu-id="821b9-131">For details, see [WCF Client Architecture](../../../docs/framework/wcf/feature-details/client-architecture.md).</span></span>  
  
#### <a name="creating-a-new-wcf-object"></a><span data-ttu-id="821b9-132">Creazione di un nuovo oggetto WCF</span><span class="sxs-lookup"><span data-stu-id="821b9-132">Creating a New WCF Object</span></span>  
 <span data-ttu-id="821b9-133">Per illustrare l'uso di una classe <xref:System.ServiceModel.ClientBase%601>, si supponga che il contratto di servizio seguente sia stato generato da un'applicazione di servizio.</span><span class="sxs-lookup"><span data-stu-id="821b9-133">To illustrate the use of a <xref:System.ServiceModel.ClientBase%601> class, assume the following simple service contract has been generated from a service application.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="821b9-134">Se per creare il client [!INCLUDE[vsprvs](../../../includes/vsprvs-md.md)] si usa [!INCLUDE[indigo2](../../../includes/indigo2-md.md)], quando al progetto viene aggiunto un riferimento a servizi gli oggetti vengono caricati automaticamente nel Visualizzatore oggetti.</span><span class="sxs-lookup"><span data-stu-id="821b9-134">If you are using [!INCLUDE[vsprvs](../../../includes/vsprvs-md.md)] to create your [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] client, objects are loaded automatically into the object browser when you add a service reference to your project.</span></span>  
  
 [!code-csharp[C_GeneratedCodeFiles#12](../../../samples/snippets/csharp/VS_Snippets_CFX/c_generatedcodefiles/cs/proxycode.cs#12)]  
  
 <span data-ttu-id="821b9-135">Se non si usa [!INCLUDE[vsprvs](../../../includes/vsprvs-md.md)], esaminare il codice del contratto generato per individuare il tipo che estende la classe <xref:System.ServiceModel.ClientBase%601> e l'interfaccia del contratto di servizio `ISampleService`.</span><span class="sxs-lookup"><span data-stu-id="821b9-135">If you are not using [!INCLUDE[vsprvs](../../../includes/vsprvs-md.md)], examine the generated contract code to find the type that extends <xref:System.ServiceModel.ClientBase%601> and the service contract interface `ISampleService`.</span></span> <span data-ttu-id="821b9-136">In questo caso il tipo ha l'aspetto del codice seguente:</span><span class="sxs-lookup"><span data-stu-id="821b9-136">In this case, that type looks like the following code:</span></span>  
  
 [!code-csharp[C_GeneratedCodeFiles#14](../../../samples/snippets/csharp/VS_Snippets_CFX/c_generatedcodefiles/cs/proxycode.cs#14)]  
  
 <span data-ttu-id="821b9-137">Questa classe può essere creata come un oggetto locale usando uno dei costruttori, configurata e quindi usata per la connessione a un servizio del tipo `ISampleService`.</span><span class="sxs-lookup"><span data-stu-id="821b9-137">This class can be created as a local object using one of the constructors, configured, and then used to connect to a service of the type `ISampleService`.</span></span>  
  
 <span data-ttu-id="821b9-138">È consigliabile creare prima l'oggetto client [!INCLUDE[indigo2](../../../includes/indigo2-md.md)], quindi usare e chiudere questo oggetto in un singolo blocco Try/Catch.</span><span class="sxs-lookup"><span data-stu-id="821b9-138">It is recommended that you create your [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] client object first, and then use it and close it inside a single try/catch block.</span></span> <span data-ttu-id="821b9-139">Non usare l'istruzione `using` (`Using` in [!INCLUDE[vbprvb](../../../includes/vbprvb-md.md)]) in quanto potrebbe mascherare eccezioni in determinate modalità di errore.</span><span class="sxs-lookup"><span data-stu-id="821b9-139">You should not use the `using` statement (`Using` in [!INCLUDE[vbprvb](../../../includes/vbprvb-md.md)]) because it may mask exceptions in certain failure modes.</span></span> [!INCLUDE[crdefault](../../../includes/crdefault-md.md)]<span data-ttu-id="821b9-140">le sezioni seguenti anche come [evitare problemi con l'istruzione Using](../../../docs/framework/wcf/samples/avoiding-problems-with-the-using-statement.md).</span><span class="sxs-lookup"><span data-stu-id="821b9-140"> the following sections as well as [Avoiding Problems with the Using Statement](../../../docs/framework/wcf/samples/avoiding-problems-with-the-using-statement.md).</span></span>  
  
### <a name="contracts-bindings-and-addresses"></a><span data-ttu-id="821b9-141">Contratti, associazioni e indirizzi.</span><span class="sxs-lookup"><span data-stu-id="821b9-141">Contracts, Bindings, and Addresses</span></span>  
 <span data-ttu-id="821b9-142">Per poter creare un oggetto client [!INCLUDE[indigo2](../../../includes/indigo2-md.md)], è necessario configurare prima l'oggetto client.</span><span class="sxs-lookup"><span data-stu-id="821b9-142">Before you can create a [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] client object, you must configure the client object.</span></span> <span data-ttu-id="821b9-143">In particolare, deve avere un servizio *endpoint* da utilizzare.</span><span class="sxs-lookup"><span data-stu-id="821b9-143">Specifically, it must have a service *endpoint* to use.</span></span> <span data-ttu-id="821b9-144">Un endpoint è la combinazione di un contratto di servizio, un'associazione e un indirizzo.</span><span class="sxs-lookup"><span data-stu-id="821b9-144">An endpoint is the combination of a service contract, a binding, and an address.</span></span> <span data-ttu-id="821b9-145">([!INCLUDE[crabout](../../../includes/crabout-md.md)] endpoint, vedere [endpoint: indirizzi, associazioni e contratti](../../../docs/framework/wcf/feature-details/endpoints-addresses-bindings-and-contracts.md).) In genere, queste informazioni si trovano nel [ \<endpoint >](../../../docs/framework/configure-apps/file-schema/wcf/endpoint-of-client.md) elemento in un file di configurazione dell'applicazione client, ad esempio quello dello strumento Svcutil.exe genera l'errore e viene caricato automaticamente quando si crea il client oggetto.</span><span class="sxs-lookup"><span data-stu-id="821b9-145">([!INCLUDE[crabout](../../../includes/crabout-md.md)] endpoints, see [Endpoints: Addresses, Bindings, and Contracts](../../../docs/framework/wcf/feature-details/endpoints-addresses-bindings-and-contracts.md).) Typically, this information is located in the [\<endpoint>](../../../docs/framework/configure-apps/file-schema/wcf/endpoint-of-client.md) element in a client application configuration file, such as the one the Svcutil.exe tool generates, and is loaded automatically when you create your client object.</span></span> <span data-ttu-id="821b9-146">Entrambi i tipi di client [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] dispongono inoltre di overload che consentono di specificare queste informazioni a livello di programmazione.</span><span class="sxs-lookup"><span data-stu-id="821b9-146">Both [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] client types also have overloads that enable you to programmatically specify this information.</span></span>  
  
 <span data-ttu-id="821b9-147">Ad esempio, un file di configurazione generato per un servizio `ISampleService` usato negli esempi precedenti contiene le informazioni sull'endpoint riportate di seguito.</span><span class="sxs-lookup"><span data-stu-id="821b9-147">For example, a generated configuration file for an `ISampleService` used in the preceding examples contains the following endpoint information.</span></span>  
  
 [!code-xml[C_GeneratedCodeFiles#19](../../../samples/snippets/csharp/VS_Snippets_CFX/c_generatedcodefiles/common/client.exe.config#19)]  
  
 <span data-ttu-id="821b9-148">Questo file di configurazione specifica un endpoint di destinazione nell'elemento `<client>`.</span><span class="sxs-lookup"><span data-stu-id="821b9-148">This configuration file specifies a target endpoint in the `<client>` element.</span></span> [!INCLUDE[crabout](../../../includes/crabout-md.md)]<span data-ttu-id="821b9-149">ll'utilizzo di più endpoint di destinazione, vedere i costruttori <xref:System.ServiceModel.ClientBase%601.%23ctor%2A?displayProperty=nameWithType> o <xref:System.ServiceModel.ChannelFactory%601.%23ctor%2A?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="821b9-149"> using multiple target endpoints, see the <xref:System.ServiceModel.ClientBase%601.%23ctor%2A?displayProperty=nameWithType> or the <xref:System.ServiceModel.ChannelFactory%601.%23ctor%2A?displayProperty=nameWithType> constructors.</span></span>  
  
## <a name="calling-operations"></a><span data-ttu-id="821b9-150">Chiamate alle operazioni</span><span class="sxs-lookup"><span data-stu-id="821b9-150">Calling Operations</span></span>  
 <span data-ttu-id="821b9-151">Dopo avere creato e configurato un oggetto client, creare un blocco Try/Catch, chiamare le operazioni nello stesso modo in cui verrebbero chiamate nel caso di un oggetto locale, quindi chiudere l'oggetto client [!INCLUDE[indigo2](../../../includes/indigo2-md.md)].</span><span class="sxs-lookup"><span data-stu-id="821b9-151">Once you have a client object created and configured, create a try/catch block, call operations in the same way that you would if the object were local, and close the [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] client object.</span></span> <span data-ttu-id="821b9-152">Quando l'applicazione client chiama la prima operazione, [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] apre automaticamente il canale sottostante e quest'ultimo viene chiuso quando l'oggetto viene riciclato.</span><span class="sxs-lookup"><span data-stu-id="821b9-152">When the client application calls the first operation, [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] automatically opens the underlying channel, and the underlying channel is closed when the object is recycled.</span></span> <span data-ttu-id="821b9-153">In alternativa, è possibile aprire e chiudere il canale in modo esplicito prima o dopo la chiamata ad altre operazioni.</span><span class="sxs-lookup"><span data-stu-id="821b9-153">(Alternatively, you can also explicitly open and close the channel prior to or subsequent to calling other operations.)</span></span>  
  
 <span data-ttu-id="821b9-154">Si supponga, ad esempio, di disporre del contratto di servizio seguente:</span><span class="sxs-lookup"><span data-stu-id="821b9-154">For example, if you have the following service contract:</span></span>  
  
```csharp  
namespace Microsoft.ServiceModel.Samples  
{  
    using System;  
    using System.ServiceModel;  
  
    [ServiceContract(Namespace = "http://Microsoft.ServiceModel.Samples")]  
    public interface ICalculator  
   {  
        [OperationContract]  
        double Add(double n1, double n2);  
        [OperationContract]  
        double Subtract(double n1, double n2);  
        [OperationContract]  
        double Multiply(double n1, double n2);  
        [OperationContract]  
        double Divide(double n1, double n2);  
    }  
}  
```  
  
```vb  
Namespace Microsoft.ServiceModel.Samples  
  
    Imports System  
    Imports System.ServiceModel  
  
    <ServiceContract(Namespace:= _  
    "http://Microsoft.ServiceModel.Samples")> _   
   Public Interface ICalculator  
        <OperationContract> _   
        Function Add(n1 As Double, n2 As Double) As Double  
        <OperationContract> _   
        Function Subtract(n1 As Double, n2 As Double) As Double  
        <OperationContract> _   
        Function Multiply(n1 As Double, n2 As Double) As Double  
        <OperationContract> _   
     Function Divide(n1 As Double, n2 As Double) As Double  
End Interface  
```  
  
 <span data-ttu-id="821b9-155">È possibile chiamare operazioni creando un oggetto client [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] e chiamando i relativi metodi, come illustrato nell'esempio di codice seguente.</span><span class="sxs-lookup"><span data-stu-id="821b9-155">You can call operations by creating a [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] client object and calling its methods, as the following code example demonstrates.</span></span> <span data-ttu-id="821b9-156">L'apertura, la chiamata e la chiusura dell'oggetto client [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] si verificano all'interno di un singolo blocco Try/Catch.</span><span class="sxs-lookup"><span data-stu-id="821b9-156">Note that the opening, calling, and closing of the [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] client object occurs within a single try/catch block.</span></span> [!INCLUDE[crdefault](../../../includes/crdefault-md.md)]<span data-ttu-id="821b9-157">[L'accesso ai servizi tramite Client WCF](../../../docs/framework/wcf/feature-details/accessing-services-using-a-client.md) e [evitare problemi con l'istruzione Using](../../../docs/framework/wcf/samples/avoiding-problems-with-the-using-statement.md).</span><span class="sxs-lookup"><span data-stu-id="821b9-157"> [Accessing Services Using a WCF Client](../../../docs/framework/wcf/feature-details/accessing-services-using-a-client.md) and [Avoiding Problems with the Using Statement](../../../docs/framework/wcf/samples/avoiding-problems-with-the-using-statement.md).</span></span>  
  
 [!code-csharp[C_GeneratedCodeFiles#20](../../../samples/snippets/csharp/VS_Snippets_CFX/c_generatedcodefiles/cs/proxycode.cs#20)]  
  
## <a name="handling-errors"></a><span data-ttu-id="821b9-158">Gestione degli errori</span><span class="sxs-lookup"><span data-stu-id="821b9-158">Handling Errors</span></span>  
 <span data-ttu-id="821b9-159">In un'applicazione client possono verificarsi eccezioni quando si apre il canale client sottostante (sia in modo esplicito che automaticamente chiamando un'operazione), quando si usa l'oggetto client o l'oggetto canale per chiamare operazioni o quando si chiude il canale client sottostante.</span><span class="sxs-lookup"><span data-stu-id="821b9-159">Exceptions can occur in a client application when opening the underlying client channel (whether explicitly or automatically by calling an operation), using the client or channel object to call operations, or when closing the underlying client channel.</span></span> <span data-ttu-id="821b9-160">Oltre a gestire qualsiasi oggetto <xref:System.TimeoutException?displayProperty=nameWithType> generato come risultato di errori SOAP restituiti dalle operazioni, le applicazioni dovrebbero essere configurate per gestire almeno possibili eccezioni <xref:System.ServiceModel.CommunicationException?displayProperty=nameWithType> e <xref:System.ServiceModel.FaultException?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="821b9-160">It is recommended at a minimum that applications expect to handle possible <xref:System.TimeoutException?displayProperty=nameWithType> and <xref:System.ServiceModel.CommunicationException?displayProperty=nameWithType> exceptions in addition to any <xref:System.ServiceModel.FaultException?displayProperty=nameWithType> objects thrown as a result of SOAP faults returned by operations.</span></span> <span data-ttu-id="821b9-161">Gli errori SOAP specificati nel contratto dell'operazione vengono generati nelle applicazioni client come oggetto <xref:System.ServiceModel.FaultException%601?displayProperty=nameWithType> dove il parametro di tipo è il tipo di dettaglio dell'errore SOAP.</span><span class="sxs-lookup"><span data-stu-id="821b9-161">SOAP faults specified in the operation contract are raised to client applications as a <xref:System.ServiceModel.FaultException%601?displayProperty=nameWithType> where the type parameter is the detail type of the SOAP fault.</span></span> [!INCLUDE[crabout](../../../includes/crabout-md.md)]<span data-ttu-id="821b9-162">la gestione delle condizioni di errore in un'applicazione client, vedere [invio e ricezione di errori](../../../docs/framework/wcf/sending-and-receiving-faults.md).</span><span class="sxs-lookup"><span data-stu-id="821b9-162"> handling error conditions in a client application, see [Sending and Receiving Faults](../../../docs/framework/wcf/sending-and-receiving-faults.md).</span></span> <span data-ttu-id="821b9-163">Per un esempio completo che mostra come gestire gli errori in un client, vedere [previsto eccezioni](../../../docs/framework/wcf/samples/expected-exceptions.md).</span><span class="sxs-lookup"><span data-stu-id="821b9-163">For a complete sample the shows how to handle errors in a client, see [Expected Exceptions](../../../docs/framework/wcf/samples/expected-exceptions.md).</span></span>  
  
## <a name="configuring-and-securing-clients"></a><span data-ttu-id="821b9-164">Configurazione e protezione dei client</span><span class="sxs-lookup"><span data-stu-id="821b9-164">Configuring and Securing Clients</span></span>  
 <span data-ttu-id="821b9-165">La configurazione di un client inizia con il caricamento obbligatorio di informazioni sull'endpoint di destinazione per il client o per l'oggetto del canale, generalmente da un file di configurazione, sebbene sia possibile caricare queste informazioni anche a livello di programmazione usando i costruttori e le proprietà del client.</span><span class="sxs-lookup"><span data-stu-id="821b9-165">Configuring a client starts with the required loading of target endpoint information for the client or channel object, usually from a configuration file, although you can also load this information programmatically using the client constructors and properties.</span></span> <span data-ttu-id="821b9-166">Per attivare determinati comportamenti del client e per numerosi scenari di sicurezza sono tuttavia necessarie operazioni di configurazione aggiuntive.</span><span class="sxs-lookup"><span data-stu-id="821b9-166">However, additional configuration steps are required to enable certain client behavior and for many security scenarios.</span></span>  
  
 <span data-ttu-id="821b9-167">I requisiti di sicurezza per i contratti di servizio, ad esempio, vengono dichiarati nell'interfaccia del contratto di servizio e se lo strumento Svcutil.exe ha creato un file di configurazione, questo file contiene in genere un'associazione in grado di supportare i requisiti di sicurezza del servizio.</span><span class="sxs-lookup"><span data-stu-id="821b9-167">For example, security requirements for service contracts are declared in the service contract interface, and if Svcutil.exe created a configuration file, that file usually contains a binding that is capable of supporting the security requirements of the service.</span></span> <span data-ttu-id="821b9-168">In alcuni casi può essere però necessaria un'ulteriore configurazione della protezione, ad esempio la configurazione di credenziali client.</span><span class="sxs-lookup"><span data-stu-id="821b9-168">In some cases, however, more security configuration may be required, such as configuring client credentials.</span></span> <span data-ttu-id="821b9-169">Per informazioni complete sulla configurazione di sicurezza per [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] client, vedere [protezione di client](../../../docs/framework/wcf/securing-clients.md).</span><span class="sxs-lookup"><span data-stu-id="821b9-169">For complete information about the configuration of security for [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] clients, see [Securing Clients](../../../docs/framework/wcf/securing-clients.md).</span></span>  
  
 <span data-ttu-id="821b9-170">Nelle applicazioni client possono essere inoltre abilitate alcune modifiche personalizzate, ad esempio comportamenti personalizzati nella fase di esecuzione.</span><span class="sxs-lookup"><span data-stu-id="821b9-170">In addition, some custom modifications can be enabled in client applications, such as custom run-time behaviors.</span></span> [!INCLUDE[crabout](../../../includes/crabout-md.md)]<span data-ttu-id="821b9-171">come configurare un comportamento client personalizzato, vedere [configurazione dei comportamenti Client](../../../docs/framework/wcf/configuring-client-behaviors.md).</span><span class="sxs-lookup"><span data-stu-id="821b9-171"> how to configure a custom client behavior, see [Configuring Client Behaviors](../../../docs/framework/wcf/configuring-client-behaviors.md).</span></span>  
  
## <a name="creating-callback-objects-for-duplex-services"></a><span data-ttu-id="821b9-172">Creazione di oggetti di callback per i servizi duplex</span><span class="sxs-lookup"><span data-stu-id="821b9-172">Creating Callback Objects for Duplex Services</span></span>  
 <span data-ttu-id="821b9-173">I servizi duplex specificano un contratto di callback che l'applicazione client deve implementare per fornire un oggetto di callback affinché il servizio esegua la chiamata in base ai requisiti del contratto.</span><span class="sxs-lookup"><span data-stu-id="821b9-173">Duplex services specify a callback contract that the client application must implement in order to provide a callback object for the service to call according to the requirements of the contract.</span></span> <span data-ttu-id="821b9-174">Sebbene gli oggetti di callback non siano servizi completi (ad esempio, non è possibile avviare un canale con un oggetto di callback), ai fini dell'implementazione e della configurazione possono essere considerati come una specie di servizio.</span><span class="sxs-lookup"><span data-stu-id="821b9-174">Although callback objects are not full services (for example, you cannot initiate a channel with a callback object), for the purposes of implementation and configuration they can be thought of as a kind of service.</span></span>  
  
 <span data-ttu-id="821b9-175">I client di servizi duplex devono:</span><span class="sxs-lookup"><span data-stu-id="821b9-175">Clients of duplex services must:</span></span>  
  
-   <span data-ttu-id="821b9-176">Implementare una classe di contratto di callback.</span><span class="sxs-lookup"><span data-stu-id="821b9-176">Implement a callback contract class.</span></span>  
  
-   <span data-ttu-id="821b9-177">Creare un'istanza della classe di implementazione del contratto di callback e usarla per creare l'oggetto <xref:System.ServiceModel.InstanceContext?displayProperty=nameWithType> che viene passato al costruttore client [!INCLUDE[indigo2](../../../includes/indigo2-md.md)].</span><span class="sxs-lookup"><span data-stu-id="821b9-177">Create an instance of the callback contract implementation class and use it to create the <xref:System.ServiceModel.InstanceContext?displayProperty=nameWithType> object that you pass to the [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] client constructor.</span></span>  
  
-   <span data-ttu-id="821b9-178">Richiamare operazioni e gestire callback di operazioni.</span><span class="sxs-lookup"><span data-stu-id="821b9-178">Invoke operations and handle operation callbacks.</span></span>  
  
 <span data-ttu-id="821b9-179">Gli oggetti client duplex di [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] funzionano come le relative controparti non duplex, tranne per il fatto che espongono la funzionalità necessaria per supportare i callback, inclusa la configurazione del servizio di callback.</span><span class="sxs-lookup"><span data-stu-id="821b9-179">Duplex [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] client objects function like their nonduplex counterparts, with the exception that they expose the functionality necessary to support callbacks, including the configuration of the callback service.</span></span>  
  
 <span data-ttu-id="821b9-180">È possibile controllare, ad esempio, i vari aspetti del comportamento degli oggetti di callback in fase di esecuzione usando proprietà dell'attributo <xref:System.ServiceModel.CallbackBehaviorAttribute?displayProperty=nameWithType> nella classe di callback.</span><span class="sxs-lookup"><span data-stu-id="821b9-180">For example, you can control various aspects of callback object runtime behavior by using properties of the <xref:System.ServiceModel.CallbackBehaviorAttribute?displayProperty=nameWithType> attribute on the callback class.</span></span> <span data-ttu-id="821b9-181">Un altro esempio è l'uso della classe <xref:System.ServiceModel.Description.CallbackDebugBehavior?displayProperty=nameWithType> per attivare la restituzione di informazioni sull'eccezione ai servizi che chiamano l'oggetto di callback.</span><span class="sxs-lookup"><span data-stu-id="821b9-181">Another example is the use of the <xref:System.ServiceModel.Description.CallbackDebugBehavior?displayProperty=nameWithType> class to enable the return of exception information to services that call the callback object.</span></span> [!INCLUDE[crdefault](../../../includes/crdefault-md.md)]<span data-ttu-id="821b9-182">[Servizi duplex](../../../docs/framework/wcf/feature-details/duplex-services.md).</span><span class="sxs-lookup"><span data-stu-id="821b9-182"> [Duplex Services](../../../docs/framework/wcf/feature-details/duplex-services.md).</span></span> <span data-ttu-id="821b9-183">Per un esempio completo, vedere [Duplex](../../../docs/framework/wcf/samples/duplex.md).</span><span class="sxs-lookup"><span data-stu-id="821b9-183">For a complete sample, see [Duplex](../../../docs/framework/wcf/samples/duplex.md).</span></span>  
  
 <span data-ttu-id="821b9-184">Nei computer Windows XP che eseguono Internet Information Services (IIS) 5.1, i client duplex devono specificare un indirizzo client di base usando la classe <xref:System.ServiceModel.WSDualHttpBinding?displayProperty=nameWithType>. In caso contrario verrà generata un'eccezione.</span><span class="sxs-lookup"><span data-stu-id="821b9-184">On Windows XP computers running Internet Information Services (IIS) 5.1, duplex clients must specify a client base address using the <xref:System.ServiceModel.WSDualHttpBinding?displayProperty=nameWithType> class or an exception is thrown.</span></span> <span data-ttu-id="821b9-185">Nel codice di esempio seguente viene illustrato come eseguire questa procedura nel codice.</span><span class="sxs-lookup"><span data-stu-id="821b9-185">The following code example shows how to do this in code.</span></span>  
  
 [!code-csharp[S_DualHttp#8](../../../samples/snippets/csharp/VS_Snippets_CFX/s_dualhttp/cs/program.cs#8)]
 [!code-vb[S_DualHttp#8](../../../samples/snippets/visualbasic/VS_Snippets_CFX/s_dualhttp/vb/module1.vb#8)]  
  
 <span data-ttu-id="821b9-186">Il codice seguente mostra come eseguire la procedura in un file di configurazione.</span><span class="sxs-lookup"><span data-stu-id="821b9-186">The following code shows how to do this in a configuration file</span></span>  
  
 [!code-csharp[S_DualHttp#134](../../../samples/snippets/csharp/VS_Snippets_CFX/s_dualhttp/cs/program.cs#134)]  
  
## <a name="calling-services-asynchronously"></a><span data-ttu-id="821b9-187">Chiamate ai servizi in modo asincrono</span><span class="sxs-lookup"><span data-stu-id="821b9-187">Calling Services Asynchronously</span></span>  
 <span data-ttu-id="821b9-188">La modalità in cui vengono chiamate le operazioni dipende interamente dallo sviluppatore client.</span><span class="sxs-lookup"><span data-stu-id="821b9-188">How operations are called is entirely up to the client developer.</span></span> <span data-ttu-id="821b9-189">Ciò è dovuto al fatto che i messaggi che costituiscono un'operazione possono essere mappati a metodi sincroni o asincroni quando vengono espressi in codice gestito.</span><span class="sxs-lookup"><span data-stu-id="821b9-189">This is because the messages that make up an operation can be mapped to either synchronous or asynchronous methods when expressed in managed code.</span></span> <span data-ttu-id="821b9-190">Pertanto, se si desidera compilare un client che chiama operazioni in modo asincrono, è possibile usare Svcutil.exe per generare codice client asincrono usando l'opzione `/async`.</span><span class="sxs-lookup"><span data-stu-id="821b9-190">Therefore, if you want to build a client that calls operations asynchronously, you can use Svcutil.exe to generate asynchronous client code using the `/async` option.</span></span> [!INCLUDE[crdefault](../../../includes/crdefault-md.md)]<span data-ttu-id="821b9-191">[Procedura: chiamare operazioni del servizio in modo asincrono](../../../docs/framework/wcf/feature-details/how-to-call-wcf-service-operations-asynchronously.md).</span><span class="sxs-lookup"><span data-stu-id="821b9-191"> [How to: Call Service Operations Asynchronously](../../../docs/framework/wcf/feature-details/how-to-call-wcf-service-operations-asynchronously.md).</span></span>  
  
## <a name="calling-services-using-wcf-client-channels"></a><span data-ttu-id="821b9-192">Chiamate ai servizi mediante canali client di WCF</span><span class="sxs-lookup"><span data-stu-id="821b9-192">Calling Services Using WCF Client Channels</span></span>  
 <span data-ttu-id="821b9-193">I tipi di client [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] estendono la classe <xref:System.ServiceModel.ClientBase%601>, che deriva essa stessa dall'interfaccia <xref:System.ServiceModel.IClientChannel?displayProperty=nameWithType> per esporre il sistema di canali sottostante.</span><span class="sxs-lookup"><span data-stu-id="821b9-193">[!INCLUDE[indigo2](../../../includes/indigo2-md.md)] client types extend <xref:System.ServiceModel.ClientBase%601>, which itself derives from <xref:System.ServiceModel.IClientChannel?displayProperty=nameWithType> interface to expose the underlying channel system.</span></span> <span data-ttu-id="821b9-194">È possibile richiamare servizi usando il contratto di servizio di destinazione con la classe <xref:System.ServiceModel.ChannelFactory%601?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="821b9-194">You can invoke services by using the target service contract with the <xref:System.ServiceModel.ChannelFactory%601?displayProperty=nameWithType> class.</span></span> <span data-ttu-id="821b9-195">Per informazioni dettagliate, vedere [architettura Client WCF](../../../docs/framework/wcf/feature-details/client-architecture.md).</span><span class="sxs-lookup"><span data-stu-id="821b9-195">For details, see [WCF Client Architecture](../../../docs/framework/wcf/feature-details/client-architecture.md).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="821b9-196">Vedere anche</span><span class="sxs-lookup"><span data-stu-id="821b9-196">See Also</span></span>  
 <xref:System.ServiceModel.ClientBase%601?displayProperty=nameWithType>  
 <xref:System.ServiceModel.ChannelFactory%601?displayProperty=nameWithType>
