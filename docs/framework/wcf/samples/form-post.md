---
title: Invio del form
ms.custom: 
ms.date: 03/30/2017
ms.prod: .net-framework
ms.reviewer: 
ms.suite: 
ms.technology: dotnet-clr
ms.tgt_pltfrm: 
ms.topic: article
ms.assetid: fa6f84f9-2e07-4e3c-92d0-a245308b7dff
caps.latest.revision: "9"
author: dotnet-bot
ms.author: dotnetcontent
manager: wpickett
ms.openlocfilehash: e0fe1f8641de2b4ee504deeae8f97b312dfe9b99
ms.sourcegitcommit: ce279f2d7fe2220e6ea0a25a8a7a5370ddf8d9f0
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 12/02/2017
---
# <a name="form-post"></a><span data-ttu-id="ade5c-102">Invio del form</span><span class="sxs-lookup"><span data-stu-id="ade5c-102">Form Post</span></span>
<span data-ttu-id="ade5c-103">In questo esempio viene descritto come estendere il modello di programmazione WCF REST per supportare i nuovi formati delle richieste in entrata.</span><span class="sxs-lookup"><span data-stu-id="ade5c-103">This sample demonstrates how to extend the WCF REST programming model to support new incoming request formats.</span></span> <span data-ttu-id="ade5c-104">Nell'esempio è inoltre inclusa l'implementazione di un formattatore in grado di deserializzare una richiesta da un invio di form HTML in un tipo di [!INCLUDE[dnprdnshort](../../../../includes/dnprdnshort-md.md)].</span><span class="sxs-lookup"><span data-stu-id="ade5c-104">The sample also includes an implementation of a formatter that can deserialize a request from an HTML form post into a [!INCLUDE[dnprdnshort](../../../../includes/dnprdnshort-md.md)] type.</span></span> <span data-ttu-id="ade5c-105">Nell'esempio viene infine usato un modello T4 per la restituzione di una pagina HTML, il quale fornisce il form HTML che gli utenti possono usare per eseguire il postback al servizio WCF REST.</span><span class="sxs-lookup"><span data-stu-id="ade5c-105">In addition, the sample uses a T4 Template to return an HTML page, which provides the HTML form that users can post back to the WCF REST service.</span></span>  
  
## <a name="demonstrates"></a><span data-ttu-id="ade5c-106">Dimostrazione</span><span class="sxs-lookup"><span data-stu-id="ade5c-106">Demonstrates</span></span>  
  
-   <span data-ttu-id="ade5c-107">Estensione del supporto per i formati delle richieste in entrata.</span><span class="sxs-lookup"><span data-stu-id="ade5c-107">Extending support for incoming request formats.</span></span>  
  
-   <span data-ttu-id="ade5c-108">Integrazione di modelli T4.</span><span class="sxs-lookup"><span data-stu-id="ade5c-108">Integrating T4 templates.</span></span>  
  
## <a name="discussion"></a><span data-ttu-id="ade5c-109">Discussione</span><span class="sxs-lookup"><span data-stu-id="ade5c-109">Discussion</span></span>  
 <span data-ttu-id="ade5c-110">L'esempio è costituito da due progetti.</span><span class="sxs-lookup"><span data-stu-id="ade5c-110">This sample consists of two projects.</span></span> <span data-ttu-id="ade5c-111">Il primo progetto è la libreria HtmlFormProcessing che include un formattatore di richieste personalizzato in grado di deserializzare invii di form HTML nei tipi di [!INCLUDE[dnprdnshort](../../../../includes/dnprdnshort-md.md)].</span><span class="sxs-lookup"><span data-stu-id="ade5c-111">One project is the HtmlFormProcessing library that includes a custom request formatter that can deserialize HTML form posts into [!INCLUDE[dnprdnshort](../../../../includes/dnprdnshort-md.md)] types.</span></span> <span data-ttu-id="ade5c-112">Il secondo progetto è un'applicazione console che estende l'esempio relativo al servizio risorse di base per l'uso del formattatore di richieste personalizzato della libreria HtmlFormProcessing.</span><span class="sxs-lookup"><span data-stu-id="ade5c-112">The second project is a console application that extends the Basic Resource Service sample to use the custom request formatter of the HtmlFormProcessing library.</span></span>  
  
 <span data-ttu-id="ade5c-113">Il formattatore personalizzato in grado di deserializzare invii di form HTML (HtmlFormRequestDispatchFormatter) accetta entrambi i tipi di [!INCLUDE[dnprdnshort](../../../../includes/dnprdnshort-md.md)] che possono essere convertiti da una stringa usando <xref:System.ServiceModel.Dispatcher.QueryStringConverter> e i tipi contrassegnati con <xref:System.Runtime.Serialization.DataContractAttribute> che dispongono esclusivamente di membri convertibili da una stringa tramite QueryStringConverter.</span><span class="sxs-lookup"><span data-stu-id="ade5c-113">The custom formatter that can deserialize HTML form posts (HtmlFormRequestDispatchFormatter) accepts both [!INCLUDE[dnprdnshort](../../../../includes/dnprdnshort-md.md)] types that can be converted from a string using the <xref:System.ServiceModel.Dispatcher.QueryStringConverter> and types marked with <xref:System.Runtime.Serialization.DataContractAttribute> that only have members that can be converted from a string using the QueryStringConverter.</span></span>  
  
 <span data-ttu-id="ade5c-114">Nel progetto di libreria HtmlFormProcessing è inoltre inclusa una classe di base astratta, ovvero `RequestBodyDispatchFormatter`, che può essere usata per creare altri formattatori di richieste personalizzati.</span><span class="sxs-lookup"><span data-stu-id="ade5c-114">The HtmlFormProcessing library project also includes an abstract base class, `RequestBodyDispatchFormatter`, which can be used to create other custom request formatters.</span></span> <span data-ttu-id="ade5c-115">La derivazione da `RequestBodyDispatchFormatter` consente a uno sviluppatore di concentrarsi sulla logica di deserializzazione del corpo della richiesta, permettendo alla classe di base di eseguire il mapping dei parametri del modello di URI ai parametri del metodo dell'operazione.</span><span class="sxs-lookup"><span data-stu-id="ade5c-115">Deriving from the `RequestBodyDispatchFormatter` allows a developer to focus on the request body deserialization logic, which allows the base class to map the URI template parameters to the operation’s method parameters.</span></span> <span data-ttu-id="ade5c-116">Nel progetto di libreria HtmlFormProcessing è inoltre inclusa la classe `HtmlFormProcessingBehavior`, che illustra come derivare da <xref:System.ServiceModel.Description.WebHttpBehavior> per sostituire il formattatore di richieste predefinito con un formattatore di richieste personalizzato.</span><span class="sxs-lookup"><span data-stu-id="ade5c-116">Also in the HtmlFormProcessing library project is the `HtmlFormProcessingBehavior` class, which demonstrates how to derive from the <xref:System.ServiceModel.Description.WebHttpBehavior> to replace the default request formatter with a custom request formatter.</span></span>  
  
 <span data-ttu-id="ade5c-117">Questo progetto di applicazione console estende il [servizio risorse di base](../../../../docs/framework/wcf/samples/basic-resource-service.md) esempio.</span><span class="sxs-lookup"><span data-stu-id="ade5c-117">This console application project extends the [Basic Resource Service](../../../../docs/framework/wcf/samples/basic-resource-service.md) sample.</span></span> <span data-ttu-id="ade5c-118">Nell'esempio relativo al servizio risorse di base viene illustrato come esporre una risorsa in modo che venga usato il modello di programmazione WCF REST.</span><span class="sxs-lookup"><span data-stu-id="ade5c-118">The Basic Resource Service sample demonstrates how to expose a resource in a manner that uses the WCF REST programming model.</span></span> <span data-ttu-id="ade5c-119">Nell'esempio relativo al servizio risorse di base una risorsa raccolta di clienti viene esposta in modo tale che i clienti della raccolta possano essere creati, recuperati, aggiornati ed eliminati.</span><span class="sxs-lookup"><span data-stu-id="ade5c-119">In the Basic Resource Service sample, a customer collection resource is exposed such that customers in the collection can be created, retrieved, updated and deleted.</span></span> <span data-ttu-id="ade5c-120">Nell'esempio relativo al servizio risorse di base vengono usati esclusivamente due formati per le richieste in entrata supportati a livello nativo, ovvero XML e JSON.</span><span class="sxs-lookup"><span data-stu-id="ade5c-120">The Basic Resource Service sample only uses the two natively supported incoming request formats, XML and JSON.</span></span>  
  
 <span data-ttu-id="ade5c-121">L'applicazione console in questo esempio relativo all'invio di form usa il formattatore personalizzato incluso nella libreria HtmlFormProcessing che consente agli utenti di creare clienti inviando una richiesta da un invio di form HTML mediante un browser.</span><span class="sxs-lookup"><span data-stu-id="ade5c-121">The console application in this Form Post sample utilizes the custom formatter in the HtmlFormProcessing library, which allows users to create customers by sending a request from an HTML form post using a browser.</span></span> <span data-ttu-id="ade5c-122">Consente inoltre di aggiungere un'operazione che restituisce una pagina HTML in cui è incluso il form del quale eseguire il postback al servizio.</span><span class="sxs-lookup"><span data-stu-id="ade5c-122">It also adds an operation that returns an HTML page, which includes the form to be posted back to the service.</span></span> <span data-ttu-id="ade5c-123">Questa pagina HTML viene generata usando un modello T4 pre-elaborato costituito da un file con estensione tt e da un file con estensione cs generato automaticamente.</span><span class="sxs-lookup"><span data-stu-id="ade5c-123">This HTML page is generated using a preprocessed T4 template, which consists of a .tt file and an auto-generated .cs file.</span></span> <span data-ttu-id="ade5c-124">Il file con estensione tt consente a uno sviluppatore di scrivere una risposta in un form del modello contenente variabili e strutture di controllo.</span><span class="sxs-lookup"><span data-stu-id="ade5c-124">The .tt file allows a developer to write a response in a template form that contains variables and control structures.</span></span> [!INCLUDE[crabout](../../../../includes/crabout-md.md)]<span data-ttu-id="ade5c-125">T4, vedere [la generazione di elementi di modelli di testo T4](http://go.microsoft.com/fwlink/?LinkId=178139).</span><span class="sxs-lookup"><span data-stu-id="ade5c-125"> T4, see [Generating Artifacts By Using Text Templates](http://go.microsoft.com/fwlink/?LinkId=178139).</span></span>  
  
#### <a name="to-run-the-sample"></a><span data-ttu-id="ade5c-126">Per eseguire l'esempio</span><span class="sxs-lookup"><span data-stu-id="ade5c-126">To run the sample</span></span>  
  
1.  <span data-ttu-id="ade5c-127">Aprire la soluzione per l'esempio relativo all'invio del form.</span><span class="sxs-lookup"><span data-stu-id="ade5c-127">Open the solution for the Form Post Sample.</span></span> <span data-ttu-id="ade5c-128">Per garantire l'esecuzione corretta dell'esempio, è necessario avviare [!INCLUDE[vs_current_long](../../../../includes/vs-current-long-md.md)] come amministratore.</span><span class="sxs-lookup"><span data-stu-id="ade5c-128">When launching [!INCLUDE[vs_current_long](../../../../includes/vs-current-long-md.md)], you must run as an administrator to execute the sample successfully.</span></span> <span data-ttu-id="ade5c-129">Farlo facendo clic con il [!INCLUDE[vs_current_long](../../../../includes/vs-current-long-md.md)] icona e scegliere "Esegui come amministratore" dal menu di scelta rapida.</span><span class="sxs-lookup"><span data-stu-id="ade5c-129">Do this by right-clicking the [!INCLUDE[vs_current_long](../../../../includes/vs-current-long-md.md)] icon and choosing "Run as Administrator" from the context menu.</span></span>  
  
2.  <span data-ttu-id="ade5c-130">Premere CTRL+MAIUSC+B per compilare la soluzione, quindi premere CTRL+F5 per eseguire il progetto di applicazione console FormPost.</span><span class="sxs-lookup"><span data-stu-id="ade5c-130">Press CTRL+SHIFT+B to build the solution and then press CTRL+F5 to run the console application FormPost project.</span></span>  
  
3.  <span data-ttu-id="ade5c-131">Verrà visualizzata la finestra della console in cui saranno disponibili gli URI del servizio in esecuzione e della pagina della Guida HTML per il servizio in esecuzione.</span><span class="sxs-lookup"><span data-stu-id="ade5c-131">The console window appears and provides the URI of the running service and the URI of the HTML help page for the running service.</span></span>  
  
4.  <span data-ttu-id="ade5c-132">Durante l'esecuzione dell'esempio, il client scrive lo stato dell'attività corrente, qualora sia in corso l'aggiunta, l'aggiornamento o l'eliminazione di un cliente oppure il recupero di un elenco dei clienti correnti dal servizio nella finestra della console.</span><span class="sxs-lookup"><span data-stu-id="ade5c-132">As the sample runs, the client writes the status of the current activity, whether it be adding a customer, updating a customer, deleting a customer or getting a list of current customers from the service to the console window.</span></span>  
  
5.  <span data-ttu-id="ade5c-133">Verrà quindi richiesto di passare all'URI del form dei clienti.</span><span class="sxs-lookup"><span data-stu-id="ade5c-133">You are then prompted to browse to the URI of the customer form.</span></span> <span data-ttu-id="ade5c-134">Aprire un browser e passare all'URI specificato.</span><span class="sxs-lookup"><span data-stu-id="ade5c-134">Open a browser and browse to the given URI.</span></span> <span data-ttu-id="ade5c-135">Digitare un nome e l'indirizzo per il cliente e fare clic su di **Invia** pulsante.</span><span class="sxs-lookup"><span data-stu-id="ade5c-135">Type in a name and address for the customer and click the **Submit** button.</span></span>  
  
6.  <span data-ttu-id="ade5c-136">Premere un tasto qualsiasi per fare in modo che l'esempio continui a essere eseguito nella finestra della console.</span><span class="sxs-lookup"><span data-stu-id="ade5c-136">Press any key for the console window to continue running the sample.</span></span>  
  
7.  <span data-ttu-id="ade5c-137">Durante il completamento dell'esempio, si noti che il cliente creato usando il browser è stato incluso nell'elenco finale di clienti.</span><span class="sxs-lookup"><span data-stu-id="ade5c-137">As the sample completes, notice that the customer you created using the browser is included in the final list of customers.</span></span>  
  
8.  <span data-ttu-id="ade5c-138">Premere un tasto qualsiasi per terminare l'esempio.</span><span class="sxs-lookup"><span data-stu-id="ade5c-138">Press any key to terminate the sample.</span></span>  
  
> [!IMPORTANT]
>  <span data-ttu-id="ade5c-139">È possibile che gli esempi siano già installati nel computer.</span><span class="sxs-lookup"><span data-stu-id="ade5c-139">The samples may already be installed on your machine.</span></span> <span data-ttu-id="ade5c-140">Verificare la directory seguente (impostazione predefinita) prima di continuare.</span><span class="sxs-lookup"><span data-stu-id="ade5c-140">Check for the following (default) directory before continuing.</span></span>  
>   
>  `<InstallDrive>:\WF_WCF_Samples`  
>   
>  <span data-ttu-id="ade5c-141">Se questa directory non esiste, andare alla sezione relativa agli [esempi di Windows Communication Foundation (WCF) e Windows Workflow Foundation (WF) per .NET Framework 4](http://go.microsoft.com/fwlink/?LinkId=150780) per scaricare tutti gli esempi di [!INCLUDE[indigo1](../../../../includes/indigo1-md.md)] e [!INCLUDE[wf1](../../../../includes/wf1-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="ade5c-141">If this directory does not exist, go to [Windows Communication Foundation (WCF) and Windows Workflow Foundation (WF) Samples for .NET Framework 4](http://go.microsoft.com/fwlink/?LinkId=150780) to download all [!INCLUDE[indigo1](../../../../includes/indigo1-md.md)] and [!INCLUDE[wf1](../../../../includes/wf1-md.md)] samples.</span></span> <span data-ttu-id="ade5c-142">Questo esempio si trova nella directory seguente.</span><span class="sxs-lookup"><span data-stu-id="ade5c-142">This sample is located in the following directory.</span></span>  
>   
>  `<InstallDrive>:\WF_WCF_Samples\WCF\Extensibility\Web\FormPost`
