---
title: "Compatibilità delle applicazioni in .NET Framework 4.5 | Microsoft Docs"
ms.custom: 
ms.date: 03/30/2017
ms.prod: .net-framework
ms.reviewer: 
ms.suite: 
ms.technology:
- dotnet-clr
ms.tgt_pltfrm: 
ms.topic: article
helpviewer_keywords:
- application compatibility, .NET Framework
- breaking changes [.NET Framework]
ms.assetid: 5c50747c-806c-44a9-ac58-5bbe12a284fa
caps.latest.revision: 76
author: rpetrusha
ms.author: ronpet
manager: wpickett
translationtype: Human Translation
ms.sourcegitcommit: 19006cc5f24ffc66b92e53e8174c6bd33c249679
ms.openlocfilehash: 5f63c3217b6def96240447501247d22a1058cacf
ms.lasthandoff: 04/18/2017

---
# <a name="application-compatibility-in-the-net-framework-45"></a>Compatibilità delle applicazioni in .NET Framework 4.5
In questo argomento vengono descritti i problemi di compatibilità delle applicazioni tra .NET Framework 4 e 4.5, tra cui le correzioni, le modifiche basate sui commenti e i suggerimenti dei clienti. La maggior parte di queste modifiche non richiede alcuna modifica a livello di codice delle applicazioni. Per quelle che possono comportare modifiche al codice, vedere la colonna Impatto della tabella.  
  
> [!IMPORTANT]
>  [!INCLUDE[net_v45](../../../includes/net-v45-md.md)] non è supportato in [!INCLUDE[winxp](../../../includes/winxp-md.md)].  
  
 Per i problemi di compatibilità tra .NET Framework 4.5 e 4.5.1, vedere [Compatibilità delle applicazioni in .NET Framework 4.5.1](../../../docs/framework/migration-guide/application-compatibility-in-the-net-framework-4-5-1.md).  
  
 In questo argomento vengono descritte le modifiche significative nelle aree riportate di seguito.  
  
-   [Base](#core)  
  
-   [Dati](#sql)  
  
-   [Rete](#network)  
  
-   [Serializzazione](#serialize)  
  
-   [Stampa](#Printing)  
  
-   [Strumenti e risorse](#tools)  
  
-   [ASP.NET 2.0](#asp)  
  
-   [ClickOnce](#ClickOnce)  
  
-   [Managed Extensibility Framework (MEF)](#mef)  
  
-   [Applicazioni Web](#web)  
  
-   [Windows Communication Foundation (WCF)](#wcf)  
  
-   [Windows Form](#winForms)  
  
-   [Windows Presentation Foundation (WPF)](#wpf)  
  
-   [Windows Workflow Foundation (WF)](../../../docs/framework/migration-guide/application-compatibility-in-the-net-framework-4-5.md#wwf)  
  
-   [XML, XSLT](#xml)  
  
 In questo argomento non vengono illustrati i tipi e i membri dichiarati obsoleti in [!INCLUDE[net_v45](../../../includes/net-v45-md.md)]. Per un elenco, vedere [Elementi obsoleti nella libreria di classi .NET Framework](../../../docs/framework/whats-new/whats-obsolete.md). Per sapere di più sulle nuove funzionalità, vedere [Novità di .NET Framework](../../../docs/framework/whats-new/index.md).  
  
<a name="core"></a>   
## <a name="core"></a>Base  
 Oltre ai problemi di compatibilità delle applicazioni descritti di seguito, vedere la sezione [Serializzazione](#serialize) per problemi correlati alla serializzazione.  
  
|Funzionalità|Modifica|Impatto|  
|-------------|------------|------------|  
|Metodi <xref:System.Collections.Concurrent.BlockingCollection%601.TryTakeFromAny%28System.Collections.Concurrent.BlockingCollection%7B%600%7D%5B%5D%2C%600%40%29?displayProperty=fullName> e <xref:System.Collections.Concurrent.BlockingCollection%601.TakeFromAny%2A?displayProperty=fullName>|Il metodo <xref:System.Collections.Concurrent.BlockingCollection%601.TryTakeFromAny%28System.Collections.Concurrent.BlockingCollection%7B%600%7D%5B%5D%2C%600%40%29?displayProperty=fullName> non restituisce più -1 o genera un'eccezione. Il metodo <xref:System.Collections.Concurrent.BlockingCollection%601.TakeFromAny%2A?displayProperty=fullName> non genera più un'eccezione se una delle raccolte viene contrassegnata come completata.|Tale modifica consente di usare le raccolte quando una di esse è vuota o completata, ma l'altra contiene ancora elementi che possono essere recuperati.|  
|<xref:System.Text.RegularExpressions.Regex.CompileToAssembly%2A?displayProperty=fullName>|Se si crea con [!INCLUDE[net_v45](../../../includes/net-v45-md.md)] un assembly di espressioni regolari compilate destinato a [!INCLUDE[net_v40_short](../../../includes/net-v40-short-md.md)], quando si prova a usare una delle espressioni regolari dell'assembly in un sistema in cui è installato [!INCLUDE[net_v40_short](../../../includes/net-v40-short-md.md)], viene generata un'eccezione.|Per risolvere il problema, è possibile eseguire una delle operazioni seguenti:<br /><br /> Creare l'assembly che contiene le espressioni regolari con [!INCLUDE[net_v40_short](../../../includes/net-v40-short-md.md)].<br /><br /> Usare un'espressione regolare interpretata.|  
|Eliminazione di <xref:System.Threading.Tasks.Task?displayProperty=fullName>|Ad eccezione di `Task.IAsyncResult.AsyncWaitHandle`, i metodi <xref:System.Threading.Tasks.Task?displayProperty=fullName> non generano più un'eccezione <xref:System.ObjectDisposedException> dopo aver eliminato l'oggetto.|Questa modifica supporta l'uso di attività memorizzate nella cache. Ad esempio, un metodo può restituire un'attività memorizzata nella cache per rappresentare un'operazione già completata anziché allocare una nuova attività. Ciò non è possibile nelle versioni precedenti di .NET Framework, perché qualsiasi utente dell'attività può rimuoverla e renderla così inutilizzabile.|  
|Eccezioni non osservate nelle operazioni <xref:System.Threading.Tasks.Task?displayProperty=fullName>|Dato che la classe <xref:System.Threading.Tasks.Task?displayProperty=fullName> rappresenta un'operazione asincrona, intercetta tutte le eccezioni non gravi che si verificano durante l'elaborazione asincrona. In [!INCLUDE[net_v45](../../../includes/net-v45-md.md)], se un'eccezione non viene osservata e il codice non è mai in attesa nell'attività, tale eccezione non verrà più propagata nel thread finalizzatore e il processo verrà arrestato in modo anomalo durante un'operazione di Garbage Collection.|Questa modifica migliora l'affidabilità delle applicazioni che usano la classe <xref:System.Threading.Tasks.Task> per eseguire l'elaborazione asincrona non osservata. Il comportamento precedente può essere ripristinato fornendo un gestore appropriato per l'evento <xref:System.Threading.Tasks.TaskScheduler.UnobservedTaskException?displayProperty=fullName>.|  
|Metodi <xref:System.Threading.Tasks.Task.WaitAll%2A?displayProperty=fullName> con argomenti di timeout|In [!INCLUDE[net_v40_long](../../../includes/net-v40-long-md.md)] il comportamento di questi metodi è incoerente. Alla scadenza del timeout, se una o più attività sono state completate o annullate prima della chiamata al metodo, il metodo genera un'eccezione <xref:System.AggregateException>. Alla scadenza del timeout, se nessuna attività è stata completata o annullata prima della chiamata al metodo, ma una o più attività sono entrate in questi stati dopo la chiamata al metodo, il metodo restituisce `false`.<br /><br /> In [!INCLUDE[net_v45](../../../includes/net-v45-md.md)], questi overload del metodo restituiscono ora `false` se un'attività qualsiasi è ancora in esecuzione allo scadere dell'intervallo di timeout e generano un'eccezione <xref:System.AggregateException> solo se è stata annullata un'attività di input (indipendentemente dal fatto che sia stata annullata prima o dopo la chiamata al metodo) e non sono in esecuzione altre attività.|Questa modifica rende coerente il comportamento del metodo. È tuttavia possibile (ma improbabile) che il codice dell'applicazione dipenda dagli overload di <xref:System.Threading.Tasks.Task.WaitAll%2A?displayProperty=fullName> abilitati al timeout per generare un'eccezione quando in almeno un'attività si sono già verificati errori o l'attività è stata annullata prima della scadenza del timeout. In tal caso, la proprietà <xref:System.Threading.Tasks.Task.IsCanceled%2A?displayProperty=fullName> può essere usata per lo stesso scopo.|  
|Supporto per l'inoltro di tipi in caso di multitargeting|Una nuova funzionalità CodeDOM consente a un compilatore di eseguire la compilazione con la versione di destinazione di mscorlib.dll invece della versione [!INCLUDE[net_v45](../../../includes/net-v45-md.md)] di mscorlib.dll.|Questa modifica impedisce la visualizzazione degli avvisi del compilatore (e l'errore di compilazione nei casi in cui gli avvisi sono considerati come errori) quando CodeDOM incontra le due definizioni per tipi che sono stati inoltrati. Questa modifica può avere effetti collaterali imprevisti solo se le diverse versioni degli assembly di riferimento vengono combinate in un'unica posizione.|  
|<xref:System.Collections.Generic.List%601.ForEach%2A?displayProperty=fullName>|L'enumeratore genera un'eccezione <xref:System.InvalidOperationException> se viene modificato un elemento nella raccolta.|Questa modifica si applica solo alle applicazioni destinate a [!INCLUDE[net_v45](../../../includes/net-v45-md.md)] e non dovrebbe aver alcun impatto negativo. Protegge l'integrità dei dati e rende più probabile l'identificazione delle race condition.|  
|<xref:System.Uri?displayProperty=fullName>|Due modifiche apportate all'analisi IRI (International Resource Identifier) influiscono sugli URI nelle applicazioni destinate a [!INCLUDE[net_v45](../../../includes/net-v45-md.md)]:<br /><br /> [\<iriParsing>](../../../docs/framework/configure-apps/file-schema/network/iriparsing-element-uri-settings.md) è abilitato per impostazione predefinita e non può essere disattivato. In precedenza, era disabilitato per impostazione predefinita.<br /><br /> Il formato di normalizzazione Unicode C (NFC) non sarà più eseguito nelle parti non host degli URI. In precedenza, NFC era eseguito nell'intero URI quando `<iriParsing>` era abilitato.|Gli URI che contengono nomi file non in formato di normalizzazione C non saranno normalizzati nel formato C. L'errore di applicazione può verificarsi se per l'analisi IRI vengono usate stringhe non normalizzate per accedere ai file con nomi file normalizzati. Questo influisce solo sulle applicazioni destinate a [!INCLUDE[net_v45](../../../includes/net-v45-md.md)].|  
|<xref:System.Uri?displayProperty=fullName>|Un URL `mailto:` non valido genera un'eccezione nel costruttore della classe <xref:System.Uri>.|Questo influisce solo sulle applicazioni che vengono ricompilate e sono destinate a [!INCLUDE[net_v45](../../../includes/net-v45-md.md)].|  
|<xref:System.Uri?displayProperty=fullName>|Nelle applicazioni destinate a [!INCLUDE[net_v45](../../../includes/net-v45-md.md)], i punti finali alla fine di un segmento di percorso in una stringa URI originale (ad esempio `http://www.proseware.com/LLC./About.aspx`) vengono mantenuti. I segmenti di percorso costituiti esattamente da uno o due punti, come `http://www.proseware.com/..` o `http://www.proseware.com/./default.htm`, vengono rimossi, ma i segmenti di percorso con più di due punti (come `http://localhost/dir1/.../dir2`) vengono mantenuti.|Questa modifica influisce solo sulle applicazioni destinate a [!INCLUDE[net_v45](../../../includes/net-v45-md.md)]. Le applicazioni che si basano sulla rimozione dei punti finali possono generare un errore.|  
|<xref:System.Uri?displayProperty=fullName>|Nelle applicazioni destinate a [!INCLUDE[net_v45](../../../includes/net-v45-md.md)] sono consentite query in un URI `file://`. Il carattere ? non viene sottoposto a escape perché viene interpretato come parte del percorso.|Questa modifica influisce solo sulle applicazioni destinate a [!INCLUDE[net_v45](../../../includes/net-v45-md.md)]. Le applicazioni che si basano sull'escape del carattere ? possono generare un errore.|  
|<xref:System.Uri?displayProperty=fullName>|Nelle applicazioni destinate a [!INCLUDE[net_v45](../../../includes/net-v45-md.md)], i caratteri di controllo Unicode da U+0080 a U+009F sono codificati in modo errato.|In genere, i caratteri di controllo Unicode non vengono usati negli URI.|  
|<xref:System.Uri.EscapeDataString%2A?displayProperty=fullName>, <xref:System.Uri.EscapeUriString%2A?displayProperty=fullName> e <xref:System.Uri.UnescapeDataString%2A?displayProperty=fullName>|L'elenco dei caratteri riservati e non riservati ora supporta [RFC 3986](http://tools.ietf.org/html/rfc3986).|Modifiche specifiche:<br /><br /> <xref:System.Uri.EscapeDataString%2A> effettua l'escape di caratteri riservati in base a RFC 3986.<br /><br /> <xref:System.Uri.EscapeUriString%2A> non effettua l'escape di caratteri riservati.<br /><br /> <xref:System.Uri.UnescapeDataString%2A> non genera alcuna eccezione se rileva una sequenza di escape non valida.<br /><br /> I caratteri di escape non riservati non sono sottoposti a escape.|  
|<xref:System.Uri.IsWellFormedUriString%2A?displayProperty=fullName>|A partire da .NET Framework 4.5, le stringhe sono sempre considerate ben formate in conformità con [RFC 3986](http://tools.ietf.org/html/rfc3986) e [RFC 3987](http://tools.ietf.org/html/rfc3987). Nelle versioni precedenti di .NET Framework, una stringa è considerata ben formata in conformità con RFC 3986 e RFC 3987 solo se l'analisi dell'URI e l'analisi IDN sono abilitate.|Per le app destinate a .NET Framework 4.5 o versioni successive, questo metodo restituisce `false` per URI che sono considerati ben formati da app destinate alle versioni precedenti di .NET Framework. Ad esempio, un URI relativo che include i due punti nel primo segmento (ad esempio "2013.05.29_14:33:41") non è più considerato ben formato.<br /><br /> Si noti che questa modifica influisce solo sulle app destinate a .NET Framework 4.5 o versioni successive.|  
|<xref:System.Threading.Tasks.TaskFactory.FromAsync%2A?displayProperty=fullName>|<xref:System.Threading.Tasks.TaskFactory.FromAsync%2A?displayProperty=fullName> può ora accedere alla proprietà <xref:System.IAsyncResult.CompletedSynchronously%2A?displayProperty=fullName>. Le implementazioni non corrette di <xref:System.IAsyncResult.CompletedSynchronously%2A?displayProperty=fullName> possono ora determinare un comportamento non definito nelle chiamate al metodo <xref:System.Threading.Tasks.TaskFactory.FromAsync%2A?displayProperty=fullName>.|L'attività risultante non completerà l'implementazione se la proprietà <xref:System.IAsyncResult.CompletedSynchronously%2A?displayProperty=fullName> restituisce erroneamente `true`.|  
  
<a name="sql"></a>   
## <a name="data"></a>Dati  
  
### <a name="sqlclient"></a>SQLClient  
  
|Funzionalità|Modifica|Impatto|  
|-------------|------------|------------|  
|Possibilità di connettersi a un database SQL Server da codice gestito in esecuzione in [!INCLUDE[net_v45](../../../includes/net-v45-md.md)].|Il percorso del codice API sincrono esistente è stato modificato per aggiungere il supporto asincrono.|La presenza di Base Service Provider (BSP) o di Layered Service Provider (LSP) non IFS Winsock può interferire con la possibilità di connettersi a SQL Server. Per sapere di più, vedere [SetFileCompletionNotificationModes API causes an IO completion port not work correctly with a non-IFS LSP installed (L'API di SetFileCompletionNotificationModes determina il malfunzionamento di una porta di completamento IO con un LSP non IFS installato)](http://go.microsoft.com/fwlink/p/?LinkId=256032) nel sito Web del supporto tecnico Microsoft.|  
|Tipo di <xref:System.Data.SqlClient.SqlConnection?displayProperty=fullName>|Le connessioni ai database SQL Server 1997 non sono più supportate.|Le applicazioni in esecuzione in [!INCLUDE[net_v45](../../../includes/net-v45-md.md)] non possono connettersi ai database SQL Server 1997.|  
|Tipo di <xref:System.Data.SqlClient.SqlConnection?displayProperty=fullName>|Le connessioni ai database SQL Server che usano il protocollo Virtual Interface Adapter (VIA) non sono più supportate.|Le applicazioni in esecuzione in [!INCLUDE[net_v45](../../../includes/net-v45-md.md)] non possono connettersi ai database SQL Server tramite VIA.|  
|Tipo di <xref:System.Data.SqlClient.SqlBulkCopy?displayProperty=fullName>|Nell'inserire i dati in una colonna, <xref:System.Data.SqlClient.SqlBulkCopy> usa la codifica della colonna di destinazione anziché quella predefinita per i tipi `VARCHAR` e `CHAR`.|Questa modifica elimina la possibilità di danneggiamento dei dati causata dall'uso della codifica predefinita quando questa non viene usata dalla colonna di destinazione. In rari casi, un'applicazione esistente può generare un'eccezione <xref:System.Data.SqlClient.SqlException> se la modifica nella codifica produce dati troppo grandi per rientrare nella colonna di destinazione.|  
|Sequenza di regole di confronto <xref:System.Data.SqlClient?displayProperty=fullName>|I dati di `sql_variant` usano regole di confronto di `sql_variant` anziché regole di confronto di database.|Questa modifica risolve il possibile danneggiamento dei dati se le regole di confronto del database differiscono da quelle di `sql_variant`. Le applicazioni basate su dati errati possono generare un errore.|  
  
### <a name="entity-framework"></a>Entity Framework  
  
|Funzionalità|Modifica|Impatto|  
|-------------|------------|------------|  
|File di log creati dal metodo <xref:System.Data.Objects.ObjectContext.CreateDatabase%2A?displayProperty=fullName>|Quando il metodo <xref:System.Data.Objects.ObjectContext.CreateDatabase%2A> viene chiamato direttamente oppure tramite Code First con il provider SqlClient e un valore `AttachDBFilename` nella stringa di connessione, viene creato un file di log denominato *nomefile*_log.ldf invece di *nomefile*.ldf (dove *nomefile* rappresenta il nome del file specificato dal valore `AttachDBFilename`).|Questa modifica migliora il debug fornendo un file di log il cui nome si basa sulle specifiche di SQL Server. Non dovrebbe avere effetti collaterali imprevisti.|  
|API DDL (Data Definition Language)|Il comportamento delle API DDL quando viene specificato `AttachDBFilename` è cambiato come segue:<br /><br /> Le stringhe di connessione non devono specificare un valore `Initial Catalog`. In precedenza, sia `AttatchDBFilename` che `Initial Catalog` erano obbligatori.<br /><br /> Se `AttatchDBFilename` e `Initial Catalog` vengono specificati entrambi e il file MDF indicato è presente, il metodo <xref:System.Data.Objects.ObjectContext.DatabaseExists%2A?displayProperty=fullName> restituirà `true`. In precedenza, restituiva `false`.<br /><br /> Se `AttatchDBFilename` e `Initial Catalog` vengono specificati entrambi e il file MDF indicato è presente, la chiamata al metodo <xref:System.Data.Objects.ObjectContext.DeleteDatabase%2A?displayProperty=fullName> eliminerà i file.<br /><br /> Se <xref:System.Data.Objects.ObjectContext.DeleteDatabase%2A?displayProperty=fullName> viene chiamato quando la stringa di connessione specifica un valore `AttachDBFilename` con un file MDF non presente e un valore `Initial Catalog` non presente, il metodo genera un'eccezione <xref:System.InvalidOperationException>. In precedenza, generava un'eccezione <xref:System.Data.SqlClient.SqlException>.|Queste modifiche semplificano la creazione di strumenti e applicazioni che usano le API DDL. Tali modifiche possono influire sulla compatibilità delle applicazioni negli scenari seguenti:<br /><br /> L'utente scrive il codice che esegue un comando `DROP DATABASE` direttamente anziché chiamare <xref:System.Data.Objects.ObjectContext.DeleteDatabase%2A?displayProperty=fullName> se <xref:System.Data.Objects.ObjectContext.DatabaseExists%2A?displayProperty=fullName> restituisce `true`. Questa operazione interrompe il codice esistente se il database non è collegato ma il file MDF esiste.<br /><br /> L'utente scrive il codice che prevede il metodo <xref:System.Data.Objects.ObjectContext.DeleteDatabase%2A?displayProperty=fullName> per generare un'eccezione <xref:System.Data.SqlClient.SqlException> anziché <xref:System.InvalidOperationException> quando `Initial Catalog` e il file MDF non sono presenti.|  
|Metodi <xref:System.Data.Objects.ObjectContext.CreateDatabase%2A?displayProperty=fullName> e <xref:System.Data.Common.DbProviderServices.CreateDatabase%2A?displayProperty=fullName>|Se la creazione di oggetti di database avrà esito negativo dopo aver creato un database vuoto, il metodo tenterà di annullare la creazione del database e propagherà l'eccezione <xref:System.Data.SqlClient.SqlException> originale. In caso di fallimento del tentativo di eliminare il database, il metodo genererà un'eccezione <xref:System.InvalidOperationException>.|Questa modifica impedisce la creazione di un database vuoto e inutilizzabile. La gestione delle eccezioni può variare, perché la rimozione corretta del database propaga ora l'eccezione <xref:System.Data.SqlClient.SqlException> originale.|  
|Metodi <xref:System.Data.Objects.ObjectContext.Translate%2A?displayProperty=fullName> e <xref:System.Data.Objects.ObjectContext.ExecuteStoreQuery%2A?displayProperty=fullName>|Se `T` è un tipo di enumerazione, il metodo restituisce correttamente i dati dal database.  In precedenza, i tipi di enumerazione non erano supportati, pertanto il risultato era sempre pari a zero o veniva convertito nel tipo di enumerazione. I tipi sottostanti non supportati da Entity Framework, ad esempio <xref:System.UInt16>, <xref:System.UInt32> e <xref:System.UInt64>, restituiscono comunque zero o vengono convertiti nel tipo di enumerazione con un valore sottostante pari a zero.|Il supporto per le enumerazioni rappresenta una novità per Entity Framework in [!INCLUDE[net_v45](../../../includes/net-v45-md.md)]. Tuttavia, se il codice dello sviluppatore dipende dalla possibilità che il risultato sia zero, è possibile che si verifichi un errore di applicazione, in base al codice specifico.|  
  
### <a name="linq"></a>LINQ  
  
|Funzionalità|Modifica|Impatto|  
|-------------|------------|------------|  
|Metodo <xref:System.Linq.Enumerable.Empty%2A?displayProperty=fullName>|Il metodo restituisce un'istanza interna memorizzata nella cache anziché restituire un nuovo tipo di <xref:System.Collections.Generic.IEnumerable%601>.|Questa modifica comporta un miglioramento delle prestazioni. Tuttavia, il codice dipendente da due tipi vuoti univoci da più chiamate a <xref:System.Linq.Enumerable.Empty%2A?displayProperty=fullName> avrà esito negativo.|  
  
<a name="network"></a>   
## <a name="networking"></a>Servizi di rete  
  
|Funzionalità|Modifica|Impatto|  
|-------------|------------|------------|  
|Tipi e membri dello spazio dei nomi <xref:System.Net.PeerToPeer.Collaboration?displayProperty=fullName>|I tipi e i membri non sono supportati in [!INCLUDE[win8](../../../includes/win8-md.md)]. Il tentativo di chiamata genera un'eccezione <xref:System.PlatformNotSupportedException>.|Le applicazioni non possono più usare questi tipi e membri in [!INCLUDE[win8](../../../includes/win8-md.md)].|  
|Serializzazione e deserializzazione di oggetti <xref:System.Net.Mail.MailMessage>.|In .NET Framework 4.5, i messaggi di posta elettronica possono includere caratteri non ASCII. In .NET Framework 4, sono supportati solo caratteri ASCII.|Gli oggetti <xref:System.Net.Mail.MailMessage> che contengono caratteri non ASCII e che vengono serializzati in .NET Framework 4.5 non possono essere deserializzati in .NET Framework 4.|  
  
<a name="Printing"></a>   
## <a name="printing"></a>Stampa  
  
|Funzionalità|Modifica|Impatto|  
|-------------|------------|------------|  
|<xref:System.Printing.PrintSystemJobInfo.JobStream%2A?displayProperty=fullName>|Questa proprietà espone il flusso di un processo di stampa e consente all'utente di inviare dati non elaborati ai componenti di stampa del sistema operativo sottostanti scrivendo in questo flusso.<br /><br /> A partire da .NET Framework 4.5 in Windows 8 e nelle versioni successive del sistema operativo Windows i dati scritti in questo flusso devono essere salvati come flusso del pacchetto in formato XPS.|Per ottenere l'output del contenuto di stampa, è possibile eseguire una delle operazioni seguenti:<br /><br /> Usare la classe <xref:System.Windows.Xps.XpsDocumentWriter> per ottenere l'output del contenuto di stampa. Questa è l'alternativa consigliata.<br /><br /> Verificare che i dati inviati nel flusso restituiti dalla proprietà <xref:System.Printing.PrintSystemJobInfo.JobStream%2A?displayProperty=fullName> siano nel formato .xps come flusso del pacchetto.|  
  
<a name="serialize"></a>   
## <a name="serialization"></a>Serializzazione  
  
|Funzionalità|Modifica|Impatto|  
|-------------|------------|------------|  
|Serializzazione con la classe <xref:System.Xml.Serialization.XmlSerializer>|In WCF 4.5, la classe <xref:System.Xml.Serialization.XmlSerializer> è stata ottimizzata per rimuovere la dipendenza dal compilatore C#. L'effetto di questa modifica è stato particolarmente rilevante sulle prestazioni di scenari di avvio a freddo.|La modifica può però causare problemi nel codice di serializzazione XML compilato in WCF 4 quando viene eseguito in WCF 4.5. Se si riscontrano problemi durante l'esecuzione del codice di serializzazione XML esistente in WCF 4.5, usare l'elemento di configurazione seguente per ripristinare il comportamento di XmlSerializer in WCF 4:<br /><br /> `<configuration>    <system.xml.serialization>    <xmlSerializer useLegacySerializerGeneration="true"/>    </system.xml.serialization> </configuration>`|  
|Serializzazione e deserializzazione con la classe <xref:System.Runtime.Serialization.Formatters.Soap.SoapFormatter?displayProperty=fullName>|La serializzazione tramite <xref:System.Runtime.Serialization.Formatters.Soap.SoapFormatter> può codificare lo stato interno di un oggetto, non necessariamente uguale nelle altre versioni di .NET Framework.  Se vi sono differenze, la deserializzazione di contenuto serializzato in una versione di .NET Framework potrebbe non riuscire nelle altre.|La classe <xref:System.Runtime.Serialization.Formatters.Soap.SoapFormatter> non garantisce la compatibilità tra versioni. Usare invece le classi <xref:System.Runtime.Serialization.Formatters.Binary.BinaryFormatter?displayProperty=fullName> e <xref:System.Runtime.Serialization.NetDataContractSerializer?displayProperty=fullName>.|  
  
<a name="tools"></a>   
## <a name="tools-and-resources"></a>Strumenti e risorse  
  
|Funzionalità|Modifica|Impatto|  
|-------------|------------|------------|  
|MSBuild|Quando si esegue MSBuild a un prompt dei comandi, verranno rispettati i file di configurazione della soluzione che disabilitano le compilazioni di progetti specifici.|MSBuild si comporta allo stesso modo quando viene chiamato da Visual Studio ed eseguito a un prompt dei comandi. Non è necessario creare soluzioni separate o rimuovere progetti da una soluzione per compilare un subset di progetti in una soluzione.|  
|MSBuild|La proprietà `TreatAsLocalProperty` nei file di progetto MSBuild impedisce che specifiche proprietà, inclusa la proprietà `OutDir`, siano sottoposte a override a livello globale.|L'override della proprietà `OutDir` può determinare una potenziale interruzione se `OutDir` è una proprietà globale da sottoporre a override in seguito all'importazione del file MS.Common.Targets.|  
|Segnalazione errori di Windows: bucket Watson|Gli arresti anomali gestiti vengono raggruppati in categorie in base a una serie di criteri, uno dei quali è la versione dell'assembly. In [!INCLUDE[net_v45](../../../includes/net-v45-md.md)] viene usata la versione del file anziché la versione dell'assembly.|Poiché la versione dell'assembly cambia solo tra le versioni principali, usando la versione del file anziché la versione dell'assembly come categoria è possibile determinare la specifica versione di un assembly coinvolto in un arresto anomalo gestito.|  
|MSBuild|I dati dei progetti nella raccolta <xref:Microsoft.Build.Evaluation.ProjectCollection?displayProperty=fullName> non vengono recuperati automaticamente dal Garbage Collector.|Se si caricano in modo esplicito progetti nella raccolta <xref:Microsoft.Build.Evaluation.ProjectCollection>, è necessario chiamare il metodo <xref:Microsoft.Build.Evaluation.ProjectCollection.UnloadProject%28Microsoft.Build.Evaluation.Project%29> per ogni membro della raccolta.|  
  
<a name="asp"></a>   
## <a name="aspnet"></a>ASP.NET  
  
|Funzionalità|Modifica|Impatto|  
|-------------|------------|------------|  
|Strumento per la registrazione di ASP.NET in IIS (aspnet_regiis.exe)|In [!INCLUDE[win8](../../../includes/win8-md.md)] le opzioni `–i` e `–u` per installare e disinstallare ASP.NET non sono supportate.|Per installare o disinstallare ASP.NET 4.5 con IIS 8, usare la finestra di dialogo **Abilita/Disabilita le funzionalità di Windows**, lo strumento Gestione server o lo strumento da riga di comando `dism.exe`.|  
|Controllo <xref:System.Web.UI.WebControls.EntityDataSource?displayProperty=fullName>|L'evento <xref:System.Web.UI.Page.LoadComplete?displayProperty=fullName> non determina più il controllo <xref:System.Web.UI.WebControls.EntityDataSource?displayProperty=fullName> per richiamare il data binding per le modifiche ai parametri di creazione/aggiornamento/eliminazione.|Questa modifica determina l'eliminazione di un accesso estraneo al database, impedisce la reimpostazione dei valori dei controlli e genera un comportamento coerente con altri controlli dei dati, ad esempio <xref:System.Web.UI.WebControls.SqlDataSource> e <xref:System.Web.UI.WebControls.ObjectDataSource>. Questa modifica determina un comportamento diverso nel caso improbabile che le applicazioni richiamino il data binding nell'evento <xref:System.Web.UI.Page.LoadComplete?displayProperty=fullName>.|  
|Metodi <xref:System.Net.WebUtility.HtmlDecode%2A?displayProperty=fullName>, <xref:System.Net.WebUtility.UrlDecode%2A?displayProperty=fullName> e [System.Web.Helpers.Json.Decode](https://msdn.microsoft.com/library/system.web.helpers.json.decode.aspx)|Per impostazione predefinita, i metodi di decodifica non decodificano più una sequenza di input non valido in una stringa UTF-16 non valida. Al contrario, viene restituito l'input originale.|La modifica dell'output del decodificatore è importante solo se si archiviano dati binari anziché dati UTF-16 nelle stringhe. Per controllare questo comportamento in modo esplicito, impostare l'attributo `aspnet:AllowRelaxedUnicodeDecoding` dell'elemento [\<appSettings>](http://msdn.microsoft.com/en-us/0d65a3f1-c522-423d-89b6-44921b6daebb) su `true` per abilitare il comportamento legacy o su `false` per consentire il comportamento corrente.|  
|Metodo <xref:System.Net.WebUtility.HtmlEncode%2A?displayProperty=fullName>|Per le applicazioni destinate a [!INCLUDE[net_v45](../../../includes/net-v45-md.md)], i caratteri esterni a Basic Multilingual Plane (BMP) eseguono correttamente il round trip quando vengono passati al metodo <xref:System.Net.WebUtility.HtmlDecode%2A?displayProperty=fullName>.|Questa modifica non dovrebbe incidere sulle applicazioni correnti. Per ripristinare il comportamento originale, impostare l'attributo `targetFramework` dell'elemento [\<httpRuntime>](http://msdn.microsoft.com/library/e1f13641\(v=vs.100\).aspx) su una stringa diversa da "4.5". È inoltre possibile impostare gli attributi `unicodeEncodingConformance` e `unicodeDecodingConformance` dell'elemento di configurazione `<webUtility>` per controllare questo comportamento indipendentemente dalla versione di destinazione di .NET Framework.|  
|Proprietà <xref:System.Web.HttpRequest.ContentEncoding%2A?displayProperty=fullName>|La codifica UTF-7 non è consentita.|In alcuni casi i dati per le applicazioni che dipendono dai dati UTF-7 in ingresso non verranno decodificati correttamente. Questa situazione si verifica raramente, ma è possibile ripristinare il comportamento legacy usando l'attributo `aspnet:AllowUtf7RequestContentEncoding` dell'elemento [\<appSettings>](http://msdn.microsoft.com/en-us/0d65a3f1-c522-423d-89b6-44921b6daebb).|  
|<xref:System.Web.HttpUtility.JavaScriptStringEncode%2A?displayProperty=fullName>|A partire da [!INCLUDE[net_v45](../../../includes/net-v45-md.md)], il metodo esegue l'escape del carattere e commerciale (&).|Se l'app dipende dal comportamento precedente di questo metodo, è possibile aggiungere un'impostazione `aspnet:JavaScriptDoNotEncodeAmpersand` all'[elemento appSettings di ASP.NET](http://msdn.microsoft.com/en-us/bb60e711-0669-4118-a54d-8dd71e009a00) nel file di configurazione.|  
|Metodi <xref:System.Web.Security.MachineKey.Encode%2A?displayProperty=fullName> e <xref:System.Web.Security.MachineKey.Decode%2A?displayProperty=fullName>|Questi metodi sono ora obsoleti.|La compilazione del codice che chiama tali metodi genera un avviso del compilatore. Le alternative consigliate sono <xref:System.Web.Security.MachineKey.Protect%2A?displayProperty=fullName> e <xref:System.Web.Security.MachineKey.Unprotect%2A?displayProperty=fullName>.|  
  
<a name="ClickOnce"></a>   
## <a name="clickonce"></a>ClickOnce  
  
|Funzionalità|Modifica|Impatto|  
|-------------|------------|------------|  
|App pubblicate con ClickOnce che usano un certificato per la firma del codice SHA-256.|Il file eseguibile è firmato con SHA256. In precedenza, veniva firmato con SHA1 indipendentemente dal fatto che il certificato di firma del codice fosse SHA-1 o SHA-256. Si applica a:<br /><br /> Tutte le applicazioni compilate con Visual Studio 2012 o versioni successive.<br /><br /> Applicazioni compilate con Visual Studio 2010 o versioni precedenti su sistemi in cui è presente .NET Framework 4.5.<br /><br /> Se inoltre è presente .NET Framework 4.5 o versione successiva, il manifesto ClickOnce viene firmato anche con SHA-256 per i certificati SHA-256 indipendentemente dalla versione di .NET Framework per cui è stato compilato.|La modifica della firma del file eseguibile di ClickOnce interessa solo i sistemi Windows Server 2003, in cui è richiesta l'installazione di quanto indicato nell'articolo [938397 della Knowledge Base](http://support.microsoft.com/kb/938397) .<br /><br /> La modifica relativa alla firma del manifesto con SHA-256 anche quando un'app è destinata a .NET Framework 4 o a versioni precedenti introduce una dipendenza del runtime da .NET Framework 4.5 o da una versione successiva. Questo problema viene risolto in Visual Studio 2013 Update 3 e in [!INCLUDE[net_v46](../../../includes/net-v46-md.md)]. Per la risoluzione [!INCLUDE[net_v46](../../../includes/net-v46-md.md)], vedere [Modifiche al runtime in .NET Framework 4.6](../../../docs/framework/migration-guide/runtime-changes-in-the-net-framework-4-6.md).|  
  
<a name="mef"></a>   
## <a name="managed-extensibility-framework-mef"></a>Managed Extensibility Framework (MEF)  
  
|Funzionalità|Modifica|Impatto|  
|-------------|------------|------------|  
|<xref:System.ComponentModel.Composition.Primitives.ComposablePartCatalog?displayProperty=fullName> e le relative classi derivate|A partire da [!INCLUDE[net_v45](../../../includes/net-v45-md.md)], i cataloghi MEF implementano <xref:System.Collections.IEnumerable> e pertanto non possono più essere usati per creare un serializzatore (oggetto <xref:System.Xml.Serialization.XmlSerializer>).|Il tentativo di serializzare un catalogo MEF genera un'eccezione.|  
  
<a name="web"></a>   
## <a name="web-applications"></a>Applicazioni Web  
  
|Funzionalità|Modifica|Impatto|  
|-------------|------------|------------|  
|Controlli di hosting di browser gestiti da .NET Framework 1.1 e 2.0|L'hosting di questi controlli è bloccato in Internet Explorer.|Internet Explorer non riuscirà ad avviare un'applicazione che usa controlli di hosting di browser gestiti. Il comportamento precedente può essere ripristinato impostando il valore EnableIEHosting della sottochiave del Registro di sistema HKLM/SOFTWARE/MICROSOFT/.NETFramework su 1 per i sistemi x86 e per i processi a 32 bit sui sistemi x64 e impostando il valore EnableIEHosting della sottochiave del Registro di sistema HKLM/SOFTWARE/Wow6432Node/Microsoft/.NETFramework su 1 per i processi a 64 bit sui sistemi x64.|  
  
<a name="wcf"></a>   
## <a name="windows-communication-foundation-wcf"></a>Windows Communication Foundation (WCF)  
 Oltre ai problemi di compatibilità delle applicazioni descritti di seguito, vedere la sezione [Serializzazione](#serialize) per problemi correlati alla serializzazione.  
  
|Funzionalità|Modifica|Impatto|  
|-------------|------------|------------|  
|Messaggi nei servizi Web WCF ospitati in Internet Information Services (IIS) o nel server di sviluppo ASP.NET che superano `maxRequestLength` (in ASP.NET) o `maxReceivedMessageSize` (in WCF)|Il codice di stato HTTP è cambiato passando da 400 (Richiesta non valida) a 413 (Entità della richiesta troppo grande) e i messaggi che superano l'impostazione `maxRequestLength` o `maxReceivedMessageSize` generano un'eccezione <xref:System.ServiceModel.ProtocolException>. Sono inclusi i casi in cui la modalità di trasferimento è <xref:System.ServiceModel.TransferMode>.|Questa modifica semplifica il debug nei casi in cui la lunghezza del messaggio supera i limiti consentiti da ASP.NET o WCF.<br /><br /> È necessario modificare qualsiasi codice che esegue l'elaborazione in base a un codice di stato HTTP 400.|  
|`Replace` in URL OData|Il metodo `Replace` negli URL OData è disabilitato per impostazione predefinita.|Se OData `Replace` è disabilitato (ora per impostazione predefinita), la richiesta dell'utente genererà un'eccezione e avrà esito negativo.|  
|<xref:System.ServiceModel.Web.WebServiceHost?displayProperty=fullName>|L'oggetto <xref:System.ServiceModel.Web.WebServiceHost?displayProperty=fullName> non aggiunge più un endpoint predefinito se è stato aggiunto un endpoint esplicito tramite il codice dell'applicazione.|Se un'applicazione client tenta di connettersi a un endpoint non più aggiunto per impostazione predefinita, viene generato un errore HTTP.|  
  
<a name="winForms"></a>   
## <a name="windows-forms"></a>Windows Form  
  
|Funzionalità|Modifica|Impatto|  
|-------------|------------|------------|  
|System.Drawing.dll|La proprietà `CheckForOverflowUnderflow` per l'assembly è impostata su `true`.|In precedenza, quando si verificavano overflow, il risultato veniva automaticamente troncato. A questo punto, viene generata un'eccezione <xref:System.OverflowException>.|  
|Costruttore <xref:System.Drawing.Imaging.EncoderParameter.%23ctor%28System.Drawing.Imaging.Encoder%2CSystem.Int32%2CSystem.Int32%2CSystem.Int32%29?displayProperty=fullName>|Il costruttore è stato deprecato.|Il costruttore non funziona in sistemi a 64 bit. Usare invece il costruttore <xref:System.Drawing.Imaging.EncoderParameter.%23ctor%28System.Drawing.Imaging.Encoder%2CSystem.Int32%2CSystem.Drawing.Imaging.EncoderParameterValueType%2CSystem.IntPtr%29?displayProperty=fullName>.|  
  
<a name="wpf"></a>   
## <a name="windows-presentation-foundation-wpf"></a>Windows Presentation Foundation (WPF)  
 Oltre ai problemi di compatibilità delle applicazioni descritti di seguito, vedere la sezione [Serializzazione](#serialize) per problemi correlati alla serializzazione.  
  
|Funzionalità|Modifica|Impatto|  
|-------------|------------|------------|  
|Proprietà <xref:System.Windows.Controls.Primitives.TextBoxBase.UndoLimit%2A?displayProperty=fullName>|Il limite predefinito per il numero massimo di operazioni di annullamento per le classi <xref:System.Windows.Controls.TextBox> e <xref:System.Windows.Controls.RichTextBox> è cambiato passando da -1 (nessun limite) a 100.|Questa modifica non dovrebbe avere alcun impatto negativo. Tuttavia, è possibile impostare in modo esplicito la proprietà <xref:System.Windows.Controls.Primitives.TextBoxBase.UndoLimit%2A> dopo la creazione di istanze del controllo.|  
|Enumerazione <xref:System.Windows.Controls.PageRangeSelection?displayProperty=fullName>|I membri <xref:System.Windows.Controls.PageRangeSelection> e <xref:System.Windows.Controls.PageRangeSelection> sono stati aggiunti all'enumerazione.|Questa modifica non dovrebbe avere alcun impatto sulle applicazioni correnti. Il valore predefinito è <xref:System.Windows.Controls.PageRangeSelection?displayProperty=fullName> per i membri esistenti che usano questa enumerazione.|  
|Elementi <xref:System.Windows.DataTemplate>|Gli elementi <xref:System.Windows.DataTemplate> vengono ora visualizzati nella visualizzazione del controllo dell'albero di Automazione interfaccia utente.|Questa modifica migliora l'accessibilità. Tuttavia, interessa gli strumenti di test che si basano sulla struttura precedente dell'albero di automazione dell'interfaccia utente per individuare gli elementi adiacenti.|  
|Sincronizzazione della proprietà <xref:System.Windows.Controls.TextBox.Text%2A?displayProperty=fullName> e la proprietà a cui è associata|In alcuni casi, la proprietà <xref:System.Windows.Controls.TextBox.Text%2A?displayProperty=fullName> riflette un valore precedente rispetto al valore della proprietà associata ai dati se la proprietà viene modificata durante un'operazione di scrittura del data binding.|Non dovrebbe avere alcun impatto negativo. Tuttavia, è possibile ripristinare il comportamento precedente impostando la proprietà <xref:System.Windows.FrameworkCompatibilityPreferences.KeepTextBoxDisplaySynchronizedWithTextProperty%2A?displayProperty=fullName> su `false`.|  
|Proprietà <xref:System.Windows.Controls.TextBox?displayProperty=fullName>|Quando un controllo <xref:System.Windows.Controls.TextBox?displayProperty=fullName> è inattivo, il testo selezionato all'interno della casella viene visualizzato con un colore diverso rispetto a quando la casella di testo è attiva.|È possibile ripristinare il comportamento precedente impostando la proprietà <xref:System.Windows.FrameworkCompatibilityPreferences.AreInactiveSelectionHighlightBrushKeysSupported%2A?displayProperty=fullName> su `false`.|  
|<xref:System.Windows.Controls.Primitives.MultiSelector.SelectedItems%2A?displayProperty=fullName>|Se un controllo derivato da <xref:System.Windows.Controls.Primitives.MultiSelector> con <xref:System.Windows.Controls.Primitives.MultiSelector.CanSelectMultipleItems%2A> impostato su `true` ha duplicati nella relativa raccolta <xref:System.Windows.Controls.Primitives.MultiSelector.SelectedItems%2A?displayProperty=fullName>, gli elementi duplicati vengono visualizzati più volte. Questi elementi vengono rimossi dall'origine dati (ad esempio, chiamando `Items.Clear`), ma non dalla raccolta <xref:System.Windows.Controls.Primitives.MultiSelector.SelectedItems%2A?displayProperty=fullName>; viene rimossa solo la prima istanza.<br /><br /> Quando la raccolta <xref:System.Windows.Controls.Primitives.MultiSelector.SelectedItems%2A?displayProperty=fullName> verrà usata nuovamente, come nel caso di una chiamata a `SelectedItems.Clear`, possono verificarsi alcuni problemi, ad esempio un'eccezione <xref:System.ArgumentException>, perché la raccolta <xref:System.Windows.Controls.Primitives.MultiSelector.SelectedItems%2A?displayProperty=fullName> contiene elementi che non sono più presenti nell'origine dati.|Questo problema è stata trattato in [!INCLUDE[net_v462](../../../includes/net-v462-md.md)]. Se una raccolta <xref:System.Windows.Controls.Primitives.MultiSelector.SelectedItems%2A?displayProperty=fullName> contiene elementi duplicati che vengono rimossi dall'origine dati ma si desidera continuare a lavorare con la raccolta <xref:System.Windows.Controls.Primitives.MultiSelector.SelectedItems%2A?displayProperty=fullName>, eseguire l'aggiornamento a [!INCLUDE[net_v462](../../../includes/net-v462-md.md)].|  
|<xref:System.Windows.Threading.DispatcherSynchronizationContext.CreateCopy%2A?displayProperty=fullName>|In [!INCLUDE[net_v40_short](../../../includes/net-v40-short-md.md)] il metodo restituisce un riferimento all'istanza corrente. In [!INCLUDE[net_v45](../../../includes/net-v45-md.md)] restituisce una nuova istanza.|Verrà ora eseguito il codice in cui si presuppone che riferimenti uguali indichino che il thread in esecuzione si trova nel contesto corretto. Tuttavia, a causa della modifica, è necessario testare il codice che chiama <xref:System.Windows.Threading.DispatcherSynchronizationContext.CreateCopy%2A?displayProperty=fullName>.|  
|Monitoraggio dei messaggi `WM_POWERBROADCAST` tramite un gestore aggiunto chiamando il metodo <xref:System.Windows.Interop.HwndSource.AddHook%2A?displayProperty=fullName>.|Una finestra deve essere registrata in modo esplicito per le notifiche `WM_POWERBROADCAST` passando l'handle alla funzione [RegisterPowerSettingNotification](https://msdn.microsoft.com/library/windows/desktop/aa373196.aspx). Tramite [!INCLUDE[net_v40_short](../../../includes/net-v40-short-md.md)] WPF ha eseguito automaticamente questa operazione per tutte le finestre. A partire da [!INCLUDE[net_v45](../../../includes/net-v45-md.md)], WPF registra automaticamente una finestra speciale, ma non registra automaticamente la maggior parte delle finestre dell'app.|Il codice che gestisce le notifiche `WM_POWERBROADCAST` non viene eseguito.<br /><br /> Per continuare a ricevere notifiche `WM_POWERBROADCAST` , chiamare la funzione [RegisterPowerSettingNotification](https://msdn.microsoft.com/library/windows/desktop/aa373196.aspx) per registrare una finestra WPF (in genere la finestra principale dell'applicazione) per le notifiche `WM_POWERBROADCAST` . Nelle app WPF sviluppate con C# a questo scopo è anche necessario selezionare la casella **Consenti codice di tipo unsafe** nella scheda **Compila** delle proprietà del progetto.<br /><br /> Inoltre, se si registra una finestra che non viene mantenuta fino all'arresto dell'applicazione, è consigliabile annullarne la registrazione chiamando la funzione [UnregisterPowerSettingNotification](https://msdn.microsoft.com/library/windows/desktop/aa373237.aspx) e passando a questa funzione l'handle `HPOWERNOTIFY` restituito dalla chiamata alla funzione [RegisterPowerSettingNotification](https://msdn.microsoft.com/library/windows/desktop/aa373196.aspx) .|  
  
<a name="wwf"></a>   
## <a name="windows-workflow-foundation-wf"></a>Windows Workflow Foundation (WF)  
  
|Funzionalità|Modifica|Impatto|  
|-------------|------------|------------|  
|Sicurezza System.Activities.dll|L'assembly è contrassegnato con l'attributo <xref:System.Security.AllowPartiallyTrustedCallersAttribute>.|Non è possibile contrassegnare le classi derivate con <xref:System.Security.SecurityCriticalAttribute>. In precedenza, i tipi derivati dovevano essere contrassegnati con <xref:System.Security.SecurityCriticalAttribute>. Tuttavia, questa modifica non dovrebbe avere un impatto reale.|  
|Tipi e membri di WF 3.0|I tipi e i membri di WF 3.0 sono contrassegnati come obsoleti.|Il tentativo di compilare codice sorgente che usa tipi o membri di WF 3.0 genera un errore del compilatore. È necessario usare i membri e tipi di WF 4 negli spazi dei nomi <xref:System.Activities>.|  
|Classe <xref:System.Activities.Presentation.DragDropHelper?displayProperty=fullName>|La classe <xref:System.Activities.Presentation.DragDropHelper> include nuovi metodi che supportano operazioni di trascinamento della selezione con più oggetti. I metodi esistenti che supportano il trascinamento di un singolo oggetto sono obsoleti. Per sapere di più, vedere [Elementi obsoleti nella libreria di classi .NET Framework](../../../docs/framework/whats-new/whats-obsolete.md).|Sebbene i metodi obsoleti siano deprecati, continuano a essere supportati dal compilatore e da Common Language Runtime. Tuttavia, i nuovi metodi offrono maggiori funzionalità. Di seguito vengono indicate le sostituzioni consigliate per alcuni dei metodi disponibili.<br /><br /> Usare <xref:System.Activities.Presentation.DragDropHelper.DoDragMove%28System.Activities.Presentation.WorkflowViewElement%2CSystem.Windows.Point%29?displayProperty=fullName> anziché <xref:System.Activities.Presentation.DragDropHelper.DoDragMove%28System.Activities.Presentation.WorkflowViewElement%2CSystem.Windows.Point%29?displayProperty=fullName>.<br /><br /> Usare <xref:System.Activities.Presentation.DragDropHelper.GetCompositeView%28System.Activities.Presentation.WorkflowViewElement%29> anziché <xref:System.Activities.Presentation.DragDropHelper.GetCompositeView%28System.Windows.DragEventArgs%29>.<br /><br /> Usare <xref:System.Activities.Presentation.DragDropHelper.GetDraggedModelItems%28System.Windows.DragEventArgs%29> anziché <xref:System.Activities.Presentation.DragDropHelper.GetDraggedModelItem%28System.Windows.DragEventArgs%29>.<br /><br /> Usare <xref:System.Activities.Presentation.DragDropHelper.GetDroppedObjects%28System.Windows.DependencyObject%2CSystem.Windows.DragEventArgs%2CSystem.Activities.Presentation.EditingContext%29> anziché <xref:System.Activities.Presentation.DragDropHelper.GetDroppedObject%28System.Windows.DependencyObject%2CSystem.Windows.DragEventArgs%2CSystem.Activities.Presentation.EditingContext%29>.|  
|Risoluzione dell'overload delle chiamate al metodo <xref:System.Windows.Threading.Dispatcher.Invoke%2A?displayProperty=fullName>|[!INCLUDE[net_v45](../../../includes/net-v45-md.md)] aggiunge nuovi overload che includono un parametro di tipo <xref:System.Action?displayProperty=fullName>. Se il codice esistente viene ricompilato, i compilatori possono risolvere le chiamate ai metodi <xref:System.Windows.Threading.Dispatcher.Invoke%2A?displayProperty=fullName> che hanno un parametro <xref:System.Delegate> come chiamate ai metodi <xref:System.Windows.Threading.Dispatcher.Invoke%2A?displayProperty=fullName> con un parametro <xref:System.Action?displayProperty=fullName>.|Se una chiamata a un overload <xref:System.Windows.Threading.Dispatcher.Invoke%2A?displayProperty=fullName> con un parametro <xref:System.Delegate> viene risolta come una chiamata a un overload <xref:System.Windows.Threading.Dispatcher.Invoke%2A?displayProperty=fullName> con un parametro <xref:System.Action?displayProperty=fullName> possono verificarsi le seguenti differenze nel comportamento:<br /><br /> Se si verifica un'eccezione, gli eventi <xref:System.Windows.Threading.Dispatcher.UnhandledExceptionFilter?displayProperty=fullName> e <xref:System.Windows.Threading.Dispatcher.UnhandledException?displayProperty=fullName> non vengono generati. Al contrario, le eccezioni vengono gestite dall'evento <xref:System.Threading.Tasks.TaskScheduler.UnobservedTaskException>.<br /><br /> Le chiamate ad alcuni membri, ad esempio <xref:System.Windows.Threading.DispatcherOperation.Result%2A?displayProperty=fullName>, si bloccano fino al completamento dell'operazione.|  
|Classe <xref:System.Activities.Expressions.Literal%601?displayProperty=fullName>|L'oggetto <xref:System.Windows.Markup.ValueSerializer> associato convertirà un <xref:System.DateTime> o <xref:System.DateTimeOffset> in cui i componenti `Second` e `Millisecond` sono diversi da zero e (per un valore <xref:System.DateTime>) la cui proprietà <xref:System.DateTime.Kind%2A?displayProperty=fullName> non è <xref:System.DateTimeKind> rispetto alla sintassi degli elementi della proprietà anziché a una stringa.|Questa modifica consente ai valori <xref:System.DateTime> e <xref:System.DateTimeOffset> di essere sottoposti a round trip. I parser XAML personalizzati che presuppongono che il codice XAML di input si trovi nella sintassi degli attributi non funzioneranno correttamente.|  
  
<a name="xml"></a>   
## <a name="xml-xslt"></a>XML, XSLT  
  
|Funzionalità|Modifica|Impatto|  
|-------------|------------|------------|  
|Metodo `XDocument.Validate`|Se il valore <xref:System.Xml.Linq.LoadOptions?displayProperty=fullName> viene passato al metodo <xref:System.Xml.Linq.XDocument.Load%2A> e si verifica un errore di convalida, le proprietà <xref:System.Xml.Schema.XmlSchemaException.LineNumber%2A?displayProperty=fullName> e <xref:System.Xml.Schema.XmlSchemaException.LinePosition%2A?displayProperty=fullName> conterranno ora informazioni sulla riga.|Il codice di gestione delle eccezioni che dipende dai valori delle proprietà <xref:System.Xml.Schema.XmlSchemaException.LineNumber%2A?displayProperty=fullName> e <xref:System.Xml.Schema.XmlSchemaException.LinePosition%2A?displayProperty=fullName> non funzionerà più.|  
|Caricamento di file XML con <xref:System.Xml.XmlTextReader?displayProperty=fullName>|L'espansione dell'entità DTD è limitata a 10.000.000 di caratteri.|Il caricamento di file XML senza espansione o con espansione limitata dell'entità DTD non è interessato dall'operazione. I file con entità DTD che si espandono oltre 10.000.000 di caratteri non vengono caricati e generano un'eccezione.|  
|Modalità di compatibilità con le versioni successive per la classe <xref:System.Xml.Xsl.XslCompiledTransform?displayProperty=fullName>|In [!INCLUDE[net_v40_short](../../../includes/net-v40-short-md.md)] la compatibilità con le versioni successive di XSLT 1.0 presenta i seguenti problemi:<br /><br /> Il caricamento di un foglio di stile ha avuto esito negativo se la versione è stata impostata su 2.0 e il parser ha incontrato un costrutto XSLT 1.0 sconosciuto.<br /><br /> Il costrutto `xsl:sort` non è riuscito a ordinare i dati se la versione del foglio di stile era impostata su 1.1.<br /><br /> In [!INCLUDE[net_v45](../../../includes/net-v45-md.md)] questi problemi sono stati corretti e la modalità di compatibilità con le versioni successive di XSLT 1.0 funziona correttamente.|La modalità di compatibilità con le versioni successive di XSLT 1.0 funziona ora come in precedenza.|  
|Messaggi di eccezione quando un file XSLT è troppo complesso|In [!INCLUDE[net_v45](../../../includes/net-v45-md.md)] il testo del messaggio di errore quando un file XSLT è troppo complesso è "Foglio di stile troppo complesso". Nelle versioni precedenti il messaggio di errore era "Errore di compilazione XSLT".|Il codice di applicazione che dipende dal testo del messaggio di errore non funzionerà più. Tuttavia, i tipi di eccezione rimangono gli stessi e pertanto questa modifica non dovrebbe avere un impatto reale.|  
|Convalida XML Schema per xsd:anyURI|In [!INCLUDE[net_v45](../../../includes/net-v45-md.md)] la convalida XML Schema è più rigida. Se si usa xsd:anyURI per convalidare un URI, come un protocollo mailto, la convalida ha esito negativo se sono presenti spazi nell'URI. Nelle versioni precedenti di .NET Framework la convalida aveva esito positivo.|La modifica influisce solo sulle applicazioni destinate a [!INCLUDE[net_v45](../../../includes/net-v45-md.md)].|  
  
## <a name="see-also"></a>Vedere anche  
 [Elementi obsoleti nella libreria di classi](../../../docs/framework/whats-new/whats-obsolete.md)   
 [Novità](../../../docs/framework/whats-new/index.md)   
 [Compatibilità delle applicazioni](../../../docs/framework/migration-guide/application-compatibility.md)   
 [Compatibilità delle applicazioni nella versione 4.5.1](../../../docs/framework/migration-guide/application-compatibility-in-the-net-framework-4-5-1.md)   
 [Compatibilità delle applicazioni nella versione 4.5.2](../../../docs/framework/migration-guide/application-compatibility-in-the-net-framework-4-5-2.md)
