---
title: 'Procedura dettagliata: Creazione di un Form Master-Details mediante due controlli DataGridView di Windows Form'
ms.date: 03/30/2017
dev_langs:
- csharp
- vb
helpviewer_keywords:
- DataGridView control [Windows Forms], master/detail form
- parent-child tables [Windows Forms], displaying on Windows Forms
- master-details lists [Windows Forms], displaying on Windows Forms
- walkthroughs [Windows Forms], DataGridView control
ms.assetid: c5fa29e8-47f7-4691-829b-0e697a691f36
ms.openlocfilehash: 38f7c6197fb3ee79119e41ab9620bc3aa2b21900
ms.sourcegitcommit: 3d5d33f384eeba41b2dff79d096f47ccc8d8f03d
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 05/04/2018
ms.locfileid: "33529441"
---
# <a name="walkthrough-creating-a-masterdetail-form-using-two-windows-forms-datagridview-controls"></a><span data-ttu-id="d453c-102">Procedura dettagliata: creazione di un form Master-Details mediante due controlli DataGridView Windows Form</span><span class="sxs-lookup"><span data-stu-id="d453c-102">Walkthrough: Creating a Master/Detail Form Using Two Windows Forms DataGridView Controls</span></span>
<span data-ttu-id="d453c-103">Uno degli scenari più comuni per l'utilizzo di <xref:System.Windows.Forms.DataGridView> controllo è il *master-Details* form, in cui viene visualizzata una relazione padre-figlio tra due tabelle di database.</span><span class="sxs-lookup"><span data-stu-id="d453c-103">One of the most common scenarios for using the <xref:System.Windows.Forms.DataGridView> control is the *master/detail* form, in which a parent/child relationship between two database tables is displayed.</span></span> <span data-ttu-id="d453c-104">La selezione di righe nella tabella master, la tabella di dettagli per l'aggiornamento con i dati figlio corrispondente.</span><span class="sxs-lookup"><span data-stu-id="d453c-104">Selecting rows in the master table causes the detail table to update with the corresponding child data.</span></span>  
  
 <span data-ttu-id="d453c-105">Implementazione di un form master-Details è semplice con l'interazione tra il <xref:System.Windows.Forms.DataGridView> controllo e <xref:System.Windows.Forms.BindingSource> componente.</span><span class="sxs-lookup"><span data-stu-id="d453c-105">Implementing a master/detail form is easy using the interaction between the <xref:System.Windows.Forms.DataGridView> control and the <xref:System.Windows.Forms.BindingSource> component.</span></span> <span data-ttu-id="d453c-106">In questa procedura dettagliata, si compilerà il form utilizzando due <xref:System.Windows.Forms.DataGridView> e due controlli <xref:System.Windows.Forms.BindingSource> componenti.</span><span class="sxs-lookup"><span data-stu-id="d453c-106">In this walkthrough, you will build the form using two <xref:System.Windows.Forms.DataGridView> controls and two <xref:System.Windows.Forms.BindingSource> components.</span></span> <span data-ttu-id="d453c-107">Nel form verranno visualizzate due tabelle correlate nel database di esempio Northwind di SQL Server: `Customers` e `Orders`.</span><span class="sxs-lookup"><span data-stu-id="d453c-107">The form will show two related tables in the Northwind SQL Server sample database: `Customers` and `Orders`.</span></span> <span data-ttu-id="d453c-108">Al termine, si disporrà di un form che mostra tutti i clienti nel database master <xref:System.Windows.Forms.DataGridView> e tutti gli ordini per il cliente selezionato nei dettagli <xref:System.Windows.Forms.DataGridView>.</span><span class="sxs-lookup"><span data-stu-id="d453c-108">When you are finished, you will have a form that shows all the customers in the database in the master <xref:System.Windows.Forms.DataGridView> and all the orders for the selected customer in the detail <xref:System.Windows.Forms.DataGridView>.</span></span>  
  
 <span data-ttu-id="d453c-109">Per copiare il codice in questo argomento come elenco singolo, vedere [procedura: creare un Master-Details Form utilizzando due Windows Form controlli DataGridView](../../../../docs/framework/winforms/controls/create-a-master-detail-form-using-two-datagridviews.md).</span><span class="sxs-lookup"><span data-stu-id="d453c-109">To copy the code in this topic as a single listing, see [How to: Create a Master/Detail Form Using Two Windows Forms DataGridView Controls](../../../../docs/framework/winforms/controls/create-a-master-detail-form-using-two-datagridviews.md).</span></span>  
  
## <a name="prerequisites"></a><span data-ttu-id="d453c-110">Prerequisiti</span><span class="sxs-lookup"><span data-stu-id="d453c-110">Prerequisites</span></span>  
 <span data-ttu-id="d453c-111">Per completare questa procedura dettagliata, è necessario:</span><span class="sxs-lookup"><span data-stu-id="d453c-111">In order to complete this walkthrough, you will need:</span></span>  
  
-   <span data-ttu-id="d453c-112">Accesso a un server con il database di esempio Northwind di SQL Server.</span><span class="sxs-lookup"><span data-stu-id="d453c-112">Access to a server that has the Northwind SQL Server sample database.</span></span>  
  
## <a name="creating-the-form"></a><span data-ttu-id="d453c-113">Creazione del form</span><span class="sxs-lookup"><span data-stu-id="d453c-113">Creating the form</span></span>  
  
#### <a name="to-create-a-masterdetail-form"></a><span data-ttu-id="d453c-114">Per creare un form master-details</span><span class="sxs-lookup"><span data-stu-id="d453c-114">To create a master/detail form</span></span>  
  
1.  <span data-ttu-id="d453c-115">Creare una classe che deriva da <xref:System.Windows.Forms.Form> e contiene due <xref:System.Windows.Forms.DataGridView> e due controlli <xref:System.Windows.Forms.BindingSource> componenti.</span><span class="sxs-lookup"><span data-stu-id="d453c-115">Create a class that derives from <xref:System.Windows.Forms.Form> and contains two <xref:System.Windows.Forms.DataGridView> controls and two <xref:System.Windows.Forms.BindingSource> components.</span></span> <span data-ttu-id="d453c-116">Il codice seguente fornisce l'inizializzazione di form di base e include un `Main` metodo.</span><span class="sxs-lookup"><span data-stu-id="d453c-116">The following code provides basic form initialization and includes a `Main` method.</span></span> <span data-ttu-id="d453c-117">Se si utilizza la finestra di progettazione di Visual Studio per creare il form, è possibile utilizzare il finestra di progettazione codice generato anziché il codice, ma assicurarsi di utilizzare i nomi visualizzati nelle dichiarazioni di variabili qui.</span><span class="sxs-lookup"><span data-stu-id="d453c-117">If you use the Visual Studio designer to create your form, you can use the designer generated code instead of this code, but be sure to use the names shown in the variable declarations here.</span></span>  
  
     [!code-csharp[System.Windows.Forms.DataGridViewMasterDetails#01](../../../../samples/snippets/csharp/VS_Snippets_Winforms/System.Windows.Forms.DataGridViewMasterDetails/CS/masterdetails.cs#01)]
     [!code-vb[System.Windows.Forms.DataGridViewMasterDetails#01](../../../../samples/snippets/visualbasic/VS_Snippets_Winforms/System.Windows.Forms.DataGridViewMasterDetails/VB/masterdetails.vb#01)]  
    [!code-csharp[System.Windows.Forms.DataGridViewMasterDetails#02](../../../../samples/snippets/csharp/VS_Snippets_Winforms/System.Windows.Forms.DataGridViewMasterDetails/CS/masterdetails.cs#02)]
    [!code-vb[System.Windows.Forms.DataGridViewMasterDetails#02](../../../../samples/snippets/visualbasic/VS_Snippets_Winforms/System.Windows.Forms.DataGridViewMasterDetails/VB/masterdetails.vb#02)]  
  
2.  <span data-ttu-id="d453c-118">Implementare un metodo nella definizione di classe del form per la gestione dei dettagli della connessione al database.</span><span class="sxs-lookup"><span data-stu-id="d453c-118">Implement a method in your form's class definition for handling the detail of connecting to the database.</span></span> <span data-ttu-id="d453c-119">Questo esempio viene utilizzato un `GetData` metodo che consente di compilare un <xref:System.Data.DataSet> dell'oggetto, aggiunge un <xref:System.Data.DataRelation> oggetto per il set di dati e associa il <xref:System.Windows.Forms.BindingSource> componenti.</span><span class="sxs-lookup"><span data-stu-id="d453c-119">This example uses a `GetData` method that populates a <xref:System.Data.DataSet> object, adds a <xref:System.Data.DataRelation> object to the data set, and binds the <xref:System.Windows.Forms.BindingSource> components.</span></span> <span data-ttu-id="d453c-120">Assicurarsi di impostare la variabile `connectionString` su un valore appropriato per il database.</span><span class="sxs-lookup"><span data-stu-id="d453c-120">Be sure to set the `connectionString` variable to a value that is appropriate for your database.</span></span>  
  
    > [!IMPORTANT]
    >  <span data-ttu-id="d453c-121">L'archiviazione delle informazioni riservate, ad esempio la password, nella stringa di connessione può avere implicazioni sulla sicurezza dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="d453c-121">Storing sensitive information, such as a password, within the connection string can affect the security of your application.</span></span> <span data-ttu-id="d453c-122">L'autenticazione di Windows, detta anche sicurezza integrata, consente di controllare l'accesso a un database in modo più sicuro.</span><span class="sxs-lookup"><span data-stu-id="d453c-122">Using Windows Authentication (also known as integrated security) is a more secure way to control access to a database.</span></span> <span data-ttu-id="d453c-123">Per altre informazioni, vedere [Protezione delle informazioni di connessione](../../../../docs/framework/data/adonet/protecting-connection-information.md).</span><span class="sxs-lookup"><span data-stu-id="d453c-123">For more information, see [Protecting Connection Information](../../../../docs/framework/data/adonet/protecting-connection-information.md).</span></span>  
  
     [!code-csharp[System.Windows.Forms.DataGridViewMasterDetails#20](../../../../samples/snippets/csharp/VS_Snippets_Winforms/System.Windows.Forms.DataGridViewMasterDetails/CS/masterdetails.cs#20)]
     [!code-vb[System.Windows.Forms.DataGridViewMasterDetails#20](../../../../samples/snippets/visualbasic/VS_Snippets_Winforms/System.Windows.Forms.DataGridViewMasterDetails/VB/masterdetails.vb#20)]  
  
3.  <span data-ttu-id="d453c-124">Implementare un gestore per il modulo <xref:System.Windows.Forms.Form.Load> evento che associa il <xref:System.Windows.Forms.DataGridView> i controlli al <xref:System.Windows.Forms.BindingSource> componenti e le chiamate di `GetData` (metodo).</span><span class="sxs-lookup"><span data-stu-id="d453c-124">Implement a handler for your form's <xref:System.Windows.Forms.Form.Load> event that binds the <xref:System.Windows.Forms.DataGridView> controls to the <xref:System.Windows.Forms.BindingSource> components and calls the `GetData` method.</span></span> <span data-ttu-id="d453c-125">L'esempio seguente include il codice che ridimensiona <xref:System.Windows.Forms.DataGridView> le colonne per adattarla i dati visualizzati.</span><span class="sxs-lookup"><span data-stu-id="d453c-125">The following example includes code that resizes <xref:System.Windows.Forms.DataGridView> columns to fit the displayed data.</span></span>  
  
     [!code-csharp[System.Windows.Forms.DataGridViewMasterDetails#10](../../../../samples/snippets/csharp/VS_Snippets_Winforms/System.Windows.Forms.DataGridViewMasterDetails/CS/masterdetails.cs#10)]
     [!code-vb[System.Windows.Forms.DataGridViewMasterDetails#10](../../../../samples/snippets/visualbasic/VS_Snippets_Winforms/System.Windows.Forms.DataGridViewMasterDetails/VB/masterdetails.vb#10)]  
  
## <a name="testing-the-application"></a><span data-ttu-id="d453c-126">Verifica dell'applicazione</span><span class="sxs-lookup"><span data-stu-id="d453c-126">Testing the Application</span></span>  
 <span data-ttu-id="d453c-127">È ora possibile testare il form per assicurarsi che tutto funzioni come previsto.</span><span class="sxs-lookup"><span data-stu-id="d453c-127">You can now test the form to make sure it behaves as expected.</span></span>  
  
#### <a name="to-test-the-form"></a><span data-ttu-id="d453c-128">Per verificare il modulo</span><span class="sxs-lookup"><span data-stu-id="d453c-128">To test the form</span></span>  
  
-   <span data-ttu-id="d453c-129">Compilare l'applicazione ed eseguirla.</span><span class="sxs-lookup"><span data-stu-id="d453c-129">Compile and run the application.</span></span>  
  
     <span data-ttu-id="d453c-130">Verranno visualizzate due <xref:System.Windows.Forms.DataGridView> controlli, uno sopra l'altro.</span><span class="sxs-lookup"><span data-stu-id="d453c-130">You will see two <xref:System.Windows.Forms.DataGridView> controls, one above the other.</span></span> <span data-ttu-id="d453c-131">In primo piano sono i clienti di Northwind `Customers` tabella e nella parte inferiore sono il `Orders` corrispondente al cliente selezionato.</span><span class="sxs-lookup"><span data-stu-id="d453c-131">On top are the customers from the Northwind `Customers` table, and at the bottom are the `Orders` corresponding to the selected customer.</span></span> <span data-ttu-id="d453c-132">Quando si selezionano righe diverse in alto a <xref:System.Windows.Forms.DataGridView>, il contenuto dell'oggetto inferiore <xref:System.Windows.Forms.DataGridView> modificare di conseguenza.</span><span class="sxs-lookup"><span data-stu-id="d453c-132">As you select different rows in the upper <xref:System.Windows.Forms.DataGridView>, the contents of the lower <xref:System.Windows.Forms.DataGridView> change accordingly.</span></span>  
  
## <a name="next-steps"></a><span data-ttu-id="d453c-133">Passaggi successivi</span><span class="sxs-lookup"><span data-stu-id="d453c-133">Next Steps</span></span>  
 <span data-ttu-id="d453c-134">Questa applicazione fornisce una conoscenza di base di <xref:System.Windows.Forms.DataGridView> funzionalità del controllo.</span><span class="sxs-lookup"><span data-stu-id="d453c-134">This application gives you a basic understanding of the <xref:System.Windows.Forms.DataGridView> control's capabilities.</span></span> <span data-ttu-id="d453c-135">È possibile personalizzare l'aspetto e il comportamento del <xref:System.Windows.Forms.DataGridView> controllo in diversi modi:</span><span class="sxs-lookup"><span data-stu-id="d453c-135">You can customize the appearance and behavior of the <xref:System.Windows.Forms.DataGridView> control in several ways:</span></span>  
  
-   <span data-ttu-id="d453c-136">Modificare gli stili del bordo e intestazione.</span><span class="sxs-lookup"><span data-stu-id="d453c-136">Change border and header styles.</span></span> <span data-ttu-id="d453c-137">Per ulteriori informazioni, vedere [procedura: modificare il bordo e gli stili delle linee della griglia nel controllo DataGridView Windows Form](../../../../docs/framework/winforms/controls/change-the-border-and-gridline-styles-in-the-datagrid.md).</span><span class="sxs-lookup"><span data-stu-id="d453c-137">For more information, see [How to: Change the Border and Gridline Styles in the Windows Forms DataGridView Control](../../../../docs/framework/winforms/controls/change-the-border-and-gridline-styles-in-the-datagrid.md).</span></span>  
  
-   <span data-ttu-id="d453c-138">Abilitare o limitare l'input dell'utente per il <xref:System.Windows.Forms.DataGridView> controllo.</span><span class="sxs-lookup"><span data-stu-id="d453c-138">Enable or restrict user input to the <xref:System.Windows.Forms.DataGridView> control.</span></span> <span data-ttu-id="d453c-139">Per ulteriori informazioni, vedere [procedura: impedire l'aggiunta delle righe e eliminazione nel controllo DataGridView Windows Form](../../../../docs/framework/winforms/controls/prevent-row-addition-and-deletion-datagridview.md), e [come: rendere sola lettura di colonne nel controllo DataGridView Windows Form](../../../../docs/framework/winforms/controls/how-to-make-columns-read-only-in-the-windows-forms-datagridview-control.md).</span><span class="sxs-lookup"><span data-stu-id="d453c-139">For more information, see [How to: Prevent Row Addition and Deletion in the Windows Forms DataGridView Control](../../../../docs/framework/winforms/controls/prevent-row-addition-and-deletion-datagridview.md), and [How to: Make Columns Read-Only in the Windows Forms DataGridView Control](../../../../docs/framework/winforms/controls/how-to-make-columns-read-only-in-the-windows-forms-datagridview-control.md).</span></span>  
  
-   <span data-ttu-id="d453c-140">Convalidare l'input dell'utente per il <xref:System.Windows.Forms.DataGridView> controllo.</span><span class="sxs-lookup"><span data-stu-id="d453c-140">Validate user input to the <xref:System.Windows.Forms.DataGridView> control.</span></span> <span data-ttu-id="d453c-141">Per ulteriori informazioni, vedere [procedura dettagliata: convalida di dati nel controllo DataGridView Windows Form](../../../../docs/framework/winforms/controls/walkthrough-validating-data-in-the-windows-forms-datagridview-control.md).</span><span class="sxs-lookup"><span data-stu-id="d453c-141">For more information, see [Walkthrough: Validating Data in the Windows Forms DataGridView Control](../../../../docs/framework/winforms/controls/walkthrough-validating-data-in-the-windows-forms-datagridview-control.md).</span></span>  
  
-   <span data-ttu-id="d453c-142">Gestire grandi set di dati utilizzando la modalità virtuale.</span><span class="sxs-lookup"><span data-stu-id="d453c-142">Handle very large data sets using virtual mode.</span></span> <span data-ttu-id="d453c-143">Per ulteriori informazioni, vedere [procedura dettagliata: implementazione della modalità virtuale nel controllo DataGridView Windows Form](../../../../docs/framework/winforms/controls/implementing-virtual-mode-wf-datagridview-control.md).</span><span class="sxs-lookup"><span data-stu-id="d453c-143">For more information, see [Walkthrough: Implementing Virtual Mode in the Windows Forms DataGridView Control](../../../../docs/framework/winforms/controls/implementing-virtual-mode-wf-datagridview-control.md).</span></span>  
  
-   <span data-ttu-id="d453c-144">Personalizzare l'aspetto delle celle.</span><span class="sxs-lookup"><span data-stu-id="d453c-144">Customize the appearance of cells.</span></span> <span data-ttu-id="d453c-145">Per ulteriori informazioni, vedere [procedura: personalizzare l'aspetto di celle nel controllo DataGridView Windows Form](../../../../docs/framework/winforms/controls/customize-the-appearance-of-cells-in-the-datagrid.md) e [procedura: impostare stili di cella predefiniti per il controllo DataGridView Windows Form](../../../../docs/framework/winforms/controls/how-to-set-default-cell-styles-for-the-windows-forms-datagridview-control.md).</span><span class="sxs-lookup"><span data-stu-id="d453c-145">For more information, see [How to: Customize the Appearance of Cells in the Windows Forms DataGridView Control](../../../../docs/framework/winforms/controls/customize-the-appearance-of-cells-in-the-datagrid.md) and [How to: Set Default Cell Styles for the Windows Forms DataGridView Control](../../../../docs/framework/winforms/controls/how-to-set-default-cell-styles-for-the-windows-forms-datagridview-control.md).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="d453c-146">Vedere anche</span><span class="sxs-lookup"><span data-stu-id="d453c-146">See Also</span></span>  
 <xref:System.Windows.Forms.DataGridView>  
 <xref:System.Windows.Forms.BindingSource>  
 [<span data-ttu-id="d453c-147">Visualizzazione di dati nel controllo DataGridView di Windows Form</span><span class="sxs-lookup"><span data-stu-id="d453c-147">Displaying Data in the Windows Forms DataGridView Control</span></span>](../../../../docs/framework/winforms/controls/displaying-data-in-the-windows-forms-datagridview-control.md)  
 [<span data-ttu-id="d453c-148">Procedura: Creare un form Master-Details con due controlli DataGridView di Windows Form</span><span class="sxs-lookup"><span data-stu-id="d453c-148">How to: Create a Master/Detail Form Using Two Windows Forms DataGridView Controls</span></span>](../../../../docs/framework/winforms/controls/create-a-master-detail-form-using-two-datagridviews.md)  
 [<span data-ttu-id="d453c-149">Protezione delle informazioni di connessione</span><span class="sxs-lookup"><span data-stu-id="d453c-149">Protecting Connection Information</span></span>](../../../../docs/framework/data/adonet/protecting-connection-information.md)
