---
title: Modello di conferma automatica
ms.date: 03/30/2017
ms.assetid: 668aec65-78d3-4636-9c7b-deed643a18f9
ms.openlocfilehash: b30703ffba3b721ac544ea6471ec47ce7f746d2b
ms.sourcegitcommit: 3d5d33f384eeba41b2dff79d096f47ccc8d8f03d
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 05/04/2018
ms.locfileid: "33515993"
---
# <a name="auto-confirm-pattern"></a><span data-ttu-id="eec43-102">Modello di conferma automatica</span><span class="sxs-lookup"><span data-stu-id="eec43-102">Auto-Confirm Pattern</span></span>
<span data-ttu-id="eec43-103">Questa esempio è costituito da tre scenari in cui viene eseguita l'illustrazione di un'attività `AutoConfirmScope` personalizzata.</span><span class="sxs-lookup"><span data-stu-id="eec43-103">This sample consists of three scenarios that run illustrating a custom `AutoConfirmScope` activity.</span></span> <span data-ttu-id="eec43-104">Nel primo esempio viene illustrata l'esecuzione riuscita di una sequenza di quattro attività compensabili dove la seconda e la terza sono annidate in un oggetto `AutoConfirmScope`.</span><span class="sxs-lookup"><span data-stu-id="eec43-104">The first sample shows the successful execution of a sequence of four compensable activities where the second and third are nested in an `AutoConfirmScope`.</span></span> <span data-ttu-id="eec43-105">Nel secondo esempio viene illustrata la stessa sequenza con un'eccezione che si verifica dopo l'esecuzione della quarta attività <xref:System.Activities.Statements.CompensableActivity>.</span><span class="sxs-lookup"><span data-stu-id="eec43-105">The second sample shows the same sequence with an exception occurring after the execution of the fourth <xref:System.Activities.Statements.CompensableActivity>.</span></span> <span data-ttu-id="eec43-106">Nel terzo scenario viene illustrata la stessa sequenza con un'eccezione che si verifica in `AutoConfirmScope` dopo il completamento del secondo <xref:System.Activities.Statements.CompensableActivity>.</span><span class="sxs-lookup"><span data-stu-id="eec43-106">The third scenario shows the same sequence with an exception occurring in the `AutoConfirmScope` after the second <xref:System.Activities.Statements.CompensableActivity> completes.</span></span>  
  
 <span data-ttu-id="eec43-107">Nell'esempio viene illustrato il modello di conferma automatica dove tutte le attività figlio compensabili vengono confermate al completamento riuscito dell'ambito.</span><span class="sxs-lookup"><span data-stu-id="eec43-107">The sample demonstrates the auto-confirm pattern where all child compensable activities are confirmed upon successful completion of the scope.</span></span> <span data-ttu-id="eec43-108">Questo modello definisce la durata di tutte le attività figlio compensabili, in quanto non possono più essere compensate o confermate.</span><span class="sxs-lookup"><span data-stu-id="eec43-108">This pattern defines the lifetime of all child compensable activities, as they can no longer be compensated or confirmed.</span></span>  
  
 <span data-ttu-id="eec43-109">L'ambito è costituito da un <xref:System.Activities.Statements.TryCatch> dove <xref:System.Activities.Statements.TryCatch.Try%2A> è un oggetto <xref:System.Activities.Statements.CompensableActivity> interno.</span><span class="sxs-lookup"><span data-stu-id="eec43-109">The scope consists of a <xref:System.Activities.Statements.TryCatch> where the <xref:System.Activities.Statements.TryCatch.Try%2A> is an internal <xref:System.Activities.Statements.CompensableActivity>.</span></span> <span data-ttu-id="eec43-110">Il corpo specificato dall'utente di `AutoConfirmScope` è il corpo dell'oggetto <xref:System.Activities.Statements.CompensableActivity> interno.</span><span class="sxs-lookup"><span data-stu-id="eec43-110">The user-specified body of the `AutoConfirmScope` is the body of the inner <xref:System.Activities.Statements.CompensableActivity>.</span></span> <span data-ttu-id="eec43-111">Quando questo oggetto <xref:System.Activities.Statements.CompensableActivity> interno viene completato, produce <xref:System.Activities.Statements.CompensationToken> come argomento out.</span><span class="sxs-lookup"><span data-stu-id="eec43-111">When this internal <xref:System.Activities.Statements.CompensableActivity> completes, it produces a <xref:System.Activities.Statements.CompensationToken> as an out-argument.</span></span> <span data-ttu-id="eec43-112">`AutoConfirmScope` usa <xref:System.Activities.Statements.TryCatch.Finally%2A> per controllare se è stato prodotto il token e in tal caso conferma l'attività <xref:System.Activities.Statements.CompensableActivity> interna.</span><span class="sxs-lookup"><span data-stu-id="eec43-112">The `AutoConfirmScope` uses a <xref:System.Activities.Statements.TryCatch.Finally%2A> to check whether the token has been produced and if it has then it confirms the inner <xref:System.Activities.Statements.CompensableActivity>.</span></span> <span data-ttu-id="eec43-113">L'attività <xref:System.Activities.Statements.CompensableActivity> interna richiama la compensazione predefinita per qualsiasi attività compensabile eventualmente presente nel corpo.</span><span class="sxs-lookup"><span data-stu-id="eec43-113">The inner <xref:System.Activities.Statements.CompensableActivity> invokes the default compensation for any compensable activities that may exist in its body.</span></span>  
  
 <span data-ttu-id="eec43-114">Nel primo scenario viene illustrata l'esecuzione riuscita del flusso di lavoro e viene dimostrato che la seconda e terza attività compensabili sono già confermate quando il flusso di lavoro viene completato e la prima e la quarta vengono confermate.</span><span class="sxs-lookup"><span data-stu-id="eec43-114">The first scenario shows successful execution of the workflow and demonstrates that the second and third compensable activities are already confirmed when the workflow completes and the first and fourth are confirmed.</span></span> <span data-ttu-id="eec43-115">In questo modo viene prodotto un ordine di conferma tre, due, quattro e uno.</span><span class="sxs-lookup"><span data-stu-id="eec43-115">This produces a confirmation order of three, two, four, and one.</span></span>  
  
 <span data-ttu-id="eec43-116">Nel secondo scenario viene illustrata un'eccezione dopo il completamento delle quattro attività compensabili.</span><span class="sxs-lookup"><span data-stu-id="eec43-116">The second scenario shows an exception after the four compensable activities have completed.</span></span> <span data-ttu-id="eec43-117">Poiché le attività compensabili due e tre sono già confermate, non sono interessate, ma le attività uno e quattro vengono compensate.</span><span class="sxs-lookup"><span data-stu-id="eec43-117">Because compensable activities two and three are already confirmed they are unaffected but one and four are compensated.</span></span> <span data-ttu-id="eec43-118">In questo modo viene prodotto l'ordine conferma tre, conferma due, compensa quattro e compensa uno.</span><span class="sxs-lookup"><span data-stu-id="eec43-118">This produces confirm three, confirm two, compensate four and compensate one.</span></span>  
  
 <span data-ttu-id="eec43-119">Nello scenario finale viene illustrata l'esecuzione non riuscita di `AutoConfirmScope`.</span><span class="sxs-lookup"><span data-stu-id="eec43-119">The final scenario shows unsuccessful execution of the `AutoConfirmScope`.</span></span> <span data-ttu-id="eec43-120">In questo scenario si verifica un'eccezione dopo il completamento della seconda <xref:System.Activities.Statements.CompensableActivity>.</span><span class="sxs-lookup"><span data-stu-id="eec43-120">In this scenario, an exception occurs after the completion of the second <xref:System.Activities.Statements.CompensableActivity>.</span></span> <span data-ttu-id="eec43-121">Poiché le attività compensabili terza e quarta non sono state eseguite, non sono interessate.</span><span class="sxs-lookup"><span data-stu-id="eec43-121">Because the third and fourth compensable activities have not executed, they are unaffected.</span></span> <span data-ttu-id="eec43-122">Poiché l'ambito non è stato completato correttamente, la seconda <xref:System.Activities.Statements.CompensableActivity> non viene confermata.</span><span class="sxs-lookup"><span data-stu-id="eec43-122">Because the scope did not complete successfully, the second <xref:System.Activities.Statements.CompensableActivity> does not get confirmed.</span></span> <span data-ttu-id="eec43-123">In questo modo viene prodotto un ordine di compensazione di due quindi uno.</span><span class="sxs-lookup"><span data-stu-id="eec43-123">This produces and compensation order of two then one.</span></span>  
  
#### <a name="to-use-this-sample"></a><span data-ttu-id="eec43-124">Per usare questo esempio</span><span class="sxs-lookup"><span data-stu-id="eec43-124">To use this sample</span></span>  
  
1.  <span data-ttu-id="eec43-125">In [!INCLUDE[vs2010](../../../../includes/vs2010-md.md)] aprire il file della soluzione AutoConfirmSample.sln.</span><span class="sxs-lookup"><span data-stu-id="eec43-125">Using [!INCLUDE[vs2010](../../../../includes/vs2010-md.md)], open the AutoConfirmSample.sln solution file.</span></span>  
  
2.  <span data-ttu-id="eec43-126">Per compilare la soluzione, premere CTRL+MAIUSC+B.</span><span class="sxs-lookup"><span data-stu-id="eec43-126">To build the solution, press CTRL+SHIFT+B.</span></span>  
  
3.  <span data-ttu-id="eec43-127">Per eseguire la soluzione, premere CTRL+F5.</span><span class="sxs-lookup"><span data-stu-id="eec43-127">To run the solution, press CTRL+F5.</span></span>  
  
> [!IMPORTANT]
>  <span data-ttu-id="eec43-128">È possibile che gli esempi siano già installati nel computer.</span><span class="sxs-lookup"><span data-stu-id="eec43-128">The samples may already be installed on your machine.</span></span> <span data-ttu-id="eec43-129">Verificare la directory seguente (impostazione predefinita) prima di continuare.</span><span class="sxs-lookup"><span data-stu-id="eec43-129">Check for the following (default) directory before continuing.</span></span>  
>   
>  `<InstallDrive>:\WF_WCF_Samples`  
>   
>  <span data-ttu-id="eec43-130">Se questa directory non esiste, andare al [Windows Communication Foundation (WCF) e gli esempi di Windows Workflow Foundation (WF) per .NET Framework 4](http://go.microsoft.com/fwlink/?LinkId=150780) per scaricare tutti i Windows Communication Foundation (WCF) e [!INCLUDE[wf1](../../../../includes/wf1-md.md)] esempi.</span><span class="sxs-lookup"><span data-stu-id="eec43-130">If this directory does not exist, go to [Windows Communication Foundation (WCF) and Windows Workflow Foundation (WF) Samples for .NET Framework 4](http://go.microsoft.com/fwlink/?LinkId=150780) to download all Windows Communication Foundation (WCF) and [!INCLUDE[wf1](../../../../includes/wf1-md.md)] samples.</span></span> <span data-ttu-id="eec43-131">Questo esempio si trova nella directory seguente.</span><span class="sxs-lookup"><span data-stu-id="eec43-131">This sample is located in the following directory.</span></span>  
>   
>  `<InstallDrive>:\WF_WCF_Samples\WF\Scenario\Compensation\AutoConfirm`