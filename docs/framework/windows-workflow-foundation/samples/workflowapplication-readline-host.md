---
title: Host ReadLine di WorkflowApplication
ms.custom: 
ms.date: 03/30/2017
ms.prod: .net-framework
ms.reviewer: 
ms.suite: 
ms.tgt_pltfrm: 
ms.topic: article
ms.assetid: f7b362be-cb42-40d7-b9ef-cfc4aed2455b
caps.latest.revision: "14"
author: dotnet-bot
ms.author: dotnetcontent
manager: wpickett
ms.openlocfilehash: 1ba33dff4be8ae3e75ee4d1873feeb4d5e5944b7
ms.sourcegitcommit: ce279f2d7fe2220e6ea0a25a8a7a5370ddf8d9f0
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 12/02/2017
---
# <a name="workflowapplication-readline-host"></a><span data-ttu-id="fe575-102">Host ReadLine di WorkflowApplication</span><span class="sxs-lookup"><span data-stu-id="fe575-102">WorkflowApplication ReadLine Host</span></span>
<span data-ttu-id="fe575-103">Questo esempio è un host ReadLine generico.</span><span class="sxs-lookup"><span data-stu-id="fe575-103">This sample is a generic ReadLine host.</span></span> <span data-ttu-id="fe575-104">È possibile caricare ed eseguire qualsiasi flusso di lavoro usando l'attività `ReadLine` inclusa (o altre attività quali quelle che ottengono dati dai segnalibri ripresi con le stringhe).</span><span class="sxs-lookup"><span data-stu-id="fe575-104">You can load and run any workflow using the included `ReadLine` activity (or other activities like it that get data from bookmarks resumed with strings).</span></span> <span data-ttu-id="fe575-105">L'output dell'attività `WriteLine` o qualsiasi elemento che scrive nell'estensione della proprietà <xref:System.Activities.Statements.WriteLine.TextWriter%2A> è diretto alla finestra host.</span><span class="sxs-lookup"><span data-stu-id="fe575-105">Output from the `WriteLine` activity or anything writing to the <xref:System.Activities.Statements.WriteLine.TextWriter%2A> extension is directed to the host window.</span></span> <span data-ttu-id="fe575-106">Quando un'istanza è inattiva, i segnalibri disponibili per tale istanza vengono visualizzati in una casella combinata.</span><span class="sxs-lookup"><span data-stu-id="fe575-106">When an instance is idle, the available bookmarks for that instance appear in a combo box.</span></span> <span data-ttu-id="fe575-107">Selezionando un segnalibro, inserendo un testo e premendo il pulsante di ripresa del segnalibro viene continuata l'esecuzione del flusso di lavoro.</span><span class="sxs-lookup"><span data-stu-id="fe575-107">Selecting a bookmark, inputting some text, and pressing the resume bookmark button continue the execution of the workflow.</span></span> <span data-ttu-id="fe575-108">Inoltre, è possibile annullare, interrompere o terminare un flusso di lavoro selezionato.</span><span class="sxs-lookup"><span data-stu-id="fe575-108">You can also cancel, abort, or terminate a selected workflow.</span></span> <span data-ttu-id="fe575-109">La persistenza è attiva per impostazione predefinita; è possibile arrestare l'host e ripristinarlo in modo che l'elenco di istanze venga popolato con le istanze archiviate nel database.</span><span class="sxs-lookup"><span data-stu-id="fe575-109">Persistence is on by default – you can shut down the host and bring it back, and the instance list is populated with the instances stored in the database.</span></span> <span data-ttu-id="fe575-110">Il rilevamento viene usato per restituire gli eventi a livello dell'oggetto <xref:System.Activities.WorkflowApplication> all'host con la possibilità di aggiungere il rilevamento dettagliato a livello di attività.</span><span class="sxs-lookup"><span data-stu-id="fe575-110">Tracking is used to output <xref:System.Activities.WorkflowApplication>-level events to the host with the option to add detailed tracking at the activity level.</span></span>  
  
## <a name="sample-details"></a><span data-ttu-id="fe575-111">Dettagli dell'esempio</span><span class="sxs-lookup"><span data-stu-id="fe575-111">Sample Details</span></span>  
 <span data-ttu-id="fe575-112">In questo host sono disponibili due livelli: la visualizzazione e la gestione di istanze.</span><span class="sxs-lookup"><span data-stu-id="fe575-112">There are two layers to this host: the view and the instance manager.</span></span> <span data-ttu-id="fe575-113">La visualizzazione è costituita dalle classi `HostView` e `WorkflowApplicationInfo`.</span><span class="sxs-lookup"><span data-stu-id="fe575-113">The view consists of the `HostView` and `WorkflowApplicationInfo` classes.</span></span> <span data-ttu-id="fe575-114">Il modello generale di questo host prevede che nella classe `HostView` siano visualizzate le opzioni disponibili all'utente in base agli oggetti `WorkflowApplicationInfo` mantenuti ragionevolmente in sincronizzazione con le istanze che rappresentano.</span><span class="sxs-lookup"><span data-stu-id="fe575-114">The general pattern for this host is for the `HostView` class to display available options to the user based on `WorkflowApplicationInfo` objects that are kept reasonably in synchronization with the instances they represent.</span></span> <span data-ttu-id="fe575-115">Il livello della gestione di istanze è costituito dalla classe `WorkflowApplicationManager` che rappresenta il nucleo centrale di tutte le comunicazioni dell'host e dalla classe `WorkflowDefinitionExtension` che rende persistente la relazione tra un'istanza e la definizione del programma con cui è stata avviata, nonché alcune altre classi.</span><span class="sxs-lookup"><span data-stu-id="fe575-115">The instance manager layer consists of the `WorkflowApplicationManager` class, which is the core of all host communications, and the `WorkflowDefinitionExtension` class, which persists the relationship between an instance and the program definition it was started with and a few other classes.</span></span> <span data-ttu-id="fe575-116">Le chiamate `HostView` controllano le operazioni nell'oggetto `WorkflowApplicationManager`.</span><span class="sxs-lookup"><span data-stu-id="fe575-116">The `HostView` calls control operations on the `WorkflowApplicationManager`.</span></span> <span data-ttu-id="fe575-117">Queste chiamate sono generalmente asincrone per gestire un'interfaccia utente in grado di rispondere.</span><span class="sxs-lookup"><span data-stu-id="fe575-117">These calls are typically asynchronous to maintain a responsive user interface.</span></span> <span data-ttu-id="fe575-118">Al termine delle chiamate asincrone, l'oggetto `WorkflowApplicationManager` effettua di nuovo delle chiamate nel livello di visualizzazione tramite un'interfaccia ben definita (`IHostView`).</span><span class="sxs-lookup"><span data-stu-id="fe575-118">When the asynchronous calls complete, the `WorkflowApplicationManager` makes calls back into the view layer through a well-defined interface (`IHostView`).</span></span> <span data-ttu-id="fe575-119">Solitamente, la classe `HostView` invia queste chiamate dalla classe `WorkflowApplicationManager` al thread dell'interfaccia utente.</span><span class="sxs-lookup"><span data-stu-id="fe575-119">The `HostView` class most often dispatches these calls from the `WorkflowApplicationManager` class to the user interface thread.</span></span> <span data-ttu-id="fe575-120">La scrittura di testo viene effettuata negli oggetti <xref:System.Activities.Statements.WriteLine.TextWriter%2A> thread-safe forniti dalla classe `HostView`.</span><span class="sxs-lookup"><span data-stu-id="fe575-120">Text writing is done to thread-safe <xref:System.Activities.Statements.WriteLine.TextWriter%2A> objects provided by the `HostView` class.</span></span> <span data-ttu-id="fe575-121">L'interfaccia utente non è l'unico elemento che genera eventi.</span><span class="sxs-lookup"><span data-stu-id="fe575-121">The user interface is not the only thing generating events.</span></span> <span data-ttu-id="fe575-122">Anche gli oggetti <xref:System.Activities.WorkflowApplication> segnalano l'oggetto `WorkflowApplicationManager` quando, ad esempio, diventano `Idle`, `Complete` o quando sono `Aborted`.</span><span class="sxs-lookup"><span data-stu-id="fe575-122">The <xref:System.Activities.WorkflowApplication> objects also signal the `WorkflowApplicationManager` when they go `Idle`, `Complete`, or are `Aborted`, for example.</span></span> <span data-ttu-id="fe575-123">La classe `WorkflowApplicationManager` esce dal thread eventi inviando operazioni di pulizia o aggiornamento all'host.</span><span class="sxs-lookup"><span data-stu-id="fe575-123">The `WorkflowApplicationManager` class gets off the event thread by dispatching clean up or updating work to the host.</span></span>  
  
 <span data-ttu-id="fe575-124">La registrazione del file usato per avviare un oggetto <xref:System.Activities.WorkflowApplication> è resa più semplice dalla classe `WorkflowDefinitionExtension`</span><span class="sxs-lookup"><span data-stu-id="fe575-124">The recording of the file used to launch a <xref:System.Activities.WorkflowApplication> is facilitated by the `WorkflowDefinitionExtension` class.</span></span> <span data-ttu-id="fe575-125">che implementa l'interfaccia <xref:System.Activities.Persistence.PersistenceIOParticipant> per partecipare alla persistenza e rendere persistente il percorso nella definizione di flusso di lavoro.</span><span class="sxs-lookup"><span data-stu-id="fe575-125">It implements the <xref:System.Activities.Persistence.PersistenceIOParticipant> interface to participate in persistence and persist the path to the workflow definition.</span></span>  
  
 <span data-ttu-id="fe575-126">Il metodo `WorkflowApplicationManager.Load` usa il percorso archiviato per creare un'istanza dei programmi del flusso di lavoro richiesti per il caricamento di oggetti <xref:System.Activities.WorkflowApplication> non terminati.</span><span class="sxs-lookup"><span data-stu-id="fe575-126">The `WorkflowApplicationManager.Load` method uses the stored path to instantiate the workflow programs required for loading unfinished <xref:System.Activities.WorkflowApplication> objects.</span></span>  
  
#### <a name="to-set-up-build-and-run-the-sample"></a><span data-ttu-id="fe575-127">Per impostare, compilare ed eseguire l'esempio</span><span class="sxs-lookup"><span data-stu-id="fe575-127">To set up, build, and run the sample</span></span>  
  
1.  <span data-ttu-id="fe575-128">Per questo esempio è necessario aver installato SQL Express.</span><span class="sxs-lookup"><span data-stu-id="fe575-128">This sample requires SQL Express to be installed.</span></span> <span data-ttu-id="fe575-129">SQL Express viene fornito con [!INCLUDE[vs2010](../../../../includes/vs2010-md.md)].</span><span class="sxs-lookup"><span data-stu-id="fe575-129">SQL Express comes with [!INCLUDE[vs2010](../../../../includes/vs2010-md.md)].</span></span>  
  
2.  <span data-ttu-id="fe575-130">Aprire il prompt dei comandi di Visual Studio 2010.</span><span class="sxs-lookup"><span data-stu-id="fe575-130">Open a Visual Studio 2010 command prompt.</span></span>  
  
3.  <span data-ttu-id="fe575-131">Passare alla directory di esempio (\WF\Basic\Execution\ControllingWorkflowApplications) ed eseguire CreateInstanceStore.cmd.</span><span class="sxs-lookup"><span data-stu-id="fe575-131">Navigate to the sample directory (\WF\Basic\Execution\ControllingWorkflowApplications) and run CreateInstanceStore.cmd.</span></span>  
  
4.  <span data-ttu-id="fe575-132">Lo script CreateInstanceStore.cmd tenta di creare il database nell'istanza predefinita di SQL Server 2008 Express.</span><span class="sxs-lookup"><span data-stu-id="fe575-132">The CreateInstanceStore.cmd script attempts to create the database on the default instance of SQL Server 2008 Express.</span></span> <span data-ttu-id="fe575-133">Se si desidera installare il database in un'istanza diversa, modificare lo script.</span><span class="sxs-lookup"><span data-stu-id="fe575-133">If you want to install the database on a different instance, modify the script to do so.</span></span>  
  
5.  <span data-ttu-id="fe575-134">Compilare il progetto WorkflowApplicationReadLineHost ed eseguirlo dalla riga di comando.</span><span class="sxs-lookup"><span data-stu-id="fe575-134">Compile the WorkflowApplicationReadLineHost project and run it from the command line.</span></span>  
  
6.  <span data-ttu-id="fe575-135">Una volta in esecuzione, è possibile disattivare o attivare la persistenza.</span><span class="sxs-lookup"><span data-stu-id="fe575-135">Once running, you can optionally turn persistence off or on.</span></span> <span data-ttu-id="fe575-136">Inoltre, è possibile attivare o disattivare il rilevamento dettagliato di attività.</span><span class="sxs-lookup"><span data-stu-id="fe575-136">Further, you can optionally turn detailed activity tracking on or off.</span></span>  
  
7.  <span data-ttu-id="fe575-137">Fare clic sul pulsante con puntini di sospensione accanto al **eseguire** per cercare un flusso di lavoro definito in un file XAML</span><span class="sxs-lookup"><span data-stu-id="fe575-137">Press the ellipsis button next to the **Run** button to browse for a workflow defined in a XAML file</span></span>  
  
     <span data-ttu-id="fe575-138">Nella cartella SampleWorkflows sono disponibili due esempi.</span><span class="sxs-lookup"><span data-stu-id="fe575-138">Two samples can be found under the SampleWorkflows folder.</span></span> <span data-ttu-id="fe575-139">L'esempio parallel1.xaml diventa inattivo.</span><span class="sxs-lookup"><span data-stu-id="fe575-139">The parallel1.xaml example goes idle.</span></span>  
  
8.  <span data-ttu-id="fe575-140">Dopo aver selezionato un esempio, premere il **eseguire** pulsante.</span><span class="sxs-lookup"><span data-stu-id="fe575-140">Once an example is selected, press the **Run** button.</span></span>  
  
9. <span data-ttu-id="fe575-141">Se o quando il flusso di lavoro diventa inattivo, il **segnalibri** casella combinata viene popolata con i segnalibri disponibili.</span><span class="sxs-lookup"><span data-stu-id="fe575-141">If or when the workflow goes idle, the **Bookmarks** combo box is populated with available bookmarks.</span></span>  
  
10. <span data-ttu-id="fe575-142">Le opzioni di questa fase servono per riprendere un segnalibro oppure per annullare, interrompere o terminare il flusso di lavoro.</span><span class="sxs-lookup"><span data-stu-id="fe575-142">The options at this point are to resume a bookmark, cancel, abort, or terminate the workflow.</span></span> <span data-ttu-id="fe575-143">Inoltre, è possibile arrestare l'host e riavviarlo.</span><span class="sxs-lookup"><span data-stu-id="fe575-143">You can also shut down the host and restart it.</span></span> <span data-ttu-id="fe575-144">Se la persistenza viene mantenuta attiva, le istanze vengono scaricate all'arresto e ricaricate al riavvio.</span><span class="sxs-lookup"><span data-stu-id="fe575-144">If persistence is left on, the instances are unloaded on shutdown and reloaded on start up.</span></span>  
  
     <span data-ttu-id="fe575-145">Per riprendere un segnalibro, selezionare quello desiderato, digitare un valore nella casella di testo accanto alla casella combinata e premere **Riprendi segnalibro**.</span><span class="sxs-lookup"><span data-stu-id="fe575-145">To resume a bookmark, select the desired bookmark, type in a value in the text box next to the combo box and press **Resume Bookmark**.</span></span>  
  
#### <a name="to-remove-the-instance-store-database"></a><span data-ttu-id="fe575-146">Per rimuovere il database dell'archivio di istanze</span><span class="sxs-lookup"><span data-stu-id="fe575-146">To remove the instance store database</span></span>  
  
1.  <span data-ttu-id="fe575-147">Aprire il prompt dei comandi di Visual Studio 2010.</span><span class="sxs-lookup"><span data-stu-id="fe575-147">Open a Visual Studio 2010 command prompt.</span></span>  
  
2.  <span data-ttu-id="fe575-148">Passare alla directory di esempio (\WF\Basic\Execution\ControllingWorkflowApplications) ed eseguire RemoveInstanceStore.cmd.</span><span class="sxs-lookup"><span data-stu-id="fe575-148">Navigate to the sample directory (\WF\Basic\Execution\ControllingWorkflowApplications) and run RemoveInstanceStore.cmd.</span></span>  
  
> [!IMPORTANT]
>  <span data-ttu-id="fe575-149">È possibile che gli esempi siano già installati nel computer.</span><span class="sxs-lookup"><span data-stu-id="fe575-149">The samples may already be installed on your machine.</span></span> <span data-ttu-id="fe575-150">Verificare la directory seguente (impostazione predefinita) prima di continuare.</span><span class="sxs-lookup"><span data-stu-id="fe575-150">Check for the following (default) directory before continuing.</span></span>  
>   
>  `<InstallDrive>:\WF_WCF_Samples`  
>   
>  <span data-ttu-id="fe575-151">Se questa directory non esiste, andare alla sezione relativa agli [esempi di Windows Communication Foundation (WCF) e Windows Workflow Foundation (WF) per .NET Framework 4](http://go.microsoft.com/fwlink/?LinkId=150780) per scaricare tutti gli esempi di [!INCLUDE[indigo1](../../../../includes/indigo1-md.md)] e [!INCLUDE[wf1](../../../../includes/wf1-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="fe575-151">If this directory does not exist, go to [Windows Communication Foundation (WCF) and Windows Workflow Foundation (WF) Samples for .NET Framework 4](http://go.microsoft.com/fwlink/?LinkId=150780) to download all [!INCLUDE[indigo1](../../../../includes/indigo1-md.md)] and [!INCLUDE[wf1](../../../../includes/wf1-md.md)] samples.</span></span> <span data-ttu-id="fe575-152">Questo esempio si trova nella directory seguente.</span><span class="sxs-lookup"><span data-stu-id="fe575-152">This sample is located in the following directory.</span></span>  
>   
>  `<InstallDrive>:\WF_WCF_Samples\WF\Basic\Execution\ControllingWorkflowApplications`