---
title: Conferma
ms.date: 03/30/2017
ms.assetid: 8637aeaf-ac9e-49b8-93f4-da15dee45277
ms.openlocfilehash: caa712aa52da01ce44335a361fd6c9f5215316bf
ms.sourcegitcommit: ba5c189bf44d44204a3e8838e59ec378a62d82f3
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 09/13/2018
ms.locfileid: "44757238"
---
# <a name="confirmation"></a><span data-ttu-id="f43e4-102">Conferma</span><span class="sxs-lookup"><span data-stu-id="f43e4-102">Confirmation</span></span>
<span data-ttu-id="f43e4-103">In questo esempio vengono illustrati quattro scenari comuni riguardanti l'uso di <xref:System.Activities.Statements.CompensableActivity> e la conferma.</span><span class="sxs-lookup"><span data-stu-id="f43e4-103">This sample shows four common scenarios surrounding the use of <xref:System.Activities.Statements.CompensableActivity> and confirmation.</span></span> <span data-ttu-id="f43e4-104">L'esempio esegue quattro flussi di lavoro per illustrare la conferma.</span><span class="sxs-lookup"><span data-stu-id="f43e4-104">The sample runs four workflows to show confirmation.</span></span> <span data-ttu-id="f43e4-105">Questo esempio è disponibile nelle versioni dichiarativa e imperativa.</span><span class="sxs-lookup"><span data-stu-id="f43e4-105">This sample is available in declarative and imperative versions.</span></span>  
  
## <a name="confirm-a-compensable-activity"></a><span data-ttu-id="f43e4-106">Confermare una CompensableActivity</span><span class="sxs-lookup"><span data-stu-id="f43e4-106">Confirm a Compensable Activity</span></span>  
 <span data-ttu-id="f43e4-107">Il primo flusso di lavoro illustra come confermare un'attività CompensableActivity ed è costituito da una sequenza di due istanze di <xref:System.Activities.Statements.CompensableActivity>.</span><span class="sxs-lookup"><span data-stu-id="f43e4-107">The first workflow demonstrates how to confirm a compensable activity and consists of a sequence of two <xref:System.Activities.Statements.CompensableActivity> instances.</span></span> <span data-ttu-id="f43e4-108">Dopo il completamento della seconda <xref:System.Activities.Statements.CompensableActivity>, un'attività Confirm conferma la prima attività.</span><span class="sxs-lookup"><span data-stu-id="f43e4-108">After the completion of the second <xref:System.Activities.Statements.CompensableActivity> a confirm activity confirms the first activity.</span></span> <span data-ttu-id="f43e4-109">Quando il flusso di lavoro viene completato correttamente, tutte le istanze di <xref:System.Activities.Statements.CompensableActivity> che non sono state confermate o compensate vengono confermate automaticamente usando l'ordine predefinito.</span><span class="sxs-lookup"><span data-stu-id="f43e4-109">When the workflow successfully completes, all <xref:System.Activities.Statements.CompensableActivity> instances that have not been confirmed or compensated are automatically confirmed using the default order.</span></span> <span data-ttu-id="f43e4-110">Senza la conferma, la seconda <xref:System.Activities.Statements.CompensableActivity> sarebbe stata confermata per prima.</span><span class="sxs-lookup"><span data-stu-id="f43e4-110">Without the confirm, the second <xref:System.Activities.Statements.CompensableActivity> would have been confirmed first.</span></span>  
  
## <a name="explicit-compensation"></a><span data-ttu-id="f43e4-111">Compensazione esplicita</span><span class="sxs-lookup"><span data-stu-id="f43e4-111">Explicit Compensation</span></span>  
 <span data-ttu-id="f43e4-112">Il secondo scenario illustra l'effetto sulla conferma predefinita quando una <xref:System.Activities.Statements.CompensableActivity> viene compensata in modo esplicito.</span><span class="sxs-lookup"><span data-stu-id="f43e4-112">The second scenario shows the affect on default confirmation when a <xref:System.Activities.Statements.CompensableActivity> is explicitly compensated.</span></span> <span data-ttu-id="f43e4-113">Il flusso di lavoro è costituito da una sequenza di due attività <xref:System.Activities.Statements.CompensableActivity>. Dopo il completamento della seconda, la prima viene compensata in modo esplicito.</span><span class="sxs-lookup"><span data-stu-id="f43e4-113">The workflow consists of a sequence of two <xref:System.Activities.Statements.CompensableActivity> activities, after the second completes the first is explicitly compensated.</span></span> <span data-ttu-id="f43e4-114">Di conseguenza, quando il flusso di lavoro viene completato, solo la seconda <xref:System.Activities.Statements.CompensableActivity> viene confermata.</span><span class="sxs-lookup"><span data-stu-id="f43e4-114">As a result when the workflow, completes only the second <xref:System.Activities.Statements.CompensableActivity> is confirmed.</span></span>  
  
## <a name="controlling-the-order-of-confirmation-for-nested-compensableactivity-activities"></a><span data-ttu-id="f43e4-115">Controllo dell'ordine di conferma per le attività CompensableActivity annidate</span><span class="sxs-lookup"><span data-stu-id="f43e4-115">Controlling the Order of Confirmation for Nested CompensableActivity Activities</span></span>  
 <span data-ttu-id="f43e4-116">Il terzo scenario illustra come controllare l'ordine di conferma per <xref:System.Activities.Statements.CompensableActivity> annidate.</span><span class="sxs-lookup"><span data-stu-id="f43e4-116">The third scenario shows how to control the order of confirmation for nested <xref:System.Activities.Statements.CompensableActivity>.</span></span> <span data-ttu-id="f43e4-117">Lo scenario è costituito da una <xref:System.Activities.Statements.CompensableActivity> come radice del flusso di lavoro.</span><span class="sxs-lookup"><span data-stu-id="f43e4-117">The scenario consists of a <xref:System.Activities.Statements.CompensableActivity> as the root of the workflow.</span></span> <span data-ttu-id="f43e4-118">Il corpo della <xref:System.Activities.Statements.CompensableActivity> radice è una sequenza di tre <xref:System.Activities.Statements.CompensableActivity>.</span><span class="sxs-lookup"><span data-stu-id="f43e4-118">The body of the root <xref:System.Activities.Statements.CompensableActivity> is a sequence of three <xref:System.Activities.Statements.CompensableActivity>.</span></span> <span data-ttu-id="f43e4-119"><xref:System.Activities.Statements.CompensableActivity.ConfirmationHandler%2A> per la <xref:System.Activities.Statements.CompensableActivity> radice è una sequenza che specifica di confermare la prima, quindi la seconda <xref:System.Activities.Statements.CompensableActivity> annidata.</span><span class="sxs-lookup"><span data-stu-id="f43e4-119">The <xref:System.Activities.Statements.CompensableActivity.ConfirmationHandler%2A> for the root <xref:System.Activities.Statements.CompensableActivity> is a sequence that specifies to confirm the first then the second nested <xref:System.Activities.Statements.CompensableActivity>.</span></span> <span data-ttu-id="f43e4-120">Quando il flusso di lavoro viene completato, conferma la <xref:System.Activities.Statements.CompensableActivity> radice che quindi conferma la prima, la seconda e la terza <xref:System.Activities.Statements.CompensableActivity> annidate, in tale ordine.</span><span class="sxs-lookup"><span data-stu-id="f43e4-120">When the workflow completes it confirms the root <xref:System.Activities.Statements.CompensableActivity>, which then confirms the first, second and third nested <xref:System.Activities.Statements.CompensableActivity>, in that order.</span></span> <span data-ttu-id="f43e4-121">Di conseguenza, l'ordine di conferma predefinito viene essenzialmente invertito.</span><span class="sxs-lookup"><span data-stu-id="f43e4-121">As a result, the default confirmation order is essentially reversed.</span></span> <span data-ttu-id="f43e4-122">Poiché la terza <xref:System.Activities.Statements.CompensableActivity> non è stata confermata in modo esplicito come parte della <xref:System.Activities.Statements.CompensableActivity> radice da parte di <xref:System.Activities.Statements.CompensableActivity.ConfirmationHandler%2A>, viene confermata secondo l'ordine predefinito.</span><span class="sxs-lookup"><span data-stu-id="f43e4-122">Because the third <xref:System.Activities.Statements.CompensableActivity> was not explicitly confirmed as part of the root <xref:System.Activities.Statements.CompensableActivity> by the <xref:System.Activities.Statements.CompensableActivity.ConfirmationHandler%2A>, it is confirmed according to the default order.</span></span> <span data-ttu-id="f43e4-123">Poiché, tuttavia, è la sola <xref:System.Activities.Statements.CompensableActivity> non confermata, ciò significa solo che viene confermata.</span><span class="sxs-lookup"><span data-stu-id="f43e4-123">However, because it is the only unconfirmed <xref:System.Activities.Statements.CompensableActivity> this just means it is confirmed.</span></span>  
  
## <a name="scoping-of-variables"></a><span data-ttu-id="f43e4-124">Ambito di variabili</span><span class="sxs-lookup"><span data-stu-id="f43e4-124">Scoping of Variables</span></span>  
 <span data-ttu-id="f43e4-125">Il quarto scenario illustra come la durata di variabili definite per una <xref:System.Activities.Statements.CompensableActivity> o una delle relative attività padri sia ancora nell'ambito quando vengono eseguiti i gestori compensazione, <xref:System.Activities.Statements.CompensableActivity.CompensationHandler%2A>, <xref:System.Activities.Statements.CompensableActivity.ConfirmationHandler%2A> o <xref:System.Activities.Statements.CompensableActivity.CancellationHandler%2A>, anche se l'attività o il flusso di lavoro è stato completato.</span><span class="sxs-lookup"><span data-stu-id="f43e4-125">The fourth scenario shows how the lifetime of variables defined for a <xref:System.Activities.Statements.CompensableActivity> or one of their parents are still in scope when the <xref:System.Activities.Statements.CompensableActivity.CompensationHandler%2A>, <xref:System.Activities.Statements.CompensableActivity.ConfirmationHandler%2A> or <xref:System.Activities.Statements.CompensableActivity.CancellationHandler%2A> handlers are executed even if the activity has completed or the workflow has completed.</span></span> <span data-ttu-id="f43e4-126">Il flusso di lavoro è costituito da una sequenza di due <xref:System.Activities.Statements.CompensableActivity>.</span><span class="sxs-lookup"><span data-stu-id="f43e4-126">The workflow consists of a sequence of two <xref:System.Activities.Statements.CompensableActivity>.</span></span> <span data-ttu-id="f43e4-127">Nel corpo della prima, la variabile `mySum` viene impostata sulla somma di 5 e 10 e il risultato viene stampato.</span><span class="sxs-lookup"><span data-stu-id="f43e4-127">In the body of the first, the variable `mySum` is set to the sum of 5 and 10 and the result printed.</span></span> <span data-ttu-id="f43e4-128">Nel corpo della seconda <xref:System.Activities.Statements.CompensableActivity> la somma viene impostata sulla somma della somma esistente più 7 e il risultato viene stampato.</span><span class="sxs-lookup"><span data-stu-id="f43e4-128">In the body of the second <xref:System.Activities.Statements.CompensableActivity>, the sum is set to the sum of the existing sum and 7 and the result printed.</span></span> <span data-ttu-id="f43e4-129">Viene definito un gestore conferma personalizzato per la prima <xref:System.Activities.Statements.CompensableActivity>, che stampa la somma, sottrae 7 e stampa nuovamente la somma.</span><span class="sxs-lookup"><span data-stu-id="f43e4-129">A custom confirmation handler is defined for the first <xref:System.Activities.Statements.CompensableActivity>, which prints the sum, subtracts 7 and prints the sum again.</span></span> <span data-ttu-id="f43e4-130">Controllando le somme stampate risulta chiaro che la variabile è nell'ambito non solo per i corpi di entrambe le <xref:System.Activities.Statements.CompensableActivity>, ma anche per <xref:System.Activities.Statements.CompensableActivity.ConfirmationHandler%2A>.</span><span class="sxs-lookup"><span data-stu-id="f43e4-130">It is clear by inspecting the printed sums that the variable is in scope not only for the bodies of both <xref:System.Activities.Statements.CompensableActivity> but the <xref:System.Activities.Statements.CompensableActivity.ConfirmationHandler%2A> as well.</span></span>  
  
#### <a name="to-run-the-sample"></a><span data-ttu-id="f43e4-131">Per eseguire l'esempio</span><span class="sxs-lookup"><span data-stu-id="f43e4-131">To run the sample</span></span>  
  
1.  <span data-ttu-id="f43e4-132">Caricare la soluzione in [!INCLUDE[vs2010](../../../../includes/vs2010-md.md)].</span><span class="sxs-lookup"><span data-stu-id="f43e4-132">Load the solution in [!INCLUDE[vs2010](../../../../includes/vs2010-md.md)].</span></span>  
  
2.  <span data-ttu-id="f43e4-133">Eseguire l'applicazione ConfirmationSample.exe.</span><span class="sxs-lookup"><span data-stu-id="f43e4-133">Run the ConfirmationSample.exe application.</span></span>  
  
3.  <span data-ttu-id="f43e4-134">Osservare il seguente output:</span><span class="sxs-lookup"><span data-stu-id="f43e4-134">Observe the following output:</span></span>  
  
 <span data-ttu-id="f43e4-135">**Conferma esplicita: inizio della workflowCompensableActivity1: BodyCompensableActivity2: BodyCompensableActivity1: HandlerEnd conferma di workflowCompensableActivity2: conferma HandlerExplicit compensazione: avvio di workflowCompensableActivity1: BodyCompensableActivity2: BodyCompensableActivity1: HandlerEnd compensazione di workflowCompensableActivity2: conferma HandlerCustom conferma gestore: avvio di workflowCompensableActivity1: BodyCompensableActivity2: BodyCompensableActivity3: BodyEnd di workflowCompensableActivity1: conferma HandlerCompensableActivity2: conferma HandlerCompensableActivity3: HandlerVariable conferma l'accesso in un gestore della conferma: Inizio della workflowCompensableActivity1: BodyCompensableActivity1: è la somma: 15CompensableActivity2: BodyCompensableActivity2: aggiunta di 7 per il sumCompensableActivity2: la somma è ora: 22End di workflowCompensableActivity2: conferma HandlerCompensableActivity1: Conferma HandlerCompensableActivity2: la somma è: 22CompensableActivity2: dopo la sottrazione di 12 la somma è ora: 10Press invio per uscire.**</span><span class="sxs-lookup"><span data-stu-id="f43e4-135">**Explicit confirmation:Start of workflowCompensableActivity1: BodyCompensableActivity2: BodyCompensableActivity1: Confirmation HandlerEnd of workflowCompensableActivity2: Confirmation HandlerExplicit compensation:Start of workflowCompensableActivity1: BodyCompensableActivity2: BodyCompensableActivity1: Compensation HandlerEnd of workflowCompensableActivity2: Confirmation HandlerCustom confirmation handler:Start of workflowCompensableActivity1: BodyCompensableActivity2: BodyCompensableActivity3: BodyEnd of workflowCompensableActivity1: Confirmation HandlerCompensableActivity2: Confirmation HandlerCompensableActivity3: Confirmation HandlerVariable access in a confirmation handler:Start of workflowCompensableActivity1: BodyCompensableActivity1: The sum is: 15CompensableActivity2: BodyCompensableActivity2: Adding 7 to the sumCompensableActivity2: The sum is now: 22End of workflowCompensableActivity2: Confirmation HandlerCompensableActivity1: Confirmation HandlerCompensableActivity2: The sum is: 22CompensableActivity2: After subtracting 12 the sum is now: 10Press ENTER to exit.**</span></span>  
  
> [!IMPORTANT]
>  <span data-ttu-id="f43e4-136">È possibile che gli esempi siano già installati nel computer.</span><span class="sxs-lookup"><span data-stu-id="f43e4-136">The samples may already be installed on your machine.</span></span> <span data-ttu-id="f43e4-137">Verificare la directory seguente (impostazione predefinita) prima di continuare.</span><span class="sxs-lookup"><span data-stu-id="f43e4-137">Check for the following (default) directory before continuing.</span></span>  
>   
>  `<InstallDrive>:\WF_WCF_Samples`  
>   
>  <span data-ttu-id="f43e4-138">Se questa directory non esiste, andare al [Windows Communication Foundation (WCF) e gli esempi di Windows Workflow Foundation (WF) per .NET Framework 4](https://go.microsoft.com/fwlink/?LinkId=150780) per scaricare tutti i Windows Communication Foundation (WCF) e [!INCLUDE[wf1](../../../../includes/wf1-md.md)] esempi.</span><span class="sxs-lookup"><span data-stu-id="f43e4-138">If this directory does not exist, go to [Windows Communication Foundation (WCF) and Windows Workflow Foundation (WF) Samples for .NET Framework 4](https://go.microsoft.com/fwlink/?LinkId=150780) to download all Windows Communication Foundation (WCF) and [!INCLUDE[wf1](../../../../includes/wf1-md.md)] samples.</span></span> <span data-ttu-id="f43e4-139">Questo esempio si trova nella directory seguente.</span><span class="sxs-lookup"><span data-stu-id="f43e4-139">This sample is located in the following directory.</span></span>  
>   
>  `<InstallDrive>:\WF_WCF_Samples\WF\Basic\Compensation\Confirmation`